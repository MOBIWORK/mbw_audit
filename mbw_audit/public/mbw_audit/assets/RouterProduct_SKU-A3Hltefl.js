import{R as He,r as N,i as Xa,c as wn,k as xf,C as vc,l as wf,m as bg,n as Pt,o as Og,p as Tg,q as kg,P as Rg,t as o0,v as Mg,w as s0,a as Ef,x as Ng,y as Ag,K as gs,e as Fc,_ as Ic,z as Ss,B as Cf,E as Fg,G as za,I as Pf,J as bf,L as cs,M as mc,N as Ig,O as Of,Q as Lg,U as l0,V as Dg,W as Gg,f as u0,X as ds,j as G,Y as Qo,A as jt,H as $g,Z as Xu,h as At,$ as xr,a0 as Ku,T as c0,a1 as qu,a2 as wr,a3 as Ut,a4 as jg,F as Jo,s as ye,d as zg}from"./main-_-iRJr4x.js";import{E as yc,I as Bg,D as _c,L as Ug,a as Hg,V as d0,r as Vg,u as Wg,p as Xg}from"./xlsx-BB2PF4lV.js";import"./progress-t9qdcYm3.js";const Lc=He.createContext({});Lc.Consumer;var Tf=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Kg=a=>{var{prefixCls:e,className:n,avatar:i,title:o,description:l}=a,c=Tf(a,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:h}=N.useContext(Xa),f=h("list",e),p=wn(`${f}-item-meta`,n),m=He.createElement("div",{className:`${f}-item-meta-content`},o&&He.createElement("h4",{className:`${f}-item-meta-title`},o),l&&He.createElement("div",{className:`${f}-item-meta-description`},l));return He.createElement("div",Object.assign({},c,{className:p}),i&&He.createElement("div",{className:`${f}-item-meta-avatar`},i),(o||l)&&m)},qg=(a,e)=>{var{prefixCls:n,children:i,actions:o,extra:l,className:c,colStyle:h}=a,f=Tf(a,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:p,itemLayout:m}=N.useContext(Lc),{getPrefixCls:C}=N.useContext(Xa),w=()=>{let k;return N.Children.forEach(i,v=>{typeof v=="string"&&(k=!0)}),k&&N.Children.count(i)>1},_=()=>m==="vertical"?!!l:!w(),y=C("list",n),E=o&&o.length>0&&He.createElement("ul",{className:`${y}-item-action`,key:"actions"},o.map((k,v)=>He.createElement("li",{key:`${y}-item-action-${v}`},k,v!==o.length-1&&He.createElement("em",{className:`${y}-item-action-split`})))),P=p?"div":"li",T=He.createElement(P,Object.assign({},f,p?{}:{ref:e},{className:wn(`${y}-item`,{[`${y}-item-no-flex`]:!_()},c)}),m==="vertical"&&l?[He.createElement("div",{className:`${y}-item-main`,key:"content"},i,E),He.createElement("div",{className:`${y}-item-extra`,key:"extra"},l)]:[i,E,xf(l,{key:"extra"})]);return p?He.createElement(vc,{ref:e,flex:1,style:h},T):T},kf=N.forwardRef(qg);kf.Meta=Kg;const Yg=kf,Qg=a=>{const{listBorderedCls:e,componentCls:n,paddingLG:i,margin:o,itemPaddingSM:l,itemPaddingLG:c,marginLG:h,borderRadiusLG:f}=a;return{[`${e}`]:{border:`${Pt(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderRadius:f,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${Pt(o)} ${Pt(h)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},Jg=a=>{const{componentCls:e,screenSM:n,screenMD:i,marginLG:o,marginSM:l,margin:c}=a;return{[`@media screen and (max-width:${i}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:l}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:a.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${Pt(c)}`}}}}}},Zg=a=>{const{componentCls:e,antCls:n,controlHeight:i,minHeight:o,paddingSM:l,marginLG:c,padding:h,itemPadding:f,colorPrimary:p,itemPaddingSM:m,itemPaddingLG:C,paddingXS:w,margin:_,colorText:y,colorTextDescription:E,motionDurationSlow:P,lineWidth:T,headerBg:k,footerBg:v,emptyTextPadding:x,metaMarginBottom:b,avatarMarginRight:R,titleMarginBottom:B,descriptionFontSize:O}=a,$={};return["start","center","end"].forEach(M=>{$[`&-align-${M}`]={textAlign:M}}),{[`${e}`]:Object.assign(Object.assign({},Og(a)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:k},[`${e}-footer`]:{background:v},[`${e}-header, ${e}-footer`]:{paddingBlock:l},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:c},$),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:f,color:y,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:R},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:y},[`${e}-item-meta-title`]:{margin:`0 0 ${Pt(a.marginXXS)} 0`,color:y,fontSize:a.fontSize,lineHeight:a.lineHeight,"> a":{color:y,transition:`all ${P}`,"&:hover":{color:p}}},[`${e}-item-meta-description`]:{color:E,fontSize:O,lineHeight:a.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:a.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Pt(w)}`,color:E,fontSize:a.fontSize,lineHeight:a.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:T,height:a.calc(a.fontHeight).sub(a.calc(a.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:a.colorSplit}}},[`${e}-empty`]:{padding:`${Pt(h)} 0`,color:E,fontSize:a.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:x,color:a.colorTextDisabled,fontSize:a.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:_,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:c},[`${e}-item-meta`]:{marginBlockEnd:b,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:B,color:y,fontSize:a.fontSizeLG,lineHeight:a.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:h,marginInlineStart:"auto","> li":{padding:`0 ${Pt(h)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${Pt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${Pt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${Pt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${Pt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:C},[`${e}-sm ${e}-item`]:{padding:m},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},e2=a=>({contentWidth:220,itemPadding:`${Pt(a.paddingContentVertical)} 0`,itemPaddingSM:`${Pt(a.paddingContentVerticalSM)} ${Pt(a.paddingContentHorizontal)}`,itemPaddingLG:`${Pt(a.paddingContentVerticalLG)} ${Pt(a.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:a.padding,metaMarginBottom:a.padding,avatarMarginRight:a.padding,titleMarginBottom:a.paddingSM,descriptionFontSize:a.fontSize}),t2=wf("List",a=>{const e=bg(a,{listBorderedCls:`${a.componentCls}-bordered`,minHeight:a.controlHeightLG});return[Zg(e),Qg(e),Jg(e)]},e2);var r2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function Sc(a){var e,{pagination:n=!1,prefixCls:i,bordered:o=!1,split:l=!0,className:c,rootClassName:h,style:f,children:p,itemLayout:m,loadMore:C,grid:w,dataSource:_=[],size:y,header:E,footer:P,loading:T=!1,rowKey:k,renderItem:v,locale:x}=a,b=r2(a,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const R=n&&typeof n=="object"?n:{},[B,O]=N.useState(R.defaultCurrent||1),[$,M]=N.useState(R.defaultPageSize||10),{getPrefixCls:D,renderEmpty:X,direction:W,list:Z}=N.useContext(Xa),K={current:1,total:0},oe=Be=>(Ge,gt)=>{var Qt;O(Ge),M(gt),n&&n[Be]&&((Qt=n?.[Be])===null||Qt===void 0||Qt.call(n,Ge,gt))},ce=oe("onChange"),pe=oe("onShowSizeChange"),Oe=(Be,Ge)=>{if(!v)return null;let gt;return typeof k=="function"?gt=k(Be):k?gt=Be[k]:gt=Be.key,gt||(gt=`list-item-${Ge}`),N.createElement(N.Fragment,{key:gt},v(Be,Ge))},se=()=>!!(C||n||P),Q=D("list",i),[de,Te,we]=t2(Q);let qe=T;typeof qe=="boolean"&&(qe={spinning:qe});const Ae=qe&&qe.spinning,F=Tg(y);let V="";switch(F){case"large":V="lg";break;case"small":V="sm";break}const ne=wn(Q,{[`${Q}-vertical`]:m==="vertical",[`${Q}-${V}`]:V,[`${Q}-split`]:l,[`${Q}-bordered`]:o,[`${Q}-loading`]:Ae,[`${Q}-grid`]:!!w,[`${Q}-something-after-last-item`]:se(),[`${Q}-rtl`]:W==="rtl"},Z?.className,c,h,Te,we),fe=kg(K,{total:_.length,current:B,pageSize:$},n||{}),ge=Math.ceil(fe.total/fe.pageSize);fe.current>ge&&(fe.current=ge);const De=n?N.createElement("div",{className:wn(`${Q}-pagination`,`${Q}-pagination-align-${(e=fe?.align)!==null&&e!==void 0?e:"end"}`)},N.createElement(Rg,Object.assign({},fe,{onChange:ce,onShowSizeChange:pe}))):null;let Re=o0(_);n&&_.length>(fe.current-1)*fe.pageSize&&(Re=o0(_).splice((fe.current-1)*fe.pageSize,fe.pageSize));const Ft=Object.keys(w||{}).some(Be=>["xs","sm","md","lg","xl","xxl"].includes(Be)),Fe=Mg(Ft),bt=N.useMemo(()=>{for(let Be=0;Be<s0.length;Be+=1){const Ge=s0[Be];if(Fe[Ge])return Ge}},[Fe]),Ye=N.useMemo(()=>{if(!w)return;const Be=bt&&w[bt]?w[bt]:w.column;if(Be)return{width:`${100/Be}%`,maxWidth:`${100/Be}%`}},[w?.column,bt]);let Ie=Ae&&N.createElement("div",{style:{minHeight:53}});if(Re.length>0){const Be=Re.map((Ge,gt)=>Oe(Ge,gt));Ie=w?N.createElement(Ef,{gutter:w.gutter},N.Children.map(Be,Ge=>N.createElement("div",{key:Ge?.key,style:Ye},Ge))):N.createElement("ul",{className:`${Q}-items`},Be)}else!p&&!Ae&&(Ie=N.createElement("div",{className:`${Q}-empty-text`},x&&x.emptyText||X?.("List")||N.createElement(Ng,{componentName:"List"})));const ut=fe.position||"bottom",ft=N.useMemo(()=>({grid:w,itemLayout:m}),[JSON.stringify(w),m]);return de(N.createElement(Lc.Provider,{value:ft},N.createElement("div",Object.assign({style:Object.assign(Object.assign({},Z?.style),f),className:ne},b),(ut==="top"||ut==="both")&&De,E&&N.createElement("div",{className:`${Q}-header`},E),N.createElement(Ag,Object.assign({},qe),Ie,p),P&&N.createElement("div",{className:`${Q}-footer`},P),C||(ut==="bottom"||ut==="both")&&De)))}Sc.Item=Yg;var n2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const i2={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},a2=N.forwardRef((a,e)=>{const n=p=>{const{keyCode:m}=p;m===gs.ENTER&&p.preventDefault()},i=p=>{const{keyCode:m}=p,{onClick:C}=a;m===gs.ENTER&&C&&C()},{style:o,noStyle:l,disabled:c}=a,h=n2(a,["style","noStyle","disabled"]);let f={};return l||(f=Object.assign({},i2)),c&&(f.pointerEvents="none"),f=Object.assign(Object.assign({},f),o),N.createElement("div",Object.assign({role:"button",tabIndex:0,ref:e},h,{onKeyDown:n,onKeyUp:i,style:f}))}),h0=a2;var o2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const s2=o2;var l2=function(e,n){return N.createElement(Fc,Ic({},e,{ref:n,icon:s2}))};const u2=N.forwardRef(l2);var c2=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<a.rangeCount;i++)n.push(a.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return a.removeAllRanges(),function(){a.type==="Caret"&&a.removeAllRanges(),a.rangeCount||n.forEach(function(o){a.addRange(o)}),e&&e.focus()}},d2=c2,f0={"text/plain":"Text","text/html":"Url",default:"Text"},h2="Copy to clipboard: #{key}, Enter";function f2(a){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,e)}function g2(a,e){var n,i,o,l,c,h,f=!1;e||(e={}),n=e.debug||!1;try{o=d2(),l=document.createRange(),c=document.getSelection(),h=document.createElement("span"),h.textContent=a,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(m){if(m.stopPropagation(),e.format)if(m.preventDefault(),typeof m.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=f0[e.format]||f0.default;window.clipboardData.setData(C,a)}else m.clipboardData.clearData(),m.clipboardData.setData(e.format,a);e.onCopy&&(m.preventDefault(),e.onCopy(m.clipboardData))}),document.body.appendChild(h),l.selectNodeContents(h),c.addRange(l);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");f=!0}catch(m){n&&console.error("unable to copy using execCommand: ",m),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",a),e.onCopy&&e.onCopy(window.clipboardData),f=!0}catch(C){n&&console.error("unable to copy using clipboardData: ",C),n&&console.error("falling back to prompt"),i=f2("message"in e?e.message:h2),window.prompt(i,a)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(l):c.removeAllRanges()),h&&document.body.removeChild(h),o()}return f}var p2=g2;const v2=Ss(p2);var m2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const y2=m2;var _2=function(e,n){return N.createElement(Fc,Ic({},e,{ref:n,icon:y2}))};const S2=N.forwardRef(_2),x2=(a,e,n,i)=>{const{titleMarginBottom:o,fontWeightStrong:l}=i;return{marginBottom:o,color:n,fontWeight:l,fontSize:a,lineHeight:e}},w2=a=>{const e=[1,2,3,4,5],n={};return e.forEach(i=>{n[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=x2(a[`fontSizeHeading${i}`],a[`lineHeightHeading${i}`],a.colorTextHeading,a)}),n},E2=a=>{const{componentCls:e}=a;return{"a&, a":Object.assign(Object.assign({},Cf(a)),{textDecoration:a.linkDecoration,"&:active, &:hover":{textDecoration:a.linkHoverDecoration},[`&[disabled], &${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:a.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},C2=a=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Fg[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:a.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),P2=a=>{const{componentCls:e,paddingSM:n}=a,i=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:a.calc(a.paddingSM).mul(-1).equal(),marginTop:a.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${Pt(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:a.calc(a.marginXS).add(2).equal(),insetBlockEnd:a.marginXS,color:a.colorTextDescription,fontWeight:"normal",fontSize:a.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},b2=a=>({[`${a.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:a.colorSuccess}},[`${a.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),O2=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),T2=a=>{const{componentCls:e,titleMarginTop:n}=a;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:a.colorText,wordBreak:"break-word",lineHeight:a.lineHeight,[`&${e}-secondary`]:{color:a.colorTextDescription},[`&${e}-success`]:{color:a.colorSuccess},[`&${e}-warning`]:{color:a.colorWarning},[`&${e}-danger`]:{color:a.colorError,"a&:active, a&:focus":{color:a.colorErrorActive},"a&:hover":{color:a.colorErrorHover}},[`&${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},w2(a)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),C2(a)),E2(a)),{[`
        ${e}-expand,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Cf(a)),{marginInlineStart:a.marginXXS})}),P2(a)),b2(a)),O2()),{"&-rtl":{direction:"rtl"}})}},k2=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Rf=wf("Typography",a=>[T2(a)],k2),R2=a=>{const{prefixCls:e,"aria-label":n,className:i,style:o,direction:l,maxLength:c,autoSize:h=!0,value:f,onSave:p,onCancel:m,onEnd:C,component:w,enterIcon:_=N.createElement(S2,null)}=a,y=N.useRef(null),E=N.useRef(!1),P=N.useRef(),[T,k]=N.useState(f);N.useEffect(()=>{k(f)},[f]),N.useEffect(()=>{if(y.current&&y.current.resizableTextArea){const{textArea:K}=y.current.resizableTextArea;K.focus();const{length:oe}=K.value;K.setSelectionRange(oe,oe)}},[]);const v=K=>{let{target:oe}=K;k(oe.value.replace(/[\n\r]/g,""))},x=()=>{E.current=!0},b=()=>{E.current=!1},R=K=>{let{keyCode:oe}=K;E.current||(P.current=oe)},B=()=>{p(T.trim())},O=K=>{let{keyCode:oe,ctrlKey:ce,altKey:pe,metaKey:Oe,shiftKey:se}=K;P.current===oe&&!E.current&&!ce&&!pe&&!Oe&&!se&&(oe===gs.ENTER?(B(),C?.()):oe===gs.ESC&&m())},$=()=>{B()},M=w?`${e}-${w}`:"",[D,X,W]=Rf(e),Z=wn(e,`${e}-edit-content`,{[`${e}-rtl`]:l==="rtl"},i,M,X,W);return D(N.createElement("div",{className:Z,style:o},N.createElement(za,{ref:y,maxLength:c,value:T,onChange:v,onKeyDown:R,onKeyUp:O,onCompositionStart:x,onCompositionEnd:b,onBlur:$,"aria-label":n,rows:1,autoSize:h}),_!==null?xf(_,{className:`${e}-edit-content-confirm`}):null))},M2=R2;function Yu(a,e){return N.useMemo(()=>{const n=!!a;return[n,Object.assign(Object.assign({},e),n&&typeof a=="object"?a:null)]},[a])}const N2=(a,e)=>{const n=N.useRef(!1);N.useEffect(()=>{n.current?a():n.current=!0},e)};var A2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const F2=N.forwardRef((a,e)=>{const{prefixCls:n,component:i="article",className:o,rootClassName:l,setContentRef:c,children:h,direction:f,style:p}=a,m=A2(a,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:C,direction:w,typography:_}=N.useContext(Xa),y=f??w;let E=e;c&&(E=Pf(e,c));const P=C("typography",n),[T,k,v]=Rf(P),x=wn(P,_?.className,{[`${P}-rtl`]:y==="rtl"},o,l,k,v),b=Object.assign(Object.assign({},_?.style),p);return T(N.createElement(i,Object.assign({className:x,style:b,ref:E},m),h))}),Mf=F2;function Nf(a){const e=typeof a;return e==="string"||e==="number"}function I2(a){let e=0;return a.forEach(n=>{Nf(n)?e+=String(n).length:e+=1}),e}function Qu(a,e){let n=0;const i=[];for(let o=0;o<a.length;o+=1){if(n===e)return i;const l=a[o],h=Nf(l)?String(l).length:1,f=n+h;if(f>e){const p=e-n;return i.push(String(l).slice(0,p)),i}i.push(l),n=f}return a}const L2=0,Zo=1,g0=2,Ju=3,Zu=4,D2=a=>{let{enabledMeasure:e,children:n,text:i,width:o,fontSize:l,rows:c,onEllipsis:h}=a;const[[f,p,m],C]=N.useState([0,0,0]),[w,_]=N.useState(0),[y,E]=N.useState(L2),[P,T]=N.useState(0),k=N.useRef(null),v=N.useRef(null),x=N.useMemo(()=>bf(i),[i]),b=N.useMemo(()=>I2(x),[x]),R=N.useMemo(()=>!e||y!==Ju?w&&y!==Zu&&e?n(Qu(x,w),w<b):n(x,!1):n(Qu(x,p),p<b),[e,y,n,x,p,b]);cs(()=>{e&&o&&l&&b&&(E(Zo),C([0,Math.ceil(b/2),b]))},[e,o,l,i,b,c]),cs(()=>{var M;y===Zo&&T(((M=k.current)===null||M===void 0?void 0:M.offsetHeight)||0)},[y]),cs(()=>{var M,D;if(P){if(y===Zo){const X=((M=v.current)===null||M===void 0?void 0:M.offsetHeight)||0,W=c*P;X<=W?(E(Zu),h(!1)):E(g0)}else if(y===g0)if(f!==m){const X=((D=v.current)===null||D===void 0?void 0:D.offsetHeight)||0,W=c*P;let Z=f,K=m;f===m-1?K=f:X<=W?Z=p:K=p;const oe=Math.ceil((Z+K)/2);C([Z,oe,K])}else E(Ju),_(p),h(!0)}},[y,f,m,c,P]);const B={width:o,whiteSpace:"normal",margin:0,padding:0},O=(M,D,X)=>N.createElement("span",{"aria-hidden":!0,ref:D,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(l/2)*2},X)},M),$=(M,D)=>{const X=Qu(x,M);return O(n(X,!0),D,B)};return N.createElement(N.Fragment,null,R,e&&y!==Ju&&y!==Zu&&N.createElement(N.Fragment,null,O("lg",k,{wordBreak:"keep-all",whiteSpace:"nowrap"}),y===Zo?O(n(x,!1),v,B):$(p,v)))},G2=D2,$2=a=>{let{enabledEllipsis:e,isEllipsis:n,children:i,tooltipProps:o}=a;return!o?.title||!e?i:N.createElement(mc,Object.assign({open:n?void 0:!1},o),i)},j2=$2;var z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function B2(a,e){let{mark:n,code:i,underline:o,delete:l,strong:c,keyboard:h,italic:f}=a,p=e;function m(C,w){w&&(p=N.createElement(C,{},p))}return m("strong",c),m("u",o),m("del",l),m("code",i),m("mark",n),m("kbd",h),m("i",f),p}function es(a,e,n){return a===!0||a===void 0?e:a||n&&e}function p0(a){return a===!1?[!1,!1]:Array.isArray(a)?a:[a]}const U2="...",H2=N.forwardRef((a,e)=>{var n,i,o;const{prefixCls:l,className:c,style:h,type:f,disabled:p,children:m,ellipsis:C,editable:w,copyable:_,component:y,title:E}=a,P=z2(a,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:T,direction:k}=N.useContext(Xa),[v]=Ig("Text"),x=N.useRef(null),b=N.useRef(null),R=T("typography",l),B=Of(P,["mark","code","delete","underline","strong","keyboard","italic"]),[O,$]=Yu(w),[M,D]=Lg(!1,{value:$.editing}),{triggerType:X=["icon"]}=$,W=re=>{var _e;re&&((_e=$.onStart)===null||_e===void 0||_e.call($)),D(re)};N2(()=>{var re;M||(re=b.current)===null||re===void 0||re.focus()},[M]);const Z=re=>{re?.preventDefault(),W(!0)},K=re=>{var _e;(_e=$.onChange)===null||_e===void 0||_e.call($,re),W(!1)},oe=()=>{var re;(re=$.onCancel)===null||re===void 0||re.call($),W(!1)},[ce,pe]=Yu(_),[Oe,se]=N.useState(!1),Q=N.useRef(null),de={};pe.format&&(de.format=pe.format);const Te=()=>{Q.current&&clearTimeout(Q.current)},we=re=>{var _e;re?.preventDefault(),re?.stopPropagation(),v2(pe.text||String(m)||"",de),se(!0),Te(),Q.current=setTimeout(()=>{se(!1)},3e3),(_e=pe.onCopy)===null||_e===void 0||_e.call(pe,re)};N.useEffect(()=>Te,[]);const[qe,Ae]=N.useState(!1),[F,V]=N.useState(!1),[ne,fe]=N.useState(!1),[ge,De]=N.useState(!1),[Re,Ft]=N.useState(!1),[Fe,bt]=N.useState(!0),[Ye,Ie]=Yu(C,{expandable:!1}),ut=Ye&&!ne,{rows:ft=1}=Ie,Be=N.useMemo(()=>!ut||Ie.suffix!==void 0||Ie.onEllipsis||Ie.expandable||O||ce,[ut,Ie,O,ce]);cs(()=>{Ye&&!Be&&(Ae(l0("webkitLineClamp")),V(l0("textOverflow")))},[Be,Ye]);const Ge=N.useMemo(()=>Be?!1:ft===1?F:qe,[Be,F,qe]),gt=ut&&(Ge?Re:ge),Qt=ut&&ft===1&&Ge,br=ut&&ft>1&&Ge,ia=re=>{var _e;fe(!0),(_e=Ie.onExpand)===null||_e===void 0||_e.call(Ie,re)},[Mn,aa]=N.useState(0),[ci,ir]=N.useState(0),an=(re,_e)=>{let{offsetWidth:Ue}=re;var Ot;aa(Ue),ir(parseInt((Ot=window.getComputedStyle)===null||Ot===void 0?void 0:Ot.call(window,_e).fontSize,10)||0)},oa=re=>{var _e;De(re),ge!==re&&((_e=Ie.onEllipsis)===null||_e===void 0||_e.call(Ie,re))};N.useEffect(()=>{const re=x.current;if(Ye&&Ge&&re){const _e=br?re.offsetHeight<re.scrollHeight:re.offsetWidth<re.scrollWidth;Re!==_e&&Ft(_e)}},[Ye,Ge,m,br,Fe,Mn]),N.useEffect(()=>{const re=x.current;if(typeof IntersectionObserver>"u"||!re||!Ge||!ut)return;const _e=new IntersectionObserver(()=>{bt(!!re.offsetParent)});return _e.observe(re),()=>{_e.disconnect()}},[Ge,ut]);let ar={};Ie.tooltip===!0?ar={title:(n=$.text)!==null&&n!==void 0?n:m}:N.isValidElement(Ie.tooltip)?ar={title:Ie.tooltip}:typeof Ie.tooltip=="object"?ar=Object.assign({title:(i=$.text)!==null&&i!==void 0?i:m},Ie.tooltip):ar={title:Ie.tooltip};const on=N.useMemo(()=>{const re=_e=>["string","number"].includes(typeof _e);if(!(!Ye||Ge)){if(re($.text))return $.text;if(re(m))return m;if(re(E))return E;if(re(ar.title))return ar.title}},[Ye,Ge,E,ar.title,gt]);if(M)return N.createElement(M2,{value:(o=$.text)!==null&&o!==void 0?o:typeof m=="string"?m:"",onSave:K,onCancel:oe,onEnd:$.onEnd,prefixCls:R,className:c,style:h,direction:k,component:y,maxLength:$.maxLength,autoSize:$.autoSize,enterIcon:$.enterIcon});const sa=()=>{const{expandable:re,symbol:_e}=Ie;if(!re)return null;let Ue;return _e?Ue=_e:Ue=v?.expand,N.createElement("a",{key:"expand",className:`${R}-expand`,onClick:ia,"aria-label":v?.expand},Ue)},la=()=>{if(!O)return;const{icon:re,tooltip:_e}=$,Ue=bf(_e)[0]||v?.edit,Ot=typeof Ue=="string"?Ue:"";return X.includes("icon")?N.createElement(mc,{key:"edit",title:_e===!1?"":Ue},N.createElement(h0,{ref:b,className:`${R}-edit`,onClick:Z,"aria-label":Ot},re||N.createElement(yc,{role:"button"}))):null},Nn=()=>{if(!ce)return null;const{tooltips:re,icon:_e}=pe,Ue=p0(re),Ot=p0(_e),jr=Oe?es(Ue[1],v?.copied):es(Ue[0],v?.copy),hi=Oe?v?.copied:v?.copy,ca=typeof jr=="string"?jr:hi;return N.createElement(mc,{key:"copy",title:jr},N.createElement(h0,{className:wn(`${R}-copy`,{[`${R}-copy-success`]:Oe,[`${R}-copy-icon-only`]:m==null}),onClick:we,"aria-label":ca},Oe?es(Ot[1],N.createElement(Gg,null),!0):es(Ot[0],N.createElement(u2,null),!0)))},ua=re=>[re&&sa(),la(),Nn()],di=re=>[re&&N.createElement("span",{"aria-hidden":!0,key:"ellipsis"},U2),Ie.suffix,ua(re)];return N.createElement(Dg,{onResize:an,disabled:!ut},re=>N.createElement(j2,{tooltipProps:ar,enabledEllipsis:ut,isEllipsis:gt},N.createElement(Mf,Object.assign({className:wn({[`${R}-${f}`]:f,[`${R}-disabled`]:p,[`${R}-ellipsis`]:Ye,[`${R}-single-line`]:ut&&ft===1,[`${R}-ellipsis-single-line`]:Qt,[`${R}-ellipsis-multiple-line`]:br},c),prefixCls:l,style:Object.assign(Object.assign({},h),{WebkitLineClamp:br?ft:void 0}),component:y,ref:Pf(re,x,e),direction:k,onClick:X.includes("text")?Z:void 0,"aria-label":on?.toString(),title:E},B),N.createElement(G2,{enabledMeasure:ut&&!Ge,text:m,rows:ft,width:Mn,fontSize:ci,onEllipsis:oa},(_e,Ue)=>{let Ot=_e;return _e.length&&Ue&&on&&(Ot=N.createElement("span",{key:"show-content","aria-hidden":!0},Ot)),B2(a,N.createElement(N.Fragment,null,Ot,di(Ue)))}))))}),xs=H2;var V2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const W2=N.forwardRef((a,e)=>{var{ellipsis:n,rel:i}=a,o=V2(a,["ellipsis","rel"]);const l=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete l.navigate,N.createElement(xs,Object.assign({},l,{ref:e,ellipsis:!!n,component:"a"}))}),X2=W2,K2=N.forwardRef((a,e)=>N.createElement(xs,Object.assign({ref:e},a,{component:"div"}))),q2=K2;var Y2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Q2=(a,e)=>{var{ellipsis:n}=a,i=Y2(a,["ellipsis"]);const o=N.useMemo(()=>n&&typeof n=="object"?Of(n,["expandable","rows"]):n,[n]);return N.createElement(xs,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},J2=N.forwardRef(Q2);var Z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const ep=[1,2,3,4,5],tp=N.forwardRef((a,e)=>{const{level:n=1}=a,i=Z2(a,["level"]);let o;return ep.includes(n)?o=`h${n}`:o="h1",N.createElement(xs,Object.assign({ref:e},i,{component:o}))}),rp=tp,Ka=Mf;Ka.Text=J2;Ka.Link=X2;Ka.Title=rp;Ka.Paragraph=q2;const np=Ka,Dc=Bg;Dc.Dragger=_c;Dc.LIST_IGNORE=Ug;const v0=Dc;var ip={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M644.7 669.2a7.92 7.92 0 00-6.5-3.3H594c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.8-5.3 0-12.7-6.5-12.7h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-22.9-31.9zM688 306v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 458H208V148h560v296c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h312c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm402.6-320.8l-192-66.7c-.9-.3-1.7-.4-2.6-.4s-1.8.1-2.6.4l-192 66.7a7.96 7.96 0 00-5.4 7.5v251.1c0 2.5 1.1 4.8 3.1 6.3l192 150.2c1.4 1.1 3.2 1.7 4.9 1.7s3.5-.6 4.9-1.7l192-150.2c1.9-1.5 3.1-3.8 3.1-6.3V538.7c0-3.4-2.2-6.4-5.4-7.5zM826 763.7L688 871.6 550 763.7V577l138-48 138 48v186.7z"}}]},name:"file-protect",theme:"outlined"};const ap=ip;var op=function(e,n){return N.createElement(Fc,Ic({},e,{ref:n,icon:ap}))};const sp=N.forwardRef(op);var Af={exports:{}},ws={},ps={},Ce={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof u0<"u"?u0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.5",isBrowser:n(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle(o){return a.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var o;return(o=a.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(o){a.glob.Konva=o}};const i=o=>{a.Konva[o.prototype.getClassName()]=o};a._registerNode=i,a.Konva._injectGlobal(a.Konva)})(Ce);var at={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const e=Ce;class n{constructor(x=[1,0,0,1,0,0]){this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]}point(x){var b=this.m;return{x:b[0]*x.x+b[2]*x.y+b[4],y:b[1]*x.x+b[3]*x.y+b[5]}}translate(x,b){return this.m[4]+=this.m[0]*x+this.m[2]*b,this.m[5]+=this.m[1]*x+this.m[3]*b,this}scale(x,b){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=b,this.m[3]*=b,this}rotate(x){var b=Math.cos(x),R=Math.sin(x),B=this.m[0]*b+this.m[2]*R,O=this.m[1]*b+this.m[3]*R,$=this.m[0]*-R+this.m[2]*b,M=this.m[1]*-R+this.m[3]*b;return this.m[0]=B,this.m[1]=O,this.m[2]=$,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(x,b){var R=this.m[0]+this.m[2]*b,B=this.m[1]+this.m[3]*b,O=this.m[2]+this.m[0]*x,$=this.m[3]+this.m[1]*x;return this.m[0]=R,this.m[1]=B,this.m[2]=O,this.m[3]=$,this}multiply(x){var b=this.m[0]*x.m[0]+this.m[2]*x.m[1],R=this.m[1]*x.m[0]+this.m[3]*x.m[1],B=this.m[0]*x.m[2]+this.m[2]*x.m[3],O=this.m[1]*x.m[2]+this.m[3]*x.m[3],$=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],M=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=b,this.m[1]=R,this.m[2]=B,this.m[3]=O,this.m[4]=$,this.m[5]=M,this}invert(){var x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*x,R=-this.m[1]*x,B=-this.m[2]*x,O=this.m[0]*x,$=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=R,this.m[2]=B,this.m[3]=O,this.m[4]=$,this.m[5]=M,this}getMatrix(){return this.m}decompose(){var x=this.m[0],b=this.m[1],R=this.m[2],B=this.m[3],O=this.m[4],$=this.m[5],M=x*B-b*R;let D={x:O,y:$,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||b!=0){var X=Math.sqrt(x*x+b*b);D.rotation=b>0?Math.acos(x/X):-Math.acos(x/X),D.scaleX=X,D.scaleY=M/X,D.skewX=(x*R+b*B)/M,D.skewY=0}else if(R!=0||B!=0){var W=Math.sqrt(R*R+B*B);D.rotation=Math.PI/2-(B>0?Math.acos(-R/W):-Math.acos(R/W)),D.scaleX=M/W,D.scaleY=W,D.skewX=0,D.skewY=(x*R+b*B)/M}return D.rotation=a.Util._getRotation(D.rotation),D}}a.Transform=n;var i="[object Array]",o="[object Number]",l="[object String]",c="[object Boolean]",h=Math.PI/180,f=180/Math.PI,p="#",m="",C="0",w="Konva warning: ",_="Konva error: ",y="rgb(",E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};a.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===i},_isNumber(v){return Object.prototype.toString.call(v)===o&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===l},_isBoolean(v){return Object.prototype.toString.call(v)===c},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;var x=v[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){T.push(v),T.length===1&&k(function(){const x=T;T=[],x.forEach(function(b){b()})})},createCanvasElement(){var v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,x){var b=a.Util.createImageElement();b.onload=function(){x(b)},b.src=v},_rgbToHex(v,x,b){return((1<<24)+(v<<16)+(x<<8)+b).toString(16).slice(1)},_hexToRgb(v){v=v.replace(p,m);var x=parseInt(v,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor(){for(var v=(Math.random()*16777215<<0).toString(16);v.length<6;)v=C+v;return p+v},getRGB(v){var x;return v in E?(x=E[v],{r:x[0],g:x[1],b:x[2]}):v[0]===p?this._hexToRgb(v.substring(1)):v.substr(0,4)===y?(x=P.exec(v.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",a.Util._namedColorToRBA(v)||a.Util._hex3ColorToRGBA(v)||a.Util._hex4ColorToRGBA(v)||a.Util._hex6ColorToRGBA(v)||a.Util._hex8ColorToRGBA(v)||a.Util._rgbColorToRGBA(v)||a.Util._rgbaColorToRGBA(v)||a.Util._hslColorToRGBA(v)},_namedColorToRBA(v){var x=E[v.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];var x=v.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];var x=v.split(/ *, */).map((b,R)=>b.slice(-1)==="%"?R===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[x,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),R=Number(b[0])/360,B=Number(b[1])/100,O=Number(b[2])/100;let $,M,D;if(B===0)return D=O*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};O<.5?$=O*(1+B):$=O+B-O*B;const X=2*O-$,W=[0,0,0];for(let Z=0;Z<3;Z++)M=R+1/3*-(Z-1),M<0&&M++,M>1&&M--,6*M<1?D=X+($-X)*6*M:2*M<1?D=$:3*M<2?D=X+($-X)*(2/3-M)*6:D=X,W[Z]=D*255;return{r:Math.round(W[0]),g:Math.round(W[1]),b:Math.round(W[2]),a:1}}},haveIntersection(v,x){return!(x.x>v.x+v.width||x.x+x.width<v.x||x.y>v.y+v.height||x.y+x.height<v.y)},cloneObject(v){var x={};for(var b in v)this._isPlainObject(v[b])?x[b]=this.cloneObject(v[b]):this._isArray(v[b])?x[b]=this.cloneArray(v[b]):x[b]=v[b];return x},cloneArray(v){return v.slice(0)},degToRad(v){return v*h},radToDeg(v){return v*f},_degToRad(v){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(v)},_radToDeg(v){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(v)},_getRotation(v){return e.Konva.angleDeg?a.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(_+v)},error(v){console.error(_+v)},warn(v){e.Konva.showWarnings&&console.warn(w+v)},each(v,x){for(var b in v)x(b,v[b])},_inRange(v,x,b){return x<=v&&v<b},_getProjectionToSegment(v,x,b,R,B,O){var $,M,D,X=(v-b)*(v-b)+(x-R)*(x-R);if(X==0)$=v,M=x,D=(B-b)*(B-b)+(O-R)*(O-R);else{var W=((B-v)*(b-v)+(O-x)*(R-x))/X;W<0?($=v,M=x,D=(v-B)*(v-B)+(x-O)*(x-O)):W>1?($=b,M=R,D=(b-B)*(b-B)+(R-O)*(R-O)):($=v+W*(b-v),M=x+W*(R-x),D=($-B)*($-B)+(M-O)*(M-O))}return[$,M,D]},_getProjectionToLine(v,x,b){var R=a.Util.cloneObject(v),B=Number.MAX_VALUE;return x.forEach(function(O,$){if(!(!b&&$===x.length-1)){var M=x[($+1)%x.length],D=a.Util._getProjectionToSegment(O.x,O.y,M.x,M.y,v.x,v.y),X=D[0],W=D[1],Z=D[2];Z<B&&(R.x=X,R.y=W,B=Z)}}),R},_prepareArrayForTween(v,x,b){var R,B=[],O=[];if(v.length>x.length){var $=x;x=v,v=$}for(R=0;R<v.length;R+=2)B.push({x:v[R],y:v[R+1]});for(R=0;R<x.length;R+=2)O.push({x:x[R],y:x[R+1]});var M=[];return O.forEach(function(D){var X=a.Util._getProjectionToLine(D,B,b);M.push(X.x),M.push(X.y)}),M},_prepareToStringify(v){var x;v.visitedByCircularReferenceRemoval=!0;for(var b in v)if(v.hasOwnProperty(b)&&v[b]&&typeof v[b]=="object"){if(x=Object.getOwnPropertyDescriptor(v,b),v[b].visitedByCircularReferenceRemoval||a.Util._isElement(v[b]))if(x.configurable)delete v[b];else return null;else if(a.Util._prepareToStringify(v[b])===null)if(x.configurable)delete v[b];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,x){for(var b in x)v[b]=x[b];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){e.Konva.releaseCanvasOnDestroy&&v.forEach(x=>{x.width=0,x.height=0})},drawRoundedRectPath(v,x,b,R){let B=0,O=0,$=0,M=0;typeof R=="number"?B=O=$=M=Math.min(R,x/2,b/2):(B=Math.min(R[0]||0,x/2,b/2),O=Math.min(R[1]||0,x/2,b/2),M=Math.min(R[2]||0,x/2,b/2),$=Math.min(R[3]||0,x/2,b/2)),v.moveTo(B,0),v.lineTo(x-O,0),v.arc(x-O,O,O,Math.PI*3/2,0,!1),v.lineTo(x,b-M),v.arc(x-M,b-M,M,0,Math.PI/2,!1),v.lineTo($,b),v.arc($,b-$,$,Math.PI/2,Math.PI,!1),v.lineTo(0,B),v.arc(B,B,B,Math.PI,Math.PI*3/2,!1)}}})(at);var rt={},Pe={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.getComponentValidator=le.getBooleanValidator=le.getNumberArrayValidator=le.getFunctionValidator=le.getStringOrGradientValidator=le.getStringValidator=le.getNumberOrAutoValidator=le.getNumberOrArrayOfNumbersValidator=le.getNumberValidator=le.alphaComponent=le.RGBComponent=void 0;const en=Ce,st=at;function tn(a){return st.Util._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||st.Util._isBoolean(a)?a:Object.prototype.toString.call(a)}function lp(a){return a>255?255:a<0?0:Math.round(a)}le.RGBComponent=lp;function up(a){return a>1?1:a<1e-4?1e-4:a}le.alphaComponent=up;function cp(){if(en.Konva.isUnminified)return function(a,e){return st.Util._isNumber(a)||st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),a}}le.getNumberValidator=cp;function dp(a){if(en.Konva.isUnminified)return function(e,n){let i=st.Util._isNumber(e),o=st.Util._isArray(e)&&e.length==a;return!i&&!o&&st.Util.warn(tn(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+a+")"),e}}le.getNumberOrArrayOfNumbersValidator=dp;function hp(){if(en.Konva.isUnminified)return function(a,e){var n=st.Util._isNumber(a),i=a==="auto";return n||i||st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),a}}le.getNumberOrAutoValidator=hp;function fp(){if(en.Konva.isUnminified)return function(a,e){return st.Util._isString(a)||st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),a}}le.getStringValidator=fp;function gp(){if(en.Konva.isUnminified)return function(a,e){const n=st.Util._isString(a),i=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return n||i||st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),a}}le.getStringOrGradientValidator=gp;function pp(){if(en.Konva.isUnminified)return function(a,e){return st.Util._isFunction(a)||st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),a}}le.getFunctionValidator=pp;function vp(){if(en.Konva.isUnminified)return function(a,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&a instanceof n||(st.Util._isArray(a)?a.forEach(function(i){st.Util._isNumber(i)||st.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),a}}le.getNumberArrayValidator=vp;function mp(){if(en.Konva.isUnminified)return function(a,e){var n=a===!0||a===!1;return n||st.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),a}}le.getBooleanValidator=mp;function yp(a){if(en.Konva.isUnminified)return function(e,n){return e==null||st.Util.isObject(e)||st.Util.warn(tn(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+a),e}}le.getComponentValidator=yp;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const e=at,n=le;var i="get",o="set";a.Factory={addGetterSetter(l,c,h,f,p){a.Factory.addGetter(l,c,h),a.Factory.addSetter(l,c,f,p),a.Factory.addOverloadedGetterSetter(l,c)},addGetter(l,c,h){var f=i+e.Util._capitalize(c);l.prototype[f]=l.prototype[f]||function(){var p=this.attrs[c];return p===void 0?h:p}},addSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]||a.Factory.overWriteSetter(l,c,h,f)},overWriteSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]=function(m){return h&&m!==void 0&&m!==null&&(m=h.call(this,m,c)),this._setAttr(c,m),f&&f.call(this),this}},addComponentsGetterSetter(l,c,h,f,p){var m=h.length,C=e.Util._capitalize,w=i+C(c),_=o+C(c),y,E;l.prototype[w]=function(){var T={};for(y=0;y<m;y++)E=h[y],T[E]=this.getAttr(c+C(E));return T};var P=(0,n.getComponentValidator)(h);l.prototype[_]=function(T){var k=this.attrs[c],v;f&&(T=f.call(this,T)),P&&P.call(this,T,c);for(v in T)T.hasOwnProperty(v)&&this._setAttr(c+C(v),T[v]);return T||h.forEach(x=>{this._setAttr(c+C(x),void 0)}),this._fireChangeEvent(c,k,T),p&&p.call(this),this},a.Factory.addOverloadedGetterSetter(l,c)},addOverloadedGetterSetter(l,c){var h=e.Util._capitalize(c),f=o+h,p=i+h;l.prototype[c]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(l,c,h,f){e.Util.error("Adding deprecated "+c);var p=i+e.Util._capitalize(c),m=c+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[p]=function(){e.Util.error(m);var C=this.attrs[c];return C===void 0?h:C},a.Factory.addSetter(l,c,f,function(){e.Util.error(m)}),a.Factory.addOverloadedGetterSetter(l,c)},backCompat(l,c){e.Util.each(c,function(h,f){var p=l.prototype[f],m=i+e.Util._capitalize(h),C=o+e.Util._capitalize(h);function w(){p.apply(this,arguments),e.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}l.prototype[h]=w,l.prototype[m]=w,l.prototype[C]=w})},afterSetFilter(){this._filterUpToDate=!1}}})(Pe);var Cr={},Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.HitContext=Jr.SceneContext=Jr.Context=void 0;const Ff=at,_p=Ce;function Sp(a){var e=[],n=a.length,i=Ff.Util,o,l;for(o=0;o<n;o++)l=a[o],i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),e.push(l);return e}var m0=",",xp="(",wp=")",Ep="([",Cp="])",Pp=";",bp="()",Op="=",y0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Tp=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const kp=100;class Es{constructor(e){this.canvas=e,_p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var i=this.traceArr,o=i.length,l="",c,h,f,p;for(c=0;c<o;c++)h=i[c],f=h.method,f?(p=h.args,l+=f,e?l+=bp:Ff.Util._isArray(p[0])?l+=Ep+p.join(m0)+Cp:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),l+=xp+p.join(m0)+wp)):(l+=h.property,e||(l+=Op+h.val)),l+=Pp;return l}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,i;n.push(e),i=n.length,i>=kp&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,o,l,c){this._context.arc(e,n,i,o,l,c)}arcTo(e,n,i,o,l){this._context.arcTo(e,n,i,o,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,o,l,c){this._context.bezierCurveTo(e,n,i,o,l,c)}clearRect(e,n,i,o){this._context.clearRect(e,n,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,o){return this._context.createLinearGradient(e,n,i,o)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,o,l,c){return this._context.createRadialGradient(e,n,i,o,l,c)}drawImage(e,n,i,o,l,c,h,f,p){var m=arguments,C=this._context;m.length===3?C.drawImage(e,n,i):m.length===5?C.drawImage(e,n,i,o,l):m.length===9&&C.drawImage(e,n,i,o,l,c,h,f,p)}ellipse(e,n,i,o,l,c,h,f){this._context.ellipse(e,n,i,o,l,c,h,f)}isPointInPath(e,n,i,o){return i?this._context.isPointInPath(i,e,n,o):this._context.isPointInPath(e,n,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,o){this._context.fillRect(e,n,i,o)}strokeRect(e,n,i,o){this._context.strokeRect(e,n,i,o)}fillText(e,n,i,o){o?this._context.fillText(e,n,i,o):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,o){return this._context.getImageData(e,n,i,o)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,o){this._context.rect(e,n,i,o)}roundRect(e,n,i,o,l){this._context.roundRect(e,n,i,o,l)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,o){this._context.quadraticCurveTo(e,n,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,o,l,c){this._context.setTransform(e,n,i,o,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,o){this._context.strokeText(e,n,i,o)}transform(e,n,i,o,l,c){this._context.transform(e,n,i,o,l,c)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=y0.length,i=this.setAttr,o,l,c=function(h){var f=e[h],p;e[h]=function(){return l=Sp(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:h,args:l}),p}};for(o=0;o<n;o++)c(y0[o]);e.setAttr=function(){i.apply(e,arguments);var h=arguments[0],f=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:h,val:f})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}Jr.Context=Es;Tp.forEach(function(a){Object.defineProperty(Es.prototype,a,{get(){return this._context[a]},set(e){this._context[a]=e}})});class Rp extends Es{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):o?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,i.x,i.y);if(o){for(var c=0;c<o.length;c+=2)l.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,o,l=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",c=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,h=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=f.x*p,C=f.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(m),Math.abs(C))),this.setAttr("shadowOffsetX",h.x*m),this.setAttr("shadowOffsetY",h.y*C)}}Jr.SceneContext=Rp;class Mp extends Es{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const l=e.getStrokeScaleEnabled();if(!l){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),l||this.restore()}}}Jr.HitContext=Mp;Object.defineProperty(Cr,"__esModule",{value:!0});Cr.HitCanvas=Cr.SceneCanvas=Cr.Canvas=void 0;const vs=at,If=Jr,Lf=Ce,Np=Pe,Ap=le;var ts;function Fp(){if(ts)return ts;var a=vs.Util.createCanvasElement(),e=a.getContext("2d");return ts=function(){var n=Lf.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i}(),vs.Util.releaseCanvas(a),ts}class Cs{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},i=n.pixelRatio||Lf.Konva.pixelRatio||Fp();this.pixelRatio=i,this._canvas=vs.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(o){return vs.Util.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Cr.Canvas=Cs;Np.Factory.addGetterSetter(Cs,"pixelRatio",void 0,(0,Ap.getNumberValidator)());class Ip extends Cs{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new If.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Cr.SceneCanvas=Ip;class Lp extends Cs{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new If.HitContext(this),this.setSize(e.width,e.height)}}Cr.HitCanvas=Lp;var Ps={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const e=Ce,n=at;a.DD={get isDragging(){var i=!1;return a.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){var i;return a.DD._dragElements.forEach(o=>{i=o.node}),i},_dragElements:new Map,_drag(i){const o=[];a.DD._dragElements.forEach((l,c)=>{const{node:h}=l,f=h.getStage();f.setPointersPositions(i),l.pointerId===void 0&&(l.pointerId=n.Util._getFirstPointerId(i));const p=f._changedPointerPositions.find(w=>w.id===l.pointerId);if(p){if(l.dragStatus!=="dragging"){var m=h.dragDistance(),C=Math.max(Math.abs(p.x-l.startPointerPos.x),Math.abs(p.y-l.startPointerPos.y));if(C<m||(h.startDrag({evt:i}),!h.isDragging()))return}h._setDragPosition(i,l),o.push(h)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:i},!0)})},_endDragBefore(i){const o=[];a.DD._dragElements.forEach(l=>{const{node:c}=l,h=c.getStage();if(i&&h.setPointersPositions(i),!h._changedPointerPositions.find(m=>m.id===l.pointerId))return;(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(a.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,l.dragStatus="stopped");const p=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;p&&o.indexOf(p)===-1&&o.push(p)}),o.forEach(l=>{l.draw()})},_endDragAfter(i){a.DD._dragElements.forEach((o,l)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:i},!0),o.dragStatus!=="dragging"&&a.DD._dragElements.delete(l)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1))})(Ps);Object.defineProperty(rt,"__esModule",{value:!0});rt.Node=void 0;const ke=at,qa=Pe,Fa=Cr,_n=Ce,gr=Ps,dt=le;var hs="absoluteOpacity",rs="allEventListeners",Qr="absoluteTransform",_0="absoluteScale",qn="canvas",Dp="Change",Gp="children",$p="konva",xc="listening",S0="mouseenter",x0="mouseleave",w0="set",E0="Shape",fs=" ",C0="stage",Sn="transform",jp="Stage",wc="visible",zp=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(fs);let Bp=1;class me{constructor(e){this._id=Bp++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Sn||e===Qr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var i=this._cache.get(e),o=e===Sn||e===Qr,l=i===void 0||o&&i.dirty===!0;return l&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const o=n.map(l=>l+"Change.konva").join(fs);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(qn)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Qr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(qn)){const{scene:e,filter:n,hit:i}=this._cache.get(qn);ke.Util.releaseCanvas(e,n,i),this._cache.delete(qn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var o=Math.ceil(n.width||i.width),l=Math.ceil(n.height||i.height),c=n.pixelRatio,h=n.x===void 0?Math.floor(i.x):n.x,f=n.y===void 0?Math.floor(i.y):n.y,p=n.offset||0,m=n.drawBorder||!1,C=n.hitCanvasPixelRatio||1;if(!o||!l){ke.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const w=Math.abs(Math.round(i.x)-h)>.5?1:0,_=Math.abs(Math.round(i.y)-f)>.5?1:0;o+=p*2+w,l+=p*2+_,h-=p,f-=p;var y=new Fa.SceneCanvas({pixelRatio:c,width:o,height:l}),E=new Fa.SceneCanvas({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),P=new Fa.HitCanvas({pixelRatio:C,width:o,height:l}),T=y.getContext(),k=P.getContext();return P.isCache=!0,y.isCache=!0,this._cache.delete(qn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,E.getContext()._context.imageSmoothingEnabled=!1),T.save(),k.save(),T.translate(-h,-f),k.translate(-h,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(hs),this._clearSelfAndDescendantCache(_0),this.drawScene(y,this),this.drawHit(P,this),this._isUnderCache=!1,T.restore(),k.restore(),m&&(T.save(),T.beginPath(),T.rect(0,0,o,l),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),this._cache.set(qn,{scene:y,filter:E,hit:P,x:h,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(qn)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,l=1/0,c=-1/0,h=-1/0,f=this.getAbsoluteTransform(n);return i.forEach(function(p){var m=f.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),{x:o,y:l,width:c-o,height:h-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),i=n.scene,o=n.filter,l=o.getContext(),c,h,f,p;if(e){if(!this._filterUpToDate){var m=i.pixelRatio;o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(c=e.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/m,i.getHeight()/m),h=l.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<c;f++){if(p=e[f],typeof p!="function"){ke.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,h),l.putImageData(h,0,0)}}catch(C){ke.Util.error("Unable to apply filter. "+C.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return i}on(e,n){if(this._cache&&this._cache.delete(rs),arguments.length===3)return this._delegate.apply(this,arguments);var i=e.split(fs),o=i.length,l,c,h,f,p;for(l=0;l<o;l++)c=i[l],h=c.split("."),f=h[0],p=h[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:n});return this}off(e,n){var i=(e||"").split(fs),o=i.length,l,c,h,f,p,m;if(this._cache&&this._cache.delete(rs),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<o;l++)if(h=i[l],f=h.split("."),p=f[0],m=f[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(c in this.eventListeners)this._off(c,m,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){var o=this;this.on(e,function(l){for(var c=l.target.findAncestors(n,!0,o),h=0;h<c.length;h++)l=ke.Util.cloneObject(l),l.currentTarget=c[h],i.call(c[h],l)})}remove(){return this.isDragging()&&this.stopDrag(),gr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Qr),this._clearSelfAndDescendantCache(hs),this._clearSelfAndDescendantCache(_0),this._clearSelfAndDescendantCache(C0),this._clearSelfAndDescendantCache(wc),this._clearSelfAndDescendantCache(xc)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+ke.Util._capitalize(e);return ke.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,i;if(!e)return this;for(n in e)n!==Gp&&(i=w0+ke.Util._capitalize(n),ke.Util._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(xc,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(wc,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),o=!1;gr.DD._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(o=!0)});var l=!n&&!_n.Konva.hitOnDragEnabled&&(o||_n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,i=0,o,l,c,h;function f(m){for(o=[],l=m.length,c=0;c<l;c++)h=m[c],i++,h.nodeType!==E0&&(o=o.concat(h.getChildren().slice())),h._id===n._id&&(c=l);o.length>0&&o[0].getDepth()<=e&&f(o)}const p=this.getStage();return n.nodeType!==jp&&p&&f(p.getChildren()),i}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Sn),this._clearSelfAndDescendantCache(Qr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),l=new ke.Transform,c=this.offset();return l.m=o.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...o}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(Sn);var l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(Sn),this._clearSelfAndDescendantCache(Qr),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,i=e.y,o=this.x(),l=this.y();return n!==void 0&&(o+=n),i!==void 0&&(l+=i),this.setPosition({x:o,y:l}),this}_eachAncestorReverse(e,n){var i=[],o=this.getParent(),l,c;if(!(n&&n._id===this._id)){for(i.unshift(this);o&&(!n||o._id!==n._id);)i.unshift(o),o=o.parent;for(l=i.length,c=0;c<l;c++)e(i[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ke.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ke.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ke.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ke.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ke.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ke.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(hs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,i,o,l,c;const h={attrs:{},className:this.getClassName()};for(n in e)i=e[n],c=ke.Util.isObject(i)&&!ke.Util._isPlainObject(i)&&!ke.Util._isArray(i),!c&&(o=typeof this[n]=="function"&&this[n],delete e[n],l=o?o.call(this):null,e[n]=i,l!==i&&(h.attrs[n]=i));return ke.Util._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){var o=[];n&&this._isMatch(e)&&o.push(this);for(var l=this.parent;l;){if(l===i)return o;l._isMatch(e)&&o.push(l),l=l.parent}return o}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),i=n.length,o,l;for(o=0;o<i;o++)if(l=n[o],ke.Util.isValidSelector(l)||(ke.Util.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ke.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ke.Util.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(C0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Qr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new ke.Transform,this._eachAncestorReverse(function(o){var l=o.transformsEnabled();l==="all"?n.multiply(o.getTransform()):l==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),n;n=this._cache.get(Qr)||new ke.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,h=this.attrs.offsetY||0;n.translate(o-c,l-h)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Sn,this._getTransform)}_getTransform(){var e,n,i=this._cache.get(Sn)||new ke.Transform;i.reset();var o=this.x(),l=this.y(),c=_n.Konva.getAngle(this.rotation()),h=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,C=this.attrs.offsetX||0,w=this.attrs.offsetY||0;return(o!==0||l!==0)&&i.translate(o,l),c!==0&&i.rotate(c),(p!==0||m!==0)&&i.skew(p,m),(h!==1||f!==1)&&i.scale(h,f),(C!==0||w!==0)&&i.translate(-1*C,-1*w),i.dirty=!1,i}clone(e){var n=ke.Util.cloneObject(this.attrs),i,o,l,c,h;for(i in e)n[i]=e[i];var f=new this.constructor(n);for(i in this.eventListeners)for(o=this.eventListeners[i],l=o.length,c=0;c<l;c++)h=o[c],h.name.indexOf($p)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(h));return f}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(n.x),l=e.y!==void 0?e.y:Math.floor(n.y),c=e.pixelRatio||1,h=new Fa.SceneCanvas({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:c}),f=h.getContext();const p=new Fa.SceneCanvas({width:h.width/h.pixelRatio+Math.abs(o),height:h.height/h.pixelRatio+Math.abs(l),pixelRatio:h.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||l)&&f.translate(-1*o,-1*l),this.drawScene(h,void 0,p),f.restore(),h}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,ke.Util._urlToImage(this.toDataURL(e),function(l){n(l),o?.(l)})}catch(o){i(o)}})}toBlob(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,this.toCanvas(e).toBlob(l=>{n(l),o?.(l)},e?.mimeType,e?.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():_n.Konva.dragDistance}_off(e,n,i){var o=this.eventListeners[e],l,c,h;for(l=0;l<o.length;l++)if(c=o[l].name,h=o[l].handler,(c!=="konva"||n==="konva")&&(!n||c===n)&&(!i||i===h)){if(o.splice(l,1),o.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,n,i){this._fire(e+Dp,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){var n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){var i=this[w0+ke.Util._capitalize(e)];return ke.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(_n.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var i=this.attrs[e];i===n&&!ke.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){var o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,n,i){n&&this.nodeType===E0&&(n.target=this);var o=(e===S0||e===x0)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!o){this._fire(e,n);var l=(e===S0||e===x0)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i,o;const l=(n=this._cache.get(rs))!==null&&n!==void 0?n:{};let c=l?.[e];if(c===void 0){c=[];let h=Object.getPrototypeOf(this);for(;h;){const f=(o=(i=h.eventListeners)===null||i===void 0?void 0:i[e])!==null&&o!==void 0?o:[];c.push(...f),h=Object.getPrototypeOf(h)}l[e]=c,this._cache.set(rs,l)}return c}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(var o=0;o<i.length;o++)i[o].handler.call(this,n);const l=this.eventListeners[e];if(l)for(var o=0;o<l.length;o++)l[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(i){var l=i._getPointerById(n)||i._changedPointerPositions[0]||o;gr.DD._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-o.x,y:l.y-o.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){gr.DD._dragElements.has(this._id)||this._createDragElement(e);const i=gr.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(i){var o={x:i.x-n.offset.x,y:i.y-n.offset.y},l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,o,e);c?o=c:ke.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const n=gr.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),gr.DD._endDragBefore(e),gr.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=gr.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,i=!n||_n.Konva.dragButtons.indexOf(e.evt.button)>=0;if(i&&!this.isDragging()){var o=!1;gr.DD._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(o=!0)}),o||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=gr.DD._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",o=n&&n.dragStatus==="ready";i?this.stopDrag():o&&gr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return ke.Util.haveIntersection(i,this.getClientRect())}static create(e,n){return ke.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var i=me.prototype.getClassName.call(e),o=e.children,l,c,h;n&&(e.attrs.container=n),_n.Konva[i]||(ke.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const f=_n.Konva[i];if(l=new f(e.attrs),o)for(c=o.length,h=0;h<c;h++)l.add(me._createNode(o[h]));return l}}rt.Node=me;me.prototype.nodeType="Node";me.prototype._attrsAffectingSize=[];me.prototype.eventListeners={};me.prototype.on.call(me.prototype,zp,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Sn),this._clearSelfAndDescendantCache(Qr)});me.prototype.on.call(me.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(wc)});me.prototype.on.call(me.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(xc)});me.prototype.on.call(me.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(hs)});const Ke=qa.Factory.addGetterSetter;Ke(me,"zIndex");Ke(me,"absolutePosition");Ke(me,"position");Ke(me,"x",0,(0,dt.getNumberValidator)());Ke(me,"y",0,(0,dt.getNumberValidator)());Ke(me,"globalCompositeOperation","source-over",(0,dt.getStringValidator)());Ke(me,"opacity",1,(0,dt.getNumberValidator)());Ke(me,"name","",(0,dt.getStringValidator)());Ke(me,"id","",(0,dt.getStringValidator)());Ke(me,"rotation",0,(0,dt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(me,"scale",["x","y"]);Ke(me,"scaleX",1,(0,dt.getNumberValidator)());Ke(me,"scaleY",1,(0,dt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(me,"skew",["x","y"]);Ke(me,"skewX",0,(0,dt.getNumberValidator)());Ke(me,"skewY",0,(0,dt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(me,"offset",["x","y"]);Ke(me,"offsetX",0,(0,dt.getNumberValidator)());Ke(me,"offsetY",0,(0,dt.getNumberValidator)());Ke(me,"dragDistance",null,(0,dt.getNumberValidator)());Ke(me,"width",0,(0,dt.getNumberValidator)());Ke(me,"height",0,(0,dt.getNumberValidator)());Ke(me,"listening",!0,(0,dt.getBooleanValidator)());Ke(me,"preventDefault",!0,(0,dt.getBooleanValidator)());Ke(me,"filters",null,function(a){return this._filterUpToDate=!1,a});Ke(me,"visible",!0,(0,dt.getBooleanValidator)());Ke(me,"transformsEnabled","all",(0,dt.getStringValidator)());Ke(me,"size");Ke(me,"dragBoundFunc");Ke(me,"draggable",!1,(0,dt.getBooleanValidator)());qa.Factory.backCompat(me,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.Container=void 0;const Ki=Pe,ec=rt,bs=le;class Zn extends ec.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(o){e(o)&&i.push(o)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var i=[];return this._descendants(o=>{const l=o._isMatch(e);return l&&i.push(o),!!(l&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const o of i){if(n=e(o),n)return!0;if(o.hasChildren()&&(n=o._descendants(e),n))return!0}return!1}toObject(){var e=ec.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=ec.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){var o=this.getLayer(),l=e||o&&o.getCanvas(),c=l&&l.getContext(),h=this._getCanvasCache(),f=h&&h.scene,p=l&&l.isCache;if(!this.isVisible()&&!p)return this;if(f){c.save();var m=this.getAbsoluteTransform(n).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),o=e||i&&i.hitCanvas,l=o&&o.getContext(),c=this._getCanvasCache(),h=c&&c.hit;if(h){l.save();var f=this.getAbsoluteTransform(n).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",o,n);return this}_drawChildren(e,n,i,o){var l,c=n&&n.getContext(),h=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),m=typeof h=="number"&&typeof f=="number"||p;const C=i===this;if(m){c.save();var w=this.getAbsoluteTransform(i),_=w.getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),c.beginPath();let T;if(p)T=p.call(this,c,this);else{var y=this.clipX(),E=this.clipY();c.rect(y||0,E||0,h,f)}c.clip.apply(c,T),_=w.copy().invert().getMatrix(),c.transform(_[0],_[1],_[2],_[3],_[4],_[5])}var P=!C&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";P&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(T){T[e](n,i,o)}),P&&c.restore(),m&&c.restore()}getClientRect(e={}){var n,i=e.skipTransform,o=e.relativeTo,l,c,h,f,p={x:1/0,y:1/0,width:0,height:0},m=this;(n=this.children)===null||n===void 0||n.forEach(function(E){if(E.visible()){var P=E.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(l===void 0?(l=P.x,c=P.y,h=P.x+P.width,f=P.y+P.height):(l=Math.min(l,P.x),c=Math.min(c,P.y),h=Math.max(h,P.x+P.width),f=Math.max(f,P.y+P.height)))}});for(var C=this.find("Shape"),w=!1,_=0;_<C.length;_++){var y=C[_];if(y._isVisible(this)){w=!0;break}}return w&&l!==void 0?p={x:l,y:c,width:h-l,height:f-c}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,o)}}Jn.Container=Zn;Ki.Factory.addComponentsGetterSetter(Zn,"clip",["x","y","width","height"]);Ki.Factory.addGetterSetter(Zn,"clipX",void 0,(0,bs.getNumberValidator)());Ki.Factory.addGetterSetter(Zn,"clipY",void 0,(0,bs.getNumberValidator)());Ki.Factory.addGetterSetter(Zn,"clipWidth",void 0,(0,bs.getNumberValidator)());Ki.Factory.addGetterSetter(Zn,"clipHeight",void 0,(0,bs.getNumberValidator)());Ki.Factory.addGetterSetter(Zn,"clipFunc");var Df={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.releaseCapture=rr.setPointerCapture=rr.hasPointerCapture=rr.createEvent=rr.getCapturedShape=void 0;const Up=Ce,Ha=new Map,Gf=Up.Konva._global.PointerEvent!==void 0;function Hp(a){return Ha.get(a)}rr.getCapturedShape=Hp;function Gc(a){return{evt:a,pointerId:a.pointerId}}rr.createEvent=Gc;function Vp(a,e){return Ha.get(a)===e}rr.hasPointerCapture=Vp;function Wp(a,e){$f(a),e.getStage()&&(Ha.set(a,e),Gf&&e._fire("gotpointercapture",Gc(new PointerEvent("gotpointercapture"))))}rr.setPointerCapture=Wp;function $f(a,e){const n=Ha.get(a);if(!n)return;const i=n.getStage();i&&i.content,Ha.delete(a),Gf&&n._fire("lostpointercapture",Gc(new PointerEvent("lostpointercapture")))}rr.releaseCapture=$f;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const e=at,n=Pe,i=Jn,o=Ce,l=Cr,c=Ps,h=Ce,f=rr;var p="Stage",m="string",C="px",w="mouseout",_="mouseleave",y="mouseover",E="mouseenter",P="mousemove",T="mousedown",k="mouseup",v="pointermove",x="pointerdown",b="pointerup",R="pointercancel",B="lostpointercapture",O="pointerout",$="pointerleave",M="pointerover",D="pointerenter",X="contextmenu",W="touchstart",Z="touchend",K="touchmove",oe="touchcancel",ce="wheel",pe=5,Oe=[[E,"_pointerenter"],[T,"_pointerdown"],[P,"_pointermove"],[k,"_pointerup"],[_,"_pointerleave"],[W,"_pointerdown"],[K,"_pointermove"],[Z,"_pointerup"],[oe,"_pointercancel"],[y,"_pointerover"],[ce,"_wheel"],[X,"_contextmenu"],[x,"_pointerdown"],[v,"_pointermove"],[b,"_pointerup"],[R,"_pointercancel"],[B,"_lostpointercapture"]];const se={mouse:{[O]:w,[$]:_,[M]:y,[D]:E,[v]:P,[x]:T,[b]:k,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O]:"touchout",[$]:"touchleave",[M]:"touchover",[D]:"touchenter",[v]:K,[x]:W,[b]:Z,[R]:oe,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O]:O,[$]:$,[M]:M,[D]:D,[v]:v,[x]:x,[b]:b,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Q=Ae=>Ae.indexOf("pointer")>=0?"pointer":Ae.indexOf("touch")>=0?"touch":"mouse",de=Ae=>{const F=Q(Ae);if(F==="pointer")return o.Konva.pointerEventsEnabled&&se.pointer;if(F==="touch")return se.touch;if(F==="mouse")return se.mouse};function Te(Ae={}){return(Ae.clipFunc||Ae.clipWidth||Ae.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ae}const we="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class qe extends i.Container{constructor(F){super(Te(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Te(this.attrs)}),this._checkVisibility()}_validateAdd(F){const V=F.getType()==="Layer",ne=F.getType()==="FastLayer";V||ne||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===m){if(F.charAt(0)==="."){var V=F.slice(1);F=document.getElementsByClassName(V)[0]}else{var ne;F.charAt(0)!=="#"?ne=F:ne=F.slice(1),F=document.getElementById(ne)}if(!F)throw"Can not find container in document with id "+ne}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var F=this.children,V=F.length,ne;for(ne=0;ne<V;ne++)F[ne].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,F)}destroy(){super.destroy();var F=this.content;F&&e.Util._isInDocument(F)&&this.container().removeChild(F);var V=a.stages.indexOf(this);return V>-1&&a.stages.splice(V,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(e.Util.warn(we),null)}_getPointerById(F){return this._pointerPositions.find(V=>V.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();var V=new l.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),ne=V.getContext()._context,fe=this.children;return(F.x||F.y)&&ne.translate(-1*F.x,-1*F.y),fe.forEach(function(ge){if(ge.isVisible()){var De=ge._toKonvaCanvas(F);ne.drawImage(De._canvas,F.x,F.y,De.getWidth()/De.getPixelRatio(),De.getHeight()/De.getPixelRatio())}}),V}getIntersection(F){if(!F)return null;var V=this.children,ne=V.length,fe=ne-1,ge;for(ge=fe;ge>=0;ge--){const De=V[ge].getIntersection(F);if(De)return De}return null}_resizeDOM(){var F=this.width(),V=this.height();this.content&&(this.content.style.width=F+C,this.content.style.height=V+C),this.bufferCanvas.setSize(F,V),this.bufferHitCanvas.setSize(F,V),this.children.forEach(ne=>{ne.setSize({width:F,height:V}),ne.draw()})}add(F,...V){if(arguments.length>1){for(var ne=0;ne<arguments.length;ne++)this.add(arguments[ne]);return this}super.add(F);var fe=this.children.length;return fe>pe&&e.Util.warn("The stage has "+fe+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),o.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return f.hasPointerCapture(F,this)}setPointerCapture(F){f.setPointerCapture(F,this)}releaseCapture(F){f.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&Oe.forEach(([F,V])=>{this.content.addEventListener(F,ne=>{this[V](ne)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const V=de(F.type);V&&this._fire(V.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const V=de(F.type);V&&this._fire(V.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let V=this[F+"targetShape"];return V&&!V.getStage()&&(V=null),V}_pointerleave(F){const V=de(F.type),ne=Q(F.type);if(V){this.setPointersPositions(F);var fe=this._getTargetShape(ne),ge=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;fe&&ge?(fe._fireAndBubble(V.pointerout,{evt:F}),fe._fireAndBubble(V.pointerleave,{evt:F}),this._fire(V.pointerleave,{evt:F,target:this,currentTarget:this}),this[ne+"targetShape"]=null):ge&&(this._fire(V.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(V.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(F){const V=de(F.type),ne=Q(F.type);if(V){this.setPointersPositions(F);var fe=!1;this._changedPointerPositions.forEach(ge=>{var De=this.getIntersection(ge);if(c.DD.justDragged=!1,o.Konva["_"+ne+"ListenClick"]=!0,!De||!De.isListening())return;o.Konva.capturePointerEventsEnabled&&De.setPointerCapture(ge.id),this[ne+"ClickStartShape"]=De,De._fireAndBubble(V.pointerdown,{evt:F,pointerId:ge.id}),fe=!0;const Re=F.type.indexOf("touch")>=0;De.preventDefault()&&F.cancelable&&Re&&F.preventDefault()}),fe||this._fire(V.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(F){const V=de(F.type),ne=Q(F.type);if(!V)return;o.Konva.isDragging()&&c.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F);var fe=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;if(!fe)return;var ge={};let De=!1;var Re=this._getTargetShape(ne);this._changedPointerPositions.forEach(Ft=>{const Fe=f.getCapturedShape(Ft.id)||this.getIntersection(Ft),bt=Ft.id,Ye={evt:F,pointerId:bt};var Ie=Re!==Fe;if(Ie&&Re&&(Re._fireAndBubble(V.pointerout,{...Ye},Fe),Re._fireAndBubble(V.pointerleave,{...Ye},Fe)),Fe){if(ge[Fe._id])return;ge[Fe._id]=!0}Fe&&Fe.isListening()?(De=!0,Ie&&(Fe._fireAndBubble(V.pointerover,{...Ye},Re),Fe._fireAndBubble(V.pointerenter,{...Ye},Re),this[ne+"targetShape"]=Fe),Fe._fireAndBubble(V.pointermove,{...Ye})):Re&&(this._fire(V.pointerover,{evt:F,target:this,currentTarget:this,pointerId:bt}),this[ne+"targetShape"]=null)}),De||this._fire(V.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const V=de(F.type),ne=Q(F.type);if(!V)return;this.setPointersPositions(F);const fe=this[ne+"ClickStartShape"],ge=this[ne+"ClickEndShape"];var De={};let Re=!1;this._changedPointerPositions.forEach(Ft=>{const Fe=f.getCapturedShape(Ft.id)||this.getIntersection(Ft);if(Fe){if(Fe.releaseCapture(Ft.id),De[Fe._id])return;De[Fe._id]=!0}const bt=Ft.id,Ye={evt:F,pointerId:bt};let Ie=!1;o.Konva["_"+ne+"InDblClickWindow"]?(Ie=!0,clearTimeout(this[ne+"DblTimeout"])):c.DD.justDragged||(o.Konva["_"+ne+"InDblClickWindow"]=!0,clearTimeout(this[ne+"DblTimeout"])),this[ne+"DblTimeout"]=setTimeout(function(){o.Konva["_"+ne+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),Fe&&Fe.isListening()?(Re=!0,this[ne+"ClickEndShape"]=Fe,Fe._fireAndBubble(V.pointerup,{...Ye}),o.Konva["_"+ne+"ListenClick"]&&fe&&fe===Fe&&(Fe._fireAndBubble(V.pointerclick,{...Ye}),Ie&&ge&&ge===Fe&&Fe._fireAndBubble(V.pointerdblclick,{...Ye}))):(this[ne+"ClickEndShape"]=null,o.Konva["_"+ne+"ListenClick"]&&this._fire(V.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:bt}),Ie&&this._fire(V.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:bt}))}),Re||this._fire(V.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+ne+"ListenClick"]=!1,F.cancelable&&ne!=="touch"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);var V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(X,{evt:F}):this._fire(X,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);var V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(ce,{evt:F}):this._fire(ce,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const V=f.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());V&&V._fireAndBubble(b,f.createEvent(F)),f.releaseCapture(F.pointerId)}_lostpointercapture(F){f.releaseCapture(F.pointerId)}setPointersPositions(F){var V=this._getContentPosition(),ne=null,fe=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,ge=>{this._pointerPositions.push({id:ge.identifier,x:(ge.clientX-V.left)/V.scaleX,y:(ge.clientY-V.top)/V.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,ge=>{this._changedPointerPositions.push({id:ge.identifier,x:(ge.clientX-V.left)/V.scaleX,y:(ge.clientY-V.top)/V.scaleY})})):(ne=(F.clientX-V.left)/V.scaleX,fe=(F.clientY-V.top)/V.scaleY,this.pointerPos={x:ne,y:fe},this._pointerPositions=[{x:ne,y:fe,id:e.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:ne,y:fe,id:e.Util._getFirstPointerId(F)}])}_setPointerPosition(F){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!o.Konva.isBrowser){var F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}a.Stage=qe,qe.prototype.nodeType=p,(0,h._registerNode)(qe),n.Factory.addGetterSetter(qe,"container")})(Df);var Ya={},_t={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const e=Ce,n=at,i=Pe,o=rt,l=le,c=Ce,h=rr;var f="hasShadow",p="shadowRGBA",m="patternImage",C="linearGradient",w="radialGradient";let _;function y(){return _||(_=n.Util.createCanvasElement().getContext("2d"),_)}a.shapes={};function E($){const M=this.attrs.fillRule;M?$.fill(M):$.fill()}function P($){$.stroke()}function T($){$.fill()}function k($){$.stroke()}function v(){this._clearCache(f)}function x(){this._clearCache(p)}function b(){this._clearCache(m)}function R(){this._clearCache(C)}function B(){this._clearCache(w)}class O extends o.Node{constructor(M){super(M);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in a.shapes)););this.colorKey=D,a.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(m,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var M=y();const D=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const X=new n.Transform;X.translate(this.fillPatternX(),this.fillPatternY()),X.rotate(e.Konva.getAngle(this.fillPatternRotation())),X.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),X.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const W=X.getMatrix(),Z=typeof DOMMatrix>"u"?{a:W[0],b:W[1],c:W[2],d:W[3],e:W[4],f:W[5]}:new DOMMatrix(W);D.setTransform(Z)}return D}}_getLinearGradient(){return this._getCache(C,this.__getLinearGradient)}__getLinearGradient(){var M=this.fillLinearGradientColorStops();if(M){for(var D=y(),X=this.fillLinearGradientStartPoint(),W=this.fillLinearGradientEndPoint(),Z=D.createLinearGradient(X.x,X.y,W.x,W.y),K=0;K<M.length;K+=2)Z.addColorStop(M[K],M[K+1]);return Z}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){var M=this.fillRadialGradientColorStops();if(M){for(var D=y(),X=this.fillRadialGradientStartPoint(),W=this.fillRadialGradientEndPoint(),Z=D.createRadialGradient(X.x,X.y,this.fillRadialGradientStartRadius(),W.x,W.y,this.fillRadialGradientEndRadius()),K=0;K<M.length;K+=2)Z.addColorStop(M[K],M[K+1]);return Z}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){var D=this.getStage();if(!D)return!1;const X=D.bufferHitCanvas;return X.getContext().clear(),this.drawHit(X,void 0,!0),X.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const W=M||this.hasFill(),Z=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(W&&Z&&K)return!0;const oe=this.hasShadow(),ce=this.shadowForStrokeEnabled();return!!(W&&Z&&oe&&ce)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){const D=M.skipTransform,X=M.relativeTo,W=this.getSelfRect(),K=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,oe=W.width+K,ce=W.height+K,pe=!M.skipShadow&&this.hasShadow(),Oe=pe?this.shadowOffsetX():0,se=pe?this.shadowOffsetY():0,Q=oe+Math.abs(Oe),de=ce+Math.abs(se),Te=pe&&this.shadowBlur()||0,we=Q+Te*2,qe=de+Te*2,Ae={width:we,height:qe,x:-(K/2+Te)+Math.min(Oe,0)+W.x,y:-(K/2+Te)+Math.min(se,0)+W.y};return D?Ae:this._transformedRect(Ae,X)}drawScene(M,D,X){var W=this.getLayer(),Z=M||W.getCanvas(),K=Z.getContext(),oe=this._getCanvasCache(),ce=this.getSceneFunc(),pe=this.hasShadow(),Oe,se,Q=Z.isCache,de=D===this;if(!this.isVisible()&&!de)return this;if(oe){K.save();var Te=this.getAbsoluteTransform(D).getMatrix();return K.transform(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5]),this._drawCachedSceneCanvas(K),K.restore(),this}if(!ce)return this;if(K.save(),this._useBufferCanvas()&&!Q){Oe=this.getStage();const Ae=X||Oe.bufferCanvas;se=Ae.getContext(),se.clear(),se.save(),se._applyLineJoin(this);var we=this.getAbsoluteTransform(D).getMatrix();se.transform(we[0],we[1],we[2],we[3],we[4],we[5]),ce.call(this,se,this),se.restore();var qe=Ae.pixelRatio;pe&&K._applyShadow(this),K._applyOpacity(this),K._applyGlobalCompositeOperation(this),K.drawImage(Ae._canvas,0,0,Ae.width/qe,Ae.height/qe)}else{if(K._applyLineJoin(this),!de){var we=this.getAbsoluteTransform(D).getMatrix();K.transform(we[0],we[1],we[2],we[3],we[4],we[5]),K._applyOpacity(this),K._applyGlobalCompositeOperation(this)}pe&&K._applyShadow(this),ce.call(this,K,this)}return K.restore(),this}drawHit(M,D,X=!1){if(!this.shouldDrawHit(D,X))return this;var W=this.getLayer(),Z=M||W.hitCanvas,K=Z&&Z.getContext(),oe=this.hitFunc()||this.sceneFunc(),ce=this._getCanvasCache(),pe=ce&&ce.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),pe){K.save();var Oe=this.getAbsoluteTransform(D).getMatrix();return K.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),this._drawCachedHitCanvas(K),K.restore(),this}if(!oe)return this;if(K.save(),K._applyLineJoin(this),!(this===D)){var Q=this.getAbsoluteTransform(D).getMatrix();K.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return oe.call(this,K,this),K.restore(),this}drawHitFromCache(M=0){var D=this._getCanvasCache(),X=this._getCachedSceneCanvas(),W=D.hit,Z=W.getContext(),K=W.getWidth(),oe=W.getHeight(),ce,pe,Oe,se,Q,de;Z.clear(),Z.drawImage(X._canvas,0,0,K,oe);try{for(ce=Z.getImageData(0,0,K,oe),pe=ce.data,Oe=pe.length,se=n.Util._hexToRgb(this.colorKey),Q=0;Q<Oe;Q+=4)de=pe[Q+3],de>M?(pe[Q]=se.r,pe[Q+1]=se.g,pe[Q+2]=se.b,pe[Q+3]=255):pe[Q+3]=0;Z.putImageData(ce,0,0)}catch(Te){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Te.message)}return this}hasPointerCapture(M){return h.hasPointerCapture(M,this)}setPointerCapture(M){h.setPointerCapture(M,this)}releaseCapture(M){h.releaseCapture(M,this)}}a.Shape=O,O.prototype._fillFunc=E,O.prototype._strokeFunc=P,O.prototype._fillFuncHit=T,O.prototype._strokeFuncHit=k,O.prototype._centroid=!1,O.prototype.nodeType="Shape",(0,c._registerNode)(O),O.prototype.eventListeners={},O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",B),i.Factory.addGetterSetter(O,"stroke",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"strokeWidth",2,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(O,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(O,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"lineJoin"),i.Factory.addGetterSetter(O,"lineCap"),i.Factory.addGetterSetter(O,"sceneFunc"),i.Factory.addGetterSetter(O,"hitFunc"),i.Factory.addGetterSetter(O,"dash"),i.Factory.addGetterSetter(O,"dashOffset",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowColor",void 0,(0,l.getStringValidator)()),i.Factory.addGetterSetter(O,"shadowBlur",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOpacity",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(O,"shadowOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternImage"),i.Factory.addGetterSetter(O,"fill",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"fillPatternX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(O,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(O,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(O,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(O,"fillEnabled",!0),i.Factory.addGetterSetter(O,"strokeEnabled",!0),i.Factory.addGetterSetter(O,"shadowEnabled",!0),i.Factory.addGetterSetter(O,"dashEnabled",!0),i.Factory.addGetterSetter(O,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(O,"fillPriority","color"),i.Factory.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternScaleX",1,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternScaleY",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(O,"fillPatternRotation",0),i.Factory.addGetterSetter(O,"fillRule",void 0,(0,l.getStringValidator)()),i.Factory.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(_t);Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Layer=void 0;const Yr=at,tc=Jn,Di=rt,$c=Pe,P0=Cr,Xp=le,Kp=_t,qp=Ce;var Yp="#",Qp="beforeDraw",Jp="draw",jf=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Zp=jf.length;let qi=class extends tc.Container{constructor(e){super(e),this.canvas=new P0.SceneCanvas,this.hitCanvas=new P0.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Di.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=Di.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Di.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Di.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Di.Node.prototype.remove.call(this),e&&e.parentNode&&Yr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Yr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Di.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Yr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Yr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Yr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let o=0;o<Zp;o++){const l=jf[o],c=this._getIntersection({x:e.x+l.x*n,y:e.y+l.y*n}),h=c.shape;if(h)return h;if(i=!!c.antialiased,!c.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,o=i[3];if(o===255){const l=Yr.Util._rgbToHex(i[0],i[1],i[2]),c=Kp.shapes[Yp+l];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,n){var i=this.getLayer(),o=e||i&&i.getCanvas();return this._fire(Qp,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),tc.Container.prototype.drawScene.call(this,o,n),this._fire(Jp,{node:this}),this}drawHit(e,n){var i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),tc.Container.prototype.drawHit.call(this,o,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Yr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Yr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Yr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ya.Layer=qi;qi.prototype.nodeType="Layer";(0,qp._registerNode)(qi);$c.Factory.addGetterSetter(qi,"imageSmoothingEnabled",!0);$c.Factory.addGetterSetter(qi,"clearBeforeDraw",!0);$c.Factory.addGetterSetter(qi,"hitGraphEnabled",!0,(0,Xp.getBooleanValidator)());var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.FastLayer=void 0;const ev=at,tv=Ya,rv=Ce;class jc extends tv.Layer{constructor(e){super(e),this.listening(!1),ev.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Os.FastLayer=jc;jc.prototype.nodeType="FastLayer";(0,rv._registerNode)(jc);var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.Group=void 0;const nv=at,iv=Jn,av=Ce;class zc extends iv.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&nv.Util.throw("You may only add groups and shapes to groups.")}}Yi.Group=zc;zc.prototype.nodeType="Group";(0,av._registerNode)(zc);var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.Animation=void 0;const rc=Ce,b0=at,nc=function(){return rc.glob.performance&&rc.glob.performance.now?function(){return rc.glob.performance.now()}:function(){return new Date().getTime()}}();class Lr{constructor(e,n){this.id=Lr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:nc(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let o=0;o<i;o++)if(n[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Lr.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=nc(),Lr._addAnimation(this),this}stop(){return Lr._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===n){this.animations.splice(l,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const o=n[i],l=o.layers,c=o.func;o._updateFrameObject(nc());const h=l.length;let f;if(c?f=c.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<h;p++){const m=l[p];m._id!==void 0&&(e[m._id]=m)}}for(let i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=Lr;e.animations.length?(e._runFrames(),b0.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,b0.Util.requestAnimFrame(this._animationLoop))}}Qi.Animation=Lr;Lr.animations=[];Lr.animIdCounter=0;Lr.animRunning=!1;var zf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const e=at,n=Qi,i=rt,o=Ce;var l={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=1,h=2,f=3,p=0,m=["fill","stroke","shadowColor"];class C{constructor(y,E,P,T,k,v,x){this.prop=y,this.propFunc=E,this.begin=T,this._pos=T,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=k-this.begin,this.pause()}fire(y){var E=this[y];E&&E()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===h?this.setTime(y):this.state===f&&this.setTime(this.duration-y)}pause(){this.state=c,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(y){var E=this,P=y.node,T=P._id,k,v=y.easing||a.Easings.Linear,x=!!y.yoyo,b;typeof y.duration>"u"?k=.3:y.duration===0?k=.001:k=y.duration,this.node=P,this._id=p++;var R=P.getLayer()||(P instanceof o.Konva.Stage?P.getLayers():null);R||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){E.tween.onEnterFrame()},R),this.tween=new C(b,function(B){E._tweenFunc(B)},v,0,1,k*1e3,x),this._addListeners(),w.attrs[T]||(w.attrs[T]={}),w.attrs[T][this._id]||(w.attrs[T][this._id]={}),w.tweens[T]||(w.tweens[T]={});for(b in y)l[b]===void 0&&this._addAttr(b,y[b]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,E){var P=this.node,T=P._id,k,v,x,b,R,B,O,$;if(x=w.tweens[T][y],x&&delete w.attrs[T][x][y],k=P.getAttr(y),e.Util._isArray(E))if(v=[],R=Math.max(E.length,k.length),y==="points"&&E.length!==k.length&&(E.length>k.length?(O=k,k=e.Util._prepareArrayForTween(k,E,P.closed())):(B=E,E=e.Util._prepareArrayForTween(E,k,P.closed()))),y.indexOf("fill")===0)for(b=0;b<R;b++)if(b%2===0)v.push(E[b]-k[b]);else{var M=e.Util.colorToRGBA(k[b]);$=e.Util.colorToRGBA(E[b]),k[b]=M,v.push({r:$.r-M.r,g:$.g-M.g,b:$.b-M.b,a:$.a-M.a})}else for(b=0;b<R;b++)v.push(E[b]-k[b]);else m.indexOf(y)!==-1?(k=e.Util.colorToRGBA(k),$=e.Util.colorToRGBA(E),v={r:$.r-k.r,g:$.g-k.g,b:$.b-k.b,a:$.a-k.a}):v=E-k;w.attrs[T][this._id][y]={start:k,diff:v,end:E,trueEnd:B,trueStart:O},w.tweens[T][y]=this._id}_tweenFunc(y){var E=this.node,P=w.attrs[E._id][this._id],T,k,v,x,b,R,B,O;for(T in P){if(k=P[T],v=k.start,x=k.diff,O=k.end,e.Util._isArray(v))if(b=[],B=Math.max(v.length,O.length),T.indexOf("fill")===0)for(R=0;R<B;R++)R%2===0?b.push((v[R]||0)+x[R]*y):b.push("rgba("+Math.round(v[R].r+x[R].r*y)+","+Math.round(v[R].g+x[R].g*y)+","+Math.round(v[R].b+x[R].b*y)+","+(v[R].a+x[R].a*y)+")");else for(R=0;R<B;R++)b.push((v[R]||0)+x[R]*y);else m.indexOf(T)!==-1?b="rgba("+Math.round(v.r+x.r*y)+","+Math.round(v.g+x.g*y)+","+Math.round(v.b+x.b*y)+","+(v.a+x.a*y)+")":b=v+x*y;E.setAttr(T,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueEnd&&y.setAttr("points",E.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueStart&&y.points(E.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,E=this._id,P=w.tweens[y],T;this.pause();for(T in P)delete w.tweens[y][T];delete w.attrs[y][E]}}a.Tween=w,w.attrs={},w.tweens={},i.Node.prototype.to=function(_){var y=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),y&&y()};var E=new w(_);E.play()},a.Easings={BackEaseIn(_,y,E,P){var T=1.70158;return E*(_/=P)*_*((T+1)*_-T)+y},BackEaseOut(_,y,E,P){var T=1.70158;return E*((_=_/P-1)*_*((T+1)*_+T)+1)+y},BackEaseInOut(_,y,E,P){var T=1.70158;return(_/=P/2)<1?E/2*(_*_*(((T*=1.525)+1)*_-T))+y:E/2*((_-=2)*_*(((T*=1.525)+1)*_+T)+2)+y},ElasticEaseIn(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+E:(k||(k=P*.3),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),-(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y)},ElasticEaseOut(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+E:(k||(k=P*.3),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),T*Math.pow(2,-10*_)*Math.sin((_*P-v)*(2*Math.PI)/k)+E+y)},ElasticEaseInOut(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P/2)===2?y+E:(k||(k=P*(.3*1.5)),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),_<1?-.5*(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y:T*Math.pow(2,-10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k)*.5+E+y)},BounceEaseOut(_,y,E,P){return(_/=P)<1/2.75?E*(7.5625*_*_)+y:_<2/2.75?E*(7.5625*(_-=1.5/2.75)*_+.75)+y:_<2.5/2.75?E*(7.5625*(_-=2.25/2.75)*_+.9375)+y:E*(7.5625*(_-=2.625/2.75)*_+.984375)+y},BounceEaseIn(_,y,E,P){return E-a.Easings.BounceEaseOut(P-_,0,E,P)+y},BounceEaseInOut(_,y,E,P){return _<P/2?a.Easings.BounceEaseIn(_*2,0,E,P)*.5+y:a.Easings.BounceEaseOut(_*2-P,0,E,P)*.5+E*.5+y},EaseIn(_,y,E,P){return E*(_/=P)*_+y},EaseOut(_,y,E,P){return-E*(_/=P)*(_-2)+y},EaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_+y:-E/2*(--_*(_-2)-1)+y},StrongEaseIn(_,y,E,P){return E*(_/=P)*_*_*_*_+y},StrongEaseOut(_,y,E,P){return E*((_=_/P-1)*_*_*_*_+1)+y},StrongEaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_*_*_*_+y:E/2*((_-=2)*_*_*_*_+2)+y},Linear(_,y,E,P){return E*_/P+y}}})(zf);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const e=Ce,n=at,i=rt,o=Jn,l=Df,c=Ya,h=Os,f=Yi,p=Ps,m=_t,C=Qi,w=zf,_=Jr,y=Cr;a.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:o.Container,Stage:l.Stage,stages:l.stages,Layer:c.Layer,FastLayer:h.FastLayer,Group:f.Group,DD:p.DD,Shape:m.Shape,shapes:m.shapes,Animation:C.Animation,Tween:w.Tween,Easings:w.Easings,Context:_.Context,Canvas:y.Canvas}),a.default=a.Konva})(ps);var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.Arc=void 0;const ks=Pe,ov=_t,O0=Ce,Rs=le,sv=Ce;class rn extends ov.Shape{_sceneFunc(e){var n=O0.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),o=O0.Konva.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(o,Math.PI)),c=1,h=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),f=Math.sin(Math.min(o,Math.PI/2)),p=l*(l>0?e:n),m=c*n,C=h*(h>0?e:n),w=f*(f>0?n:e);return{x:p,y:i?-1*w:C,width:m-p,height:w-C}}}Ts.Arc=rn;rn.prototype._centroid=!0;rn.prototype.className="Arc";rn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,sv._registerNode)(rn);ks.Factory.addGetterSetter(rn,"innerRadius",0,(0,Rs.getNumberValidator)());ks.Factory.addGetterSetter(rn,"outerRadius",0,(0,Rs.getNumberValidator)());ks.Factory.addGetterSetter(rn,"angle",0,(0,Rs.getNumberValidator)());ks.Factory.addGetterSetter(rn,"clockwise",!1,(0,Rs.getBooleanValidator)());var Ms={},Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.Line=void 0;const Ns=Pe,lv=_t,Bf=le,uv=Ce;function Ec(a,e,n,i,o,l,c){var h=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-e,2)),f=Math.sqrt(Math.pow(o-n,2)+Math.pow(l-i,2)),p=c*h/(h+f),m=c*f/(h+f),C=n-p*(o-a),w=i-p*(l-e),_=n+m*(o-a),y=i+m*(l-e);return[C,w,_,y]}function T0(a,e){var n=a.length,i=[],o,l;for(o=2;o<n-2;o+=2)l=Ec(a[o-2],a[o-1],a[o],a[o+1],a[o+2],a[o+3],e),!isNaN(l[0])&&(i.push(l[0]),i.push(l[1]),i.push(a[o]),i.push(a[o+1]),i.push(l[2]),i.push(l[3]));return i}class Cn extends lv.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),i=n.length,o=this.tension(),l=this.closed(),c=this.bezier(),h,f,p;if(i){if(e.beginPath(),e.moveTo(n[0],n[1]),o!==0&&i>4){for(h=this.getTensionPoints(),f=h.length,p=l?0:4,l||e.quadraticCurveTo(h[0],h[1],h[2],h[3]);p<f-2;)e.bezierCurveTo(h[p++],h[p++],h[p++],h[p++],h[p++],h[p++]);l||e.quadraticCurveTo(h[f-2],h[f-1],n[i-2],n[i-1])}else if(c)for(p=2;p<i;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<i;p+=2)e.lineTo(n[p],n[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():T0(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,i=this.tension(),o=Ec(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),l=Ec(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),c=T0(e,i),h=[o[2],o[3]].concat(c).concat([l[0],l[1],e[n-2],e[n-1],l[2],l[3],o[0],o[1],e[0],e[1]]);return h}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);return{x:n,y:o,width:i-n,height:l-o}}}Qa.Line=Cn;Cn.prototype.className="Line";Cn.prototype._attrsAffectingSize=["points","bezier","tension"];(0,uv._registerNode)(Cn);Ns.Factory.addGetterSetter(Cn,"closed",!1);Ns.Factory.addGetterSetter(Cn,"bezier",!1);Ns.Factory.addGetterSetter(Cn,"tension",0,(0,Bf.getNumberValidator)());Ns.Factory.addGetterSetter(Cn,"points",[],(0,Bf.getNumberArrayValidator)());var Ji={},Uf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(c,h,f)=>{let p,m,C;p=f/2,m=0;for(let _=0;_<20;_++)C=p*a.tValues[20][_]+p,m+=a.cValues[20][_]*i(c,h,C);return p*m};a.getCubicArcLength=e;const n=(c,h,f)=>{f===void 0&&(f=1);const p=c[0]-2*c[1]+c[2],m=h[0]-2*h[1]+h[2],C=2*c[1]-2*c[0],w=2*h[1]-2*h[0],_=4*(p*p+m*m),y=4*(p*C+m*w),E=C*C+w*w;if(_===0)return f*Math.sqrt(Math.pow(c[2]-c[0],2)+Math.pow(h[2]-h[0],2));const P=y/(2*_),T=E/_,k=f+P,v=T-P*P,x=k*k+v>0?Math.sqrt(k*k+v):0,b=P*P+v>0?Math.sqrt(P*P+v):0,R=P+Math.sqrt(P*P+v)!==0?v*Math.log(Math.abs((k+x)/(P+b))):0;return Math.sqrt(_)/2*(k*x-P*b+R)};a.getQuadraticArcLength=n;function i(c,h,f){const p=o(1,f,c),m=o(1,f,h),C=p*p+m*m;return Math.sqrt(C)}const o=(c,h,f)=>{const p=f.length-1;let m,C;if(p===0)return 0;if(c===0){C=0;for(let w=0;w<=p;w++)C+=a.binomialCoefficients[p][w]*Math.pow(1-h,p-w)*Math.pow(h,w)*f[w];return C}else{m=new Array(p);for(let w=0;w<p;w++)m[w]=p*(f[w+1]-f[w]);return o(c-1,h,m)}},l=(c,h,f)=>{let p=1,m=c/h,C=(c-f(m))/h,w=0;for(;p>.001;){const _=f(m+C),y=Math.abs(c-_)/h;if(y<p)p=y,m+=C;else{const E=f(m-C),P=Math.abs(c-E)/h;P<p?(p=P,m-=C):C/=2}if(w++,w>500)break}return m};a.t2length=l})(Uf);Object.defineProperty(Ji,"__esModule",{value:!0});Ji.Path=void 0;const cv=Pe,dv=_t,hv=Ce,Gi=Uf;class yt extends dv.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=yt.parsePathData(this.data()),this.pathLength=yt.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var i=!1,o=0;o<n.length;o++){var l=n[o].command,c=n[o].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":var h=c[0],f=c[1],p=c[2],m=c[3],C=c[4],w=c[5],_=c[6],y=c[7],E=p>m?p:m,P=p>m?1:p/m,T=p>m?m/p:1;e.translate(h,f),e.rotate(_),e.scale(P,T),e.arc(0,0,E,C,C+w,1-y),e.scale(1/P,1/T),e.rotate(-_),e.translate(-h,-f);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var m=p.points[4],C=p.points[5],w=p.points[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),C<0)for(let y=m-_;y>w;y-=_){const E=yt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}else for(let y=m+_;y<w;y+=_){const E=yt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}}else if(p.command==="C")for(let y=0;y<=1;y+=.01){const E=yt.getPointOnCubicBezier(y,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(E.x,E.y)}else e=e.concat(p.points)});for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],isNaN(c)||(n=Math.min(n,c),i=Math.max(i,c)),isNaN(h)||(o=Math.min(o,h),l=Math.max(l,h));return{x:n,y:o,width:i-n,height:l-o}}getLength(){return this.pathLength}getPointAtLength(e){return yt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,o){return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n))}static getPathLength(e){let n=0;for(var i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var i,o=0,l=n.length;if(!l)return null;for(;o<l&&e>n[o].pathLength;)e-=n[o].pathLength,++o;if(o===l)return i=n[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=n[o].points.slice(0,2),{x:i[0],y:i[1]};var c=n[o],h=c.points;switch(c.command){case"L":return yt.getPointOnLine(e,c.start.x,c.start.y,h[0],h[1]);case"C":return yt.getPointOnCubicBezier((0,Gi.t2length)(e,yt.getPathLength(n),E=>(0,Gi.getCubicArcLength)([c.start.x,h[0],h[2],h[4]],[c.start.y,h[1],h[3],h[5]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return yt.getPointOnQuadraticBezier((0,Gi.t2length)(e,yt.getPathLength(n),E=>(0,Gi.getQuadraticArcLength)([c.start.x,h[0],h[2]],[c.start.y,h[1],h[3]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],p=h[1],m=h[2],C=h[3],w=h[4],_=h[5],y=h[6];return w+=_*e/c.pathLength,yt.getPointOnEllipticalArc(f,p,m,C,w,y)}return null}static getPointOnLine(e,n,i,o,l,c,h){c===void 0&&(c=n),h===void 0&&(h=i);var f=(l-i)/(o-n+1e-8),p=Math.sqrt(e*e/(1+f*f));o<n&&(p*=-1);var m=f*p,C;if(o===n)C={x:c,y:h+m};else if((h-i)/(c-n+1e-8)===f)C={x:c+p,y:h+m};else{var w,_,y=this.getLineLength(n,i,o,l),E=(c-n)*(o-n)+(h-i)*(l-i);E=E/(y*y),w=n+E*(o-n),_=i+E*(l-i);var P=this.getLineLength(c,h,w,_),T=Math.sqrt(e*e-P*P);p=Math.sqrt(T*T/(1+f*f)),o<n&&(p*=-1),m=f*p,C={x:w+p,y:_+m}}return C}static getPointOnCubicBezier(e,n,i,o,l,c,h,f,p){function m(P){return P*P*P}function C(P){return 3*P*P*(1-P)}function w(P){return 3*P*(1-P)*(1-P)}function _(P){return(1-P)*(1-P)*(1-P)}var y=f*m(e)+c*C(e)+o*w(e)+n*_(e),E=p*m(e)+h*C(e)+l*w(e)+i*_(e);return{x:y,y:E}}static getPointOnQuadraticBezier(e,n,i,o,l,c,h){function f(_){return _*_}function p(_){return 2*_*(1-_)}function m(_){return(1-_)*(1-_)}var C=c*f(e)+o*p(e)+n*m(e),w=h*f(e)+l*p(e)+i*m(e);return{x:C,y:w}}static getPointOnEllipticalArc(e,n,i,o,l,c){var h=Math.cos(c),f=Math.sin(c),p={x:i*Math.cos(l),y:o*Math.sin(l)};return{x:e+(p.x*h-p.y*f),y:n+(p.x*f+p.y*h)}}static parsePathData(e){if(!e)return[];var n=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var o=0;o<i.length;o++)n=n.replace(new RegExp(i[o],"g"),"|"+i[o]);var l=n.split("|"),c=[],h=[],f=0,p=0,m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,C;for(o=1;o<l.length;o++){var w=l[o],_=w.charAt(0);for(w=w.slice(1),h.length=0;C=m.exec(w);)h.push(C[0]);for(var y=[],E=0,P=h.length;E<P;E++){if(h[E]==="00"){y.push(0,0);continue}var T=parseFloat(h[E]);isNaN(T)?y.push(0):y.push(T)}for(;y.length>0&&!isNaN(y[0]);){var k="",v=[],x=f,b=p,R,B,O,$,M,D,X,W,Z,K;switch(_){case"l":f+=y.shift(),p+=y.shift(),k="L",v.push(f,p);break;case"L":f=y.shift(),p=y.shift(),v.push(f,p);break;case"m":var oe=y.shift(),ce=y.shift();if(f+=oe,p+=ce,k="M",c.length>2&&c[c.length-1].command==="z"){for(var pe=c.length-2;pe>=0;pe--)if(c[pe].command==="M"){f=c[pe].points[0]+oe,p=c[pe].points[1]+ce;break}}v.push(f,p),_="l";break;case"M":f=y.shift(),p=y.shift(),k="M",v.push(f,p),_="L";break;case"h":f+=y.shift(),k="L",v.push(f,p);break;case"H":f=y.shift(),k="L",v.push(f,p);break;case"v":p+=y.shift(),k="L",v.push(f,p);break;case"V":p=y.shift(),k="L",v.push(f,p);break;case"C":v.push(y.shift(),y.shift(),y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"c":v.push(f+y.shift(),p+y.shift(),f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"S":B=f,O=p,R=c[c.length-1],R.command==="C"&&(B=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(B,O,y.shift(),y.shift()),f=y.shift(),p=y.shift(),k="C",v.push(f,p);break;case"s":B=f,O=p,R=c[c.length-1],R.command==="C"&&(B=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(B,O,f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"Q":v.push(y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"q":v.push(f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="Q",v.push(f,p);break;case"T":B=f,O=p,R=c[c.length-1],R.command==="Q"&&(B=f+(f-R.points[0]),O=p+(p-R.points[1])),f=y.shift(),p=y.shift(),k="Q",v.push(B,O,f,p);break;case"t":B=f,O=p,R=c[c.length-1],R.command==="Q"&&(B=f+(f-R.points[0]),O=p+(p-R.points[1])),f+=y.shift(),p+=y.shift(),k="Q",v.push(B,O,f,p);break;case"A":$=y.shift(),M=y.shift(),D=y.shift(),X=y.shift(),W=y.shift(),Z=f,K=p,f=y.shift(),p=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,K,f,p,X,W,$,M,D);break;case"a":$=y.shift(),M=y.shift(),D=y.shift(),X=y.shift(),W=y.shift(),Z=f,K=p,f+=y.shift(),p+=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,K,f,p,X,W,$,M,D);break}c.push({command:k||_,points:v,start:{x,y:b},pathLength:this.calcLength(x,b,k||_,v)})}(_==="z"||_==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(e,n,i,o){var l,c,h,f,p=yt;switch(i){case"L":return p.getLineLength(e,n,o[0],o[1]);case"C":return(0,Gi.getCubicArcLength)([e,o[0],o[2],o[4]],[n,o[1],o[3],o[5]],1);case"Q":return(0,Gi.getQuadraticArcLength)([e,o[0],o[2]],[n,o[1],o[3]],1);case"A":l=0;var m=o[4],C=o[5],w=o[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),c=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],m,0),C<0)for(f=m-_;f>w;f-=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;else for(f=m+_;f<w;f+=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;return h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],w,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),l}return 0}static convertEndpointToCenterParameterization(e,n,i,o,l,c,h,f,p){var m=p*(Math.PI/180),C=Math.cos(m)*(e-i)/2+Math.sin(m)*(n-o)/2,w=-1*Math.sin(m)*(e-i)/2+Math.cos(m)*(n-o)/2,_=C*C/(h*h)+w*w/(f*f);_>1&&(h*=Math.sqrt(_),f*=Math.sqrt(_));var y=Math.sqrt((h*h*(f*f)-h*h*(w*w)-f*f*(C*C))/(h*h*(w*w)+f*f*(C*C)));l===c&&(y*=-1),isNaN(y)&&(y=0);var E=y*h*w/f,P=y*-f*C/h,T=(e+i)/2+Math.cos(m)*E-Math.sin(m)*P,k=(n+o)/2+Math.sin(m)*E+Math.cos(m)*P,v=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},x=function(M,D){return(M[0]*D[0]+M[1]*D[1])/(v(M)*v(D))},b=function(M,D){return(M[0]*D[1]<M[1]*D[0]?-1:1)*Math.acos(x(M,D))},R=b([1,0],[(C-E)/h,(w-P)/f]),B=[(C-E)/h,(w-P)/f],O=[(-1*C-E)/h,(-1*w-P)/f],$=b(B,O);return x(B,O)<=-1&&($=Math.PI),x(B,O)>=1&&($=0),c===0&&$>0&&($=$-2*Math.PI),c===1&&$<0&&($=$+2*Math.PI),[T,k,h,f,R,$,m,c]}}Ji.Path=yt;yt.prototype.className="Path";yt.prototype._attrsAffectingSize=["data"];(0,hv._registerNode)(yt);cv.Factory.addGetterSetter(yt,"data");Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Arrow=void 0;const As=Pe,fv=Qa,Hf=le,gv=Ce,k0=Ji;class ei extends fv.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,i=this.points(),o=i,l=this.tension()!==0&&i.length>4;l&&(o=this.getTensionPoints());var c=this.pointerLength(),h=i.length,f,p;if(l){const w=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[h-2],i[h-1]],_=k0.Path.calcLength(o[o.length-4],o[o.length-3],"C",w),y=k0.Path.getPointOnQuadraticBezier(Math.min(1,1-c/_),w[0],w[1],w[2],w[3],w[4],w[5]);f=i[h-2]-y.x,p=i[h-1]-y.y}else f=i[h-2]-i[h-4],p=i[h-1]-i[h-3];var m=(Math.atan2(p,f)+n)%n,C=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[h-2],i[h-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),l?(f=(o[0]+o[2])/2-i[0],p=(o[1]+o[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-f)+n)%n),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Ms.Arrow=ei;ei.prototype.className="Arrow";(0,gv._registerNode)(ei);As.Factory.addGetterSetter(ei,"pointerLength",10,(0,Hf.getNumberValidator)());As.Factory.addGetterSetter(ei,"pointerWidth",10,(0,Hf.getNumberValidator)());As.Factory.addGetterSetter(ei,"pointerAtBeginning",!1);As.Factory.addGetterSetter(ei,"pointerAtEnding",!0);var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.Circle=void 0;const pv=Pe,vv=_t,mv=le,yv=Ce;class Zi extends vv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Fs.Circle=Zi;Zi.prototype._centroid=!0;Zi.prototype.className="Circle";Zi.prototype._attrsAffectingSize=["radius"];(0,yv._registerNode)(Zi);pv.Factory.addGetterSetter(Zi,"radius",0,(0,mv.getNumberValidator)());var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.Ellipse=void 0;const Bc=Pe,_v=_t,Vf=le,Sv=Ce;class Pn extends _v.Shape{_sceneFunc(e){var n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Is.Ellipse=Pn;Pn.prototype.className="Ellipse";Pn.prototype._centroid=!0;Pn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Sv._registerNode)(Pn);Bc.Factory.addComponentsGetterSetter(Pn,"radius",["x","y"]);Bc.Factory.addGetterSetter(Pn,"radiusX",0,(0,Vf.getNumberValidator)());Bc.Factory.addGetterSetter(Pn,"radiusY",0,(0,Vf.getNumberValidator)());var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.Image=void 0;const ic=at,ti=Pe,xv=_t,wv=Ce,Ja=le;let Gr=class Wf extends xv.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),l=this.attrs.image;let c;if(l){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?c=[l,this.cropX(),this.cropY(),h,f,0,0,n,i]:c=[l,0,0,n,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?ic.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),l&&(o&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){var n=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?ic.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,i=null){var o=ic.Util.createImageElement();o.onload=function(){var l=new Wf({image:o});n(l)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}};Ls.Image=Gr;Gr.prototype.className="Image";(0,wv._registerNode)(Gr);ti.Factory.addGetterSetter(Gr,"cornerRadius",0,(0,Ja.getNumberOrArrayOfNumbersValidator)(4));ti.Factory.addGetterSetter(Gr,"image");ti.Factory.addComponentsGetterSetter(Gr,"crop",["x","y","width","height"]);ti.Factory.addGetterSetter(Gr,"cropX",0,(0,Ja.getNumberValidator)());ti.Factory.addGetterSetter(Gr,"cropY",0,(0,Ja.getNumberValidator)());ti.Factory.addGetterSetter(Gr,"cropWidth",0,(0,Ja.getNumberValidator)());ti.Factory.addGetterSetter(Gr,"cropHeight",0,(0,Ja.getNumberValidator)());var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.Tag=Hi.Label=void 0;const Ds=Pe,Ev=_t,Cv=Yi,Uc=le,Xf=Ce;var Kf=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Pv="Change.konva",bv="none",Cc="up",Pc="right",bc="down",Oc="left",Ov=Kf.length;class Hc extends Cv.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,i,o=function(){n._sync()};for(i=0;i<Ov;i++)e.on(Kf[i]+Pv,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),i,o,l,c,h,f,p;if(e&&n){switch(i=e.width(),o=e.height(),l=n.pointerDirection(),c=n.pointerWidth(),p=n.pointerHeight(),h=0,f=0,l){case Cc:h=i/2,f=-1*p;break;case Pc:h=i+c,f=o/2;break;case bc:h=i/2,f=o+p;break;case Oc:h=-1*c,f=o/2;break}n.setAttrs({x:-1*h,y:-1*f,width:i,height:o}),e.setAttrs({x:-1*h,y:-1*f})}}}Hi.Label=Hc;Hc.prototype.className="Label";(0,Xf._registerNode)(Hc);class ri extends Ev.Shape{_sceneFunc(e){var n=this.width(),i=this.height(),o=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),h=this.cornerRadius();let f=0,p=0,m=0,C=0;typeof h=="number"?f=p=m=C=Math.min(h,n/2,i/2):(f=Math.min(h[0]||0,n/2,i/2),p=Math.min(h[1]||0,n/2,i/2),C=Math.min(h[2]||0,n/2,i/2),m=Math.min(h[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(f,0),o===Cc&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*c),e.lineTo((n+l)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),o===Pc&&(e.lineTo(n,(i-c)/2),e.lineTo(n+l,i/2),e.lineTo(n,(i+c)/2)),e.lineTo(n,i-C),e.arc(n-C,i-C,C,0,Math.PI/2,!1),o===bc&&(e.lineTo((n+l)/2,i),e.lineTo(n/2,i+c),e.lineTo((n-l)/2,i)),e.lineTo(m,i),e.arc(m,i-m,m,Math.PI/2,Math.PI,!1),o===Oc&&(e.lineTo(0,(i+c)/2),e.lineTo(-1*l,i/2),e.lineTo(0,(i-c)/2)),e.lineTo(0,f),e.arc(f,f,f,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,i=this.pointerWidth(),o=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),h=this.height();return l===Cc?(n-=o,h+=o):l===bc?h+=o:l===Oc?(e-=i*1.5,c+=i):l===Pc&&(c+=i*1.5),{x:e,y:n,width:c,height:h}}}Hi.Tag=ri;ri.prototype.className="Tag";(0,Xf._registerNode)(ri);Ds.Factory.addGetterSetter(ri,"pointerDirection",bv);Ds.Factory.addGetterSetter(ri,"pointerWidth",0,(0,Uc.getNumberValidator)());Ds.Factory.addGetterSetter(ri,"pointerHeight",0,(0,Uc.getNumberValidator)());Ds.Factory.addGetterSetter(ri,"cornerRadius",0,(0,Uc.getNumberOrArrayOfNumbersValidator)(4));var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.Rect=void 0;const Tv=Pe,kv=_t,Rv=Ce,Mv=at,Nv=le;let Gs=class extends kv.Shape{_sceneFunc(e){var n=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),n?Mv.Util.drawRoundedRectPath(e,i,o,n):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};Za.Rect=Gs;Gs.prototype.className="Rect";(0,Rv._registerNode)(Gs);Tv.Factory.addGetterSetter(Gs,"cornerRadius",0,(0,Nv.getNumberOrArrayOfNumbersValidator)(4));var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.RegularPolygon=void 0;const qf=Pe,Av=_t,Yf=le,Fv=Ce;class ni extends Av.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var o=0;o<e;o++)i.push({x:n*Math.sin(o*2*Math.PI/e),y:-1*n*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();var n=e[0].x,i=e[0].y,o=e[0].x,l=e[0].y;return e.forEach(c=>{n=Math.min(n,c.x),i=Math.max(i,c.x),o=Math.min(o,c.y),l=Math.max(l,c.y)}),{x:n,y:o,width:i-n,height:l-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}$s.RegularPolygon=ni;ni.prototype.className="RegularPolygon";ni.prototype._centroid=!0;ni.prototype._attrsAffectingSize=["radius"];(0,Fv._registerNode)(ni);qf.Factory.addGetterSetter(ni,"radius",0,(0,Yf.getNumberValidator)());qf.Factory.addGetterSetter(ni,"sides",0,(0,Yf.getNumberValidator)());var js={};Object.defineProperty(js,"__esModule",{value:!0});js.Ring=void 0;const Qf=Pe,Iv=_t,Jf=le,Lv=Ce;var R0=Math.PI*2;class ii extends Iv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,R0,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),R0,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}js.Ring=ii;ii.prototype.className="Ring";ii.prototype._centroid=!0;ii.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Lv._registerNode)(ii);Qf.Factory.addGetterSetter(ii,"innerRadius",0,(0,Jf.getNumberValidator)());Qf.Factory.addGetterSetter(ii,"outerRadius",0,(0,Jf.getNumberValidator)());var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.Sprite=void 0;const ai=Pe,Dv=_t,Gv=Qi,Zf=le,$v=Ce;class $r extends Dv.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Gv.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+0],f=l[o+1],p=l[o+2],m=l[o+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,m),e.closePath(),e.fillStrokeShape(this)),C)if(c){var w=c[n],_=i*2;e.drawImage(C,h,f,p,m,w[_+0],w[_+1],p,m)}else e.drawImage(C,h,f,p,m,0,0,p,m)}_hitFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+2],f=l[o+3];if(e.beginPath(),c){var p=c[n],m=i*2;e.rect(p[m+0],p[m+1],h,f)}else e.rect(0,0,h,f);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),i=this.animations(),o=i[n],l=o.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}zs.Sprite=$r;$r.prototype.className="Sprite";(0,$v._registerNode)($r);ai.Factory.addGetterSetter($r,"animation");ai.Factory.addGetterSetter($r,"animations");ai.Factory.addGetterSetter($r,"frameOffsets");ai.Factory.addGetterSetter($r,"image");ai.Factory.addGetterSetter($r,"frameIndex",0,(0,Zf.getNumberValidator)());ai.Factory.addGetterSetter($r,"frameRate",17,(0,Zf.getNumberValidator)());ai.Factory.backCompat($r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Star=void 0;const Vc=Pe,jv=_t,Wc=le,zv=Ce;class bn extends jv.Shape{_sceneFunc(e){var n=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var l=1;l<o*2;l++){var c=l%2===0?i:n,h=c*Math.sin(l*Math.PI/o),f=-1*c*Math.cos(l*Math.PI/o);e.lineTo(h,f)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Bs.Star=bn;bn.prototype.className="Star";bn.prototype._centroid=!0;bn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,zv._registerNode)(bn);Vc.Factory.addGetterSetter(bn,"numPoints",5,(0,Wc.getNumberValidator)());Vc.Factory.addGetterSetter(bn,"innerRadius",0,(0,Wc.getNumberValidator)());Vc.Factory.addGetterSetter(bn,"outerRadius",0,(0,Wc.getNumberValidator)());var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Text=Qn.stringToArray=void 0;const Tc=at,zt=Pe,Bv=_t,On=le,Uv=Ce;function e1(a){return Array.from(a)}Qn.stringToArray=e1;var $i="auto",Hv="center",t1="inherit",Ia="justify",Vv="Change.konva",Wv="2d",M0="-",r1="left",Xv="text",Kv="Text",qv="top",Yv="bottom",N0="middle",n1="normal",Qv="px ",ns=" ",Jv="right",A0="rtl",Zv="word",em="char",F0="none",ac="…",i1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],tm=i1.length;function rm(a){return a.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}var is;function oc(){return is||(is=Tc.Util.createCanvasElement().getContext(Wv),is)}function nm(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function im(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function am(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}let lt=class extends Bv.Shape{constructor(e){super(am(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<tm;n++)this.on(i1[n]+Vv,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,i=n.length;if(this.text()){var o=this.padding(),l=this.fontSize(),c=this.lineHeight()*l,h=this.verticalAlign(),f=this.direction(),p=0,m=this.align(),C=this.getWidth(),w=this.letterSpacing(),_=this.fill(),y=this.textDecoration(),E=y.indexOf("underline")!==-1,P=y.indexOf("line-through")!==-1,T;f=f===t1?e.direction:f;var k=0,k=c/2,v=0,x=0;for(f===A0&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",N0),e.setAttr("textAlign",r1),h===N0?p=(this.getHeight()-i*c-o*2)/2:h===Yv&&(p=this.getHeight()-i*c-o*2),e.translate(o,p+o),T=0;T<i;T++){var v=0,x=0,b=n[T],R=b.text,B=b.width,O=b.lastInParagraph,$,M,D;if(e.save(),m===Jv?v+=C-B-o*2:m===Hv&&(v+=(C-B-o*2)/2),E){e.save(),e.beginPath(),e.moveTo(v,k+x+Math.round(l/2)),$=R.split(" ").length-1,M=$===0,D=m===Ia&&!O?C-o*2:B,e.lineTo(v+Math.round(D),k+x+Math.round(l/2)),e.lineWidth=l/15;const ce=this._getLinearGradient();e.strokeStyle=ce||_,e.stroke(),e.restore()}if(P){e.save(),e.beginPath(),e.moveTo(v,k+x),$=R.split(" ").length-1,M=$===0,D=m===Ia&&O&&!M?C-o*2:B,e.lineTo(v+Math.round(D),k+x),e.lineWidth=l/15;const ce=this._getLinearGradient();e.strokeStyle=ce||_,e.stroke(),e.restore()}if(f!==A0&&(w!==0||m===Ia)){$=R.split(" ").length-1;for(var X=e1(R),W=0;W<X.length;W++){var Z=X[W];Z===" "&&!O&&m===Ia&&(v+=(C-o*2-B)/$),this._partialTextX=v,this._partialTextY=k+x,this._partialText=Z,e.fillStrokeShape(this),v+=this.measureSize(Z).width+w}}else w!==0&&e.setAttr("letterSpacing",`${w}px`),this._partialTextX=v,this._partialTextY=k+x,this._partialText=R,e.fillStrokeShape(this);e.restore(),i>1&&(k+=c)}}}_hitFunc(e){var n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=Tc.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Xv,n),this}getWidth(){var e=this.attrs.width===$i||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===$i||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Tc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=oc(),i=this.fontSize(),o;return n.save(),n.font=this._getContextFont(),o=n.measureText(e),n.restore(),{width:o.width,height:i}}_getContextFont(){return this.fontStyle()+ns+this.fontVariant()+ns+(this.fontSize()+Qv)+rm(this.fontFamily())}_addTextLine(e){this.align()===Ia&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),i=e.length;return oc().measureText(e).width+(i?n*(i-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),i=0,o=this.lineHeight()*n,l=this.attrs.width,c=this.attrs.height,h=l!==$i&&l!==void 0,f=c!==$i&&c!==void 0,p=this.padding(),m=l-p*2,C=c-p*2,w=0,_=this.wrap(),y=_!==F0,E=_!==em&&y,P=this.ellipsis();this.textArr=[],oc().font=this._getContextFont();for(var T=P?this._getTextWidth(ac):0,k=0,v=e.length;k<v;++k){var x=e[k],b=this._getTextWidth(x);if(h&&b>m)for(;x.length>0;){for(var R=0,B=x.length,O="",$=0;R<B;){var M=R+B>>>1,D=x.slice(0,M+1),X=this._getTextWidth(D)+T;X<=m?(R=M+1,O=D,$=X):B=M}if(O){if(E){var W,Z=x[O.length],K=Z===ns||Z===M0;K&&$<=m?W=O.length:W=Math.max(O.lastIndexOf(ns),O.lastIndexOf(M0))+1,W>0&&(R=W,O=O.slice(0,R),$=this._getTextWidth(O))}O=O.trimRight(),this._addTextLine(O),i=Math.max(i,$),w+=o;var oe=this._shouldHandleEllipsis(w);if(oe){this._tryToAddEllipsisToLastLine();break}if(x=x.slice(R),x=x.trimLeft(),x.length>0&&(b=this._getTextWidth(x),b<=m)){this._addTextLine(x),w+=o,i=Math.max(i,b);break}}else break}else this._addTextLine(x),w+=o,i=Math.max(i,b),this._shouldHandleEllipsis(w)&&k<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&w+o>C)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){var n=+this.fontSize(),i=this.lineHeight()*n,o=this.attrs.height,l=o!==$i&&o!==void 0,c=this.padding(),h=o-c*2,f=this.wrap(),p=f!==F0;return!p||l&&e+i>h}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==$i&&e!==void 0,i=this.padding(),o=e-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];if(!(!c||!l)){if(n){var h=this._getTextWidth(c.text+ac)<o;h||(c.text=c.text.slice(0,c.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+ac)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};Qn.Text=lt;lt.prototype._fillFunc=nm;lt.prototype._strokeFunc=im;lt.prototype.className=Kv;lt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Uv._registerNode)(lt);zt.Factory.overWriteSetter(lt,"width",(0,On.getNumberOrAutoValidator)());zt.Factory.overWriteSetter(lt,"height",(0,On.getNumberOrAutoValidator)());zt.Factory.addGetterSetter(lt,"direction",t1);zt.Factory.addGetterSetter(lt,"fontFamily","Arial");zt.Factory.addGetterSetter(lt,"fontSize",12,(0,On.getNumberValidator)());zt.Factory.addGetterSetter(lt,"fontStyle",n1);zt.Factory.addGetterSetter(lt,"fontVariant",n1);zt.Factory.addGetterSetter(lt,"padding",0,(0,On.getNumberValidator)());zt.Factory.addGetterSetter(lt,"align",r1);zt.Factory.addGetterSetter(lt,"verticalAlign",qv);zt.Factory.addGetterSetter(lt,"lineHeight",1,(0,On.getNumberValidator)());zt.Factory.addGetterSetter(lt,"wrap",Zv);zt.Factory.addGetterSetter(lt,"ellipsis",!1,(0,On.getBooleanValidator)());zt.Factory.addGetterSetter(lt,"letterSpacing",0,(0,On.getNumberValidator)());zt.Factory.addGetterSetter(lt,"text","",(0,On.getStringValidator)());zt.Factory.addGetterSetter(lt,"textDecoration","");var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.TextPath=void 0;const sc=at,Pr=Pe,om=_t,La=Ji,lc=Qn,a1=le,sm=Ce;var lm="",o1="normal";function s1(a){a.fillText(this.partialText,0,0)}function l1(a){a.strokeText(this.partialText,0,0)}class St extends om.Shape{constructor(e){super(e),this.dummyCanvas=sc.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return La.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:La.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=La.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),i=this.fill(),o=this.fontSize(),l=this.glyphInfo;n==="underline"&&e.beginPath();for(var c=0;c<l.length;c++){e.save();var h=l[c].p0;e.translate(h.x,h.y),e.rotate(l[c].rotation),this.partialText=l[c].text,e.fillStrokeShape(this),n==="underline"&&(c===0&&e.moveTo(0,o/2+1),e.lineTo(o,o/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;e.moveTo(i.x,i.y)}for(var o=0;o<n.length;o++){var l=n[o].p1;e.lineTo(l.x,l.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return sc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return lc.Text.prototype.setText.call(this,e)}_getContextFont(){return lc.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),l=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let h=0;o==="center"&&(h=Math.max(0,this.pathLength/2-c/2)),o==="right"&&(h=Math.max(0,this.pathLength-c));const f=(0,lc.stringToArray)(this.text());let p=h;for(var m=0;m<f.length;m++){const C=this._getPointAtLength(p);if(!C)return;let w=this._getTextSize(f[m]).width+i;if(f[m]===" "&&o==="justify"){const k=this.text().split(" ").length-1;w+=(this.pathLength-c)/k}const _=this._getPointAtLength(p+w);if(!_)return;const y=La.Path.getLineLength(C.x,C.y,_.x,_.y);let E=0;if(l)try{E=l(f[m-1],f[m])*this.fontSize()}catch{E=0}C.x+=E,_.x+=E,this.textWidth+=E;const P=La.Path.getPointOnLine(E+y/2,C.x,C.y,_.x,_.y),T=Math.atan2(_.y-C.y,_.x-C.x);this.glyphInfo.push({transposeX:P.x,transposeY:P.y,text:f[m],rotation:T,p0:C,p1:_}),p+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});for(var n=e[0]||0,i=e[0]||0,o=e[1]||0,l=e[1]||0,c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);var p=this.fontSize();return{x:n-p/2,y:o-p/2,width:i-n+p,height:l-o+p}}destroy(){return sc.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Us.TextPath=St;St.prototype._fillFunc=s1;St.prototype._strokeFunc=l1;St.prototype._fillFuncHit=s1;St.prototype._strokeFuncHit=l1;St.prototype.className="TextPath";St.prototype._attrsAffectingSize=["text","fontSize","data"];(0,sm._registerNode)(St);Pr.Factory.addGetterSetter(St,"data");Pr.Factory.addGetterSetter(St,"fontFamily","Arial");Pr.Factory.addGetterSetter(St,"fontSize",12,(0,a1.getNumberValidator)());Pr.Factory.addGetterSetter(St,"fontStyle",o1);Pr.Factory.addGetterSetter(St,"align","left");Pr.Factory.addGetterSetter(St,"letterSpacing",0,(0,a1.getNumberValidator)());Pr.Factory.addGetterSetter(St,"textBaseline","middle");Pr.Factory.addGetterSetter(St,"fontVariant",o1);Pr.Factory.addGetterSetter(St,"text",lm);Pr.Factory.addGetterSetter(St,"textDecoration",null);Pr.Factory.addGetterSetter(St,"kerningFunc",null);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Transformer=void 0;const We=at,ze=Pe,I0=rt,um=_t,cm=Za,L0=Yi,Er=Ce,Tn=le,dm=Ce;var u1="tr-konva",hm=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${u1}`).join(" "),D0="nodesRect",fm=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],gm={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const pm="ontouchstart"in Er.Konva._global;function vm(a,e,n){if(a==="rotater")return n;e+=We.Util.degToRad(gm[a]||0);var i=(We.Util.radToDeg(e)%360+360)%360;return We.Util._inRange(i,315+22.5,360)||We.Util._inRange(i,0,22.5)?"ns-resize":We.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":We.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":We.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":We.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":We.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":We.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":We.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(We.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var ms=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],G0=1e8;function mm(a){return{x:a.x+a.width/2*Math.cos(a.rotation)+a.height/2*Math.sin(-a.rotation),y:a.y+a.height/2*Math.cos(a.rotation)+a.width/2*Math.sin(a.rotation)}}function c1(a,e,n){const i=n.x+(a.x-n.x)*Math.cos(e)-(a.y-n.y)*Math.sin(e),o=n.y+(a.x-n.x)*Math.sin(e)+(a.y-n.y)*Math.cos(e);return{...a,rotation:a.rotation+e,x:i,y:o}}function ym(a,e){const n=mm(a);return c1(a,e,n)}function _m(a,e,n){let i=e;for(let o=0;o<a.length;o++){const l=Er.Konva.getAngle(a[o]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<n&&(i=l)}return i}let kc=0;class Ne extends L0.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(hm,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return We.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u1+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(o=>o.isAncestorOf(this)?(We.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},c=o._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");o.on(c,l),o.on(fm.map(h=>h+`.${this._getEventNamespace()}`).join(" "),l),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(o)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const o=e.getAbsolutePosition(),l=o.x-n.x,c=o.y-n.y;this.nodes().forEach(h=>{if(h===e||h.isDragging())return;const f=h.getAbsolutePosition();h.setAbsolutePosition({x:f.x+l,y:f.y+c}),h.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(D0),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(D0,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){var o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(i),c=e.getAbsolutePosition(i),h=o.x*l.x-e.offsetX()*l.x,f=o.y*l.y-e.offsetY()*l.y;const p=(Er.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:c.x+h*Math.cos(p)+f*Math.sin(-p),y:c.y+f*Math.cos(p)+h*Math.sin(p),width:o.width*l.x,height:o.height*l.y,rotation:p};return c1(m,-Er.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-G0,y:-G0,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var C=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],w=p.getAbsoluteTransform();C.forEach(function(_){var y=w.point(_);n.push(y)})});const i=new We.Transform;i.rotate(-Er.Konva.getAngle(this.rotation()));var o=1/0,l=1/0,c=-1/0,h=-1/0;n.forEach(function(p){var m=i.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),i.invert();const f=i.point({x:o,y:l});return{x:f.x,y:f.y,width:c-o,height:h-l,rotation:Er.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ms.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new cm.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:pm?10:"auto"}),i=this;n.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),n.on("dragstart",o=>{n.stopDrag(),o.cancelBubble=!0}),n.on("dragend",o=>{o.cancelBubble=!0}),n.on("mouseenter",()=>{var o=Er.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=vm(e,o,l);n.getStage().content&&(n.getStage().content.style.cursor=c),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new um.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,i){var o=i.getParent(),l=o.padding();n.beginPath(),n.rect(-l,-l,i.width()+l*2,i.height()+l*2),n.moveTo(i.width()/2,-l),o.rotateEnabled()&&o.rotateLineVisible()&&n.lineTo(i.width()/2,-o.rotateAnchorOffset()*We.Util._sign(i.height())-l),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(this.shouldOverdrawWholeArea()){var o=this.padding();n.beginPath(),n.rect(-o,-o,i.width()+o*2,i.height()+o*2),n.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,o=n.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var c=e.target.getAbsolutePosition(),h=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-c.x,y:h.y-c.y},kc++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:e.evt,target:f})})}_handleMouseMove(e){var n,i,o,l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const h=c.getPointerPosition();let f={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const p=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,e)),l.setAbsolutePosition(f);const m=l.getAbsolutePosition();if(!(p.x===m.x&&p.y===m.y)){if(this._movingAnchorName==="rotater"){var C=this._getNodeRect();n=l.x()-C.width/2,i=-l.y()+C.height/2;let W=Math.atan2(-i,n)+Math.PI/2;C.height<0&&(W-=Math.PI);var w=Er.Konva.getAngle(this.rotation());const Z=w+W,K=Er.Konva.getAngle(this.rotationSnapTolerance()),ce=_m(this.rotationSnaps(),Z,K)-C.rotation,pe=ym(C,ce);this._fitNodesInto(pe,e);return}var _=this.shiftBehavior(),y;_==="inverted"?y=this.keepRatio()&&!e.shiftKey:_==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;var v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-left").x()>E.x?-1:1,T=this.findOne(".top-left").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-left").x(E.x-n),this.findOne(".top-left").y(E.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-right").x()<E.x?-1:1,T=this.findOne(".top-right").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-right").x(E.x+n),this.findOne(".top-right").y(E.y-i)}var k=l.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(l.y()-E.y,2));var P=E.x<l.x()?-1:1,T=l.y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,l.x(E.x-n),l.y(E.y+i)}k=l.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(l.y()-E.y,2));var P=this.findOne(".bottom-right").x()<E.x?-1:1,T=this.findOne(".bottom-right").y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".bottom-right").x(E.x+n),this.findOne(".bottom-right").y(E.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||e.altKey;if(v){var x=this.findOne(".top-left"),b=this.findOne(".bottom-right"),R=x.x(),B=x.y(),O=this.getWidth()-b.x(),$=this.getHeight()-b.y();b.move({x:-R,y:-B}),x.move({x:O,y:$})}var M=this.findOne(".top-left").getAbsolutePosition();n=M.x,i=M.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:D,height:X,rotation:Er.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();kc--,this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:e,target:i})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var i=this._getNodeRect();const o=1;if(We.Util._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(We.Util._inRange(e.height,-this.padding()*2-o,o)){this.update();return}var l=new We.Transform;if(l.rotate(Er.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const w=l.point({x:-this.padding()*2,y:0});e.x+=w.x,e.y+=w.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const w=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const w=l.point({x:0,y:-this.padding()*2});e.x+=w.x,e.y+=w.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const w=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const w=this.boundBoxFunc()(i,e);w?e=w:We.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,h=new We.Transform;h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.width/c,i.height/c);const f=new We.Transform,p=e.width/c,m=e.height/c;this.flipEnabled()===!1?(f.translate(e.x,e.y),f.rotate(e.rotation),f.translate(e.width<0?e.width:0,e.height<0?e.height:0),f.scale(Math.abs(p),Math.abs(m))):(f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(p,m));const C=f.multiply(h.invert());this._nodes.forEach(w=>{var _;const y=w.getParent().getAbsoluteTransform(),E=w.getTransform().copy();E.translate(w.offsetX(),w.offsetY());const P=new We.Transform;P.multiply(y.copy().invert()).multiply(C).multiply(y).multiply(E);const T=P.decompose();w.setAttrs(T),(_=w.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(We.Util._getRotation(e.rotation)),this._nodes.forEach(w=>{this._fire("transform",{evt:n,target:w}),w._fire("transform",{evt:n,target:w})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(We.Util._getRotation(n.rotation));var i=n.width,o=n.height,l=this.enabledAnchors(),c=this.resizeEnabled(),h=this.padding(),f=this.anchorSize();const p=this.find("._anchor");p.forEach(C=>{C.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+h,offsetY:f/2+h,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+h,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-h,offsetY:f/2+h,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+h,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-h,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-h,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*We.Util._sign(o)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(C=>{m(C)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),L0.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return I0.Node.prototype.toObject.call(this)}clone(e){var n=I0.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Hs.Transformer=Ne;Ne.isTransforming=()=>kc>0;function Sm(a){return a instanceof Array||We.Util.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(e){ms.indexOf(e)===-1&&We.Util.warn("Unknown anchor name: "+e+". Available names are: "+ms.join(", "))}),a||[]}Ne.prototype.className="Transformer";(0,dm._registerNode)(Ne);ze.Factory.addGetterSetter(Ne,"enabledAnchors",ms,Sm);ze.Factory.addGetterSetter(Ne,"flipEnabled",!0,(0,Tn.getBooleanValidator)());ze.Factory.addGetterSetter(Ne,"resizeEnabled",!0);ze.Factory.addGetterSetter(Ne,"anchorSize",10,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"rotateEnabled",!0);ze.Factory.addGetterSetter(Ne,"rotateLineVisible",!0);ze.Factory.addGetterSetter(Ne,"rotationSnaps",[]);ze.Factory.addGetterSetter(Ne,"rotateAnchorOffset",50,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"rotateAnchorCursor","crosshair");ze.Factory.addGetterSetter(Ne,"rotationSnapTolerance",5,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"borderEnabled",!0);ze.Factory.addGetterSetter(Ne,"anchorStroke","rgb(0, 161, 255)");ze.Factory.addGetterSetter(Ne,"anchorStrokeWidth",1,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"anchorFill","white");ze.Factory.addGetterSetter(Ne,"anchorCornerRadius",0,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"borderStroke","rgb(0, 161, 255)");ze.Factory.addGetterSetter(Ne,"borderStrokeWidth",1,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"borderDash");ze.Factory.addGetterSetter(Ne,"keepRatio",!0);ze.Factory.addGetterSetter(Ne,"shiftBehavior","default");ze.Factory.addGetterSetter(Ne,"centeredScaling",!1);ze.Factory.addGetterSetter(Ne,"ignoreStroke",!1);ze.Factory.addGetterSetter(Ne,"padding",0,(0,Tn.getNumberValidator)());ze.Factory.addGetterSetter(Ne,"node");ze.Factory.addGetterSetter(Ne,"nodes");ze.Factory.addGetterSetter(Ne,"boundBoxFunc");ze.Factory.addGetterSetter(Ne,"anchorDragBoundFunc");ze.Factory.addGetterSetter(Ne,"anchorStyleFunc");ze.Factory.addGetterSetter(Ne,"shouldOverdrawWholeArea",!1);ze.Factory.addGetterSetter(Ne,"useSingleNodeRotation",!0);ze.Factory.backCompat(Ne,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Wedge=void 0;const Ws=Pe,xm=_t,wm=Ce,d1=le,Em=Ce;class nn extends xm.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,wm.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Vs.Wedge=nn;nn.prototype.className="Wedge";nn.prototype._centroid=!0;nn.prototype._attrsAffectingSize=["radius"];(0,Em._registerNode)(nn);Ws.Factory.addGetterSetter(nn,"radius",0,(0,d1.getNumberValidator)());Ws.Factory.addGetterSetter(nn,"angle",0,(0,d1.getNumberValidator)());Ws.Factory.addGetterSetter(nn,"clockwise",!1);Ws.Factory.backCompat(nn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Blur=void 0;const $0=Pe,Cm=rt,Pm=le;function j0(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var bm=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Om=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Tm(a,e){var n=a.data,i=a.width,o=a.height,l,c,h,f,p,m,C,w,_,y,E,P,T,k,v,x,b,R,B,O,$,M,D,X,W=e+e+1,Z=i-1,K=o-1,oe=e+1,ce=oe*(oe+1)/2,pe=new j0,Oe=null,se=pe,Q=null,de=null,Te=bm[e],we=Om[e];for(h=1;h<W;h++)se=se.next=new j0,h===oe&&(Oe=se);for(se.next=pe,C=m=0,c=0;c<o;c++){for(x=b=R=B=w=_=y=E=0,P=oe*(O=n[m]),T=oe*($=n[m+1]),k=oe*(M=n[m+2]),v=oe*(D=n[m+3]),w+=ce*O,_+=ce*$,y+=ce*M,E+=ce*D,se=pe,h=0;h<oe;h++)se.r=O,se.g=$,se.b=M,se.a=D,se=se.next;for(h=1;h<oe;h++)f=m+((Z<h?Z:h)<<2),w+=(se.r=O=n[f])*(X=oe-h),_+=(se.g=$=n[f+1])*X,y+=(se.b=M=n[f+2])*X,E+=(se.a=D=n[f+3])*X,x+=O,b+=$,R+=M,B+=D,se=se.next;for(Q=pe,de=Oe,l=0;l<i;l++)n[m+3]=D=E*Te>>we,D!==0?(D=255/D,n[m]=(w*Te>>we)*D,n[m+1]=(_*Te>>we)*D,n[m+2]=(y*Te>>we)*D):n[m]=n[m+1]=n[m+2]=0,w-=P,_-=T,y-=k,E-=v,P-=Q.r,T-=Q.g,k-=Q.b,v-=Q.a,f=C+((f=l+e+1)<Z?f:Z)<<2,x+=Q.r=n[f],b+=Q.g=n[f+1],R+=Q.b=n[f+2],B+=Q.a=n[f+3],w+=x,_+=b,y+=R,E+=B,Q=Q.next,P+=O=de.r,T+=$=de.g,k+=M=de.b,v+=D=de.a,x-=O,b-=$,R-=M,B-=D,de=de.next,m+=4;C+=i}for(l=0;l<i;l++){for(b=R=B=x=_=y=E=w=0,m=l<<2,P=oe*(O=n[m]),T=oe*($=n[m+1]),k=oe*(M=n[m+2]),v=oe*(D=n[m+3]),w+=ce*O,_+=ce*$,y+=ce*M,E+=ce*D,se=pe,h=0;h<oe;h++)se.r=O,se.g=$,se.b=M,se.a=D,se=se.next;for(p=i,h=1;h<=e;h++)m=p+l<<2,w+=(se.r=O=n[m])*(X=oe-h),_+=(se.g=$=n[m+1])*X,y+=(se.b=M=n[m+2])*X,E+=(se.a=D=n[m+3])*X,x+=O,b+=$,R+=M,B+=D,se=se.next,h<K&&(p+=i);for(m=l,Q=pe,de=Oe,c=0;c<o;c++)f=m<<2,n[f+3]=D=E*Te>>we,D>0?(D=255/D,n[f]=(w*Te>>we)*D,n[f+1]=(_*Te>>we)*D,n[f+2]=(y*Te>>we)*D):n[f]=n[f+1]=n[f+2]=0,w-=P,_-=T,y-=k,E-=v,P-=Q.r,T-=Q.g,k-=Q.b,v-=Q.a,f=l+((f=c+oe)<K?f:K)*i<<2,w+=x+=Q.r=n[f],_+=b+=Q.g=n[f+1],y+=R+=Q.b=n[f+2],E+=B+=Q.a=n[f+3],Q=Q.next,P+=O=de.r,T+=$=de.g,k+=M=de.b,v+=D=de.a,x-=O,b-=$,R-=M,B-=D,de=de.next,m+=i}}const km=function(e){var n=Math.round(this.blurRadius());n>0&&Tm(e,n)};Xs.Blur=km;$0.Factory.addGetterSetter(Cm.Node,"blurRadius",0,(0,Pm.getNumberValidator)(),$0.Factory.afterSetFilter);var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Brighten=void 0;const z0=Pe,Rm=rt,Mm=le,Nm=function(a){var e=this.brightness()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=4)n[o]+=e,n[o+1]+=e,n[o+2]+=e};Ks.Brighten=Nm;z0.Factory.addGetterSetter(Rm.Node,"brightness",0,(0,Mm.getNumberValidator)(),z0.Factory.afterSetFilter);var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Contrast=void 0;const B0=Pe,Am=rt,Fm=le,Im=function(a){var e=Math.pow((this.contrast()+100)/100,2),n=a.data,i=n.length,o=150,l=150,c=150,h;for(h=0;h<i;h+=4)o=n[h],l=n[h+1],c=n[h+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,o=o<0?0:o>255?255:o,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,n[h]=o,n[h+1]=l,n[h+2]=c};qs.Contrast=Im;B0.Factory.addGetterSetter(Am.Node,"contrast",0,(0,Fm.getNumberValidator)(),B0.Factory.afterSetFilter);var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Emboss=void 0;const En=Pe,Qs=rt,Lm=at,h1=le,Dm=function(a){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),o=this.embossBlend(),l=0,c=0,h=a.data,f=a.width,p=a.height,m=f*4,C=p;switch(i){case"top-left":l=-1,c=-1;break;case"top":l=-1,c=0;break;case"top-right":l=-1,c=1;break;case"right":l=0,c=1;break;case"bottom-right":l=1,c=1;break;case"bottom":l=1,c=0;break;case"bottom-left":l=1,c=-1;break;case"left":l=0,c=-1;break;default:Lm.Util.error("Unknown emboss direction: "+i)}do{var w=(C-1)*m,_=l;C+_<1&&(_=0),C+_>p&&(_=0);var y=(C-1+_)*f*4,E=f;do{var P=w+(E-1)*4,T=c;E+T<1&&(T=0),E+T>f&&(T=0);var k=y+(E-1+T)*4,v=h[P]-h[k],x=h[P+1]-h[k+1],b=h[P+2]-h[k+2],R=v,B=R>0?R:-R,O=x>0?x:-x,$=b>0?b:-b;if(O>B&&(R=x),$>B&&(R=b),R*=e,o){var M=h[P]+R,D=h[P+1]+R,X=h[P+2]+R;h[P]=M>255?255:M<0?0:M,h[P+1]=D>255?255:D<0?0:D,h[P+2]=X>255?255:X<0?0:X}else{var W=n-R;W<0?W=0:W>255&&(W=255),h[P]=h[P+1]=h[P+2]=W}}while(--E)}while(--C)};Ys.Emboss=Dm;En.Factory.addGetterSetter(Qs.Node,"embossStrength",.5,(0,h1.getNumberValidator)(),En.Factory.afterSetFilter);En.Factory.addGetterSetter(Qs.Node,"embossWhiteLevel",.5,(0,h1.getNumberValidator)(),En.Factory.afterSetFilter);En.Factory.addGetterSetter(Qs.Node,"embossDirection","top-left",null,En.Factory.afterSetFilter);En.Factory.addGetterSetter(Qs.Node,"embossBlend",!1,null,En.Factory.afterSetFilter);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.Enhance=void 0;const U0=Pe,Gm=rt,$m=le;function uc(a,e,n,i,o){var l=n-e,c=o-i,h;return l===0?i+c/2:c===0?i:(h=(a-e)/l,h=c*h+i,h)}const jm=function(a){var e=a.data,n=e.length,i=e[0],o=i,l,c=e[1],h=c,f,p=e[2],m=p,C,w,_=this.enhance();if(_!==0){for(w=0;w<n;w+=4)l=e[w+0],l<i?i=l:l>o&&(o=l),f=e[w+1],f<c?c=f:f>h&&(h=f),C=e[w+2],C<p?p=C:C>m&&(m=C);o===i&&(o=255,i=0),h===c&&(h=255,c=0),m===p&&(m=255,p=0);var y,E,P,T,k,v,x,b,R;for(_>0?(E=o+_*(255-o),P=i-_*(i-0),k=h+_*(255-h),v=c-_*(c-0),b=m+_*(255-m),R=p-_*(p-0)):(y=(o+i)*.5,E=o+_*(o-y),P=i+_*(i-y),T=(h+c)*.5,k=h+_*(h-T),v=c+_*(c-T),x=(m+p)*.5,b=m+_*(m-x),R=p+_*(p-x)),w=0;w<n;w+=4)e[w+0]=uc(e[w+0],i,o,P,E),e[w+1]=uc(e[w+1],c,h,v,k),e[w+2]=uc(e[w+2],p,m,R,b)}};Js.Enhance=jm;U0.Factory.addGetterSetter(Gm.Node,"enhance",0,(0,$m.getNumberValidator)(),U0.Factory.afterSetFilter);var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Grayscale=void 0;const zm=function(a){var e=a.data,n=e.length,i,o;for(i=0;i<n;i+=4)o=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o};Zs.Grayscale=zm;var el={};Object.defineProperty(el,"__esModule",{value:!0});el.HSL=void 0;const Vi=Pe,Xc=rt,Kc=le;Vi.Factory.addGetterSetter(Xc.Node,"hue",0,(0,Kc.getNumberValidator)(),Vi.Factory.afterSetFilter);Vi.Factory.addGetterSetter(Xc.Node,"saturation",0,(0,Kc.getNumberValidator)(),Vi.Factory.afterSetFilter);Vi.Factory.addGetterSetter(Xc.Node,"luminance",0,(0,Kc.getNumberValidator)(),Vi.Factory.afterSetFilter);const Bm=function(a){var e=a.data,n=e.length,i=1,o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,h,f=i*o*Math.cos(l*Math.PI/180),p=i*o*Math.sin(l*Math.PI/180),m=.299*i+.701*f+.167*p,C=.587*i-.587*f+.33*p,w=.114*i-.114*f-.497*p,_=.299*i-.299*f-.328*p,y=.587*i+.413*f+.035*p,E=.114*i-.114*f+.293*p,P=.299*i-.3*f+1.25*p,T=.587*i-.586*f-1.05*p,k=.114*i+.886*f-.2*p,v,x,b,R;for(h=0;h<n;h+=4)v=e[h+0],x=e[h+1],b=e[h+2],R=e[h+3],e[h+0]=m*v+C*x+w*b+c,e[h+1]=_*v+y*x+E*b+c,e[h+2]=P*v+T*x+k*b+c,e[h+3]=R};el.HSL=Bm;var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.HSV=void 0;const Wi=Pe,qc=rt,Yc=le,Um=function(a){var e=a.data,n=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c,h=i*o*Math.cos(l*Math.PI/180),f=i*o*Math.sin(l*Math.PI/180),p=.299*i+.701*h+.167*f,m=.587*i-.587*h+.33*f,C=.114*i-.114*h-.497*f,w=.299*i-.299*h-.328*f,_=.587*i+.413*h+.035*f,y=.114*i-.114*h+.293*f,E=.299*i-.3*h+1.25*f,P=.587*i-.586*h-1.05*f,T=.114*i+.886*h-.2*f,k,v,x,b;for(c=0;c<n;c+=4)k=e[c+0],v=e[c+1],x=e[c+2],b=e[c+3],e[c+0]=p*k+m*v+C*x,e[c+1]=w*k+_*v+y*x,e[c+2]=E*k+P*v+T*x,e[c+3]=b};tl.HSV=Um;Wi.Factory.addGetterSetter(qc.Node,"hue",0,(0,Yc.getNumberValidator)(),Wi.Factory.afterSetFilter);Wi.Factory.addGetterSetter(qc.Node,"saturation",0,(0,Yc.getNumberValidator)(),Wi.Factory.afterSetFilter);Wi.Factory.addGetterSetter(qc.Node,"value",0,(0,Yc.getNumberValidator)(),Wi.Factory.afterSetFilter);var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.Invert=void 0;const Hm=function(a){var e=a.data,n=e.length,i;for(i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};rl.Invert=Hm;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.Kaleidoscope=void 0;const ys=Pe,f1=rt,H0=at,g1=le;var Vm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w=0,_=0,y=0,E=0,P,T=Math.sqrt(h*h+f*f);m=l-h,C=c-f,P=Math.sqrt(m*m+C*C),T=P>T?P:T;var k=c,v=l,x,b,R=360/v*Math.PI/180,B,O;for(b=0;b<v;b+=1)for(B=Math.sin(b*R),O=Math.cos(b*R),x=0;x<k;x+=1)m=Math.floor(h+T*x/k*O),C=Math.floor(f+T*x/k*B),p=(C*l+m)*4,w=i[p+0],_=i[p+1],y=i[p+2],E=i[p+3],p=(b+x*l)*4,o[p+0]=w,o[p+1]=_,o[p+2]=y,o[p+3]=E},Wm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w,_,y=0,E=0,P=0,T=0,k,v=Math.sqrt(h*h+f*f);m=l-h,C=c-f,k=Math.sqrt(m*m+C*C),v=k>v?k:v;var x=c,b=l,R,B,O=n.polarRotation||0,$,M;for(m=0;m<l;m+=1)for(C=0;C<c;C+=1)w=m-h,_=C-f,R=Math.sqrt(w*w+_*_)*x/v,B=(Math.atan2(_,w)*180/Math.PI+360+O)%360,B=B*b/360,$=Math.floor(B),M=Math.floor(R),p=(M*l+$)*4,y=i[p+0],E=i[p+1],P=i[p+2],T=i[p+3],p=(C*l+m)*4,o[p+0]=y,o[p+1]=E,o[p+2]=P,o[p+3]=T};const Xm=function(a){var e=a.width,n=a.height,i,o,l,c,h,f,p,m,C,w,_=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),E=Math.floor(e*(y%360)/360);if(!(_<1)){var P=H0.Util.createCanvasElement();P.width=e,P.height=n;var T=P.getContext("2d").getImageData(0,0,e,n);H0.Util.releaseCanvas(P),Vm(a,T,{polarCenterX:e/2,polarCenterY:n/2});for(var k=e/Math.pow(2,_);k<=8;)k=k*2,_-=1;k=Math.ceil(k);var v=k,x=0,b=v,R=1;for(E+k>e&&(x=v,b=0,R=-1),o=0;o<n;o+=1)for(i=x;i!==b;i+=R)l=Math.round(i+E)%e,C=(e*o+l)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+i)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;for(o=0;o<n;o+=1)for(v=Math.floor(k),c=0;c<_;c+=1){for(i=0;i<v+1;i+=1)C=(e*o+i)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+v*2-i-1)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;v*=2}Wm(T,a,{polarRotation:0})}};nl.Kaleidoscope=Xm;ys.Factory.addGetterSetter(f1.Node,"kaleidoscopePower",2,(0,g1.getNumberValidator)(),ys.Factory.afterSetFilter);ys.Factory.addGetterSetter(f1.Node,"kaleidoscopeAngle",0,(0,g1.getNumberValidator)(),ys.Factory.afterSetFilter);var il={};Object.defineProperty(il,"__esModule",{value:!0});il.Mask=void 0;const V0=Pe,Km=rt,qm=le;function as(a,e,n){var i=(n*a.width+e)*4,o=[];return o.push(a.data[i++],a.data[i++],a.data[i++],a.data[i++]),o}function Da(a,e){return Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2))}function Ym(a){for(var e=[0,0,0],n=0;n<a.length;n++)e[0]+=a[n][0],e[1]+=a[n][1],e[2]+=a[n][2];return e[0]/=a.length,e[1]/=a.length,e[2]/=a.length,e}function Qm(a,e){var n=as(a,0,0),i=as(a,a.width-1,0),o=as(a,0,a.height-1),l=as(a,a.width-1,a.height-1),c=e||10;if(Da(n,i)<c&&Da(i,l)<c&&Da(l,o)<c&&Da(o,n)<c){for(var h=Ym([i,n,l,o]),f=[],p=0;p<a.width*a.height;p++){var m=Da(h,[a.data[p*4],a.data[p*4+1],a.data[p*4+2]]);f[p]=m<c?0:255}return f}}function Jm(a,e){for(var n=0;n<a.width*a.height;n++)a.data[4*n+3]=e[n]}function Zm(a,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m===255*8?255:0}return c}function e3(a,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m>=255*4?255:0}return c}function t3(a,e,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m}return c}const r3=function(a){var e=this.threshold(),n=Qm(a,e);return n&&(n=Zm(n,a.width,a.height),n=e3(n,a.width,a.height),n=t3(n,a.width,a.height),Jm(a,n)),a};il.Mask=r3;V0.Factory.addGetterSetter(Km.Node,"threshold",0,(0,qm.getNumberValidator)(),V0.Factory.afterSetFilter);var al={};Object.defineProperty(al,"__esModule",{value:!0});al.Noise=void 0;const W0=Pe,n3=rt,i3=le,a3=function(a){var e=this.noise()*255,n=a.data,i=n.length,o=e/2,l;for(l=0;l<i;l+=4)n[l+0]+=o-2*o*Math.random(),n[l+1]+=o-2*o*Math.random(),n[l+2]+=o-2*o*Math.random()};al.Noise=a3;W0.Factory.addGetterSetter(n3.Node,"noise",.2,(0,i3.getNumberValidator)(),W0.Factory.afterSetFilter);var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.Pixelate=void 0;const X0=Pe,o3=at,s3=rt,l3=le,u3=function(a){var e=Math.ceil(this.pixelSize()),n=a.width,i=a.height,o,l,c,h,f,p,m,C=Math.ceil(n/e),w=Math.ceil(i/e),_,y,E,P,T,k,v,x=a.data;if(e<=0){o3.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<C;T+=1)for(k=0;k<w;k+=1){for(h=0,f=0,p=0,m=0,_=T*e,y=_+e,E=k*e,P=E+e,v=0,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,h+=x[c+0],f+=x[c+1],p+=x[c+2],m+=x[c+3],v+=1);for(h=h/v,f=f/v,p=p/v,m=m/v,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,x[c+0]=h,x[c+1]=f,x[c+2]=p,x[c+3]=m)}};ol.Pixelate=u3;X0.Factory.addGetterSetter(s3.Node,"pixelSize",8,(0,l3.getNumberValidator)(),X0.Factory.afterSetFilter);var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.Posterize=void 0;const K0=Pe,c3=rt,d3=le,h3=function(a){var e=Math.round(this.levels()*254)+1,n=a.data,i=n.length,o=255/e,l;for(l=0;l<i;l+=1)n[l]=Math.floor(n[l]/o)*o};sl.Posterize=h3;K0.Factory.addGetterSetter(c3.Node,"levels",.5,(0,d3.getNumberValidator)(),K0.Factory.afterSetFilter);var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.RGB=void 0;const _s=Pe,Qc=rt,f3=le,g3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c,h;for(c=0;c<n;c+=4)h=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255,e[c]=h*i,e[c+1]=h*o,e[c+2]=h*l,e[c+3]=e[c+3]};ll.RGB=g3;_s.Factory.addGetterSetter(Qc.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});_s.Factory.addGetterSetter(Qc.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});_s.Factory.addGetterSetter(Qc.Node,"blue",0,f3.RGBComponent,_s.Factory.afterSetFilter);var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.RGBA=void 0;const Va=Pe,cl=rt,p3=le,v3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c=this.alpha(),h,f;for(h=0;h<n;h+=4)f=1-c,e[h]=i*c+e[h]*f,e[h+1]=o*c+e[h+1]*f,e[h+2]=l*c+e[h+2]*f};ul.RGBA=v3;Va.Factory.addGetterSetter(cl.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Va.Factory.addGetterSetter(cl.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Va.Factory.addGetterSetter(cl.Node,"blue",0,p3.RGBComponent,Va.Factory.afterSetFilter);Va.Factory.addGetterSetter(cl.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a});var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.Sepia=void 0;const m3=function(a){var e=a.data,n=e.length,i,o,l,c;for(i=0;i<n;i+=4)o=e[i+0],l=e[i+1],c=e[i+2],e[i+0]=Math.min(255,o*.393+l*.769+c*.189),e[i+1]=Math.min(255,o*.349+l*.686+c*.168),e[i+2]=Math.min(255,o*.272+l*.534+c*.131)};dl.Sepia=m3;var hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.Solarize=void 0;const y3=function(a){var e=a.data,n=a.width,i=a.height,o=n*4,l=i;do{var c=(l-1)*o,h=n;do{var f=c+(h-1)*4,p=e[f],m=e[f+1],C=e[f+2];p>127&&(p=255-p),m>127&&(m=255-m),C>127&&(C=255-C),e[f]=p,e[f+1]=m,e[f+2]=C}while(--h)}while(--l)};hl.Solarize=y3;var fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.Threshold=void 0;const q0=Pe,_3=rt,S3=le,x3=function(a){var e=this.threshold()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=1)n[o]=n[o]<e?0:255};fl.Threshold=x3;q0.Factory.addGetterSetter(_3.Node,"threshold",.5,(0,S3.getNumberValidator)(),q0.Factory.afterSetFilter);Object.defineProperty(ws,"__esModule",{value:!0});ws.Konva=void 0;const Y0=ps,w3=Ts,E3=Ms,C3=Fs,P3=Is,b3=Ls,Q0=Hi,O3=Qa,T3=Ji,k3=Za,R3=$s,M3=js,N3=zs,A3=Bs,F3=Qn,I3=Us,L3=Hs,D3=Vs,G3=Xs,$3=Ks,j3=qs,z3=Ys,B3=Js,U3=Zs,H3=el,V3=tl,W3=rl,X3=nl,K3=il,q3=al,Y3=ol,Q3=sl,J3=ll,Z3=ul,e4=dl,t4=hl,r4=fl;ws.Konva=Y0.Konva.Util._assign(Y0.Konva,{Arc:w3.Arc,Arrow:E3.Arrow,Circle:C3.Circle,Ellipse:P3.Ellipse,Image:b3.Image,Label:Q0.Label,Tag:Q0.Tag,Line:O3.Line,Path:T3.Path,Rect:k3.Rect,RegularPolygon:R3.RegularPolygon,Ring:M3.Ring,Sprite:N3.Sprite,Star:A3.Star,Text:F3.Text,TextPath:I3.TextPath,Transformer:L3.Transformer,Wedge:D3.Wedge,Filters:{Blur:G3.Blur,Brighten:$3.Brighten,Contrast:j3.Contrast,Emboss:z3.Emboss,Enhance:B3.Enhance,Grayscale:U3.Grayscale,HSL:H3.HSL,HSV:V3.HSV,Invert:W3.Invert,Kaleidoscope:X3.Kaleidoscope,Mask:K3.Mask,Noise:q3.Noise,Pixelate:Y3.Pixelate,Posterize:Q3.Posterize,RGB:J3.RGB,RGBA:Z3.RGBA,Sepia:e4.Sepia,Solarize:t4.Solarize,Threshold:r4.Threshold}});var n4=Af.exports;Object.defineProperty(n4,"__esModule",{value:!0});const i4=ws;Af.exports=i4.Konva;var Rc={exports:{}};(function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=ps;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const i=ps;a.exports=i.Konva})(Rc,Rc.exports);var a4=Rc.exports;const Wa=Ss(a4);var p1={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4=function(e){var n={},i=N,o=ds,l=Object.assign;function c(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}function B(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case p:return"Portal";case w:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y:return(t.displayName||"Context")+".Consumer";case _:return(t._context.displayName||"Context")+".Provider";case E:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:B(t.type)||"Memo";case v:r=t._payload,t=t._init;try{return B(t(r))}catch{}}return null}function O(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(r);case 8:return r===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function $(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function M(t){if($(t)!==t)throw Error(c(188))}function D(t){var r=t.alternate;if(!r){if(r=$(t),r===null)throw Error(c(188));return r!==t?null:t}for(var s=t,u=r;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return M(d),t;if(g===u)return M(d),r;g=g.sibling}throw Error(c(188))}if(s.return!==u.return)s=d,u=g;else{for(var S=!1,A=d.child;A;){if(A===s){S=!0,s=d,u=g;break}if(A===u){S=!0,u=d,s=g;break}A=A.sibling}if(!S){for(A=g.child;A;){if(A===s){S=!0,s=g,u=d;break}if(A===u){S=!0,u=g,s=d;break}A=A.sibling}if(!S)throw Error(c(189))}}if(s.alternate!==u)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?t:r}function X(t){return t=D(t),t!==null?W(t):null}function W(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=W(t);if(r!==null)return r;t=t.sibling}return null}function Z(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=Z(t);if(r!==null)return r}t=t.sibling}return null}var K=Array.isArray,oe=e.getPublicInstance,ce=e.getRootHostContext,pe=e.getChildHostContext,Oe=e.prepareForCommit,se=e.resetAfterCommit,Q=e.createInstance,de=e.appendInitialChild,Te=e.finalizeInitialChildren,we=e.prepareUpdate,qe=e.shouldSetTextContent,Ae=e.createTextInstance,F=e.scheduleTimeout,V=e.cancelTimeout,ne=e.noTimeout,fe=e.isPrimaryRenderer,ge=e.supportsMutation,De=e.supportsPersistence,Re=e.supportsHydration,Ft=e.getInstanceFromNode,Fe=e.preparePortalMount,bt=e.getCurrentEventPriority,Ye=e.detachDeletedInstance,Ie=e.supportsMicrotasks,ut=e.scheduleMicrotask,ft=e.supportsTestSelectors,Be=e.findFiberRoot,Ge=e.getBoundingRect,gt=e.getTextContent,Qt=e.isHiddenSubtree,br=e.matchAccessibilityRole,ia=e.setFocusIfFocusable,Mn=e.setupIntersectionObserver,aa=e.appendChild,ci=e.appendChildToContainer,ir=e.commitTextUpdate,an=e.commitMount,oa=e.commitUpdate,ar=e.insertBefore,on=e.insertInContainerBefore,sa=e.removeChild,la=e.removeChildFromContainer,Nn=e.resetTextContent,ua=e.hideInstance,di=e.hideTextInstance,re=e.unhideInstance,_e=e.unhideTextInstance,Ue=e.clearContainer,Ot=e.cloneInstance,jr=e.createContainerChildSet,hi=e.appendChildToContainerChildSet,ca=e.finalizeContainerChildren,sn=e.replaceContainerChildren,io=e.cloneHiddenInstance,ao=e.cloneHiddenTextInstance,oo=e.canHydrateInstance,Pl=e.canHydrateTextInstance,bl=e.canHydrateSuspenseInstance,fi=e.isSuspenseInstancePending,An=e.isSuspenseInstanceFallback,da=e.getSuspenseInstanceFallbackErrorDetails,Ol=e.registerSuspenseInstanceRetry,gi=e.getNextHydratableSibling,pi=e.getFirstHydratableChild,Tl=e.getFirstHydratableChildWithinContainer,kl=e.getFirstHydratableChildWithinSuspenseInstance,Rl=e.hydrateInstance,Ml=e.hydrateTextInstance,Nl=e.hydrateSuspenseInstance,Al=e.getNextHydratableInstanceAfterSuspenseInstance,Fn=e.commitHydratedContainer,Fl=e.commitHydratedSuspenseInstance,so=e.clearSuspenseBoundary,Il=e.clearSuspenseBoundaryFromContainer,Ll=e.shouldDeleteUnhydratedTailInstances,Dl=e.didNotMatchHydratedContainerTextInstance,Gl=e.didNotMatchHydratedTextInstance,vi;function In(t){if(vi===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);vi=r&&r[1]||""}return`
`+vi+t}var mi=!1;function Ln(t,r){if(!t||mi)return"";mi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(q){var u=q}Reflect.construct(t,[],r)}else{try{r.call()}catch(q){u=q}t.call(r.prototype)}else{try{throw Error()}catch(q){u=q}t()}}catch(q){if(q&&u&&typeof q.stack=="string"){for(var d=q.stack.split(`
`),g=u.stack.split(`
`),S=d.length-1,A=g.length-1;1<=S&&0<=A&&d[S]!==g[A];)A--;for(;1<=S&&0<=A;S--,A--)if(d[S]!==g[A]){if(S!==1||A!==1)do if(S--,A--,0>A||d[S]!==g[A]){var z=`
`+d[S].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=S&&0<=A);break}}}finally{mi=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?In(t):""}var $l=Object.prototype.hasOwnProperty,yi=[],zr=-1;function Or(t){return{current:t}}function Le(t){0>zr||(t.current=yi[zr],yi[zr]=null,zr--)}function Ve(t,r){zr++,yi[zr]=t.current,t.current=r}var Tr={},xt=Or(Tr),Tt=Or(!1),Br=Tr;function kr(t,r){var s=t.type.contextTypes;if(!s)return Tr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=r[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function kt(t){return t=t.childContextTypes,t!=null}function _i(){Le(Tt),Le(xt)}function Si(t,r,s){if(xt.current!==Tr)throw Error(c(168));Ve(xt,r),Ve(Tt,s)}function ha(t,r,s){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in r))throw Error(c(108,O(t)||"Unknown",d));return l({},s,u)}function ln(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,Br=xt.current,Ve(xt,t),Ve(Tt,Tt.current),!0}function lo(t,r,s){var u=t.stateNode;if(!u)throw Error(c(169));s?(t=ha(t,r,Br),u.__reactInternalMemoizedMergedChildContext=t,Le(Tt),Le(xt),Ve(xt,t)):Le(Tt),Ve(Tt,s)}var Ht=Math.clz32?Math.clz32:zl,fa=Math.log,jl=Math.LN2;function zl(t){return t>>>=0,t===0?32:31-(fa(t)/jl|0)|0}var Dn=64,xi=4194304;function un(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wi(t,r){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,S=s&268435455;if(S!==0){var A=S&~d;A!==0?u=un(A):(g&=S,g!==0&&(u=un(g)))}else S=s&~d,S!==0?u=un(S):g!==0&&(u=un(g));if(u===0)return 0;if(r!==0&&r!==u&&!(r&d)&&(d=u&-u,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if(u&4&&(u|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)s=31-Ht(r),d=1<<s,u|=t[s],r&=~d;return u}function Ei(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bl(t,r){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var S=31-Ht(g),A=1<<S,z=d[S];z===-1?(!(A&s)||A&u)&&(d[S]=Ei(A,r)):z<=r&&(t.expiredLanes|=A),g&=~A}}function Ci(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ga(){var t=Dn;return Dn<<=1,!(Dn&4194240)&&(Dn=64),t}function Ur(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function cn(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ht(r),t[r]=s}function Ul(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-Ht(s),g=1<<d;r[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function pa(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var u=31-Ht(s),d=1<<u;d&r|t[u]&r&&(t[u]|=r),s&=~d}}var Me=0;function uo(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pi=o.unstable_scheduleCallback,co=o.unstable_cancelCallback,ho=o.unstable_shouldYield,Hl=o.unstable_requestPaint,pt=o.unstable_now,va=o.unstable_ImmediatePriority,fo=o.unstable_UserBlockingPriority,ma=o.unstable_NormalPriority,Vl=o.unstable_IdlePriority,Gn=null,L=null;function H(t){if(L&&typeof L.onCommitFiberRoot=="function")try{L.onCommitFiberRoot(Gn,t,void 0,(t.current.flags&128)===128)}catch{}}function J(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Y=typeof Object.is=="function"?Object.is:J,ue=null,ve=!1,ot=!1;function Jt(t){ue===null?ue=[t]:ue.push(t)}function $n(t){ve=!0,Jt(t)}function Qe(){if(!ot&&ue!==null){ot=!0;var t=0,r=Me;try{var s=ue;for(Me=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}ue=null,ve=!1}catch(d){throw ue!==null&&(ue=ue.slice(t+1)),Pi(va,Qe),d}finally{Me=r,ot=!1}}return null}var Rt=[],It=0,bi=null,go=0,or=[],sr=0,jn=null,Hr=1,Vr="";function zn(t,r){Rt[It++]=go,Rt[It++]=bi,bi=t,go=r}function Md(t,r,s){or[sr++]=Hr,or[sr++]=Vr,or[sr++]=jn,jn=t;var u=Hr;t=Vr;var d=32-Ht(u)-1;u&=~(1<<d),s+=1;var g=32-Ht(r)+d;if(30<g){var S=d-d%5;g=(u&(1<<S)-1).toString(32),u>>=S,d-=S,Hr=1<<32-Ht(r)+d|s<<d|u,Vr=g+t}else Hr=1<<g|s<<d|u,Vr=t}function Wl(t){t.return!==null&&(zn(t,1),Md(t,1,0))}function Xl(t){for(;t===bi;)bi=Rt[--It],Rt[It]=null,go=Rt[--It],Rt[It]=null;for(;t===jn;)jn=or[--sr],or[sr]=null,Vr=or[--sr],or[sr]=null,Hr=or[--sr],or[sr]=null}var Zt=null,lr=null,et=!1,ya=!1,mr=null;function Nd(t,r){var s=fr(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Ad(t,r){switch(t.tag){case 5:return r=oo(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,Zt=t,lr=pi(r),!0):!1;case 6:return r=Pl(r,t.pendingProps),r!==null?(t.stateNode=r,Zt=t,lr=null,!0):!1;case 13:if(r=bl(r),r!==null){var s=jn!==null?{id:Hr,overflow:Vr}:null;return t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=fr(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,Zt=t,lr=null,!0}return!1;default:return!1}}function Kl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ql(t){if(et){var r=lr;if(r){var s=r;if(!Ad(t,r)){if(Kl(t))throw Error(c(418));r=gi(s);var u=Zt;r&&Ad(t,r)?Nd(u,s):(t.flags=t.flags&-4097|2,et=!1,Zt=t)}}else{if(Kl(t))throw Error(c(418));t.flags=t.flags&-4097|2,et=!1,Zt=t}}}function Fd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function po(t){if(!Re||t!==Zt)return!1;if(!et)return Fd(t),et=!0,!1;if(t.tag!==3&&(t.tag!==5||Ll(t.type)&&!qe(t.type,t.memoizedProps))){var r=lr;if(r){if(Kl(t))throw Id(),Error(c(418));for(;r;)Nd(t,r),r=gi(r)}}if(Fd(t),t.tag===13){if(!Re)throw Error(c(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));lr=Al(t)}else lr=Zt?gi(t.stateNode):null;return!0}function Id(){for(var t=lr;t;)t=gi(t)}function Oi(){Re&&(lr=Zt=null,ya=et=!1)}function Yl(t){mr===null?mr=[t]:mr.push(t)}var K1=h.ReactCurrentBatchConfig;function vo(t,r){if(Y(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),u=Object.keys(r);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!$l.call(r,d)||!Y(t[d],r[d]))return!1}return!0}function q1(t){switch(t.tag){case 5:return In(t.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 2:case 15:return t=Ln(t.type,!1),t;case 11:return t=Ln(t.type.render,!1),t;case 1:return t=Ln(t.type,!0),t;default:return""}}function yr(t,r){if(t&&t.defaultProps){r=l({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}var mo=Or(null),yo=null,Ti=null,Ql=null;function Jl(){Ql=Ti=yo=null}function Ld(t,r,s){fe?(Ve(mo,r._currentValue),r._currentValue=s):(Ve(mo,r._currentValue2),r._currentValue2=s)}function Zl(t){var r=mo.current;Le(mo),fe?t._currentValue=r:t._currentValue2=r}function eu(t,r,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===s)break;t=t.return}}function ki(t,r){yo=t,Ql=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Vt=!0),t.firstContext=null)}function ur(t){var r=fe?t._currentValue:t._currentValue2;if(Ql!==t)if(t={context:t,memoizedValue:r,next:null},Ti===null){if(yo===null)throw Error(c(308));Ti=t,yo.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return r}var Bn=null;function tu(t){Bn===null?Bn=[t]:Bn.push(t)}function Dd(t,r,s,u){var d=r.interleaved;return d===null?(s.next=s,tu(r)):(s.next=d.next,d.next=s),r.interleaved=s,Rr(t,u)}function Rr(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var dn=!1;function ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function hn(t,r,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,be&2){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,Rr(t,s)}return d=u.interleaved,d===null?(r.next=r,tu(u)):(r.next=d.next,d.next=r),u.interleaved=r,Rr(t,s)}function _o(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,pa(t,s)}}function $d(t,r){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=S:g=g.next=S,s=s.next}while(s!==null);g===null?d=g=r:g=g.next=r}else d=g=r;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function So(t,r,s,u){var d=t.updateQueue;dn=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var z=A,q=z.next;z.next=null,S===null?g=q:S.next=q,S=z;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==S&&(A===null?ae.firstBaseUpdate=q:A.next=q,ae.lastBaseUpdate=z))}if(g!==null){var Se=d.baseState;S=0,ae=q=z=null,A=g;do{var ee=A.lane,Je=A.eventTime;if((u&ee)===ee){ae!==null&&(ae=ae.next={eventTime:Je,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Xe=t,Kt=A;switch(ee=r,Je=s,Kt.tag){case 1:if(Xe=Kt.payload,typeof Xe=="function"){Se=Xe.call(Je,Se,ee);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Kt.payload,ee=typeof Xe=="function"?Xe.call(Je,Se,ee):Xe,ee==null)break e;Se=l({},Se,ee);break e;case 2:dn=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,ee=d.effects,ee===null?d.effects=[A]:ee.push(A))}else Je={eventTime:Je,lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(q=ae=Je,z=Se):ae=ae.next=Je,S|=ee;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);if(ae===null&&(z=Se),d.baseState=z,d.firstBaseUpdate=q,d.lastBaseUpdate=ae,r=d.shared.interleaved,r!==null){d=r;do S|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);Hn|=S,t.lanes=S,t.memoizedState=Se}}function jd(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(c(191,d));d.call(u)}}}var zd=new i.Component().refs;function nu(t,r,s,u){r=t.memoizedState,s=s(u,r),s=s==null?r:l({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var xo={isMounted:function(t){return(t=t._reactInternals)?$(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var u=$t(),d=pn(t),g=Wr(u,d);g.payload=r,s!=null&&(g.callback=s),r=hn(t,g,d),r!==null&&(hr(r,t,d,u),_o(r,t,d))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var u=$t(),d=pn(t),g=Wr(u,d);g.tag=1,g.payload=r,s!=null&&(g.callback=s),r=hn(t,g,d),r!==null&&(hr(r,t,d,u),_o(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=$t(),u=pn(t),d=Wr(s,u);d.tag=2,r!=null&&(d.callback=r),r=hn(t,d,u),r!==null&&(hr(r,t,u,s),_o(r,t,u))}};function Bd(t,r,s,u,d,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,S):r.prototype&&r.prototype.isPureReactComponent?!vo(s,u)||!vo(d,g):!0}function Ud(t,r,s){var u=!1,d=Tr,g=r.contextType;return typeof g=="object"&&g!==null?g=ur(g):(d=kt(r)?Br:xt.current,u=r.contextTypes,g=(u=u!=null)?kr(t,d):Tr),r=new r(s,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=xo,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function Hd(t,r,s,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,u),r.state!==t&&xo.enqueueReplaceState(r,r.state,null)}function iu(t,r,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs=zd,ru(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=ur(g):(g=kt(r)?Br:xt.current,d.context=kr(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(nu(t,r,g,s),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&xo.enqueueReplaceState(d,d.state,null),So(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(c(309));var u=s.stateNode}if(!u)throw Error(c(147,t));var d=u,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(S){var A=d.refs;A===zd&&(A=d.refs={}),S===null?delete A[g]:A[g]=S},r._stringRef=g,r)}if(typeof t!="string")throw Error(c(284));if(!s._owner)throw Error(c(290,t))}return t}function wo(t,r){throw t=Object.prototype.toString.call(r),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vd(t){var r=t._init;return r(t._payload)}function Wd(t){function r(j,I){if(t){var U=j.deletions;U===null?(j.deletions=[I],j.flags|=16):U.push(I)}}function s(j,I){if(!t)return null;for(;I!==null;)r(j,I),I=I.sibling;return null}function u(j,I){for(j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function d(j,I){return j=mn(j,I),j.index=0,j.sibling=null,j}function g(j,I,U){return j.index=U,t?(U=j.alternate,U!==null?(U=U.index,U<I?(j.flags|=2,I):U):(j.flags|=2,I)):(j.flags|=1048576,I)}function S(j){return t&&j.alternate===null&&(j.flags|=2),j}function A(j,I,U,te){return I===null||I.tag!==6?(I=Vu(U,j.mode,te),I.return=j,I):(I=d(I,U),I.return=j,I)}function z(j,I,U,te){var he=U.type;return he===m?ae(j,I,U.props.children,te,U.key):I!==null&&(I.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===v&&Vd(he)===I.type)?(te=d(I,U.props),te.ref=_a(j,I,U),te.return=j,te):(te=Ko(U.type,U.key,U.props,null,j.mode,te),te.ref=_a(j,I,U),te.return=j,te)}function q(j,I,U,te){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=Wu(U,j.mode,te),I.return=j,I):(I=d(I,U.children||[]),I.return=j,I)}function ae(j,I,U,te,he){return I===null||I.tag!==7?(I=Kn(U,j.mode,te,he),I.return=j,I):(I=d(I,U),I.return=j,I)}function Se(j,I,U){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Vu(""+I,j.mode,U),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case f:return U=Ko(I.type,I.key,I.props,null,j.mode,U),U.ref=_a(j,null,I),U.return=j,U;case p:return I=Wu(I,j.mode,U),I.return=j,I;case v:var te=I._init;return Se(j,te(I._payload),U)}if(K(I)||R(I))return I=Kn(I,j.mode,U,null),I.return=j,I;wo(j,I)}return null}function ee(j,I,U,te){var he=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return he!==null?null:A(j,I,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case f:return U.key===he?z(j,I,U,te):null;case p:return U.key===he?q(j,I,U,te):null;case v:return he=U._init,ee(j,I,he(U._payload),te)}if(K(U)||R(U))return he!==null?null:ae(j,I,U,te,null);wo(j,U)}return null}function Je(j,I,U,te,he){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(U)||null,A(I,j,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case f:return j=j.get(te.key===null?U:te.key)||null,z(I,j,te,he);case p:return j=j.get(te.key===null?U:te.key)||null,q(I,j,te,he);case v:var Ee=te._init;return Je(j,I,U,Ee(te._payload),he)}if(K(te)||R(te))return j=j.get(U)||null,ae(I,j,te,he,null);wo(I,te)}return null}function Xe(j,I,U,te){for(var he=null,Ee=null,xe=I,$e=I=0,Ct=null;xe!==null&&$e<U.length;$e++){xe.index>$e?(Ct=xe,xe=null):Ct=xe.sibling;var je=ee(j,xe,U[$e],te);if(je===null){xe===null&&(xe=Ct);break}t&&xe&&je.alternate===null&&r(j,xe),I=g(je,I,$e),Ee===null?he=je:Ee.sibling=je,Ee=je,xe=Ct}if($e===U.length)return s(j,xe),et&&zn(j,$e),he;if(xe===null){for(;$e<U.length;$e++)xe=Se(j,U[$e],te),xe!==null&&(I=g(xe,I,$e),Ee===null?he=xe:Ee.sibling=xe,Ee=xe);return et&&zn(j,$e),he}for(xe=u(j,xe);$e<U.length;$e++)Ct=Je(xe,j,$e,U[$e],te),Ct!==null&&(t&&Ct.alternate!==null&&xe.delete(Ct.key===null?$e:Ct.key),I=g(Ct,I,$e),Ee===null?he=Ct:Ee.sibling=Ct,Ee=Ct);return t&&xe.forEach(function(yn){return r(j,yn)}),et&&zn(j,$e),he}function Kt(j,I,U,te){var he=R(U);if(typeof he!="function")throw Error(c(150));if(U=he.call(U),U==null)throw Error(c(151));for(var Ee=he=null,xe=I,$e=I=0,Ct=null,je=U.next();xe!==null&&!je.done;$e++,je=U.next()){xe.index>$e?(Ct=xe,xe=null):Ct=xe.sibling;var yn=ee(j,xe,je.value,te);if(yn===null){xe===null&&(xe=Ct);break}t&&xe&&yn.alternate===null&&r(j,xe),I=g(yn,I,$e),Ee===null?he=yn:Ee.sibling=yn,Ee=yn,xe=Ct}if(je.done)return s(j,xe),et&&zn(j,$e),he;if(xe===null){for(;!je.done;$e++,je=U.next())je=Se(j,je.value,te),je!==null&&(I=g(je,I,$e),Ee===null?he=je:Ee.sibling=je,Ee=je);return et&&zn(j,$e),he}for(xe=u(j,xe);!je.done;$e++,je=U.next())je=Je(xe,j,$e,je.value,te),je!==null&&(t&&je.alternate!==null&&xe.delete(je.key===null?$e:je.key),I=g(je,I,$e),Ee===null?he=je:Ee.sibling=je,Ee=je);return t&&xe.forEach(function(Pg){return r(j,Pg)}),et&&zn(j,$e),he}function qr(j,I,U,te){if(typeof U=="object"&&U!==null&&U.type===m&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case f:e:{for(var he=U.key,Ee=I;Ee!==null;){if(Ee.key===he){if(he=U.type,he===m){if(Ee.tag===7){s(j,Ee.sibling),I=d(Ee,U.props.children),I.return=j,j=I;break e}}else if(Ee.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===v&&Vd(he)===Ee.type){s(j,Ee.sibling),I=d(Ee,U.props),I.ref=_a(j,Ee,U),I.return=j,j=I;break e}s(j,Ee);break}else r(j,Ee);Ee=Ee.sibling}U.type===m?(I=Kn(U.props.children,j.mode,te,U.key),I.return=j,j=I):(te=Ko(U.type,U.key,U.props,null,j.mode,te),te.ref=_a(j,I,U),te.return=j,j=te)}return S(j);case p:e:{for(Ee=U.key;I!==null;){if(I.key===Ee)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){s(j,I.sibling),I=d(I,U.children||[]),I.return=j,j=I;break e}else{s(j,I);break}else r(j,I);I=I.sibling}I=Wu(U,j.mode,te),I.return=j,j=I}return S(j);case v:return Ee=U._init,qr(j,I,Ee(U._payload),te)}if(K(U))return Xe(j,I,U,te);if(R(U))return Kt(j,I,U,te);wo(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,I!==null&&I.tag===6?(s(j,I.sibling),I=d(I,U),I.return=j,j=I):(s(j,I),I=Vu(U,j.mode,te),I.return=j,j=I),S(j)):s(j,I)}return qr}var Ri=Wd(!0),Xd=Wd(!1),Sa={},cr=Or(Sa),xa=Or(Sa),Mi=Or(Sa);function Mr(t){if(t===Sa)throw Error(c(174));return t}function au(t,r){Ve(Mi,r),Ve(xa,t),Ve(cr,Sa),t=ce(r),Le(cr),Ve(cr,t)}function Ni(){Le(cr),Le(xa),Le(Mi)}function Kd(t){var r=Mr(Mi.current),s=Mr(cr.current);r=pe(s,t.type,r),s!==r&&(Ve(xa,t),Ve(cr,r))}function ou(t){xa.current===t&&(Le(cr),Le(xa))}var nt=Or(0);function Eo(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||fi(s)||An(s)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var su=[];function lu(){for(var t=0;t<su.length;t++){var r=su[t];fe?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}su.length=0}var Co=h.ReactCurrentDispatcher,uu=h.ReactCurrentBatchConfig,Un=0,it=null,vt=null,wt=null,Po=!1,wa=!1,Ea=0,Y1=0;function Lt(){throw Error(c(321))}function cu(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!Y(t[s],r[s]))return!1;return!0}function du(t,r,s,u,d,g){if(Un=g,it=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Co.current=t===null||t.memoizedState===null?eg:tg,t=s(u,d),wa){g=0;do{if(wa=!1,Ea=0,25<=g)throw Error(c(301));g+=1,wt=vt=null,r.updateQueue=null,Co.current=rg,t=s(u,d)}while(wa)}if(Co.current=To,r=vt!==null&&vt.next!==null,Un=0,wt=vt=it=null,Po=!1,r)throw Error(c(300));return t}function hu(){var t=Ea!==0;return Ea=0,t}function Nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?it.memoizedState=wt=t:wt=wt.next=t,wt}function dr(){if(vt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var r=wt===null?it.memoizedState:wt.next;if(r!==null)wt=r,vt=t;else{if(t===null)throw Error(c(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},wt===null?it.memoizedState=wt=t:wt=wt.next=t}return wt}function Ca(t,r){return typeof r=="function"?r(t):r}function fu(t){var r=dr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=vt,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var A=S=null,z=null,q=g;do{var ae=q.lane;if((Un&ae)===ae)z!==null&&(z=z.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),u=q.hasEagerState?q.eagerState:t(u,q.action);else{var Se={lane:ae,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};z===null?(A=z=Se,S=u):z=z.next=Se,it.lanes|=ae,Hn|=ae}q=q.next}while(q!==null&&q!==g);z===null?S=u:z.next=A,Y(u,r.memoizedState)||(Vt=!0),r.memoizedState=u,r.baseState=S,r.baseQueue=z,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,it.lanes|=g,Hn|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function gu(t){var r=dr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=r.memoizedState;if(d!==null){s.pending=null;var S=d=d.next;do g=t(g,S.action),S=S.next;while(S!==d);Y(g,r.memoizedState)||(Vt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,u]}function qd(){}function Yd(t,r){var s=it,u=dr(),d=r(),g=!Y(u.memoizedState,d);if(g&&(u.memoizedState=d,Vt=!0),u=u.queue,pu(Zd.bind(null,s,u,t),[t]),u.getSnapshot!==r||g||wt!==null&&wt.memoizedState.tag&1){if(s.flags|=2048,Pa(9,Jd.bind(null,s,u,d,r),void 0,null),Et===null)throw Error(c(349));Un&30||Qd(s,r,d)}return d}function Qd(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=it.updateQueue,r===null?(r={lastEffect:null,stores:null},it.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Jd(t,r,s,u){r.value=s,r.getSnapshot=u,eh(r)&&th(t)}function Zd(t,r,s){return s(function(){eh(r)&&th(t)})}function eh(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!Y(t,s)}catch{return!0}}function th(t){var r=Rr(t,1);r!==null&&hr(r,t,1,-1)}function rh(t){var r=Nr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},r.queue=t,t=t.dispatch=Z1.bind(null,it,t),[r.memoizedState,t]}function Pa(t,r,s,u){return t={tag:t,create:r,destroy:s,deps:u,next:null},r=it.updateQueue,r===null?(r={lastEffect:null,stores:null},it.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,r.lastEffect=t)),t}function nh(){return dr().memoizedState}function bo(t,r,s,u){var d=Nr();it.flags|=t,d.memoizedState=Pa(1|r,s,void 0,u===void 0?null:u)}function Oo(t,r,s,u){var d=dr();u=u===void 0?null:u;var g=void 0;if(vt!==null){var S=vt.memoizedState;if(g=S.destroy,u!==null&&cu(u,S.deps)){d.memoizedState=Pa(r,s,g,u);return}}it.flags|=t,d.memoizedState=Pa(1|r,s,g,u)}function ih(t,r){return bo(8390656,8,t,r)}function pu(t,r){return Oo(2048,8,t,r)}function ah(t,r){return Oo(4,2,t,r)}function oh(t,r){return Oo(4,4,t,r)}function sh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function lh(t,r,s){return s=s!=null?s.concat([t]):null,Oo(4,4,sh.bind(null,r,t),s)}function vu(){}function uh(t,r){var s=dr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&cu(r,u[1])?u[0]:(s.memoizedState=[t,r],t)}function ch(t,r){var s=dr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&cu(r,u[1])?u[0]:(t=t(),s.memoizedState=[t,r],t)}function dh(t,r,s){return Un&21?(Y(s,r)||(s=ga(),it.lanes|=s,Hn|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=s)}function Q1(t,r){var s=Me;Me=s!==0&&4>s?s:4,t(!0);var u=uu.transition;uu.transition={};try{t(!1),r()}finally{Me=s,uu.transition=u}}function hh(){return dr().memoizedState}function J1(t,r,s){var u=pn(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},fh(t))gh(r,s);else if(s=Dd(t,r,s,u),s!==null){var d=$t();hr(s,t,u,d),ph(s,r,u)}}function Z1(t,r,s){var u=pn(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(fh(t))gh(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,A=g(S,s);if(d.hasEagerState=!0,d.eagerState=A,Y(A,S)){var z=r.interleaved;z===null?(d.next=d,tu(r)):(d.next=z.next,z.next=d),r.interleaved=d;return}}catch{}finally{}s=Dd(t,r,d,u),s!==null&&(d=$t(),hr(s,t,u,d),ph(s,r,u))}}function fh(t){var r=t.alternate;return t===it||r!==null&&r===it}function gh(t,r){wa=Po=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function ph(t,r,s){if(s&4194240){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,pa(t,s)}}var To={readContext:ur,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},eg={readContext:ur,useCallback:function(t,r){return Nr().memoizedState=[t,r===void 0?null:r],t},useContext:ur,useEffect:ih,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,bo(4194308,4,sh.bind(null,r,t),s)},useLayoutEffect:function(t,r){return bo(4194308,4,t,r)},useInsertionEffect:function(t,r){return bo(4,2,t,r)},useMemo:function(t,r){var s=Nr();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var u=Nr();return r=s!==void 0?s(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=J1.bind(null,it,t),[u.memoizedState,t]},useRef:function(t){var r=Nr();return t={current:t},r.memoizedState=t},useState:rh,useDebugValue:vu,useDeferredValue:function(t){return Nr().memoizedState=t},useTransition:function(){var t=rh(!1),r=t[0];return t=Q1.bind(null,t[1]),Nr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var u=it,d=Nr();if(et){if(s===void 0)throw Error(c(407));s=s()}else{if(s=r(),Et===null)throw Error(c(349));Un&30||Qd(u,r,s)}d.memoizedState=s;var g={value:s,getSnapshot:r};return d.queue=g,ih(Zd.bind(null,u,g,t),[t]),u.flags|=2048,Pa(9,Jd.bind(null,u,g,s,r),void 0,null),s},useId:function(){var t=Nr(),r=Et.identifierPrefix;if(et){var s=Vr,u=Hr;s=(u&~(1<<32-Ht(u)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ea++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Y1++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},tg={readContext:ur,useCallback:uh,useContext:ur,useEffect:pu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:fu,useRef:nh,useState:function(){return fu(Ca)},useDebugValue:vu,useDeferredValue:function(t){var r=dr();return dh(r,vt.memoizedState,t)},useTransition:function(){var t=fu(Ca)[0],r=dr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1},rg={readContext:ur,useCallback:uh,useContext:ur,useEffect:pu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:gu,useRef:nh,useState:function(){return gu(Ca)},useDebugValue:vu,useDeferredValue:function(t){var r=dr();return vt===null?r.memoizedState=t:dh(r,vt.memoizedState,t)},useTransition:function(){var t=gu(Ca)[0],r=dr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1};function Ai(t,r){try{var s="",u=r;do s+=q1(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d,digest:null}}function mu(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function yu(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function vh(t,r,s){s=Wr(-1,s),s.tag=3,s.payload={element:null};var u=r.value;return s.callback=function(){Bo||(Bo=!0,Gu=u),yu(t,r)},s}function mh(t,r,s){s=Wr(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=r.value;s.payload=function(){return u(d)},s.callback=function(){yu(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){yu(t,r),typeof u!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),s}function yh(t,r,s){var u=t.pingCache;if(u===null){u=t.pingCache=new ng;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(s)||(d.add(s),t=mg.bind(null,t,r,s),r.then(t,t))}function _h(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Sh(t,r,s,u,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Wr(-1,1),r.tag=2,hn(s,r,1))),s.lanes|=1),t)}var ig=h.ReactCurrentOwner,Vt=!1;function Bt(t,r,s,u){r.child=t===null?Xd(r,null,s,u):Ri(r,t.child,s,u)}function xh(t,r,s,u,d){s=s.render;var g=r.ref;return ki(r,d),u=du(t,r,s,u,g,d),s=hu(),t!==null&&!Vt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Xr(t,r,d)):(et&&s&&Wl(r),r.flags|=1,Bt(t,r,u,d),r.child)}function wh(t,r,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Hu(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=g,Eh(t,r,g,u,d)):(t=Ko(s.type,null,u,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!(t.lanes&d)){var S=g.memoizedProps;if(s=s.compare,s=s!==null?s:vo,s(S,u)&&t.ref===r.ref)return Xr(t,r,d)}return r.flags|=1,t=mn(g,u),t.ref=r.ref,t.return=r,r.child=t}function Eh(t,r,s,u,d){if(t!==null){var g=t.memoizedProps;if(vo(g,u)&&t.ref===r.ref)if(Vt=!1,r.pendingProps=u=g,(t.lanes&d)!==0)t.flags&131072&&(Vt=!0);else return r.lanes=t.lanes,Xr(t,r,d)}return _u(t,r,s,u,d)}function Ch(t,r,s){var u=r.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ii,er),er|=s;else{if(!(s&1073741824))return t=g!==null?g.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ve(Ii,er),er|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,Ve(Ii,er),er|=u}else g!==null?(u=g.baseLanes|s,r.memoizedState=null):u=s,Ve(Ii,er),er|=u;return Bt(t,r,d,s),r.child}function Ph(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function _u(t,r,s,u,d){var g=kt(s)?Br:xt.current;return g=kr(r,g),ki(r,d),s=du(t,r,s,u,g,d),u=hu(),t!==null&&!Vt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Xr(t,r,d)):(et&&u&&Wl(r),r.flags|=1,Bt(t,r,s,d),r.child)}function bh(t,r,s,u,d){if(kt(s)){var g=!0;ln(r)}else g=!1;if(ki(r,d),r.stateNode===null)Ro(t,r),Ud(r,s,u),iu(r,s,u,d),u=!0;else if(t===null){var S=r.stateNode,A=r.memoizedProps;S.props=A;var z=S.context,q=s.contextType;typeof q=="object"&&q!==null?q=ur(q):(q=kt(s)?Br:xt.current,q=kr(r,q));var ae=s.getDerivedStateFromProps,Se=typeof ae=="function"||typeof S.getSnapshotBeforeUpdate=="function";Se||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==u||z!==q)&&Hd(r,S,u,q),dn=!1;var ee=r.memoizedState;S.state=ee,So(r,u,S,d),z=r.memoizedState,A!==u||ee!==z||Tt.current||dn?(typeof ae=="function"&&(nu(r,s,ae,u),z=r.memoizedState),(A=dn||Bd(r,s,A,u,ee,z,q))?(Se||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=z),S.props=u,S.state=z,S.context=q,u=A):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{S=r.stateNode,Gd(t,r),A=r.memoizedProps,q=r.type===r.elementType?A:yr(r.type,A),S.props=q,Se=r.pendingProps,ee=S.context,z=s.contextType,typeof z=="object"&&z!==null?z=ur(z):(z=kt(s)?Br:xt.current,z=kr(r,z));var Je=s.getDerivedStateFromProps;(ae=typeof Je=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==Se||ee!==z)&&Hd(r,S,u,z),dn=!1,ee=r.memoizedState,S.state=ee,So(r,u,S,d);var Xe=r.memoizedState;A!==Se||ee!==Xe||Tt.current||dn?(typeof Je=="function"&&(nu(r,s,Je,u),Xe=r.memoizedState),(q=dn||Bd(r,s,q,u,ee,Xe,z)||!1)?(ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(u,Xe,z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(u,Xe,z)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Xe),S.props=u,S.state=Xe,S.context=z,u=q):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),u=!1)}return Su(t,r,s,u,g,d)}function Su(t,r,s,u,d,g){Ph(t,r);var S=(r.flags&128)!==0;if(!u&&!S)return d&&lo(r,s,!1),Xr(t,r,g);u=r.stateNode,ig.current=r;var A=S&&typeof s.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&S?(r.child=Ri(r,t.child,null,g),r.child=Ri(r,null,A,g)):Bt(t,r,A,g),r.memoizedState=u.state,d&&lo(r,s,!0),r.child}function Oh(t){var r=t.stateNode;r.pendingContext?Si(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Si(t,r.context,!1),au(t,r.containerInfo)}function Th(t,r,s,u,d){return Oi(),Yl(d),r.flags|=256,Bt(t,r,s,u),r.child}var xu={dehydrated:null,treeContext:null,retryLane:0};function wu(t){return{baseLanes:t,cachePool:null,transitions:null}}function kh(t,r,s){var u=r.pendingProps,d=nt.current,g=!1,S=(r.flags&128)!==0,A;if((A=S)||(A=t!==null&&t.memoizedState===null?!1:(d&2)!==0),A?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Ve(nt,d&1),t===null)return ql(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?An(t)?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(S=u.children,t=u.fallback,g?(u=r.mode,g=r.child,S={mode:"hidden",children:S},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=S):g=qo(S,u,0,null),t=Kn(t,u,s,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=wu(s),r.memoizedState=xu,t):Eu(r,S));if(d=t.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return ag(t,r,S,u,A,d,s);if(g){g=u.fallback,S=r.mode,d=t.child,A=d.sibling;var z={mode:"hidden",children:u.children};return!(S&1)&&r.child!==d?(u=r.child,u.childLanes=0,u.pendingProps=z,r.deletions=null):(u=mn(d,z),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=mn(A,g):(g=Kn(g,S,s,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=t.child.memoizedState,S=S===null?wu(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},g.memoizedState=S,g.childLanes=t.childLanes&~s,r.memoizedState=xu,u}return g=t.child,t=g.sibling,u=mn(g,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=s),u.return=r,u.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=u,r.memoizedState=null,u}function Eu(t,r){return r=qo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ko(t,r,s,u){return u!==null&&Yl(u),Ri(r,t.child,null,s),t=Eu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ag(t,r,s,u,d,g,S){if(s)return r.flags&256?(r.flags&=-257,u=mu(Error(c(422))),ko(t,r,S,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=u.fallback,d=r.mode,u=qo({mode:"visible",children:u.children},d,0,null),g=Kn(g,d,S,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,r.mode&1&&Ri(r,t.child,null,S),r.child.memoizedState=wu(S),r.memoizedState=xu,g);if(!(r.mode&1))return ko(t,r,S,null);if(An(d))return u=da(d).digest,g=Error(c(419)),u=mu(g,u,void 0),ko(t,r,S,u);if(s=(S&t.childLanes)!==0,Vt||s){if(u=Et,u!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|S)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Rr(t,d),hr(u,t,d,-1))}return Uu(),u=mu(Error(c(421))),ko(t,r,S,u)}return fi(d)?(r.flags|=128,r.child=t.child,r=yg.bind(null,t),Ol(d,r),null):(t=g.treeContext,Re&&(lr=kl(d),Zt=r,et=!0,mr=null,ya=!1,t!==null&&(or[sr++]=Hr,or[sr++]=Vr,or[sr++]=jn,Hr=t.id,Vr=t.overflow,jn=r)),r=Eu(r,u.children),r.flags|=4096,r)}function Rh(t,r,s){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),eu(t.return,r,s)}function Cu(t,r,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Mh(t,r,s){var u=r.pendingProps,d=u.revealOrder,g=u.tail;if(Bt(t,r,u.children,s),u=nt.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rh(t,s,r);else if(t.tag===19)Rh(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ve(nt,u),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(s=r.child,d=null;s!==null;)t=s.alternate,t!==null&&Eo(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=r.child,r.child=null):(d=s.sibling,s.sibling=null),Cu(r,!1,d,s,g);break;case"backwards":for(s=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Eo(t)===null){r.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Cu(r,!0,s,null,g);break;case"together":Cu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ro(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Xr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Hn|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(c(153));if(r.child!==null){for(t=r.child,s=mn(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=mn(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function og(t,r,s){switch(r.tag){case 3:Oh(r),Oi();break;case 5:Kd(r);break;case 1:kt(r.type)&&ln(r);break;case 4:au(r,r.stateNode.containerInfo);break;case 10:Ld(r,r.type._context,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ve(nt,nt.current&1),r.flags|=128,null):s&r.child.childLanes?kh(t,r,s):(Ve(nt,nt.current&1),t=Xr(t,r,s),t!==null?t.sibling:null);Ve(nt,nt.current&1);break;case 19:if(u=(s&r.childLanes)!==0,t.flags&128){if(u)return Mh(t,r,s);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ve(nt,nt.current),u)break;return null;case 22:case 23:return r.lanes=0,Ch(t,r,s)}return Xr(t,r,s)}function Ar(t){t.flags|=4}function Nh(t,r){if(t!==null&&t.child===r.child)return!0;if(r.flags&16)return!1;for(t=r.child;t!==null;){if(t.flags&12854||t.subtreeFlags&12854)return!1;t=t.sibling}return!0}var ba,Oa,Mo,No;if(ge)ba=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)de(t,s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Oa=function(){},Mo=function(t,r,s,u,d){if(t=t.memoizedProps,t!==u){var g=r.stateNode,S=Mr(cr.current);s=we(g,s,t,u,d,S),(r.updateQueue=s)&&Ar(r)}},No=function(t,r,s,u){s!==u&&Ar(r)};else if(De){ba=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=io(g,d.type,d.memoizedProps,d)),de(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ao(g,d.memoizedProps,d)),de(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),ba(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var Ah=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=io(g,d.type,d.memoizedProps,d)),hi(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ao(g,d.memoizedProps,d)),hi(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Ah(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Oa=function(t,r){var s=r.stateNode;if(!Nh(t,r)){t=s.containerInfo;var u=jr(t);Ah(u,r,!1,!1),s.pendingChildren=u,Ar(r),ca(t,u)}},Mo=function(t,r,s,u,d){var g=t.stateNode,S=t.memoizedProps;if((t=Nh(t,r))&&S===u)r.stateNode=g;else{var A=r.stateNode,z=Mr(cr.current),q=null;S!==u&&(q=we(A,s,S,u,d,z)),t&&q===null?r.stateNode=g:(g=Ot(g,q,s,S,u,r,t,A),Te(g,s,u,d,z)&&Ar(r),r.stateNode=g,t?Ar(r):ba(g,r,!1,!1))}},No=function(t,r,s,u){s!==u?(t=Mr(Mi.current),s=Mr(cr.current),r.stateNode=Ae(u,t,s,r),Ar(r)):r.stateNode=t.stateNode}}else Oa=function(){},Mo=function(){},No=function(){};function Ta(t,r){if(!et)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Dt(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(r)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,r}function sg(t,r,s){var u=r.pendingProps;switch(Xl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(r),null;case 1:return kt(r.type)&&_i(),Dt(r),null;case 3:return s=r.stateNode,Ni(),Le(Tt),Le(xt),lu(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(po(r)?Ar(r):t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,mr!==null&&(zu(mr),mr=null))),Oa(t,r),Dt(r),null;case 5:ou(r),s=Mr(Mi.current);var d=r.type;if(t!==null&&r.stateNode!=null)Mo(t,r,d,u,s),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(c(166));return Dt(r),null}if(t=Mr(cr.current),po(r)){if(!Re)throw Error(c(175));t=Rl(r.stateNode,r.type,r.memoizedProps,s,t,r,!ya),r.updateQueue=t,t!==null&&Ar(r)}else{var g=Q(d,u,s,t,r);ba(g,r,!1,!1),r.stateNode=g,Te(g,d,u,s,t)&&Ar(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Dt(r),null;case 6:if(t&&r.stateNode!=null)No(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(c(166));if(t=Mr(Mi.current),s=Mr(cr.current),po(r)){if(!Re)throw Error(c(176));if(t=r.stateNode,s=r.memoizedProps,(u=Ml(t,s,r,!ya))&&(d=Zt,d!==null))switch(d.tag){case 3:Dl(d.stateNode.containerInfo,t,s,(d.mode&1)!==0);break;case 5:Gl(d.type,d.memoizedProps,d.stateNode,t,s,(d.mode&1)!==0)}u&&Ar(r)}else r.stateNode=Ae(u,t,s,r)}return Dt(r),null;case 13:if(Le(nt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&lr!==null&&r.mode&1&&!(r.flags&128))Id(),Oi(),r.flags|=98560,d=!1;else if(d=po(r),u!==null&&u.dehydrated!==null){if(t===null){if(!d)throw Error(c(318));if(!Re)throw Error(c(344));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));Nl(d,r)}else Oi(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Dt(r),d=!1}else mr!==null&&(zu(mr),mr=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(s=u!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||nt.current&1?mt===0&&(mt=3):Uu())),r.updateQueue!==null&&(r.flags|=4),Dt(r),null);case 4:return Ni(),Oa(t,r),t===null&&Fe(r.stateNode.containerInfo),Dt(r),null;case 10:return Zl(r.type._context),Dt(r),null;case 17:return kt(r.type)&&_i(),Dt(r),null;case 19:if(Le(nt),d=r.memoizedState,d===null)return Dt(r),null;if(u=(r.flags&128)!==0,g=d.rendering,g===null)if(u)Ta(d,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(g=Eo(t),g!==null){for(r.flags|=128,Ta(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=s,s=r.child;s!==null;)u=s,d=t,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,d=g.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),s=s.sibling;return Ve(nt,nt.current&1|2),r.child}t=t.sibling}d.tail!==null&&pt()>Du&&(r.flags|=128,u=!0,Ta(d,!1),r.lanes=4194304)}else{if(!u)if(t=Eo(g),t!==null){if(r.flags|=128,u=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),Ta(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!et)return Dt(r),null}else 2*pt()-d.renderingStartTime>Du&&s!==1073741824&&(r.flags|=128,u=!0,Ta(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=pt(),r.sibling=null,t=nt.current,Ve(nt,u?t&1|2:t&1),r):(Dt(r),null);case 22:case 23:return Bu(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?er&1073741824&&(Dt(r),ge&&r.subtreeFlags&6&&(r.flags|=8192)):Dt(r),null;case 24:return null;case 25:return null}throw Error(c(156,r.tag))}function lg(t,r){switch(Xl(r),r.tag){case 1:return kt(r.type)&&_i(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ni(),Le(Tt),Le(xt),lu(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return ou(r),null;case 13:if(Le(nt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(c(340));Oi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Le(nt),null;case 4:return Ni(),null;case 10:return Zl(r.type._context),null;case 22:case 23:return Bu(),null;case 24:return null;default:return null}}var Ao=!1,Gt=!1,ug=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Fi(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){tt(t,r,u)}else s.current=null}function Pu(t,r,s){try{s()}catch(u){tt(t,r,u)}}var Fh=!1;function cg(t,r){for(Oe(t.containerInfo),ie=r;ie!==null;)if(t=ie,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,ie=r;else for(;ie!==null;){t=ie;try{var s=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var u=s.memoizedProps,d=s.memoizedState,g=t.stateNode,S=g.getSnapshotBeforeUpdate(t.elementType===t.type?u:yr(t.type,u),d);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:ge&&Ue(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(A){tt(t,t.return,A)}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}return s=Fh,Fh=!1,s}function ka(t,r,s){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Pu(r,s,g)}d=d.next}while(d!==u)}}function Fo(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==r)}}function bu(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=oe(s);break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Ih(t){var r=t.alternate;r!==null&&(t.alternate=null,Ih(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ye(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lh(t){return t.tag===5||t.tag===3||t.tag===4}function Dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ou(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?on(s,t,r):ci(s,t);else if(u!==4&&(t=t.child,t!==null))for(Ou(t,r,s),t=t.sibling;t!==null;)Ou(t,r,s),t=t.sibling}function Tu(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?ar(s,t,r):aa(s,t);else if(u!==4&&(t=t.child,t!==null))for(Tu(t,r,s),t=t.sibling;t!==null;)Tu(t,r,s),t=t.sibling}var Mt=null,_r=!1;function Fr(t,r,s){for(s=s.child;s!==null;)ku(t,r,s),s=s.sibling}function ku(t,r,s){if(L&&typeof L.onCommitFiberUnmount=="function")try{L.onCommitFiberUnmount(Gn,s)}catch{}switch(s.tag){case 5:Gt||Fi(s,r);case 6:if(ge){var u=Mt,d=_r;Mt=null,Fr(t,r,s),Mt=u,_r=d,Mt!==null&&(_r?la(Mt,s.stateNode):sa(Mt,s.stateNode))}else Fr(t,r,s);break;case 18:ge&&Mt!==null&&(_r?Il(Mt,s.stateNode):so(Mt,s.stateNode));break;case 4:ge?(u=Mt,d=_r,Mt=s.stateNode.containerInfo,_r=!0,Fr(t,r,s),Mt=u,_r=d):(De&&(u=s.stateNode.containerInfo,d=jr(u),sn(u,d)),Fr(t,r,s));break;case 0:case 11:case 14:case 15:if(!Gt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,S=g.destroy;g=g.tag,S!==void 0&&(g&2||g&4)&&Pu(s,r,S),d=d.next}while(d!==u)}Fr(t,r,s);break;case 1:if(!Gt&&(Fi(s,r),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){tt(s,r,A)}Fr(t,r,s);break;case 21:Fr(t,r,s);break;case 22:s.mode&1?(Gt=(u=Gt)||s.memoizedState!==null,Fr(t,r,s),Gt=u):Fr(t,r,s);break;default:Fr(t,r,s)}}function Gh(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ug),r.forEach(function(u){var d=_g.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function Sr(t,r){var s=r.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,S=r;if(ge){var A=S;e:for(;A!==null;){switch(A.tag){case 5:Mt=A.stateNode,_r=!1;break e;case 3:Mt=A.stateNode.containerInfo,_r=!0;break e;case 4:Mt=A.stateNode.containerInfo,_r=!0;break e}A=A.return}if(Mt===null)throw Error(c(160));ku(g,S,d),Mt=null,_r=!1}else ku(g,S,d);var z=d.alternate;z!==null&&(z.return=null),d.return=null}catch(q){tt(d,r,q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)$h(r,t),r=r.sibling}function $h(t,r){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(r,t),Ir(t),u&4){try{ka(3,t,t.return),Fo(3,t)}catch(ee){tt(t,t.return,ee)}try{ka(5,t,t.return)}catch(ee){tt(t,t.return,ee)}}break;case 1:Sr(r,t),Ir(t),u&512&&s!==null&&Fi(s,s.return);break;case 5:if(Sr(r,t),Ir(t),u&512&&s!==null&&Fi(s,s.return),ge){if(t.flags&32){var d=t.stateNode;try{Nn(d)}catch(ee){tt(t,t.return,ee)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(s=s!==null?s.memoizedProps:g,u=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{oa(d,r,u,s,g,t)}catch(ee){tt(t,t.return,ee)}}}break;case 6:if(Sr(r,t),Ir(t),u&4&&ge){if(t.stateNode===null)throw Error(c(162));d=t.stateNode,g=t.memoizedProps,s=s!==null?s.memoizedProps:g;try{ir(d,s,g)}catch(ee){tt(t,t.return,ee)}}break;case 3:if(Sr(r,t),Ir(t),u&4){if(ge&&Re&&s!==null&&s.memoizedState.isDehydrated)try{Fn(r.containerInfo)}catch(ee){tt(t,t.return,ee)}if(De){d=r.containerInfo,g=r.pendingChildren;try{sn(d,g)}catch(ee){tt(t,t.return,ee)}}}break;case 4:if(Sr(r,t),Ir(t),u&4&&De){g=t.stateNode,d=g.containerInfo,g=g.pendingChildren;try{sn(d,g)}catch(ee){tt(t,t.return,ee)}}break;case 13:Sr(r,t),Ir(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Lu=pt())),u&4&&Gh(t);break;case 22:var S=s!==null&&s.memoizedState!==null;if(t.mode&1?(Gt=(s=Gt)||S,Sr(r,t),Gt=s):Sr(r,t),Ir(t),u&8192){if(s=t.memoizedState!==null,(t.stateNode.isHidden=s)&&!S&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(r=ie=u;ie!==null;){S=ie;var A=S.child;switch(S.tag){case 0:case 11:case 14:case 15:ka(4,S,S.return);break;case 1:Fi(S,S.return);var z=S.stateNode;if(typeof z.componentWillUnmount=="function"){var q=S,ae=S.return;try{var Se=q;z.props=Se.memoizedProps,z.state=Se.memoizedState,z.componentWillUnmount()}catch(ee){tt(q,ae,ee)}}break;case 5:Fi(S,S.return);break;case 22:if(S.memoizedState!==null){Bh(r);continue}}A!==null?(A.return=S,ie=A):Bh(r)}u=u.sibling}if(ge){e:if(u=null,ge)for(r=t;;){if(r.tag===5){if(u===null){u=r;try{d=r.stateNode,s?ua(d):re(r.stateNode,r.memoizedProps)}catch(ee){tt(t,t.return,ee)}}}else if(r.tag===6){if(u===null)try{g=r.stateNode,s?di(g):_e(g,r.memoizedProps)}catch(ee){tt(t,t.return,ee)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}}}break;case 19:Sr(r,t),Ir(t),u&4&&Gh(t);break;case 21:break;default:Sr(r,t),Ir(t)}}function Ir(t){var r=t.flags;if(r&2){try{if(ge){e:{for(var s=t.return;s!==null;){if(Lh(s)){var u=s;break e}s=s.return}throw Error(c(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Nn(d),u.flags&=-33);var g=Dh(t);Tu(t,g,d);break;case 3:case 4:var S=u.stateNode.containerInfo,A=Dh(t);Ou(t,A,S);break;default:throw Error(c(161))}}}catch(z){tt(t,t.return,z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dg(t,r,s){ie=t,jh(t)}function jh(t,r,s){for(var u=(t.mode&1)!==0;ie!==null;){var d=ie,g=d.child;if(d.tag===22&&u){var S=d.memoizedState!==null||Ao;if(!S){var A=d.alternate,z=A!==null&&A.memoizedState!==null||Gt;A=Ao;var q=Gt;if(Ao=S,(Gt=z)&&!q)for(ie=d;ie!==null;)S=ie,z=S.child,S.tag===22&&S.memoizedState!==null?Uh(d):z!==null?(z.return=S,ie=z):Uh(d);for(;g!==null;)ie=g,jh(g),g=g.sibling;ie=d,Ao=A,Gt=q}zh(t)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ie=g):zh(t)}}function zh(t){for(;ie!==null;){var r=ie;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Gt||Fo(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Gt)if(s===null)u.componentDidMount();else{var d=r.elementType===r.type?s.memoizedProps:yr(r.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&jd(r,g,u);break;case 3:var S=r.updateQueue;if(S!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=oe(r.child.stateNode);break;case 1:s=r.child.stateNode}jd(r,S,s)}break;case 5:var A=r.stateNode;s===null&&r.flags&4&&an(A,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&r.memoizedState===null){var z=r.alternate;if(z!==null){var q=z.memoizedState;if(q!==null){var ae=q.dehydrated;ae!==null&&Fl(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Gt||r.flags&512&&bu(r)}catch(Se){tt(r,r.return,Se)}}if(r===t){ie=null;break}if(s=r.sibling,s!==null){s.return=r.return,ie=s;break}ie=r.return}}function Bh(t){for(;ie!==null;){var r=ie;if(r===t){ie=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ie=s;break}ie=r.return}}function Uh(t){for(;ie!==null;){var r=ie;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Fo(4,r)}catch(z){tt(r,s,z)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var d=r.return;try{u.componentDidMount()}catch(z){tt(r,d,z)}}var g=r.return;try{bu(r)}catch(z){tt(r,g,z)}break;case 5:var S=r.return;try{bu(r)}catch(z){tt(r,S,z)}}}catch(z){tt(r,r.return,z)}if(r===t){ie=null;break}var A=r.sibling;if(A!==null){A.return=r.return,ie=A;break}ie=r.return}}var Io=0,Lo=1,Do=2,Go=3,$o=4;if(typeof Symbol=="function"&&Symbol.for){var Ra=Symbol.for;Io=Ra("selector.component"),Lo=Ra("selector.has_pseudo_class"),Do=Ra("selector.role"),Go=Ra("selector.test_id"),$o=Ra("selector.text")}function Ru(t){var r=Ft(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(c(364));return r}if(t=Be(t),t===null)throw Error(c(362));return t.stateNode.current}function Mu(t,r){switch(r.$$typeof){case Io:if(t.type===r.value)return!0;break;case Lo:e:{r=r.value,t=[t,0];for(var s=0;s<t.length;){var u=t[s++],d=t[s++],g=r[d];if(u.tag!==5||!Qt(u)){for(;g!=null&&Mu(u,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(u=u.child;u!==null;)t.push(u,d),u=u.sibling}}r=!1}return r;case Do:if(t.tag===5&&br(t.stateNode,r.value))return!0;break;case $o:if((t.tag===5||t.tag===6)&&(t=gt(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case Go:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Nu(t){switch(t.$$typeof){case Io:return"<"+(B(t.value)||"Unknown")+">";case Lo:return":has("+(Nu(t)||"")+")";case Do:return'[role="'+t.value+'"]';case $o:return'"'+t.value+'"';case Go:return'[data-testname="'+t.value+'"]';default:throw Error(c(365))}}function Hh(t,r){var s=[];t=[t,0];for(var u=0;u<t.length;){var d=t[u++],g=t[u++],S=r[g];if(d.tag!==5||!Qt(d)){for(;S!=null&&Mu(d,S);)g++,S=r[g];if(g===r.length)s.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return s}function Au(t,r){if(!ft)throw Error(c(363));t=Ru(t),t=Hh(t,r),r=[],t=Array.from(t);for(var s=0;s<t.length;){var u=t[s++];if(u.tag===5)Qt(u)||r.push(u.stateNode);else for(u=u.child;u!==null;)t.push(u),u=u.sibling}return r}var hg=Math.ceil,jo=h.ReactCurrentDispatcher,Fu=h.ReactCurrentOwner,ct=h.ReactCurrentBatchConfig,be=0,Et=null,ht=null,Nt=0,er=0,Ii=Or(0),mt=0,Ma=null,Hn=0,zo=0,Iu=0,Na=null,Wt=null,Lu=0,Du=1/0,Kr=null;function Li(){Du=pt()+500}var Bo=!1,Gu=null,fn=null,Uo=!1,gn=null,Ho=0,Aa=0,$u=null,Vo=-1,Wo=0;function $t(){return be&6?pt():Vo!==-1?Vo:Vo=pt()}function pn(t){return t.mode&1?be&2&&Nt!==0?Nt&-Nt:K1.transition!==null?(Wo===0&&(Wo=ga()),Wo):(t=Me,t!==0?t:bt()):1}function hr(t,r,s,u){if(50<Aa)throw Aa=0,$u=null,Error(c(185));cn(t,s,u),(!(be&2)||t!==Et)&&(t===Et&&(!(be&2)&&(zo|=s),mt===4&&vn(t,Nt)),Xt(t,u),s===1&&be===0&&!(r.mode&1)&&(Li(),ve&&Qe()))}function Xt(t,r){var s=t.callbackNode;Bl(t,r);var u=wi(t,t===Et?Nt:0);if(u===0)s!==null&&co(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(s!=null&&co(s),r===1)t.tag===0?$n(Wh.bind(null,t)):Jt(Wh.bind(null,t)),Ie?ut(function(){!(be&6)&&Qe()}):Pi(va,Qe),s=null;else{switch(uo(u)){case 1:s=va;break;case 4:s=fo;break;case 16:s=ma;break;case 536870912:s=Vl;break;default:s=ma}s=t0(s,Vh.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Vh(t,r){if(Vo=-1,Wo=0,be&6)throw Error(c(327));var s=t.callbackNode;if(Xn()&&t.callbackNode!==s)return null;var u=wi(t,t===Et?Nt:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=Xo(t,u);else{r=u;var d=be;be|=2;var g=qh();(Et!==t||Nt!==r)&&(Kr=null,Li(),Vn(t,r));do try{pg();break}catch(A){Kh(t,A)}while(!0);Jl(),jo.current=g,be=d,ht!==null?r=0:(Et=null,Nt=0,r=mt)}if(r!==0){if(r===2&&(d=Ci(t),d!==0&&(u=d,r=ju(t,d))),r===1)throw s=Ma,Vn(t,0),vn(t,u),Xt(t,pt()),s;if(r===6)vn(t,u);else{if(d=t.current.alternate,!(u&30)&&!fg(d)&&(r=Xo(t,u),r===2&&(g=Ci(t),g!==0&&(u=g,r=ju(t,g))),r===1))throw s=Ma,Vn(t,0),vn(t,u),Xt(t,pt()),s;switch(t.finishedWork=d,t.finishedLanes=u,r){case 0:case 1:throw Error(c(345));case 2:Wn(t,Wt,Kr);break;case 3:if(vn(t,u),(u&130023424)===u&&(r=Lu+500-pt(),10<r)){if(wi(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){$t(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=F(Wn.bind(null,t,Wt,Kr),r);break}Wn(t,Wt,Kr);break;case 4:if(vn(t,u),(u&4194240)===u)break;for(r=t.eventTimes,d=-1;0<u;){var S=31-Ht(u);g=1<<S,S=r[S],S>d&&(d=S),u&=~g}if(u=d,u=pt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*hg(u/1960))-u,10<u){t.timeoutHandle=F(Wn.bind(null,t,Wt,Kr),u);break}Wn(t,Wt,Kr);break;case 5:Wn(t,Wt,Kr);break;default:throw Error(c(329))}}}return Xt(t,pt()),t.callbackNode===s?Vh.bind(null,t):null}function ju(t,r){var s=Na;return t.current.memoizedState.isDehydrated&&(Vn(t,r).flags|=256),t=Xo(t,r),t!==2&&(r=Wt,Wt=s,r!==null&&zu(r)),t}function zu(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function fg(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!Y(g(),d))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function vn(t,r){for(r&=~Iu,r&=~zo,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-Ht(r),u=1<<s;t[s]=-1,r&=~u}}function Wh(t){if(be&6)throw Error(c(327));Xn();var r=wi(t,0);if(!(r&1))return Xt(t,pt()),null;var s=Xo(t,r);if(t.tag!==0&&s===2){var u=Ci(t);u!==0&&(r=u,s=ju(t,u))}if(s===1)throw s=Ma,Vn(t,0),vn(t,r),Xt(t,pt()),s;if(s===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Wn(t,Wt,Kr),Xt(t,pt()),null}function Xh(t){gn!==null&&gn.tag===0&&!(be&6)&&Xn();var r=be;be|=1;var s=ct.transition,u=Me;try{if(ct.transition=null,Me=1,t)return t()}finally{Me=u,ct.transition=s,be=r,!(be&6)&&Qe()}}function Bu(){er=Ii.current,Le(Ii)}function Vn(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==ne&&(t.timeoutHandle=ne,V(s)),ht!==null)for(s=ht.return;s!==null;){var u=s;switch(Xl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&_i();break;case 3:Ni(),Le(Tt),Le(xt),lu();break;case 5:ou(u);break;case 4:Ni();break;case 13:Le(nt);break;case 19:Le(nt);break;case 10:Zl(u.type._context);break;case 22:case 23:Bu()}s=s.return}if(Et=t,ht=t=mn(t.current,null),Nt=er=r,mt=0,Ma=null,Iu=zo=Hn=0,Wt=Na=null,Bn!==null){for(r=0;r<Bn.length;r++)if(s=Bn[r],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var S=g.next;g.next=d,u.next=S}s.pending=u}Bn=null}return t}function Kh(t,r){do{var s=ht;try{if(Jl(),Co.current=To,Po){for(var u=it.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Po=!1}if(Un=0,wt=vt=it=null,wa=!1,Ea=0,Fu.current=null,s===null||s.return===null){mt=1,Ma=r,ht=null;break}e:{var g=t,S=s.return,A=s,z=r;if(r=Nt,A.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var q=z,ae=A,Se=ae.tag;if(!(ae.mode&1)&&(Se===0||Se===11||Se===15)){var ee=ae.alternate;ee?(ae.updateQueue=ee.updateQueue,ae.memoizedState=ee.memoizedState,ae.lanes=ee.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Je=_h(S);if(Je!==null){Je.flags&=-257,Sh(Je,S,A,g,r),Je.mode&1&&yh(g,q,r),r=Je,z=q;var Xe=r.updateQueue;if(Xe===null){var Kt=new Set;Kt.add(z),r.updateQueue=Kt}else Xe.add(z);break e}else{if(!(r&1)){yh(g,q,r),Uu();break e}z=Error(c(426))}}else if(et&&A.mode&1){var qr=_h(S);if(qr!==null){!(qr.flags&65536)&&(qr.flags|=256),Sh(qr,S,A,g,r),Yl(Ai(z,A));break e}}g=z=Ai(z,A),mt!==4&&(mt=2),Na===null?Na=[g]:Na.push(g),g=S;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var j=vh(g,z,r);$d(g,j);break e;case 1:A=z;var I=g.type,U=g.stateNode;if(!(g.flags&128)&&(typeof I.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(fn===null||!fn.has(U)))){g.flags|=65536,r&=-r,g.lanes|=r;var te=mh(g,A,r);$d(g,te);break e}}g=g.return}while(g!==null)}Qh(s)}catch(he){r=he,ht===s&&s!==null&&(ht=s=s.return);continue}break}while(!0)}function qh(){var t=jo.current;return jo.current=To,t===null?To:t}function Uu(){(mt===0||mt===3||mt===2)&&(mt=4),Et===null||!(Hn&268435455)&&!(zo&268435455)||vn(Et,Nt)}function Xo(t,r){var s=be;be|=2;var u=qh();(Et!==t||Nt!==r)&&(Kr=null,Vn(t,r));do try{gg();break}catch(d){Kh(t,d)}while(!0);if(Jl(),be=s,jo.current=u,ht!==null)throw Error(c(261));return Et=null,Nt=0,mt}function gg(){for(;ht!==null;)Yh(ht)}function pg(){for(;ht!==null&&!ho();)Yh(ht)}function Yh(t){var r=e0(t.alternate,t,er);t.memoizedProps=t.pendingProps,r===null?Qh(t):ht=r,Fu.current=null}function Qh(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=lg(s,r),s!==null){s.flags&=32767,ht=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(s=sg(s,r,er),s!==null){ht=s;return}if(r=r.sibling,r!==null){ht=r;return}ht=r=t}while(r!==null);mt===0&&(mt=5)}function Wn(t,r,s){var u=Me,d=ct.transition;try{ct.transition=null,Me=1,vg(t,r,s,u)}finally{ct.transition=d,Me=u}return null}function vg(t,r,s,u){do Xn();while(gn!==null);if(be&6)throw Error(c(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(Ul(t,g),t===Et&&(ht=Et=null,Nt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Uo||(Uo=!0,t0(ma,function(){return Xn(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=ct.transition,ct.transition=null;var S=Me;Me=1;var A=be;be|=4,Fu.current=null,cg(t,s),$h(s,t),se(t.containerInfo),t.current=s,dg(s),Hl(),be=A,Me=S,ct.transition=g}else t.current=s;if(Uo&&(Uo=!1,gn=t,Ho=d),g=t.pendingLanes,g===0&&(fn=null),H(s.stateNode),Xt(t,pt()),r!==null)for(u=t.onRecoverableError,s=0;s<r.length;s++)d=r[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Bo)throw Bo=!1,t=Gu,Gu=null,t;return Ho&1&&t.tag!==0&&Xn(),g=t.pendingLanes,g&1?t===$u?Aa++:(Aa=0,$u=t):Aa=0,Qe(),null}function Xn(){if(gn!==null){var t=uo(Ho),r=ct.transition,s=Me;try{if(ct.transition=null,Me=16>t?16:t,gn===null)var u=!1;else{if(t=gn,gn=null,Ho=0,be&6)throw Error(c(331));var d=be;for(be|=4,ie=t.current;ie!==null;){var g=ie,S=g.child;if(ie.flags&16){var A=g.deletions;if(A!==null){for(var z=0;z<A.length;z++){var q=A[z];for(ie=q;ie!==null;){var ae=ie;switch(ae.tag){case 0:case 11:case 15:ka(8,ae,g)}var Se=ae.child;if(Se!==null)Se.return=ae,ie=Se;else for(;ie!==null;){ae=ie;var ee=ae.sibling,Je=ae.return;if(Ih(ae),ae===q){ie=null;break}if(ee!==null){ee.return=Je,ie=ee;break}ie=Je}}}var Xe=g.alternate;if(Xe!==null){var Kt=Xe.child;if(Kt!==null){Xe.child=null;do{var qr=Kt.sibling;Kt.sibling=null,Kt=qr}while(Kt!==null)}}ie=g}}if(g.subtreeFlags&2064&&S!==null)S.return=g,ie=S;else e:for(;ie!==null;){if(g=ie,g.flags&2048)switch(g.tag){case 0:case 11:case 15:ka(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,ie=j;break e}ie=g.return}}var I=t.current;for(ie=I;ie!==null;){S=ie;var U=S.child;if(S.subtreeFlags&2064&&U!==null)U.return=S,ie=U;else e:for(S=I;ie!==null;){if(A=ie,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Fo(9,A)}}catch(he){tt(A,A.return,he)}if(A===S){ie=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,ie=te;break e}ie=A.return}}if(be=d,Qe(),L&&typeof L.onPostCommitFiberRoot=="function")try{L.onPostCommitFiberRoot(Gn,t)}catch{}u=!0}return u}finally{Me=s,ct.transition=r}}return!1}function Jh(t,r,s){r=Ai(s,r),r=vh(t,r,1),t=hn(t,r,1),r=$t(),t!==null&&(cn(t,1,r),Xt(t,r))}function tt(t,r,s){if(t.tag===3)Jh(t,t,s);else for(;r!==null;){if(r.tag===3){Jh(r,t,s);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(fn===null||!fn.has(u))){t=Ai(s,t),t=mh(r,t,1),r=hn(r,t,1),t=$t(),r!==null&&(cn(r,1,t),Xt(r,t));break}}r=r.return}}function mg(t,r,s){var u=t.pingCache;u!==null&&u.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&s,Et===t&&(Nt&s)===s&&(mt===4||mt===3&&(Nt&130023424)===Nt&&500>pt()-Lu?Vn(t,0):Iu|=s),Xt(t,r)}function Zh(t,r){r===0&&(t.mode&1?(r=xi,xi<<=1,!(xi&130023424)&&(xi=4194304)):r=1);var s=$t();t=Rr(t,r),t!==null&&(cn(t,r,s),Xt(t,s))}function yg(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Zh(t,s)}function _g(t,r){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(c(314))}u!==null&&u.delete(r),Zh(t,s)}var e0;e0=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Tt.current)Vt=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Vt=!1,og(t,r,s);Vt=!!(t.flags&131072)}else Vt=!1,et&&r.flags&1048576&&Md(r,go,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Ro(t,r),t=r.pendingProps;var d=kr(r,xt.current);ki(r,s),d=du(null,r,u,t,d,s);var g=hu();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,kt(u)?(g=!0,ln(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ru(r),d.updater=xo,r.stateNode=d,d._reactInternals=r,iu(r,u,t,s),r=Su(null,r,u,!0,g,s)):(r.tag=0,et&&g&&Wl(r),Bt(null,r,d,s),r=r.child),r;case 16:u=r.elementType;e:{switch(Ro(t,r),t=r.pendingProps,d=u._init,u=d(u._payload),r.type=u,d=r.tag=xg(u),t=yr(u,t),d){case 0:r=_u(null,r,u,t,s);break e;case 1:r=bh(null,r,u,t,s);break e;case 11:r=xh(null,r,u,t,s);break e;case 14:r=wh(null,r,u,yr(u.type,t),s);break e}throw Error(c(306,u,""))}return r;case 0:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:yr(u,d),_u(t,r,u,d,s);case 1:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:yr(u,d),bh(t,r,u,d,s);case 3:e:{if(Oh(r),t===null)throw Error(c(387));u=r.pendingProps,g=r.memoizedState,d=g.element,Gd(t,r),So(r,u,null,s);var S=r.memoizedState;if(u=S.element,Re&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=Ai(Error(c(423)),r),r=Th(t,r,u,s,d);break e}else if(u!==d){d=Ai(Error(c(424)),r),r=Th(t,r,u,s,d);break e}else for(Re&&(lr=Tl(r.stateNode.containerInfo),Zt=r,et=!0,mr=null,ya=!1),s=Xd(r,null,u,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Oi(),u===d){r=Xr(t,r,s);break e}Bt(t,r,u,s)}r=r.child}return r;case 5:return Kd(r),t===null&&ql(r),u=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,S=d.children,qe(u,d)?S=null:g!==null&&qe(u,g)&&(r.flags|=32),Ph(t,r),Bt(t,r,S,s),r.child;case 6:return t===null&&ql(r),null;case 13:return kh(t,r,s);case 4:return au(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Ri(r,null,u,s):Bt(t,r,u,s),r.child;case 11:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:yr(u,d),xh(t,r,u,d,s);case 7:return Bt(t,r,r.pendingProps,s),r.child;case 8:return Bt(t,r,r.pendingProps.children,s),r.child;case 12:return Bt(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(u=r.type._context,d=r.pendingProps,g=r.memoizedProps,S=d.value,Ld(r,u,S),g!==null)if(Y(g.value,S)){if(g.children===d.children&&!Tt.current){r=Xr(t,r,s);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var A=g.dependencies;if(A!==null){S=g.child;for(var z=A.firstContext;z!==null;){if(z.context===u){if(g.tag===1){z=Wr(-1,s&-s),z.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var ae=q.pending;ae===null?z.next=z:(z.next=ae.next,ae.next=z),q.pending=z}}g.lanes|=s,z=g.alternate,z!==null&&(z.lanes|=s),eu(g.return,s,r),A.lanes|=s;break}z=z.next}}else if(g.tag===10)S=g.type===r.type?null:g.child;else if(g.tag===18){if(S=g.return,S===null)throw Error(c(341));S.lanes|=s,A=S.alternate,A!==null&&(A.lanes|=s),eu(S,s,r),S=g.sibling}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}Bt(t,r,d.children,s),r=r.child}return r;case 9:return d=r.type,u=r.pendingProps.children,ki(r,s),d=ur(d),u=u(d),r.flags|=1,Bt(t,r,u,s),r.child;case 14:return u=r.type,d=yr(u,r.pendingProps),d=yr(u.type,d),wh(t,r,u,d,s);case 15:return Eh(t,r,r.type,r.pendingProps,s);case 17:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:yr(u,d),Ro(t,r),r.tag=1,kt(u)?(t=!0,ln(r)):t=!1,ki(r,s),Ud(r,u,d),iu(r,u,d,s),Su(null,r,u,!0,t,s);case 19:return Mh(t,r,s);case 22:return Ch(t,r,s)}throw Error(c(156,r.tag))};function t0(t,r){return Pi(t,r)}function Sg(t,r,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(t,r,s,u){return new Sg(t,r,s,u)}function Hu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xg(t){if(typeof t=="function")return Hu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E)return 11;if(t===k)return 14}return 2}function mn(t,r){var s=t.alternate;return s===null?(s=fr(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ko(t,r,s,u,d,g){var S=2;if(u=t,typeof t=="function")Hu(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case m:return Kn(s.children,d,g,r);case C:S=8,d|=8;break;case w:return t=fr(12,s,r,d|2),t.elementType=w,t.lanes=g,t;case P:return t=fr(13,s,r,d),t.elementType=P,t.lanes=g,t;case T:return t=fr(19,s,r,d),t.elementType=T,t.lanes=g,t;case x:return qo(s,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:S=10;break e;case y:S=9;break e;case E:S=11;break e;case k:S=14;break e;case v:S=16,u=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return r=fr(S,s,r,d),r.elementType=t,r.type=u,r.lanes=g,r}function Kn(t,r,s,u){return t=fr(7,t,u,r),t.lanes=s,t}function qo(t,r,s,u){return t=fr(22,t,u,r),t.elementType=x,t.lanes=s,t.stateNode={isHidden:!1},t}function Vu(t,r,s){return t=fr(6,t,null,r),t.lanes=s,t}function Wu(t,r,s){return r=fr(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function wg(t,r,s,u,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ne,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ur(0),this.expirationTimes=Ur(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.identifierPrefix=u,this.onRecoverableError=d,Re&&(this.mutableSourceEagerHydrationData=null)}function r0(t,r,s,u,d,g,S,A,z){return t=new wg(t,r,s,A,z),r===1?(r=1,g===!0&&(r|=8)):r=0,g=fr(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ru(g),t}function n0(t){if(!t)return Tr;t=t._reactInternals;e:{if($(t)!==t||t.tag!==1)throw Error(c(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(kt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(c(171))}if(t.tag===1){var s=t.type;if(kt(s))return ha(t,s,r)}return r}function i0(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=X(r),t===null?null:t.stateNode}function a0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Yo(t,r){a0(t,r),(t=t.alternate)&&a0(t,r)}function Eg(t){return t=X(t),t===null?null:t.stateNode}function Cg(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Rr(t,134217728);if(r!==null){var s=$t();hr(r,t,134217728,s)}Yo(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Rr(t,1);if(r!==null){var s=$t();hr(r,t,1,s)}Yo(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=pn(t),s=Rr(t,r);if(s!==null){var u=$t();hr(s,t,r,u)}Yo(t,r)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=un(r.pendingLanes);s!==0&&(pa(r,s|1),Xt(r,pt()),!(be&6)&&(Li(),Qe()))}break;case 13:Xh(function(){var u=Rr(t,1);if(u!==null){var d=$t();hr(u,t,1,d)}}),Yo(t,1)}},n.batchedUpdates=function(t,r){var s=be;be|=1;try{return t(r)}finally{be=s,be===0&&(Li(),ve&&Qe())}},n.createComponentSelector=function(t){return{$$typeof:Io,value:t}},n.createContainer=function(t,r,s,u,d,g,S){return r0(t,r,!1,null,s,u,d,g,S)},n.createHasPseudoClassSelector=function(t){return{$$typeof:Lo,value:t}},n.createHydrationContainer=function(t,r,s,u,d,g,S,A,z){return t=r0(s,u,!0,t,d,g,S,A,z),t.context=n0(null),s=t.current,u=$t(),d=pn(s),g=Wr(u,d),g.callback=r??null,hn(s,g,d),t.current.lanes=d,cn(t,d,u),Xt(t,u),t},n.createPortal=function(t,r,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:u==null?null:""+u,children:t,containerInfo:r,implementation:s}},n.createRoleSelector=function(t){return{$$typeof:Do,value:t}},n.createTestNameSelector=function(t){return{$$typeof:Go,value:t}},n.createTextSelector=function(t){return{$$typeof:$o,value:t}},n.deferredUpdates=function(t){var r=Me,s=ct.transition;try{return ct.transition=null,Me=16,t()}finally{Me=r,ct.transition=s}},n.discreteUpdates=function(t,r,s,u,d){var g=Me,S=ct.transition;try{return ct.transition=null,Me=1,t(r,s,u,d)}finally{Me=g,ct.transition=S,be===0&&Li()}},n.findAllNodes=Au,n.findBoundingRects=function(t,r){if(!ft)throw Error(c(363));r=Au(t,r),t=[];for(var s=0;s<r.length;s++)t.push(Ge(r[s]));for(r=t.length-1;0<r;r--){s=t[r];for(var u=s.x,d=u+s.width,g=s.y,S=g+s.height,A=r-1;0<=A;A--)if(r!==A){var z=t[A],q=z.x,ae=q+z.width,Se=z.y,ee=Se+z.height;if(u>=q&&g>=Se&&d<=ae&&S<=ee){t.splice(r,1);break}else if(u!==q||s.width!==z.width||ee<g||Se>S){if(!(g!==Se||s.height!==z.height||ae<u||q>d)){q>u&&(z.width+=q-u,z.x=u),ae<d&&(z.width=d-q),t.splice(r,1);break}}else{Se>g&&(z.height+=Se-g,z.y=g),ee<S&&(z.height=S-Se),t.splice(r,1);break}}}return t},n.findHostInstance=i0,n.findHostInstanceWithNoPortals=function(t){return t=D(t),t=t!==null?Z(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return i0(t)},n.flushControlled=function(t){var r=be;be|=1;var s=ct.transition,u=Me;try{ct.transition=null,Me=1,t()}finally{Me=u,ct.transition=s,be=r,be===0&&(Li(),Qe())}},n.flushPassiveEffects=Xn,n.flushSync=Xh,n.focusWithin=function(t,r){if(!ft)throw Error(c(363));for(t=Ru(t),r=Hh(t,r),r=Array.from(r),t=0;t<r.length;){var s=r[t++];if(!Qt(s)){if(s.tag===5&&ia(s.stateNode))return!0;for(s=s.child;s!==null;)r.push(s),s=s.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Me},n.getFindAllNodesFailureDescription=function(t,r){if(!ft)throw Error(c(363));var s=0,u=[];t=[Ru(t),0];for(var d=0;d<t.length;){var g=t[d++],S=t[d++],A=r[S];if((g.tag!==5||!Qt(g))&&(Mu(g,A)&&(u.push(Nu(A)),S++,S>s&&(s=S)),S<r.length))for(g=g.child;g!==null;)t.push(g,S),g=g.sibling}if(s<r.length){for(t=[];s<r.length;s++)t.push(Nu(r[s]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return oe(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:Eg,findFiberByHostInstance:t.findFiberByHostInstance||Cg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{Gn=r.inject(t),L=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,s,u){if(!ft)throw Error(c(363));t=Au(t,r);var d=Mn(t,s,u).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var s=r._getVersion;s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s)},n.runWithPriority=function(t,r){var s=Me;try{return Me=t,r()}finally{Me=s}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,s,u){var d=r.current,g=$t(),S=pn(d);return s=n0(s),r.context===null?r.context=s:r.pendingContext=s,r=Wr(g,S),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=hn(d,r,S),t!==null&&(hr(t,d,S,g),_o(t,d,S)),S},n};p1.exports=o4;var s4=p1.exports;const l4=Ss(s4);var v1={exports:{}},oi={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */oi.ConcurrentRoot=1;oi.ContinuousEventPriority=4;oi.DefaultEventPriority=16;oi.DiscreteEventPriority=1;oi.IdleEventPriority=536870912;oi.LegacyRoot=0;v1.exports=oi;var m1=v1.exports;const J0={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Z0=!1,ef=!1;const Jc=".react-konva-event",u4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,c4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,d4={};function gl(a,e,n=d4){if(!Z0&&"zIndex"in e&&(console.warn(c4),Z0=!0),!ef&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(u4),ef=!0)}for(var l in n)if(!J0[l]){var c=l.slice(0,2)==="on",h=n[l]!==e[l];if(c&&h){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),a.off(f,n[l])}var p=!e.hasOwnProperty(l);p&&a.setAttr(l,void 0)}var m=e._useStrictMode,C={},w=!1;const _={};for(var l in e)if(!J0[l]){var c=l.slice(0,2)==="on",y=n[l]!==e[l];if(c&&y){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e[l]&&(_[f]=e[l])}!c&&(e[l]!==n[l]||m&&e[l]!==a.getAttr(l))&&(w=!0,C[l]=e[l])}w&&(a.setAttrs(C),kn(a));for(var f in _)a.on(f+Jc,_[f])}function kn(a){if(!Ce.Konva.autoDrawEnabled){var e=a.getLayer()||a.getStage();e&&e.batchDraw()}}const y1={},h4={};Wa.Node.prototype._applyProps=gl;function f4(a,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}a.add(e),kn(a)}function g4(a,e,n){let i=Wa[a];i||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Wa.Group);const o={},l={};for(var c in e){var h=c.slice(0,2)==="on";h?l[c]=e[c]:o[c]=e[c]}const f=new i(o);return gl(f,l),f}function p4(a,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function v4(a,e,n){return!1}function m4(a){return a}function y4(){return null}function _4(){return null}function S4(a,e,n,i){return h4}function x4(){}function w4(a){}function E4(a,e){return!1}function C4(){return y1}function P4(){return y1}const b4=setTimeout,O4=clearTimeout,T4=-1;function k4(a,e){return!1}const R4=!1,M4=!0,N4=!0;function A4(a,e){e.parent===a?e.moveToTop():a.add(e),kn(a)}function F4(a,e){e.parent===a?e.moveToTop():a.add(e),kn(a)}function _1(a,e,n){e._remove(),a.add(e),e.setZIndex(n.getZIndex()),kn(a)}function I4(a,e,n){_1(a,e,n)}function L4(a,e){e.destroy(),e.off(Jc),kn(a)}function D4(a,e){e.destroy(),e.off(Jc),kn(a)}function G4(a,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function $4(a,e,n){}function j4(a,e,n,i,o){gl(a,o,i)}function z4(a){a.hide(),kn(a)}function B4(a){}function U4(a,e){(e.visible==null||e.visible)&&a.show()}function H4(a,e){}function V4(a){}function W4(){}const X4=()=>m1.DefaultEventPriority,K4=Object.freeze(Object.defineProperty({__proto__:null,appendChild:A4,appendChildToContainer:F4,appendInitialChild:f4,cancelTimeout:O4,clearContainer:V4,commitMount:$4,commitTextUpdate:G4,commitUpdate:j4,createInstance:g4,createTextInstance:p4,detachDeletedInstance:W4,finalizeInitialChildren:v4,getChildHostContext:P4,getCurrentEventPriority:X4,getPublicInstance:m4,getRootHostContext:C4,hideInstance:z4,hideTextInstance:B4,idlePriority:ds.unstable_IdlePriority,insertBefore:_1,insertInContainerBefore:I4,isPrimaryRenderer:R4,noTimeout:T4,now:ds.unstable_now,prepareForCommit:y4,preparePortalMount:_4,prepareUpdate:S4,removeChild:L4,removeChildFromContainer:D4,resetAfterCommit:x4,resetTextContent:w4,run:ds.unstable_runWithPriority,scheduleTimeout:b4,shouldDeprioritizeSubtree:E4,shouldSetTextContent:k4,supportsMutation:N4,unhideInstance:U4,unhideTextInstance:H4,warnsIfNotActing:M4},Symbol.toStringTag,{value:"Module"}));var q4=Object.defineProperty,Y4=Object.defineProperties,Q4=Object.getOwnPropertyDescriptors,tf=Object.getOwnPropertySymbols,J4=Object.prototype.hasOwnProperty,Z4=Object.prototype.propertyIsEnumerable,rf=(a,e,n)=>e in a?q4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,nf=(a,e)=>{for(var n in e||(e={}))J4.call(e,n)&&rf(a,n,e[n]);if(tf)for(var n of tf(e))Z4.call(e,n)&&rf(a,n,e[n]);return a},e5=(a,e)=>Y4(a,Q4(e));function S1(a,e,n){if(!a)return;if(n(a)===!0)return a;let i=e?a.return:a.child;for(;i;){const o=S1(i,e,n);if(o)return o;i=e?null:i.sibling}}function x1(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const Zc=x1(N.createContext(null));class w1 extends N.Component{render(){return N.createElement(Zc.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:af,ReactCurrentDispatcher:of}=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function t5(){const a=N.useContext(Zc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const i of[af?.current,a,a?.alternate]){if(!i)continue;const o=S1(i,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(o)return o}},[a,e])}function r5(){var a,e;const n=t5(),[i]=N.useState(()=>new Map);i.clear();let o=n;for(;o;){const l=(a=o.type)==null?void 0:a._context;l&&l!==Zc&&!i.has(l)&&i.set(l,(e=of?.current)==null?void 0:e.readContext(x1(l))),o=o.return}return i}function n5(){const a=r5();return N.useMemo(()=>Array.from(a.keys()).reduce((e,n)=>i=>N.createElement(e,null,N.createElement(n.Provider,e5(nf({},i),{value:a.get(n)}))),e=>N.createElement(w1,nf({},e))),[a])}function i5(a){const e=He.useRef({});return He.useLayoutEffect(()=>{e.current=a}),He.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const a5=a=>{const e=He.useRef(),n=He.useRef(),i=He.useRef(),o=i5(a),l=n5(),c=h=>{const{forwardedRef:f}=a;f&&(typeof f=="function"?f(h):f.current=h)};return He.useLayoutEffect(()=>(n.current=new Wa.Stage({width:a.width,height:a.height,container:e.current}),c(n.current),i.current=Ba.createContainer(n.current,m1.LegacyRoot,!1,null),Ba.updateContainer(He.createElement(l,{},a.children),i.current),()=>{Wa.isBrowser&&(c(null),Ba.updateContainer(null,i.current,null),n.current.destroy())}),[]),He.useLayoutEffect(()=>{c(n.current),gl(n.current,a,o),Ba.updateContainer(He.createElement(l,{},a.children),i.current,null)}),He.createElement("div",{ref:e,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},o5="Layer",s5="Rect",l5="Image",u5="Text",Ba=l4(K4);Ba.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:He.version,rendererPackageName:"react-konva"});const c5=He.forwardRef((a,e)=>He.createElement(w1,{},He.createElement(a5,{...a,forwardedRef:e}))),d5=({imageSrc:a,objectBoxes:e,labelColors:n})=>{const[i,o]=N.useState({width:0,height:0}),[l,c]=N.useState({width:450,height:450}),[h,f]=N.useState(new window.Image),[p,m]=N.useState(1),[C,w]=N.useState({x:0,y:0}),_=y=>{y.evt.preventDefault();const P=y.target.getStage().getPointerPosition(),T=y.evt.deltaY>0?p/1.1:p*1.1;m(T);const k={x:P.x-(P.x-C.x)*(T/p),y:P.y-(P.y-C.y)*(T/p)};w(k)};return N.useEffect(()=>{const y=new window.Image;y.src=a,f(y),y.onload=()=>{y.width/y.height,l.width/l.height;let E=y.width,P=y.height;m(1),w({x:0,y:0}),o({width:E,height:P})}},[a]),G.jsx("div",{children:G.jsx(c5,{width:l.width,height:l.height,onWheel:_,draggable:!0,children:G.jsxs(o5,{children:[G.jsx(l5,{image:h,width:i.width,height:i.height,x:C.x,y:C.y,scaleX:p,scaleY:p}),e.map((y,E)=>G.jsxs(He.Fragment,{children:[G.jsx(s5,{x:y.x*p+C.x,y:y.y*p+C.y,width:y.width*p,height:y.height*p,fill:"rgba(0,0,0,0)",stroke:n[y.label],strokeWidth:2}),G.jsx(u5,{text:y.label,x:y.x*p+C.x,y:y.y*p+C.y,fontSize:12,fill:n[y.label]})]},E))]})})})},h5=d5;var ed={},pl={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function f5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var g5=function a(e,n){f5(this,a),this.data=e,this.text=n.text||e,this.options=n};Yt.default=g5;Object.defineProperty(pl,"__esModule",{value:!0});pl.CODE39=void 0;var p5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),v5=Yt,m5=y5(v5);function y5(a){return a&&a.__esModule?a:{default:a}}function _5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function S5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function x5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var w5=function(a){x5(e,a);function e(n,i){return _5(this,e),n=n.toUpperCase(),i.mod43&&(n+=P5(b5(n))),S5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return p5(e,[{key:"encode",value:function(){for(var i=cc("*"),o=0;o<this.data.length;o++)i+=cc(this.data[o])+"0";return i+=cc("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(m5.default),E1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],E5=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function cc(a){return C5(C1(a))}function C5(a){return E5[a].toString(2)}function P5(a){return E1[a]}function C1(a){return E1.indexOf(a)}function b5(a){for(var e=0,n=0;n<a.length;n++)e+=C1(a[n]);return e=e%43,e}pl.CODE39=w5;var Dr={},td={},ea={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var Ga;function dc(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var P1=Ze.SET_A=0,b1=Ze.SET_B=1,O1=Ze.SET_C=2;Ze.SHIFT=98;var O5=Ze.START_A=103,T5=Ze.START_B=104,k5=Ze.START_C=105;Ze.MODULO=103;Ze.STOP=106;Ze.FNC1=207;Ze.SET_BY_CODE=(Ga={},dc(Ga,O5,P1),dc(Ga,T5,b1),dc(Ga,k5,O1),Ga);Ze.SWAP={101:P1,100:b1,99:O1};Ze.A_START_CHAR="Ð";Ze.B_START_CHAR="Ñ";Ze.C_START_CHAR="Ò";Ze.A_CHARS="[\0-_È-Ï]";Ze.B_CHARS="[ -È-Ï]";Ze.C_CHARS="(Ï*[0-9]{2}Ï*)";Ze.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(ea,"__esModule",{value:!0});var R5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),M5=Yt,N5=A5(M5),tr=Ze;function A5(a){return a&&a.__esModule?a:{default:a}}function F5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function I5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function L5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var D5=function(a){L5(e,a);function e(n,i){F5(this,e);var o=I5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return R5(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=tr.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(tr.FNC1);var c=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+c.result+e.getBar((c.checksum+o)%tr.MODULO)+e.getBar(tr.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return tr.BARS[i]?tr.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===tr.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===tr.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var c=void 0,h=void 0;if(i[0]>=200){h=i.shift()-105;var f=tr.SWAP[h];f!==void 0?c=e.next(i,o+1,f):((l===tr.SET_A||l===tr.SET_B)&&h===tr.SHIFT&&(i[0]=l===tr.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),c=e.next(i,o+1,l))}else h=e.correctIndex(i,l),c=e.next(i,o+1,l);var p=e.getBar(h),m=h*o;return{result:p+c.result,checksum:m+c.checksum}}}]),e}(N5.default);ea.default=D5;var rd={};Object.defineProperty(rd,"__esModule",{value:!0});var xn=Ze,T1=function(e){return e.match(new RegExp("^"+xn.A_CHARS+"*"))[0].length},k1=function(e){return e.match(new RegExp("^"+xn.B_CHARS+"*"))[0].length},R1=function(e){return e.match(new RegExp("^"+xn.C_CHARS+"*"))[0]};function nd(a,e){var n=e?xn.A_CHARS:xn.B_CHARS,i=a.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"Ì"+M1(a.substring(i[1].length));var o=a.match(new RegExp("^"+n+"+"))[0];return o.length===a.length?a:o+String.fromCharCode(e?205:206)+nd(a.substring(o.length),!e)}function M1(a){var e=R1(a),n=e.length;if(n===a.length)return a;a=a.substring(n);var i=T1(a)>=k1(a);return e+String.fromCharCode(i?206:205)+nd(a,i)}rd.default=function(a){var e=void 0,n=R1(a).length;if(n>=2)e=xn.C_START_CHAR+M1(a);else{var i=T1(a)>k1(a);e=(i?xn.A_START_CHAR:xn.B_START_CHAR)+nd(a,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return"Ë"+l})};Object.defineProperty(td,"__esModule",{value:!0});var G5=ea,$5=N1(G5),j5=rd,z5=N1(j5);function N1(a){return a&&a.__esModule?a:{default:a}}function B5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function hc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function U5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var H5=function(a){U5(e,a);function e(n,i){if(B5(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,z5.default)(n),i));else var o=hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return hc(o)}return e}($5.default);td.default=H5;var id={};Object.defineProperty(id,"__esModule",{value:!0});var V5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),W5=ea,X5=K5(W5),sf=Ze;function K5(a){return a&&a.__esModule?a:{default:a}}function q5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Q5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var J5=function(a){Q5(e,a);function e(n,i){return q5(this,e),Y5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,sf.A_START_CHAR+n,i))}return V5(e,[{key:"valid",value:function(){return new RegExp("^"+sf.A_CHARS+"+$").test(this.data)}}]),e}(X5.default);id.default=J5;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});var Z5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),e6=ea,t6=r6(e6),lf=Ze;function r6(a){return a&&a.__esModule?a:{default:a}}function n6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function a6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var o6=function(a){a6(e,a);function e(n,i){return n6(this,e),i6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,lf.B_START_CHAR+n,i))}return Z5(e,[{key:"valid",value:function(){return new RegExp("^"+lf.B_CHARS+"+$").test(this.data)}}]),e}(t6.default);ad.default=o6;var od={};Object.defineProperty(od,"__esModule",{value:!0});var s6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l6=ea,u6=c6(l6),uf=Ze;function c6(a){return a&&a.__esModule?a:{default:a}}function d6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function h6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function f6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var g6=function(a){f6(e,a);function e(n,i){return d6(this,e),h6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,uf.C_START_CHAR+n,i))}return s6(e,[{key:"valid",value:function(){return new RegExp("^"+uf.C_CHARS+"+$").test(this.data)}}]),e}(u6.default);od.default=g6;Object.defineProperty(Dr,"__esModule",{value:!0});Dr.CODE128C=Dr.CODE128B=Dr.CODE128A=Dr.CODE128=void 0;var p6=td,v6=vl(p6),m6=id,y6=vl(m6),_6=ad,S6=vl(_6),x6=od,w6=vl(x6);function vl(a){return a&&a.__esModule?a:{default:a}}Dr.CODE128=v6.default;Dr.CODE128A=y6.default;Dr.CODE128B=S6.default;Dr.CODE128C=w6.default;var qt={},sd={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.SIDE_BIN="101";vr.MIDDLE_BIN="01010";vr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};vr.EAN2_STRUCTURE=["LL","LG","GL","GG"];vr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];vr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var ml={},si={};Object.defineProperty(si,"__esModule",{value:!0});var E6=vr,C6=function(e,n,i){var o=e.split("").map(function(c,h){return E6.BINARIES[n[h]]}).map(function(c,h){return c?c[e[h]]:""});if(i){var l=e.length-1;o=o.map(function(c,h){return h<l?c+i:c})}return o.join("")};si.default=C6;Object.defineProperty(ml,"__esModule",{value:!0});var P6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ji=vr,b6=si,cf=A1(b6),O6=Yt,T6=A1(O6);function A1(a){return a&&a.__esModule?a:{default:a}}function k6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function R6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function M6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var N6=function(a){M6(e,a);function e(n,i){k6(this,e);var o=R6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return P6(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:ji.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:ji.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:ji.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[ji.SIDE_BIN,this.leftEncode(),ji.MIDDLE_BIN,this.rightEncode(),ji.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(T6.default);ml.default=N6;Object.defineProperty(sd,"__esModule",{value:!0});var A6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),$a=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},F6=vr,I6=ml,L6=D6(I6);function D6(a){return a&&a.__esModule?a:{default:a}}function G6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function $6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function j6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var df=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},z6=function(a){j6(e,a);function e(n,i){G6(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=df(n));var o=$6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return A6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===df(this.data)}},{key:"leftText",value:function(){return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=F6.EAN13_STRUCTURE[this.data[0]];return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=$a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(L6.default);sd.default=z6;var ld={};Object.defineProperty(ld,"__esModule",{value:!0});var B6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),os=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},U6=ml,H6=V6(U6);function V6(a){return a&&a.__esModule?a:{default:a}}function W6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function X6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function K6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var hf=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},q6=function(a){K6(e,a);function e(n,i){return W6(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=hf(n)),X6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return B6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===hf(this.data)}},{key:"leftText",value:function(){return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(H6.default);ld.default=q6;var ud={};Object.defineProperty(ud,"__esModule",{value:!0});var Y6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Q6=vr,J6=si,Z6=F1(J6),e8=Yt,t8=F1(e8);function F1(a){return a&&a.__esModule?a:{default:a}}function r8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function n8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function i8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var a8=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},o8=function(a){i8(e,a);function e(n,i){return r8(this,e),n8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return Y6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=Q6.EAN5_STRUCTURE[a8(this.data)];return{data:"1011"+(0,Z6.default)(this.data,i,"01"),text:this.text}}}]),e}(t8.default);ud.default=o8;var cd={};Object.defineProperty(cd,"__esModule",{value:!0});var s8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l8=vr,u8=si,c8=I1(u8),d8=Yt,h8=I1(d8);function I1(a){return a&&a.__esModule?a:{default:a}}function f8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function g8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function p8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var v8=function(a){p8(e,a);function e(n,i){return f8(this,e),g8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return s8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=l8.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,c8.default)(this.data,i,"01"),text:this.text}}}]),e}(h8.default);cd.default=v8;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var m8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();eo.checksum=Mc;var y8=si,zi=L1(y8),_8=Yt,S8=L1(_8);function L1(a){return a&&a.__esModule?a:{default:a}}function x8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function w8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function E8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var C8=function(a){E8(e,a);function e(n,i){x8(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=Mc(n));var o=w8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return m8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Mc(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,zi.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,zi.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,zi.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,zi.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,zi.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,zi.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(S8.default);function Mc(a){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(a[n]);for(n=0;n<11;n+=2)e+=parseInt(a[n])*3;return(10-e%10)%10}eo.default=C8;var dd={};Object.defineProperty(dd,"__esModule",{value:!0});var P8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),b8=si,O8=D1(b8),T8=Yt,k8=D1(T8),R8=eo;function D1(a){return a&&a.__esModule?a:{default:a}}function M8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function fc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function N8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var A8=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],F8=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],I8=function(a){N8(e,a);function e(n,i){M8(this,e);var o=fc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=ff(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=ff(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return fc(o);else return fc(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return P8(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=F8[parseInt(o)][parseInt(i)];return(0,O8.default)(this.middleDigits,l)}}]),e}(k8.default);function ff(a,e){for(var n=parseInt(a[a.length-1]),i=A8[n],o="",l=0,c=0;c<i.length;c++){var h=i[c];h==="X"?o+=a[l++]:o+=h}return o=""+e+o,""+o+(0,R8.checksum)(o)}dd.default=I8;Object.defineProperty(qt,"__esModule",{value:!0});qt.UPCE=qt.UPC=qt.EAN2=qt.EAN5=qt.EAN8=qt.EAN13=void 0;var L8=sd,D8=ta(L8),G8=ld,$8=ta(G8),j8=ud,z8=ta(j8),B8=cd,U8=ta(B8),H8=eo,V8=ta(H8),W8=dd,X8=ta(W8);function ta(a){return a&&a.__esModule?a:{default:a}}qt.EAN13=D8.default;qt.EAN8=$8.default;qt.EAN5=z8.default;qt.EAN2=U8.default;qt.UPC=V8.default;qt.UPCE=X8.default;var Xi={},yl={},to={};Object.defineProperty(to,"__esModule",{value:!0});to.START_BIN="1010";to.END_BIN="11101";to.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(yl,"__esModule",{value:!0});var K8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ss=to,q8=Yt,Y8=Q8(q8);function Q8(a){return a&&a.__esModule?a:{default:a}}function J8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Z8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ey(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var ty=function(a){ey(e,a);function e(){return J8(this,e),Z8(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return K8(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:ss.START_BIN+o+ss.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=ss.BINARIES[i[1]];return ss.BINARIES[i[0]].split("").map(function(l,c){return(l==="1"?"111":"1")+(o[c]==="1"?"000":"0")}).join("")}}]),e}(Y8.default);yl.default=ty;var hd={};Object.defineProperty(hd,"__esModule",{value:!0});var ry=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ny=yl,iy=ay(ny);function ay(a){return a&&a.__esModule?a:{default:a}}function oy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function sy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ly(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var gf=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},uy=function(a){ly(e,a);function e(n,i){return oy(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=gf(n)),sy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return ry(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===gf(this.data)}}]),e}(iy.default);hd.default=uy;Object.defineProperty(Xi,"__esModule",{value:!0});Xi.ITF14=Xi.ITF=void 0;var cy=yl,dy=G1(cy),hy=hd,fy=G1(hy);function G1(a){return a&&a.__esModule?a:{default:a}}Xi.ITF=dy.default;Xi.ITF14=fy.default;var pr={},li={};Object.defineProperty(li,"__esModule",{value:!0});var gy=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),py=Yt,vy=my(py);function my(a){return a&&a.__esModule?a:{default:a}}function yy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _y(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Sy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var xy=function(a){Sy(e,a);function e(n,i){return yy(this,e),_y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return gy(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),c=l.toString(2);c=wy(c,4-c.length);for(var h=0;h<c.length;h++)i+=c[h]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(vy.default);function wy(a,e){for(var n=0;n<e;n++)a="0"+a;return a}li.default=xy;var fd={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.mod10=Ey;ui.mod11=Cy;function Ey(a){for(var e=0,n=0;n<a.length;n++){var i=parseInt(a[n]);(n+a.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function Cy(a){for(var e=0,n=[2,3,4,5,6,7],i=0;i<a.length;i++){var o=parseInt(a[a.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(fd,"__esModule",{value:!0});var Py=li,by=Ty(Py),Oy=ui;function Ty(a){return a&&a.__esModule?a:{default:a}}function ky(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Ry(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function My(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Ny=function(a){My(e,a);function e(n,i){return ky(this,e),Ry(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Oy.mod10)(n),i))}return e}(by.default);fd.default=Ny;var gd={};Object.defineProperty(gd,"__esModule",{value:!0});var Ay=li,Fy=Ly(Ay),Iy=ui;function Ly(a){return a&&a.__esModule?a:{default:a}}function Dy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Gy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function $y(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var jy=function(a){$y(e,a);function e(n,i){return Dy(this,e),Gy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Iy.mod11)(n),i))}return e}(Fy.default);gd.default=jy;var pd={};Object.defineProperty(pd,"__esModule",{value:!0});var zy=li,By=Uy(zy),pf=ui;function Uy(a){return a&&a.__esModule?a:{default:a}}function Hy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Vy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Wy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Xy=function(a){Wy(e,a);function e(n,i){return Hy(this,e),n+=(0,pf.mod10)(n),n+=(0,pf.mod10)(n),Vy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(By.default);pd.default=Xy;var vd={};Object.defineProperty(vd,"__esModule",{value:!0});var Ky=li,qy=Yy(Ky),vf=ui;function Yy(a){return a&&a.__esModule?a:{default:a}}function Qy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Jy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Zy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var e_=function(a){Zy(e,a);function e(n,i){return Qy(this,e),n+=(0,vf.mod11)(n),n+=(0,vf.mod10)(n),Jy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(qy.default);vd.default=e_;Object.defineProperty(pr,"__esModule",{value:!0});pr.MSI1110=pr.MSI1010=pr.MSI11=pr.MSI10=pr.MSI=void 0;var t_=li,r_=ro(t_),n_=fd,i_=ro(n_),a_=gd,o_=ro(a_),s_=pd,l_=ro(s_),u_=vd,c_=ro(u_);function ro(a){return a&&a.__esModule?a:{default:a}}pr.MSI=r_.default;pr.MSI10=i_.default;pr.MSI11=o_.default;pr.MSI1010=l_.default;pr.MSI1110=c_.default;var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.pharmacode=void 0;var d_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),h_=Yt,f_=g_(h_);function g_(a){return a&&a.__esModule?a:{default:a}}function p_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function v_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function m_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var y_=function(a){m_(e,a);function e(n,i){p_(this,e);var o=v_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return d_(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(f_.default);_l.pharmacode=y_;var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.codabar=void 0;var __=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),S_=Yt,x_=w_(S_);function w_(a){return a&&a.__esModule?a:{default:a}}function E_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function C_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function P_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var b_=function(a){P_(e,a);function e(n,i){E_(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=C_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return __(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(x_.default);Sl.codabar=b_;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.GenericBarcode=void 0;var O_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),T_=Yt,k_=R_(T_);function R_(a){return a&&a.__esModule?a:{default:a}}function M_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function N_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function A_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var F_=function(a){A_(e,a);function e(n,i){return M_(this,e),N_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return O_(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(k_.default);xl.GenericBarcode=F_;Object.defineProperty(ed,"__esModule",{value:!0});var I_=pl,ls=Dr,Bi=qt,mf=Xi,ja=pr,L_=_l,D_=Sl,G_=xl;ed.default={CODE39:I_.CODE39,CODE128:ls.CODE128,CODE128A:ls.CODE128A,CODE128B:ls.CODE128B,CODE128C:ls.CODE128C,EAN13:Bi.EAN13,EAN8:Bi.EAN8,EAN5:Bi.EAN5,EAN2:Bi.EAN2,UPC:Bi.UPC,UPCE:Bi.UPCE,ITF14:mf.ITF14,ITF:mf.ITF,MSI:ja.MSI,MSI10:ja.MSI10,MSI11:ja.MSI11,MSI1010:ja.MSI1010,MSI1110:ja.MSI1110,pharmacode:L_.pharmacode,codabar:D_.codabar,GenericBarcode:G_.GenericBarcode};var ra={};Object.defineProperty(ra,"__esModule",{value:!0});var $_=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a};ra.default=function(a,e){return $_({},a,e)};var md={};Object.defineProperty(md,"__esModule",{value:!0});md.default=j_;function j_(a){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(a),e}var yd={};Object.defineProperty(yd,"__esModule",{value:!0});yd.default=z_;function z_(a){return a.marginTop=a.marginTop||a.margin,a.marginBottom=a.marginBottom||a.margin,a.marginRight=a.marginRight||a.margin,a.marginLeft=a.marginLeft||a.margin,a}var _d={},Sd={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.default=B_;function B_(a){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof a[n]=="string"&&(a[n]=parseInt(a[n],10)));return typeof a.displayValue=="string"&&(a.displayValue=a.displayValue!="false"),a}var El={};Object.defineProperty(El,"__esModule",{value:!0});var U_={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};El.default=U_;Object.defineProperty(Sd,"__esModule",{value:!0});var H_=wl,V_=$1(H_),W_=El,yf=$1(W_);function $1(a){return a&&a.__esModule?a:{default:a}}function X_(a){var e={};for(var n in yf.default)yf.default.hasOwnProperty(n)&&(a.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=a.getAttribute("jsbarcode-"+n.toLowerCase())),a.hasAttribute("data-"+n.toLowerCase())&&(e[n]=a.getAttribute("data-"+n.toLowerCase())));return e.value=a.getAttribute("jsbarcode-value")||a.getAttribute("data-value"),e=(0,V_.default)(e),e}Sd.default=X_;var xd={},wd={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.getTotalWidthOfEncodings=nr.calculateEncodingAttributes=nr.getBarcodePadding=nr.getEncodingHeight=nr.getMaximumHeightOfEncodings=void 0;var K_=ra,q_=Y_(K_);function Y_(a){return a&&a.__esModule?a:{default:a}}function j1(a,e){return e.height+(e.displayValue&&a.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function z1(a,e,n){if(n.displayValue&&e<a){if(n.textAlign=="center")return Math.floor((a-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(a-e)}return 0}function Q_(a,e,n){for(var i=0;i<a.length;i++){var o=a[i],l=(0,q_.default)(e,o.options),c;l.displayValue?c=e9(o.text,l,n):c=0;var h=o.data.length*l.width;o.width=Math.ceil(Math.max(c,h)),o.height=j1(o,l),o.barcodePadding=z1(c,h,l)}}function J_(a){for(var e=0,n=0;n<a.length;n++)e+=a[n].width;return e}function Z_(a){for(var e=0,n=0;n<a.length;n++)a[n].height>e&&(e=a[n].height);return e}function e9(a,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(a);if(!o)return 0;var l=o.width;return l}nr.getMaximumHeightOfEncodings=Z_;nr.getEncodingHeight=j1;nr.getBarcodePadding=z1;nr.calculateEncodingAttributes=Q_;nr.getTotalWidthOfEncodings=J_;Object.defineProperty(wd,"__esModule",{value:!0});var t9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),r9=ra,n9=i9(r9),gc=nr;function i9(a){return a&&a.__esModule?a:{default:a}}function a9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var o9=function(){function a(e,n,i){a9(this,a),this.canvas=e,this.encodings=n,this.options=i}return t9(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,n9.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,gc.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,gc.getTotalWidthOfEncodings)(this.encodings),o=(0,gc.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,c;n.textPosition=="top"?c=n.marginTop+n.fontSize+n.textMargin:c=n.marginTop,o.fillStyle=n.lineColor;for(var h=0;h<l.length;h++){var f=h*n.width+i.barcodePadding;l[h]==="1"?o.fillRect(f,c,n.width,n.height):l[h]&&o.fillRect(f,c,n.width,n.height*l[h])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var c,h;n.textPosition=="top"?h=n.marginTop+n.fontSize-n.textMargin:h=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(c=0,o.textAlign="left"):n.textAlign=="right"?(c=i.width-1,o.textAlign="right"):(c=i.width/2,o.textAlign="center"),o.fillText(i.text,c,h)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),a}();wd.default=o9;var Ed={};Object.defineProperty(Ed,"__esModule",{value:!0});var s9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l9=ra,u9=c9(l9),pc=nr;function c9(a){return a&&a.__esModule?a:{default:a}}function d9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var us="http://www.w3.org/2000/svg",h9=function(){function a(e,n,i){d9(this,a),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return s9(a,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,u9.default)(this.options,o.options),c=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(c,l),this.drawSvgBarcode(c,l,o),this.drawSVGText(c,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,pc.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,pc.getTotalWidthOfEncodings)(this.encodings),i=(0,pc.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,c;i.textPosition=="top"?c=i.fontSize+i.textMargin:c=0;for(var h=0,f=0,p=0;p<l.length;p++)f=p*i.width+o.barcodePadding,l[p]==="1"?h++:h>0&&(this.drawRect(f-i.width*h,c,i.width*h,i.height,n),h=0);h>0&&this.drawRect(f-i.width*(h-1),c,i.width*h,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(us,"text");if(i.displayValue){var c,h;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?h=i.fontSize-i.textMargin:h=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(c=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(c=o.width-1,l.setAttribute("text-anchor","end")):(c=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",c),l.setAttribute("y",h),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",us),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(us,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,c){var h=this.document.createElementNS(us,"rect");return h.setAttribute("x",n),h.setAttribute("y",i),h.setAttribute("width",o),h.setAttribute("height",l),c.appendChild(h),h}}]),a}();Ed.default=h9;var Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});var f9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function g9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var p9=function(){function a(e,n,i){g9(this,a),this.object=e,this.encodings=n,this.options=i}return f9(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a}();Cd.default=p9;Object.defineProperty(xd,"__esModule",{value:!0});var v9=wd,m9=Pd(v9),y9=Ed,_9=Pd(y9),S9=Cd,x9=Pd(S9);function Pd(a){return a&&a.__esModule?a:{default:a}}xd.default={CanvasRenderer:m9.default,SVGRenderer:_9.default,ObjectRenderer:x9.default};var na={};Object.defineProperty(na,"__esModule",{value:!0});function bd(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Od(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Td(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var w9=function(a){Td(e,a);function e(n,i){bd(this,e);var o=Od(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),E9=function(a){Td(e,a);function e(){bd(this,e);var n=Od(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),C9=function(a){Td(e,a);function e(){bd(this,e);var n=Od(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);na.InvalidInputException=w9;na.InvalidElementException=E9;na.NoElementException=C9;Object.defineProperty(_d,"__esModule",{value:!0});var P9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b9=Sd,Nc=B1(b9),O9=xd,Ua=B1(O9),T9=na;function B1(a){return a&&a.__esModule?a:{default:a}}function kd(a){if(typeof a=="string")return k9(a);if(Array.isArray(a)){for(var e=[],n=0;n<a.length;n++)e.push(kd(a[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return R9(a);if(a&&a.nodeName&&a.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,Nc.default)(a),renderer:Ua.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,Nc.default)(a),renderer:Ua.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:Ua.default.CanvasRenderer};if(a&&(typeof a>"u"?"undefined":P9(a))==="object"&&!a.nodeName)return{element:a,renderer:Ua.default.ObjectRenderer};throw new T9.InvalidElementException}}function k9(a){var e=document.querySelectorAll(a);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(kd(e[i]));return n}}function R9(a){var e=document.createElement("canvas");return{element:e,options:(0,Nc.default)(a),renderer:Ua.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",e.toDataURL())}}}_d.default=kd;var Rd={};Object.defineProperty(Rd,"__esModule",{value:!0});var M9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function N9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var A9=function(){function a(e){N9(this,a),this.api=e}return M9(a,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),a}();Rd.default=A9;var F9=ed,Yn=Rn(F9),I9=ra,no=Rn(I9),L9=md,U1=Rn(L9),D9=yd,_f=Rn(D9),G9=_d,$9=Rn(G9),j9=wl,z9=Rn(j9),B9=Rd,U9=Rn(B9),H1=na,H9=El,V1=Rn(H9);function Rn(a){return a&&a.__esModule?a:{default:a}}var Zr=function(){},Cl=function(e,n,i){var o=new Zr;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,$9.default)(e),o._encodings=[],o._options=V1.default,o._errorHandler=new U9.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=X1()),o.options(i)[i.format](n,i).render()),o};Cl.getModule=function(a){return Yn.default[a]};for(var Sf in Yn.default)Yn.default.hasOwnProperty(Sf)&&V9(Yn.default,Sf);function V9(a,e){Zr.prototype[e]=Zr.prototype[e.toUpperCase()]=Zr.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,no.default)(o._options,i);l=(0,z9.default)(l);var c=a[e],h=W1(n,c,l);return o._encodings.push(h),o})}}function W1(a,e,n){a=""+a;var i=new e(a,n);if(!i.valid())throw new H1.InvalidInputException(i.constructor.name,a);var o=i.encode();o=(0,U1.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,no.default)(n,o[l].options);return o}function X1(){return Yn.default.CODE128?"CODE128":Object.keys(Yn.default)[0]}Zr.prototype.options=function(a){return this._options=(0,no.default)(this._options,a),this};Zr.prototype.blank=function(a){var e=new Array(a+1).join("0");return this._encodings.push({data:e}),this};Zr.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var a;for(var e in this._renderProperties){a=this._renderProperties[e];var n=(0,no.default)(this._options,a.options);n.format=="auto"&&(n.format=X1()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Yn.default[n.format.toUpperCase()],l=W1(i,o,n);Ac(a,l,n)})}}};Zr.prototype.render=function(){if(!this._renderProperties)throw new H1.NoElementException;if(Array.isArray(this._renderProperties))for(var a=0;a<this._renderProperties.length;a++)Ac(this._renderProperties[a],this._encodings,this._options);else Ac(this._renderProperties,this._encodings,this._options);return this};Zr.prototype._defaults=V1.default;function Ac(a,e,n){e=(0,U1.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,no.default)(n,e[i].options),(0,_f.default)(e[i].options);(0,_f.default)(n);var o=a.renderer,l=new o(a.element,e,n);l.render(),a.afterRender&&a.afterRender()}typeof window<"u"&&(window.JsBarcode=Cl);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(a,e){var n=[];return jQuery(this).each(function(){n.push(this)}),Cl(n,a,e)});var W9=Cl;const X9=Ss(W9),Ui=Xg.apiUrl;function K9(){const[a,e]=N.useState("checkbox"),[n,i]=N.useState([]),[o,l]=N.useState(""),[c]=Qo(),[h]=Qo(),[f]=Qo(),[p]=Qo(),[m,C]=N.useState(!1),[w,_]=N.useState(!1),[y,E]=N.useState({}),[P,T]=N.useState(!1),[k,v]=N.useState({}),[x,b]=N.useState(!1),[R,B]=N.useState(!1),[O,$]=N.useState(!1),[M,D]=N.useState(!1),[X,W]=N.useState(!1),[Z,K]=N.useState(!1),[oe,ce]=N.useState(!1),[pe,Oe]=N.useState(!1),[se,Q]=N.useState(!1),[de,Te]=N.useState({}),[we,qe]=N.useState([]),[Ae,F]=N.useState(""),[V,ne]=N.useState([]),[fe,ge]=N.useState({}),[De,Re]=N.useState(!1),[Ft,Fe]=N.useState({}),[bt,Ye]=N.useState(!1),[Ie,ut]=N.useState([]),[ft,Be]=N.useState(null),[Ge,gt]=N.useState([]),[Qt,br]=N.useState(!1),[ia,Mn]=N.useState(!1),[aa,ci]=N.useState(!1),[ir,an]=N.useState([]),[oa,ar]=N.useState(""),[on,sa]=N.useState([]),[la,Nn]=N.useState(!1),[ua,di]=N.useState(!1),[re,_e]=N.useState(""),[Ue,Ot]=N.useState([]),[jr,hi]=N.useState([]),[ca,sn]=N.useState([]),[io,ao]=N.useState(""),[oo,Pl]=N.useState([]),[bl,fi]=N.useState(!1);let An={};const[da,Ol]=N.useState([]),[gi,pi]=N.useState([]),Tl={action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",multiple:!1,onRemove:()=>{pi([])},beforeUpload:async L=>{try{const H=L.name.toLowerCase();if(H.endsWith(".xls")||H.endsWith(".xlsx")||H.endsWith(".xlsm")||H.endsWith(".xlsb")||H.endsWith(".csv")||H.endsWith(".ods")){let J=[{uid:"-1",name:L.name,status:"done",url:""}];pi(J);const Y=new FileReader;return Y.onload=ue=>{const ve=ue.target.result,ot=Vg(ve,{type:"buffer"}),Jt=ot.SheetNames[0],$n=ot.Sheets[Jt],Qe=Wg.sheet_to_json($n,{header:1});let Rt=[];if(Qe.length>=2)for(let It=1;It<Qe.length;It++){let bi={product_code:Qe[It][0]?Qe[It][0]:"",barcode:Qe[It][1]?Qe[It][1]:"",product_name:Qe[It][2],product_description:Qe[It][3],url_images:JSON.parse(Qe[It][4])};Rt.push(bi)}console.log(Rt),Ol(Rt)},Y.readAsArrayBuffer(L),!1}else return ye.error("Đã xảy ra lỗi, không đúng định dạng file: xls, xlsx, xlsm, xlsb, csv, ods"),!1}catch{return ye.error("File không chính xác, tải dữ liệu mẫu để tiếp tục"),!1}}},kl={onRemove:L=>{const H=L.name;ne(J=>J.filter(Y=>Y.split("/").pop()!==H))},beforeUpload:async L=>{const H=L.type==="image/jpeg"||L.type==="image/png";if(!H)return ye.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),H;const J=L.size/1024/1024<2;if(!J)return ye.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),J;const Y=new FormData,ue={file:L,category_name:de.name};for(const[ot,Jt]of Object.entries(ue))Y.append(ot,Jt);const ve=await jt.post("/api/method/mbw_audit.api.api.upload_file_for_product",Y);return ve.message=="ok"?(ne(ot=>[...ot,ve.result.file_url]),ye.success("Tải ảnh thành công")):ye.error("Tải ảnh thất bại"),!1}},Rl={onRemove:L=>{},beforeUpload:async L=>{const H=L.type==="image/jpeg"||L.type==="image/png";if(!H)return ye.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),H;const J=L.size/1024/1024<2;if(!J)return ye.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),J;const Y=new FormData,ue={file:L,category_name:de.name};for(const[ot,Jt]of Object.entries(ue))Y.append(ot,Jt);const ve=await jt.post("/api/method/mbw_audit.api.api.upload_file_for_product",Y);return ve.message=="ok"?(ut(ot=>[...ot,ve.result.file_url]),ye.success("Tải ảnh thành công")):ye.error("Tải ảnh thất bại"),!1}},Ml={onRemove:()=>{sn([]),an([])},action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",accept:"image/png, image/jpeg",beforeUpload:async L=>{const H=L.type==="image/jpeg"||L.type==="image/png";if(!H)return ye.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),H;const J=L.size/1024/1024<2;if(!J)return ye.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),J;const Y=new FormData,ue={file:L};for(const[ot,Jt]of Object.entries(ue))Y.append(ot,Jt);const ve=await jt.post("/api/method/mbw_audit.api.api.upload_file_for_checking",Y);if(ve.message=="ok"){let ot=[],Jt={uid:"-1",name:ve.result.date_time,status:"done",url:ve.result.file_url};ot.push(Jt),sn(ot),an($n=>[...$n,ve.result.file_url]),ye.success("Tải ảnh thành công")}else ye.error("Tải ảnh thất bại");return!1}},Nl=[{title:"Mã Sản phẩm",dataIndex:"product_code",render:(L,H)=>G.jsx("a",{href:"javascript:;",onClick:()=>kt(H),children:L})},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Hành động",key:"action",render:(L,H)=>G.jsxs(G.Fragment,{children:[G.jsx(yc,{className:"mr-4",onClick:()=>kt(H)}),G.jsx(Xu,{onClick:()=>lo(H)})]})}],Al={onChange:(L,H)=>{gt(H),H.length>0?br(!0):br(!1)}},Fn=async()=>{try{let L='/api/resource/VGM_Category?fields=["*"]';if(o!=null&&o!=""){let J=`[["category_name", "like", "%${o}%"]]`;L+=`&filters=${J}`}const H=await jt.get(L);if(H&&H.data){let J=H.data.map((Y,ue)=>({...Y,key:Y.name,hidden:!0,selected:ue===0}));J=so(J,"category_name"),i(J),J.length>0&&Te(J[0])}}catch{}finally{}};N.useEffect(()=>{Fn()},[]),N.useEffect(()=>{Fn()},[o]);const Fl=L=>{l(L.target.value)},so=(L,H)=>L.sort((J,Y)=>J[H]&&Y[H]?J[H].localeCompare(Y[H]):0),Il=(L,H)=>{i(J=>J.map(Y=>Y.key===H.key?{...Y,hidden:!1}:Y))},Ll=(L,H)=>{i(J=>J.map(Y=>Y.key===H.key?{...Y,hidden:!0}:Y))},Dl=L=>{let H={item:L,title:"Xóa "+L.category_name,contentConfirm:"Bạn có chắc muốn xóa "+L.category_name+" ra khỏi hệ thống không?",contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};E(H),T(!0)},Gl=async()=>{if(y!=null&&y.item!=null){let L=[];L=[y.item.name];let H=Ui+".api.deleteListByDoctype",J={doctype:"VGM_Category",items:JSON.stringify(L)},Y=await jt.post(H,J);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ye.success("Xóa thành công"),Fn(),vi()):ye.error("Xóa thất bại, Danh mục này đang được sử dụng")}},vi=()=>{T(!1),E({})},In=L=>{h.setFieldsValue({name_item:L.category_name,des:L.category_description}),v(L),b(!0)},mi=async()=>{D(!0);let L=h.getFieldsValue();if(k!=null&&k.name!=null){let H=`/api/resource/VGM_Category/${k.name}`,J={category_name:L.name_item,category_description:L.des},Y=await jt.put(H,J);Y!=null&&Y.data!=null?(ye.success("Sửa thành công"),D(!1),Fn(),Ln()):(ye.error("Sửa thất bại"),D(!1))}},Ln=()=>{v({}),b(!1)},$l=()=>{_(!0)},yi=async()=>{B(!0);const L=c.getFieldsValue(),H=L.name_item.trim();if(!H){ye.warning("Vui lòng nhập tên danh mục.");return}if(n.some(Y=>Y.category_name.toLowerCase()===H.toLowerCase())){ye.error("Danh mục đã tồn tại."),B(!1);return}if(H.length>25){ye.error("Tên danh mục không được vượt quá 25 ký tự."),B(!1);return}try{const Y={doc:JSON.stringify({doctype:"VGM_Category",category_name:H,category_description:L.des}),action:"Save"},ue=await jt.post("/api/method/frappe.desk.form.save.savedocs",Y);ue&&ue.docs&&ue.docs.length>0?(c.resetFields(),ye.success("Thêm mới thành công"),B(!1),Fn(),_(!1)):(ye.error("Thêm mới thất bại"),B(!1))}catch{ye.error("Đã xảy ra lỗi khi thêm mới danh mục.")}},zr=()=>{_(!1),B(!1)},Or=L=>{Te(L),i(H=>H.map(J=>J.key===L.key?{...J,selected:!0}:{...J,selected:!1}))};N.useEffect(()=>{Le()},[de]),N.useEffect(()=>{ft!=null&&ft!=""&&Si(ft)},[ft]),N.useEffect(()=>{Le()},[Ae]);const Le=async()=>{let L="";Ae!=null&&Ae!=""?L=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${de.name}"],["product_name","like","%${Ae}%"]]`:L=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${de.name}"]]`;let H=await jt.get(L);if(H&&H.data){let J=H.data.map(Y=>({...Y,key:Y.name,category_name:de.category_name}));J=so(J,"product_name"),qe(J)}},Ve=L=>{F(L.target.value)},Tr=()=>{f.resetFields(),ga([]),W(!1);let L=document.getElementById("barcode");L&&(L.innerHTML=""),de!=null&&de.name!=null&&C(!0)},xt=L=>!/[\u00C0-\u1EF9\u1EFB-\u1F01\u1F03-\u1F57\u1F59-\u1F5B\u1F5D-\u1F5F\u1F60-\u1FC1\u1FC3-\u1FF9\u1FFB-\u1FFF]/.test(L),Tt=async()=>{W(!0);let L=f.getFieldsValue();if(L.product_code&&we.filter(ot=>ot.product_code.toLowerCase()===L.product_code.toLowerCase()).length>0){ye.error("Mã sản phẩm đã tồn tại"),W(!1);return}let H=[];for(let ve=0;ve<V.length;ve++)H.push(V[ve]);if(!xt(L.barcode_product)){ye.error("Barcode không được chứa ký tự tiếng Việt"),W(!1);return}if(!L.product_name||H.length===0){ye.error("Vui lòng nhập tên sản phẩm và tải lên ít nhất một hình ảnh"),W(!1);return}let J="/api/resource/VGM_Product",Y={barcode:L.barcode_product,product_code:L.product_code!=null?L.product_code.trim():null,product_name:L.product_name!=null?L.product_name.trim():null,product_description:L.product_description!=null?L.product_description.trim():null,category:de.name,images:JSON.stringify(H)},ue=await jt.post(J,Y);if(ue!=null&&ue.data!=null){ye.success("Thêm mới thành công"),W(!1),f.resetFields();let ve=document.getElementById("barcode");ve.innerHTML="",ne([]),Le(),kr()}else ye.error("Thêm mới thất bại"),W(!1)},Br=L=>{Si(L.target.value)},kr=()=>{C(!1)},kt=L=>{Fe(L),Ye(!0),p.setFieldsValue({product_code:L.product_code,barcode_product:L.barcode,product_name:L.product_name,product_description:L.product_description}),Be(L.barcode);let H=JSON.parse(L.images),J=[];for(let Y=0;Y<H.length;Y++){let ue={uid:Y,url:H[Y],url_base:H[Y]};J.push(ue)}cn(J)},_i=L=>{Si(L.target.value)},Si=L=>{X9("#barcode",L,{width:4,height:40,displayValue:!0,font:"Arial",text:L,textMargin:10,fontSize:13,background:"#F5F7FA"})},ha=async()=>{K(!0);let L=[],H=p.getFieldsValue();for(let ve=0;ve<Ur.length;ve++)Ur[ve].url_base!=null&&Ur[ve].url_base!=""&&L.push(Ur[ve].url_base);if(Ie!=null)for(let ve=0;ve<Ie.length;ve++)L.push(Ie[ve].file_url);let J=`/api/resource/VGM_Product/${Ft.name}`,Y={barcode:H.barcode_product,product_code:H.product_code!=null?H.product_code.trim():null,product_name:H.product_name!=null?H.product_name.trim():null,product_description:H.product_description!=null?H.product_description.trim():null,category:de.name,images:JSON.stringify(L)},ue=await jt.put(J,Y);if(ue!=null&&ue.data!=null){ye.success("Sửa thành công"),K(!1),p.resetFields();let ve=document.getElementById("barcode");ve.innerHTML="",ut([]),Le(),ln()}else ye.error("Sửa thất bại"),K(!1)},ln=()=>{Ye(!1)},lo=L=>{let H={item:L,title:`Xóa ${L.product_name}`,contentConfirm:`Bạn có chắc muốn xóa ${L.product_name} ra khỏi hệ thống không?`,contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};ge(H),Re(!0)},Ht=async()=>{let L=[];try{$(!0),L=[fe.item.name];let H=Ui+".api.deleteListByDoctype",J={doctype:"VGM_Product",items:JSON.stringify(L)},Y=await jt.post(H,J);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ye.success("Xóa thành công"),ge({}),Le(),$(!1),fa()):(ye.error("Xóa thất bại , Sản phẩm đang được sử dụng"),$(!1))}catch{ye.error("Xóa thất bại,Có lỗi xảy ra khi xóa sản phẩm"),$(!1)}},fa=()=>{Re(!1)},jl=()=>{Mn(!0)},zl=async()=>{try{let L=Ui+".api.deleteListByDoctype",H=[];for(let ue=0;ue<Ge.length;ue++)H.push(Ge[ue].name);let J={doctype:"VGM_Product",items:JSON.stringify(H)},Y=await jt.post(L,J);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ye.success("Xóa thành công"),gt([]),br(!1),Le(),Dn()):ye.error("Xóa thất bại, có sản phẩm đã tồn tại trong báo cáo")}catch{ye.error("Có lỗi xảy ra khi xóa sản phẩm")}},Dn=()=>{Mn(!1)},xi=()=>{ci(!0)},un=async()=>{if(we.length==0){ye.error("Chưa thêm thêm sản phẩm cho danh mục này"),ce(!1);return}if(ir.length==0){ye.error("Chưa thêm hình ảnh nhận diện"),ce(!1);return}else{ce(!0);let L=Ui+".api.checkImageProductExist";console.log(ir);let H={collection_name:de.name,linkimages:ir.length>0?ir[ir.length-1]:""},J=await jt.post(L,H),Y=[];for(let ue=0;ue<we.length;ue++)Y.push({key:we[ue].name,product_code:we[ue].product_code,product_name:we[ue].product_name,product_count:0});if(J!=null&&J.message!=null)if(J.message.status=="failed")ce(!1),ye.error("Không thể kiểm tra ảnh sản phẩm");else{ao("data:image/png;base64,"+J.message.results.verbose[0].base64_image);let ue=[];Y.forEach(ve=>{J.message.results.count[ve.product_name]!=null&&(ve.product_count=J.message.results.count[ve.product_name]);let $n=J.message.results.verbose[0].locates.filter(function(Qe){return Qe.label===ve.product_name}).map(function(Qe){let Rt=Qe.bbox;return{x:Rt[0],y:Rt[1],width:Rt[2]-Rt[0],height:Rt[3]-Rt[1],label:Qe.label}});ue=ue.concat($n)}),Pl(ue)}ar(ir.length>0?ir[ir.length-1]:""),ce(!1),sa(Y),Nn(!0),Ei()}},wi=()=>{const L="0123456789ABCDEF";let H="#";for(let J=0;J<6;J++)H+=L[Math.floor(Math.random()*16)];return H};oo.forEach(L=>{An[L.label]||(An[L.label]=wi())});const Ei=()=>{an([]),sn([]),ce(!1),ci(!1)},Bl=()=>{Nn(!1),sn([]),an([])},[Ci,ga]=N.useState([]),[Ur,cn]=N.useState([]),Ul=({fileList:L})=>{ga(L)},pa=({fileList:L})=>{cn(L)},Me=async L=>{let H=L.url;H||(H=await new Promise(ue=>{const ve=new FileReader;ve.readAsDataURL(L.originFileObj),ve.onload=()=>ue(ve.result)}));const J=new Image;J.src=H,window.open(H)?.document.write(J.outerHTML)},uo=()=>{di(!0)},Pi=()=>{di(!1)},co=L=>{_e(L.target.value)},ho=()=>{fi(!1),pi([])};N.useEffect(()=>{fo()},[re]);const Hl=Ue.length>0,va={productFromERPSelected:Ue,onChange:(L,H)=>{console.log(H),Ot(H)}};N.useEffect(()=>{fo()},[]);const fo=async()=>{let L="/api/method/mbw_dms.api.selling.product.list_product";re!=null&&re!=""&&(L=`${L}?item_name=${re.trim()}`);let H=await jt.get(L),J=[];H!=null&&H.result!=null&&H.result.data!=null&&(J=H.result.data.map(Y=>({...Y,key:Y.name}))),hi(J)},ma=async()=>{Oe(!0);let L=[];for(let ue=0;ue<Ue.length;ue++){let ve={product_code:Ue[ue].item_code,barcode:Ue[ue].item_code,product_name:Ue[ue].item_name,product_description:Ue[ue].description,url_images:Ue[ue].image!=null&&Ue[ue].image!=""?[Ue[ue].image]:[]};L.push(ve)}let H={listproduct:JSON.stringify(L),category:de.name},J=Ui+".api.import_product",Y=await jt.post(J,H);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ye.success("Thêm mới thành công"),Oe(!1),Ot([]),Le(),Pi()):(ye.error("Thêm mới thất bại"),Oe(!1))},Vl=()=>{fi(!0),pi([])},Gn=async()=>{if(da&&da.length>0){Q(!0);let L={listproduct:JSON.stringify(da),category:de.name},H=Ui+".api.import_product",J=await jt.post(H,L);J!=null&&J.message!=null&&J.message.status=="success"?(ye.success("Thêm mới thành công"),Q(!1),Le(),fi(!1)):(ye.error("Thêm mới thất bại"),Q(!1))}else ye.error("File không chính xác, tải dữ liệu mẫu để tiếp tục")};return G.jsxs(G.Fragment,{children:[G.jsx($g,{title:"Sản phẩm",buttons:[Qt&&{label:"Xóa",type:"primary",icon:G.jsx(Xu,{}),size:"20px",className:"flex items-center mr-2",danger:!0,action:jl},{label:"Nhập file",icon:G.jsx(Hg,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:Vl},{label:"Thêm sản phẩm từ ERP",icon:G.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:uo},{label:"Kiểm tra sản phẩm",type:"primary",icon:G.jsx(sp,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:xi},{label:"Thêm mới",type:"primary",icon:G.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center",action:Tr}]}),G.jsxs(Ef,{gutter:16,children:[G.jsx(vc,{span:18,push:6,children:G.jsxs("div",{className:"bg-white rounded-xl border-[#DFE3E8] border-[0.2px] border-solid",children:[G.jsx(At,{className:"w-[320px] border-none p-4",children:G.jsx(xr,{value:Ae,onChange:Ve,placeholder:"Tìm kiếm sản phẩm",prefix:G.jsx(Ku,{})})}),G.jsx("div",{className:"pt-3",children:G.jsx(c0,{rowSelection:{type:a,...Al},columns:Nl,dataSource:we})})]})}),G.jsx(vc,{span:6,pull:18,children:G.jsxs("div",{className:"bg-white rounded-xl p-4 border-[#DFE3E8] border-[0.2px] border-solid",children:[G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("div",{children:G.jsx("p",{className:"text-base leading-5 font-medium text-[#212B36]",children:"Danh mục"})}),G.jsx("div",{className:"cursor-pointer",onClick:$l,children:G.jsx(qu,{})})]}),G.jsx("div",{className:"py-3",children:G.jsx(At,{className:"w-full border-none",name:"filter_category",children:G.jsx(xr,{onChange:Fl,value:o,placeholder:"Tìm kiếm danh mục",prefix:G.jsx(Ku,{})})})}),G.jsx(Sc,{style:{maxHeight:"calc(100vh - 500px)",overflow:"auto",paddingRight:"10px"},header:!1,footer:!1,bordered:!1,dataSource:n,renderItem:L=>G.jsx(Sc.Item,{onMouseEnter:H=>Il(H,L),onMouseLeave:H=>Ll(H,L),onClick:()=>Or(L),children:G.jsxs("div",{className:"item_category",children:[G.jsxs("span",{className:`${L.selected?"selected":""}`,children:[G.jsx(np.Text,{})," ",L.category_name]}),G.jsxs("span",{style:{display:L.hidden?"none":"block"},children:[G.jsx("span",{style:{marginRight:"10px"},children:G.jsx(yc,{onClick:()=>In(L)},"edit")}),G.jsx("span",{onClick:()=>Dl(L),children:G.jsx(Xu,{},"delete")})]})]})})})]})})]}),G.jsxs(wr,{title:"Kiểm tra ảnh sản phẩm",open:aa,width:777,afterClose:Ei,onOk:un,onCancel:Ei,footer:[G.jsx(Ut,{onClick:Ei,children:"Hủy"},"back"),G.jsx(Ut,{type:"primary",onClick:un,loading:oe,children:"Kiểm tra"},"submit")],children:[G.jsx("p",{className:"text-[#637381] font-normal text-sm",children:"Chọn ảnh sản phẩm bất kì để kiểm tra nhận diện sản phẩm"}),G.jsxs(_c,{...Ml,fileList:ca,children:[G.jsx("p",{className:"ant-upload-drag-icon",children:G.jsx(qu,{})}),G.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn ảnh để tải lên"})]})]}),G.jsxs(wr,{title:"Kiểm tra ảnh sản phẩm",open:la,width:920,onCancel:Bl,footer:null,children:[G.jsxs("div",{style:{marginBottom:"20px",display:"flex"},children:[G.jsx("img",{src:oa,style:{width:"450px",height:"450px",marginRight:"20px"}}),G.jsx(h5,{imageSrc:io,objectBoxes:oo,labelColors:An})]}),G.jsxs("div",{children:[G.jsx("div",{children:"Kết quả kiểm tra hình ảnh:"}),G.jsx(jg,{dataSource:on,columns:[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"},{title:"Số lượng",dataIndex:"product_count",key:"product_count"}],pagination:!1})]})]}),G.jsxs(wr,{width:990,title:"Thêm sản phẩm từ ERP",open:ua,onCancel:Pi,footer:!1,children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx(At,{className:"w-[320px] border-none pt-4",children:G.jsx(xr,{value:re,onChange:co,placeholder:"Tìm kiếm sản phẩm",prefix:G.jsx(Ku,{})})}),G.jsxs("div",{children:[G.jsx("span",{style:{marginRight:8},children:Hl?`Đã chọn ${Ue.length} sản phẩm`:""}),G.jsx(Ut,{type:"primary",onClick:ma,loading:pe,children:"Thêm"})]})]}),G.jsx("div",{className:"pt-4",children:G.jsx(c0,{rowSelection:va,columns:[{title:"Mã sản phẩm",dataIndex:"item_code",key:"item_code"},{title:"Tên sản phẩm",dataIndex:"item_name",key:"item_name"},{title:"Danh mục",dataIndex:"item_group",key:"item_group"}],dataSource:jr})})]}),G.jsx(wr,{title:"Thêm mới sản phẩm",open:m,onOk:Tt,onCancel:kr,width:1e3,footer:[G.jsx(Ut,{onClick:kr,children:"Hủy"},"back"),G.jsx(Ut,{type:"primary",onClick:Tt,loading:X,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(Jo,{layout:"vertical",form:f,children:[G.jsx(At,{label:"Mã sản phẩm",name:"product_code",required:!0,children:G.jsx(xr,{})}),G.jsx(At,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:G.jsx(xr,{onChange:L=>Br(L)})}),G.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:G.jsx("svg",{id:"barcode"})}),G.jsx(At,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:G.jsx(xr,{})}),G.jsx(At,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),G.jsx(At,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:G.jsx(v0,{...kl,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:Ci,onChange:Ul,onPreview:Me,children:Ci.length<5&&"+ Upload"})})]})})}),G.jsx(wr,{title:"Sửa sản phẩm",open:bt,onOk:ha,onCancel:ln,width:1e3,footer:[G.jsx(Ut,{onClick:ln,children:"Hủy"},"back"),G.jsx(Ut,{type:"primary",onClick:ha,loading:Z,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(Jo,{layout:"vertical",form:p,children:[G.jsx(At,{label:"Mã sản phẩm",name:"product_code",required:!0,children:G.jsx(xr,{})}),G.jsx(At,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:G.jsx(xr,{onChange:L=>_i(L)})}),G.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:G.jsx("svg",{id:"barcode"})}),G.jsx(At,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:G.jsx(xr,{})}),G.jsx(At,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),G.jsx(At,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:G.jsx(v0,{...Rl,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:Ur,onChange:pa,onPreview:Me,children:"+ Upload"})})]})})}),G.jsxs(wr,{title:fe.title,open:De,onOk:Ht,onCancel:fa,footer:[G.jsx(Ut,{onClick:fa,children:"Hủy"},"submit"),G.jsx(Ut,{type:"primary",loading:O,onClick:Ht,children:"Xác nhận"},"submit")],cancelText:"Hủy",children:[G.jsx("div",{children:fe.contentConfirm}),G.jsx("div",{children:fe.contentRemind})]}),G.jsxs(wr,{title:`Xóa ${Ge.length} sản phẩm?`,open:ia,onOk:zl,onCancel:Dn,okText:"Xác nhận",cancelText:"Hủy",children:[G.jsxs("div",{children:["Bạn có chắc muốn xóa ",Ge.length," sản phẩm ra khỏi hệ thống không?"]}),G.jsx("div",{children:"Khi thực hiện hành động này, sẽ không thể hoàn tác."})]}),G.jsx(wr,{title:"Thêm mới danh mục",open:w,onOk:yi,onCancel:zr,width:600,footer:[G.jsx(Ut,{onClick:zr,children:"Hủy"},"back"),G.jsx(Ut,{type:"primary",onClick:yi,loading:R,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(Jo,{layout:"vertical",form:c,children:[G.jsx(At,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,rules:[{required:!0,message:"Vui lòng nhập tên danh mục!"},{max:25,message:"Tên danh mục không được vượt quá 25 ký tự!"}],children:G.jsx(xr,{})}),G.jsx(At,{className:"pt-3",label:"Mô tả",name:"des",children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})})]})})}),G.jsx(wr,{title:"Sửa danh mục",open:x,onOk:mi,onCancel:Ln,width:600,footer:[G.jsx(Ut,{onClick:Ln,children:"Hủy"},"back"),G.jsx(Ut,{type:"primary",onClick:mi,loading:M,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(Jo,{layout:"vertical",form:h,children:[G.jsx(At,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:G.jsx(xr,{value:k.category_name})}),G.jsx(At,{className:"pt-3",label:"Mô tả",name:"des",children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5},value:k.category_description})})]})})}),G.jsxs(wr,{title:y.title,open:P,onOk:Gl,onCancel:vi,okText:"Xác nhận",cancelText:"Hủy",children:[G.jsx("div",{children:y.contentConfirm}),G.jsx("div",{children:y.contentRemind})]}),G.jsxs(wr,{title:"Nhập dữ liệu từ tệp excel",open:bl,width:777,onOk:Gn,onCancel:ho,footer:[G.jsx(Ut,{onClick:ho,children:"Hủy"},"back"),G.jsx(Ut,{type:"primary",onClick:Gn,loading:se,children:"Lưu lại"},"submit")],children:[G.jsxs("p",{className:"text-[#637381] font-normal text-sm",children:["Chọn file excel có định dạng .xlsx để thực hiện nhập dữ liệu. Tải dữ liệu mẫu"," ",G.jsx("a",{target:"_blank",href:"/mbw_audit/data_sample/product_sample.xlsx",children:"tại đây"})]}),G.jsxs(_c,{...Tl,fileList:gi,children:[G.jsx("p",{className:"ant-upload-drag-icon",children:G.jsx(qu,{})}),G.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn tệp để tải lên"})]})]})]})}function t7(){return G.jsxs(G.Fragment,{children:[G.jsx(zg,{children:G.jsx("title",{children:"Sản phẩm"})}),G.jsx(K9,{})]})}export{t7 as default};
