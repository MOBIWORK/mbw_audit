import{R as Be,r as A,h as Va,c as En,i as xf,C as vc,k as wf,m as bg,l as Tt,n as Og,o as Tg,p as kg,P as Rg,q as o0,t as Mg,v as s0,a as Ef,w as Ag,x as Ng,K as ms,e as Fc,_ as Ic,y as Es,z as Cf,B as Fg,E as $a,G as Pf,I as bf,J as fs,L as mc,M as Ig,N as Of,O as Lg,Q as l0,U as Dg,V as Gg,f as u0,W as gs,j as D,X as es,A as $t,H as $g,Y as Xu,g as Mt,Z as Pr,$ as Ku,T as c0,a0 as qu,a1 as br,a2 as er,a3 as jg,F as ts,s as be,d as zg}from"./main--OB17fI9.js";import{E as yc,I as Bg,D as _c,L as Ug,a as Hg,V as d0,r as Vg,u as Wg,p as Xg}from"./xlsx-PaQG_Xxv.js";import"./progress-2AfH5ify.js";const Lc=Be.createContext({});Lc.Consumer;var Tf=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Kg=a=>{var{prefixCls:e,className:n,avatar:i,title:o,description:l}=a,c=Tf(a,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:h}=A.useContext(Va),f=h("list",e),p=En(`${f}-item-meta`,n),m=Be.createElement("div",{className:`${f}-item-meta-content`},o&&Be.createElement("h4",{className:`${f}-item-meta-title`},o),l&&Be.createElement("div",{className:`${f}-item-meta-description`},l));return Be.createElement("div",Object.assign({},c,{className:p}),i&&Be.createElement("div",{className:`${f}-item-meta-avatar`},i),(o||l)&&m)},qg=(a,e)=>{var{prefixCls:n,children:i,actions:o,extra:l,className:c,colStyle:h}=a,f=Tf(a,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:p,itemLayout:m}=A.useContext(Lc),{getPrefixCls:C}=A.useContext(Va),w=()=>{let k;return A.Children.forEach(i,v=>{typeof v=="string"&&(k=!0)}),k&&A.Children.count(i)>1},_=()=>m==="vertical"?!!l:!w(),y=C("list",n),E=o&&o.length>0&&Be.createElement("ul",{className:`${y}-item-action`,key:"actions"},o.map((k,v)=>Be.createElement("li",{key:`${y}-item-action-${v}`},k,v!==o.length-1&&Be.createElement("em",{className:`${y}-item-action-split`})))),P=p?"div":"li",T=Be.createElement(P,Object.assign({},f,p?{}:{ref:e},{className:En(`${y}-item`,{[`${y}-item-no-flex`]:!_()},c)}),m==="vertical"&&l?[Be.createElement("div",{className:`${y}-item-main`,key:"content"},i,E),Be.createElement("div",{className:`${y}-item-extra`,key:"extra"},l)]:[i,E,xf(l,{key:"extra"})]);return p?Be.createElement(vc,{ref:e,flex:1,style:h},T):T},kf=A.forwardRef(qg);kf.Meta=Kg;const Yg=kf,Qg=a=>{const{listBorderedCls:e,componentCls:n,paddingLG:i,margin:o,itemPaddingSM:l,itemPaddingLG:c,marginLG:h,borderRadiusLG:f}=a;return{[`${e}`]:{border:`${Tt(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderRadius:f,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${Tt(o)} ${Tt(h)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},Jg=a=>{const{componentCls:e,screenSM:n,screenMD:i,marginLG:o,marginSM:l,margin:c}=a;return{[`@media screen and (max-width:${i}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:l}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:a.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${Tt(c)}`}}}}}},Zg=a=>{const{componentCls:e,antCls:n,controlHeight:i,minHeight:o,paddingSM:l,marginLG:c,padding:h,itemPadding:f,colorPrimary:p,itemPaddingSM:m,itemPaddingLG:C,paddingXS:w,margin:_,colorText:y,colorTextDescription:E,motionDurationSlow:P,lineWidth:T,headerBg:k,footerBg:v,emptyTextPadding:x,metaMarginBottom:b,avatarMarginRight:R,titleMarginBottom:U,descriptionFontSize:O}=a,G={};return["start","center","end"].forEach(M=>{G[`&-align-${M}`]={textAlign:M}}),{[`${e}`]:Object.assign(Object.assign({},Og(a)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:k},[`${e}-footer`]:{background:v},[`${e}-header, ${e}-footer`]:{paddingBlock:l},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:c},G),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:f,color:y,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:R},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:y},[`${e}-item-meta-title`]:{margin:`0 0 ${Tt(a.marginXXS)} 0`,color:y,fontSize:a.fontSize,lineHeight:a.lineHeight,"> a":{color:y,transition:`all ${P}`,"&:hover":{color:p}}},[`${e}-item-meta-description`]:{color:E,fontSize:O,lineHeight:a.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:a.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Tt(w)}`,color:E,fontSize:a.fontSize,lineHeight:a.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:T,height:a.calc(a.fontHeight).sub(a.calc(a.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:a.colorSplit}}},[`${e}-empty`]:{padding:`${Tt(h)} 0`,color:E,fontSize:a.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:x,color:a.colorTextDisabled,fontSize:a.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:_,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:c},[`${e}-item-meta`]:{marginBlockEnd:b,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:U,color:y,fontSize:a.fontSizeLG,lineHeight:a.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:h,marginInlineStart:"auto","> li":{padding:`0 ${Tt(h)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${Tt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${Tt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${Tt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${Tt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:C},[`${e}-sm ${e}-item`]:{padding:m},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},e2=a=>({contentWidth:220,itemPadding:`${Tt(a.paddingContentVertical)} 0`,itemPaddingSM:`${Tt(a.paddingContentVerticalSM)} ${Tt(a.paddingContentHorizontal)}`,itemPaddingLG:`${Tt(a.paddingContentVerticalLG)} ${Tt(a.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:a.padding,metaMarginBottom:a.padding,avatarMarginRight:a.padding,titleMarginBottom:a.paddingSM,descriptionFontSize:a.fontSize}),t2=wf("List",a=>{const e=bg(a,{listBorderedCls:`${a.componentCls}-bordered`,minHeight:a.controlHeightLG});return[Zg(e),Qg(e),Jg(e)]},e2);var r2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function Sc(a){var e,{pagination:n=!1,prefixCls:i,bordered:o=!1,split:l=!0,className:c,rootClassName:h,style:f,children:p,itemLayout:m,loadMore:C,grid:w,dataSource:_=[],size:y,header:E,footer:P,loading:T=!1,rowKey:k,renderItem:v,locale:x}=a,b=r2(a,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const R=n&&typeof n=="object"?n:{},[U,O]=A.useState(R.defaultCurrent||1),[G,M]=A.useState(R.defaultPageSize||10),{getPrefixCls:L,renderEmpty:V,direction:X,list:Z}=A.useContext(Va),K={current:1,total:0},se=je=>(ze,dt)=>{var Qt;O(ze),M(dt),n&&n[je]&&((Qt=n?.[je])===null||Qt===void 0||Qt.call(n,ze,dt))},he=se("onChange"),fe=se("onShowSizeChange"),Oe=(je,ze)=>{if(!v)return null;let dt;return typeof k=="function"?dt=k(je):k?dt=je[k]:dt=je.key,dt||(dt=`list-item-${ze}`),A.createElement(A.Fragment,{key:dt},v(je,ze))},Q=()=>!!(C||n||P),Y=L("list",i),[ve,ke,we]=t2(Y);let qe=T;typeof qe=="boolean"&&(qe={spinning:qe});const Ge=qe&&qe.spinning,F=Tg(y);let H="";switch(F){case"large":H="lg";break;case"small":H="sm";break}const ie=En(Y,{[`${Y}-vertical`]:m==="vertical",[`${Y}-${H}`]:H,[`${Y}-split`]:l,[`${Y}-bordered`]:o,[`${Y}-loading`]:Ge,[`${Y}-grid`]:!!w,[`${Y}-something-after-last-item`]:Q(),[`${Y}-rtl`]:X==="rtl"},Z?.className,c,h,ke,we),ge=kg(K,{total:_.length,current:U,pageSize:G},n||{}),de=Math.ceil(ge.total/ge.pageSize);ge.current>de&&(ge.current=de);const Ie=n?A.createElement("div",{className:En(`${Y}-pagination`,`${Y}-pagination-align-${(e=ge?.align)!==null&&e!==void 0?e:"end"}`)},A.createElement(Rg,Object.assign({},ge,{onChange:he,onShowSizeChange:fe}))):null;let Fe=o0(_);n&&_.length>(ge.current-1)*ge.pageSize&&(Fe=o0(_).splice((ge.current-1)*ge.pageSize,ge.pageSize));const At=Object.keys(w||{}).some(je=>["xs","sm","md","lg","xl","xxl"].includes(je)),Re=Mg(At),gt=A.useMemo(()=>{for(let je=0;je<s0.length;je+=1){const ze=s0[je];if(Re[ze])return ze}},[Re]),Ye=A.useMemo(()=>{if(!w)return;const je=gt&&w[gt]?w[gt]:w.column;if(je)return{width:`${100/je}%`,maxWidth:`${100/je}%`}},[w?.column,gt]);let Me=Ge&&A.createElement("div",{style:{minHeight:53}});if(Fe.length>0){const je=Fe.map((ze,dt)=>Oe(ze,dt));Me=w?A.createElement(Ef,{gutter:w.gutter},A.Children.map(je,ze=>A.createElement("div",{key:ze?.key,style:Ye},ze))):A.createElement("ul",{className:`${Y}-items`},je)}else!p&&!Ge&&(Me=A.createElement("div",{className:`${Y}-empty-text`},x&&x.emptyText||V?.("List")||A.createElement(Ag,{componentName:"List"})));const ct=ge.position||"bottom",pt=A.useMemo(()=>({grid:w,itemLayout:m}),[JSON.stringify(w),m]);return ve(A.createElement(Lc.Provider,{value:pt},A.createElement("div",Object.assign({style:Object.assign(Object.assign({},Z?.style),f),className:ie},b),(ct==="top"||ct==="both")&&Ie,E&&A.createElement("div",{className:`${Y}-header`},E),A.createElement(Ng,Object.assign({},qe),Me,p),P&&A.createElement("div",{className:`${Y}-footer`},P),C||(ct==="bottom"||ct==="both")&&Ie)))}Sc.Item=Yg;var n2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const i2={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},a2=A.forwardRef((a,e)=>{const n=p=>{const{keyCode:m}=p;m===ms.ENTER&&p.preventDefault()},i=p=>{const{keyCode:m}=p,{onClick:C}=a;m===ms.ENTER&&C&&C()},{style:o,noStyle:l,disabled:c}=a,h=n2(a,["style","noStyle","disabled"]);let f={};return l||(f=Object.assign({},i2)),c&&(f.pointerEvents="none"),f=Object.assign(Object.assign({},f),o),A.createElement("div",Object.assign({role:"button",tabIndex:0,ref:e},h,{onKeyDown:n,onKeyUp:i,style:f}))}),h0=a2;var o2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const s2=o2;var l2=function(e,n){return A.createElement(Fc,Ic({},e,{ref:n,icon:s2}))};const u2=A.forwardRef(l2);var c2=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<a.rangeCount;i++)n.push(a.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return a.removeAllRanges(),function(){a.type==="Caret"&&a.removeAllRanges(),a.rangeCount||n.forEach(function(o){a.addRange(o)}),e&&e.focus()}},d2=c2,f0={"text/plain":"Text","text/html":"Url",default:"Text"},h2="Copy to clipboard: #{key}, Enter";function f2(a){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,e)}function g2(a,e){var n,i,o,l,c,h,f=!1;e||(e={}),n=e.debug||!1;try{o=d2(),l=document.createRange(),c=document.getSelection(),h=document.createElement("span"),h.textContent=a,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(m){if(m.stopPropagation(),e.format)if(m.preventDefault(),typeof m.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=f0[e.format]||f0.default;window.clipboardData.setData(C,a)}else m.clipboardData.clearData(),m.clipboardData.setData(e.format,a);e.onCopy&&(m.preventDefault(),e.onCopy(m.clipboardData))}),document.body.appendChild(h),l.selectNodeContents(h),c.addRange(l);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");f=!0}catch(m){n&&console.error("unable to copy using execCommand: ",m),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",a),e.onCopy&&e.onCopy(window.clipboardData),f=!0}catch(C){n&&console.error("unable to copy using clipboardData: ",C),n&&console.error("falling back to prompt"),i=f2("message"in e?e.message:h2),window.prompt(i,a)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(l):c.removeAllRanges()),h&&document.body.removeChild(h),o()}return f}var p2=g2;const v2=Es(p2);var m2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const y2=m2;var _2=function(e,n){return A.createElement(Fc,Ic({},e,{ref:n,icon:y2}))};const S2=A.forwardRef(_2),x2=(a,e,n,i)=>{const{titleMarginBottom:o,fontWeightStrong:l}=i;return{marginBottom:o,color:n,fontWeight:l,fontSize:a,lineHeight:e}},w2=a=>{const e=[1,2,3,4,5],n={};return e.forEach(i=>{n[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=x2(a[`fontSizeHeading${i}`],a[`lineHeightHeading${i}`],a.colorTextHeading,a)}),n},E2=a=>{const{componentCls:e}=a;return{"a&, a":Object.assign(Object.assign({},Cf(a)),{textDecoration:a.linkDecoration,"&:active, &:hover":{textDecoration:a.linkHoverDecoration},[`&[disabled], &${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:a.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},C2=a=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Fg[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:a.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),P2=a=>{const{componentCls:e,paddingSM:n}=a,i=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:a.calc(a.paddingSM).mul(-1).equal(),marginTop:a.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${Tt(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:a.calc(a.marginXS).add(2).equal(),insetBlockEnd:a.marginXS,color:a.colorTextDescription,fontWeight:"normal",fontSize:a.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},b2=a=>({[`${a.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:a.colorSuccess}},[`${a.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),O2=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),T2=a=>{const{componentCls:e,titleMarginTop:n}=a;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:a.colorText,wordBreak:"break-word",lineHeight:a.lineHeight,[`&${e}-secondary`]:{color:a.colorTextDescription},[`&${e}-success`]:{color:a.colorSuccess},[`&${e}-warning`]:{color:a.colorWarning},[`&${e}-danger`]:{color:a.colorError,"a&:active, a&:focus":{color:a.colorErrorActive},"a&:hover":{color:a.colorErrorHover}},[`&${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},w2(a)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),C2(a)),E2(a)),{[`
        ${e}-expand,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Cf(a)),{marginInlineStart:a.marginXXS})}),P2(a)),b2(a)),O2()),{"&-rtl":{direction:"rtl"}})}},k2=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Rf=wf("Typography",a=>[T2(a)],k2),R2=a=>{const{prefixCls:e,"aria-label":n,className:i,style:o,direction:l,maxLength:c,autoSize:h=!0,value:f,onSave:p,onCancel:m,onEnd:C,component:w,enterIcon:_=A.createElement(S2,null)}=a,y=A.useRef(null),E=A.useRef(!1),P=A.useRef(),[T,k]=A.useState(f);A.useEffect(()=>{k(f)},[f]),A.useEffect(()=>{if(y.current&&y.current.resizableTextArea){const{textArea:K}=y.current.resizableTextArea;K.focus();const{length:se}=K.value;K.setSelectionRange(se,se)}},[]);const v=K=>{let{target:se}=K;k(se.value.replace(/[\n\r]/g,""))},x=()=>{E.current=!0},b=()=>{E.current=!1},R=K=>{let{keyCode:se}=K;E.current||(P.current=se)},U=()=>{p(T.trim())},O=K=>{let{keyCode:se,ctrlKey:he,altKey:fe,metaKey:Oe,shiftKey:Q}=K;P.current===se&&!E.current&&!he&&!fe&&!Oe&&!Q&&(se===ms.ENTER?(U(),C?.()):se===ms.ESC&&m())},G=()=>{U()},M=w?`${e}-${w}`:"",[L,V,X]=Rf(e),Z=En(e,`${e}-edit-content`,{[`${e}-rtl`]:l==="rtl"},i,M,V,X);return L(A.createElement("div",{className:Z,style:o},A.createElement($a,{ref:y,maxLength:c,value:T,onChange:v,onKeyDown:R,onKeyUp:O,onCompositionStart:x,onCompositionEnd:b,onBlur:G,"aria-label":n,rows:1,autoSize:h}),_!==null?xf(_,{className:`${e}-edit-content-confirm`}):null))},M2=R2;function Yu(a,e){return A.useMemo(()=>{const n=!!a;return[n,Object.assign(Object.assign({},e),n&&typeof a=="object"?a:null)]},[a])}const A2=(a,e)=>{const n=A.useRef(!1);A.useEffect(()=>{n.current?a():n.current=!0},e)};var N2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const F2=A.forwardRef((a,e)=>{const{prefixCls:n,component:i="article",className:o,rootClassName:l,setContentRef:c,children:h,direction:f,style:p}=a,m=N2(a,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:C,direction:w,typography:_}=A.useContext(Va),y=f??w;let E=e;c&&(E=Pf(e,c));const P=C("typography",n),[T,k,v]=Rf(P),x=En(P,_?.className,{[`${P}-rtl`]:y==="rtl"},o,l,k,v),b=Object.assign(Object.assign({},_?.style),p);return T(A.createElement(i,Object.assign({className:x,style:b,ref:E},m),h))}),Mf=F2;function Af(a){const e=typeof a;return e==="string"||e==="number"}function I2(a){let e=0;return a.forEach(n=>{Af(n)?e+=String(n).length:e+=1}),e}function Qu(a,e){let n=0;const i=[];for(let o=0;o<a.length;o+=1){if(n===e)return i;const l=a[o],h=Af(l)?String(l).length:1,f=n+h;if(f>e){const p=e-n;return i.push(String(l).slice(0,p)),i}i.push(l),n=f}return a}const L2=0,rs=1,g0=2,Ju=3,Zu=4,D2=a=>{let{enabledMeasure:e,children:n,text:i,width:o,fontSize:l,rows:c,onEllipsis:h}=a;const[[f,p,m],C]=A.useState([0,0,0]),[w,_]=A.useState(0),[y,E]=A.useState(L2),[P,T]=A.useState(0),k=A.useRef(null),v=A.useRef(null),x=A.useMemo(()=>bf(i),[i]),b=A.useMemo(()=>I2(x),[x]),R=A.useMemo(()=>!e||y!==Ju?w&&y!==Zu&&e?n(Qu(x,w),w<b):n(x,!1):n(Qu(x,p),p<b),[e,y,n,x,p,b]);fs(()=>{e&&o&&l&&b&&(E(rs),C([0,Math.ceil(b/2),b]))},[e,o,l,i,b,c]),fs(()=>{var M;y===rs&&T(((M=k.current)===null||M===void 0?void 0:M.offsetHeight)||0)},[y]),fs(()=>{var M,L;if(P){if(y===rs){const V=((M=v.current)===null||M===void 0?void 0:M.offsetHeight)||0,X=c*P;V<=X?(E(Zu),h(!1)):E(g0)}else if(y===g0)if(f!==m){const V=((L=v.current)===null||L===void 0?void 0:L.offsetHeight)||0,X=c*P;let Z=f,K=m;f===m-1?K=f:V<=X?Z=p:K=p;const se=Math.ceil((Z+K)/2);C([Z,se,K])}else E(Ju),_(p),h(!0)}},[y,f,m,c,P]);const U={width:o,whiteSpace:"normal",margin:0,padding:0},O=(M,L,V)=>A.createElement("span",{"aria-hidden":!0,ref:L,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(l/2)*2},V)},M),G=(M,L)=>{const V=Qu(x,M);return O(n(V,!0),L,U)};return A.createElement(A.Fragment,null,R,e&&y!==Ju&&y!==Zu&&A.createElement(A.Fragment,null,O("lg",k,{wordBreak:"keep-all",whiteSpace:"nowrap"}),y===rs?O(n(x,!1),v,U):G(p,v)))},G2=D2,$2=a=>{let{enabledEllipsis:e,isEllipsis:n,children:i,tooltipProps:o}=a;return!o?.title||!e?i:A.createElement(mc,Object.assign({open:n?void 0:!1},o),i)},j2=$2;var z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function B2(a,e){let{mark:n,code:i,underline:o,delete:l,strong:c,keyboard:h,italic:f}=a,p=e;function m(C,w){w&&(p=A.createElement(C,{},p))}return m("strong",c),m("u",o),m("del",l),m("code",i),m("mark",n),m("kbd",h),m("i",f),p}function ns(a,e,n){return a===!0||a===void 0?e:a||n&&e}function p0(a){return a===!1?[!1,!1]:Array.isArray(a)?a:[a]}const U2="...",H2=A.forwardRef((a,e)=>{var n,i,o;const{prefixCls:l,className:c,style:h,type:f,disabled:p,children:m,ellipsis:C,editable:w,copyable:_,component:y,title:E}=a,P=z2(a,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:T,direction:k}=A.useContext(Va),[v]=Ig("Text"),x=A.useRef(null),b=A.useRef(null),R=T("typography",l),U=Of(P,["mark","code","delete","underline","strong","keyboard","italic"]),[O,G]=Yu(w),[M,L]=Lg(!1,{value:G.editing}),{triggerType:V=["icon"]}=G,X=J=>{var me;J&&((me=G.onStart)===null||me===void 0||me.call(G)),L(J)};A2(()=>{var J;M||(J=b.current)===null||J===void 0||J.focus()},[M]);const Z=J=>{J?.preventDefault(),X(!0)},K=J=>{var me;(me=G.onChange)===null||me===void 0||me.call(G,J),X(!1)},se=()=>{var J;(J=G.onCancel)===null||J===void 0||J.call(G),X(!1)},[he,fe]=Yu(_),[Oe,Q]=A.useState(!1),Y=A.useRef(null),ve={};fe.format&&(ve.format=fe.format);const ke=()=>{Y.current&&clearTimeout(Y.current)},we=J=>{var me;J?.preventDefault(),J?.stopPropagation(),v2(fe.text||String(m)||"",ve),Q(!0),ke(),Y.current=setTimeout(()=>{Q(!1)},3e3),(me=fe.onCopy)===null||me===void 0||me.call(fe,J)};A.useEffect(()=>ke,[]);const[qe,Ge]=A.useState(!1),[F,H]=A.useState(!1),[ie,ge]=A.useState(!1),[de,Ie]=A.useState(!1),[Fe,At]=A.useState(!1),[Re,gt]=A.useState(!0),[Ye,Me]=Yu(C,{expandable:!1}),ct=Ye&&!ie,{rows:pt=1}=Me,je=A.useMemo(()=>!ct||Me.suffix!==void 0||Me.onEllipsis||Me.expandable||O||he,[ct,Me,O,he]);fs(()=>{Ye&&!je&&(Ge(l0("webkitLineClamp")),H(l0("textOverflow")))},[je,Ye]);const ze=A.useMemo(()=>je?!1:pt===1?F:qe,[je,F,qe]),dt=ct&&(ze?Fe:de),Qt=ct&&pt===1&&ze,Br=ct&&pt>1&&ze,ea=J=>{var me;ge(!0),(me=Me.onExpand)===null||me===void 0||me.call(Me,J)},[An,_r]=A.useState(0),[ta,ra]=A.useState(0),na=(J,me)=>{let{offsetWidth:vt}=J;var Nt;_r(vt),ra(parseInt((Nt=window.getComputedStyle)===null||Nt===void 0?void 0:Nt.call(window,me).fontSize,10)||0)},ia=J=>{var me;Ie(J),de!==J&&((me=Me.onEllipsis)===null||me===void 0||me.call(Me,J))};A.useEffect(()=>{const J=x.current;if(Ye&&ze&&J){const me=Br?J.offsetHeight<J.scrollHeight:J.offsetWidth<J.scrollWidth;Fe!==me&&At(me)}},[Ye,ze,m,Br,Re,An]),A.useEffect(()=>{const J=x.current;if(typeof IntersectionObserver>"u"||!J||!ze||!ct)return;const me=new IntersectionObserver(()=>{gt(!!J.offsetParent)});return me.observe(J),()=>{me.disconnect()}},[ze,ct]);let ir={};Me.tooltip===!0?ir={title:(n=G.text)!==null&&n!==void 0?n:m}:A.isValidElement(Me.tooltip)?ir={title:Me.tooltip}:typeof Me.tooltip=="object"?ir=Object.assign({title:(i=G.text)!==null&&i!==void 0?i:m},Me.tooltip):ir={title:Me.tooltip};const ln=A.useMemo(()=>{const J=me=>["string","number"].includes(typeof me);if(!(!Ye||ze)){if(J(G.text))return G.text;if(J(m))return m;if(J(E))return E;if(J(ir.title))return ir.title}},[Ye,ze,E,ir.title,dt]);if(M)return A.createElement(M2,{value:(o=G.text)!==null&&o!==void 0?o:typeof m=="string"?m:"",onSave:K,onCancel:se,onEnd:G.onEnd,prefixCls:R,className:c,style:h,direction:k,component:y,maxLength:G.maxLength,autoSize:G.autoSize,enterIcon:G.enterIcon});const ci=()=>{const{expandable:J,symbol:me}=Me;if(!J)return null;let vt;return me?vt=me:vt=v?.expand,A.createElement("a",{key:"expand",className:`${R}-expand`,onClick:ea,"aria-label":v?.expand},vt)},aa=()=>{if(!O)return;const{icon:J,tooltip:me}=G,vt=bf(me)[0]||v?.edit,Nt=typeof vt=="string"?vt:"";return V.includes("icon")?A.createElement(mc,{key:"edit",title:me===!1?"":vt},A.createElement(h0,{ref:b,className:`${R}-edit`,onClick:Z,"aria-label":Nt},J||A.createElement(yc,{role:"button"}))):null},Nn=()=>{if(!he)return null;const{tooltips:J,icon:me}=fe,vt=p0(J),Nt=p0(me),Hr=Oe?ns(vt[1],v?.copied):ns(vt[0],v?.copy),un=Oe?v?.copied:v?.copy,sa=typeof Hr=="string"?Hr:un;return A.createElement(mc,{key:"copy",title:Hr},A.createElement(h0,{className:En(`${R}-copy`,{[`${R}-copy-success`]:Oe,[`${R}-copy-icon-only`]:m==null}),onClick:we,"aria-label":sa},Oe?ns(Nt[1],A.createElement(Gg,null),!0):ns(Nt[0],A.createElement(u2,null),!0)))},Ur=J=>[J&&ci(),aa(),Nn()],oa=J=>[J&&A.createElement("span",{"aria-hidden":!0,key:"ellipsis"},U2),Me.suffix,Ur(J)];return A.createElement(Dg,{onResize:na,disabled:!ct},J=>A.createElement(j2,{tooltipProps:ir,enabledEllipsis:ct,isEllipsis:dt},A.createElement(Mf,Object.assign({className:En({[`${R}-${f}`]:f,[`${R}-disabled`]:p,[`${R}-ellipsis`]:Ye,[`${R}-single-line`]:ct&&pt===1,[`${R}-ellipsis-single-line`]:Qt,[`${R}-ellipsis-multiple-line`]:Br},c),prefixCls:l,style:Object.assign(Object.assign({},h),{WebkitLineClamp:Br?pt:void 0}),component:y,ref:Pf(J,x,e),direction:k,onClick:V.includes("text")?Z:void 0,"aria-label":ln?.toString(),title:E},U),A.createElement(G2,{enabledMeasure:ct&&!ze,text:m,rows:pt,width:An,fontSize:ta,onEllipsis:ia},(me,vt)=>{let Nt=me;return me.length&&vt&&ln&&(Nt=A.createElement("span",{key:"show-content","aria-hidden":!0},Nt)),B2(a,A.createElement(A.Fragment,null,Nt,oa(vt)))}))))}),Cs=H2;var V2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const W2=A.forwardRef((a,e)=>{var{ellipsis:n,rel:i}=a,o=V2(a,["ellipsis","rel"]);const l=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete l.navigate,A.createElement(Cs,Object.assign({},l,{ref:e,ellipsis:!!n,component:"a"}))}),X2=W2,K2=A.forwardRef((a,e)=>A.createElement(Cs,Object.assign({ref:e},a,{component:"div"}))),q2=K2;var Y2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Q2=(a,e)=>{var{ellipsis:n}=a,i=Y2(a,["ellipsis"]);const o=A.useMemo(()=>n&&typeof n=="object"?Of(n,["expandable","rows"]):n,[n]);return A.createElement(Cs,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},J2=A.forwardRef(Q2);var Z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const ep=[1,2,3,4,5],tp=A.forwardRef((a,e)=>{const{level:n=1}=a,i=Z2(a,["level"]);let o;return ep.includes(n)?o=`h${n}`:o="h1",A.createElement(Cs,Object.assign({ref:e},i,{component:o}))}),rp=tp,Wa=Mf;Wa.Text=J2;Wa.Link=X2;Wa.Title=rp;Wa.Paragraph=q2;const np=Wa,Dc=Bg;Dc.Dragger=_c;Dc.LIST_IGNORE=Ug;const v0=Dc;var ip={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M644.7 669.2a7.92 7.92 0 00-6.5-3.3H594c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.8-5.3 0-12.7-6.5-12.7h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-22.9-31.9zM688 306v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 458H208V148h560v296c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h312c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm402.6-320.8l-192-66.7c-.9-.3-1.7-.4-2.6-.4s-1.8.1-2.6.4l-192 66.7a7.96 7.96 0 00-5.4 7.5v251.1c0 2.5 1.1 4.8 3.1 6.3l192 150.2c1.4 1.1 3.2 1.7 4.9 1.7s3.5-.6 4.9-1.7l192-150.2c1.9-1.5 3.1-3.8 3.1-6.3V538.7c0-3.4-2.2-6.4-5.4-7.5zM826 763.7L688 871.6 550 763.7V577l138-48 138 48v186.7z"}}]},name:"file-protect",theme:"outlined"};const ap=ip;var op=function(e,n){return A.createElement(Fc,Ic({},e,{ref:n,icon:ap}))};const sp=A.forwardRef(op);var Nf={exports:{}},Ps={},ys={},Ee={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof u0<"u"?u0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.5",isBrowser:n(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle(o){return a.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var o;return(o=a.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(o){a.glob.Konva=o}};const i=o=>{a.Konva[o.prototype.getClassName()]=o};a._registerNode=i,a.Konva._injectGlobal(a.Konva)})(Ee);var it={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const e=Ee;class n{constructor(x=[1,0,0,1,0,0]){this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]}point(x){var b=this.m;return{x:b[0]*x.x+b[2]*x.y+b[4],y:b[1]*x.x+b[3]*x.y+b[5]}}translate(x,b){return this.m[4]+=this.m[0]*x+this.m[2]*b,this.m[5]+=this.m[1]*x+this.m[3]*b,this}scale(x,b){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=b,this.m[3]*=b,this}rotate(x){var b=Math.cos(x),R=Math.sin(x),U=this.m[0]*b+this.m[2]*R,O=this.m[1]*b+this.m[3]*R,G=this.m[0]*-R+this.m[2]*b,M=this.m[1]*-R+this.m[3]*b;return this.m[0]=U,this.m[1]=O,this.m[2]=G,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(x,b){var R=this.m[0]+this.m[2]*b,U=this.m[1]+this.m[3]*b,O=this.m[2]+this.m[0]*x,G=this.m[3]+this.m[1]*x;return this.m[0]=R,this.m[1]=U,this.m[2]=O,this.m[3]=G,this}multiply(x){var b=this.m[0]*x.m[0]+this.m[2]*x.m[1],R=this.m[1]*x.m[0]+this.m[3]*x.m[1],U=this.m[0]*x.m[2]+this.m[2]*x.m[3],O=this.m[1]*x.m[2]+this.m[3]*x.m[3],G=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],M=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=b,this.m[1]=R,this.m[2]=U,this.m[3]=O,this.m[4]=G,this.m[5]=M,this}invert(){var x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*x,R=-this.m[1]*x,U=-this.m[2]*x,O=this.m[0]*x,G=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=R,this.m[2]=U,this.m[3]=O,this.m[4]=G,this.m[5]=M,this}getMatrix(){return this.m}decompose(){var x=this.m[0],b=this.m[1],R=this.m[2],U=this.m[3],O=this.m[4],G=this.m[5],M=x*U-b*R;let L={x:O,y:G,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||b!=0){var V=Math.sqrt(x*x+b*b);L.rotation=b>0?Math.acos(x/V):-Math.acos(x/V),L.scaleX=V,L.scaleY=M/V,L.skewX=(x*R+b*U)/M,L.skewY=0}else if(R!=0||U!=0){var X=Math.sqrt(R*R+U*U);L.rotation=Math.PI/2-(U>0?Math.acos(-R/X):-Math.acos(R/X)),L.scaleX=M/X,L.scaleY=X,L.skewX=0,L.skewY=(x*R+b*U)/M}return L.rotation=a.Util._getRotation(L.rotation),L}}a.Transform=n;var i="[object Array]",o="[object Number]",l="[object String]",c="[object Boolean]",h=Math.PI/180,f=180/Math.PI,p="#",m="",C="0",w="Konva warning: ",_="Konva error: ",y="rgb(",E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};a.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===i},_isNumber(v){return Object.prototype.toString.call(v)===o&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===l},_isBoolean(v){return Object.prototype.toString.call(v)===c},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;var x=v[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){T.push(v),T.length===1&&k(function(){const x=T;T=[],x.forEach(function(b){b()})})},createCanvasElement(){var v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,x){var b=a.Util.createImageElement();b.onload=function(){x(b)},b.src=v},_rgbToHex(v,x,b){return((1<<24)+(v<<16)+(x<<8)+b).toString(16).slice(1)},_hexToRgb(v){v=v.replace(p,m);var x=parseInt(v,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor(){for(var v=(Math.random()*16777215<<0).toString(16);v.length<6;)v=C+v;return p+v},getRGB(v){var x;return v in E?(x=E[v],{r:x[0],g:x[1],b:x[2]}):v[0]===p?this._hexToRgb(v.substring(1)):v.substr(0,4)===y?(x=P.exec(v.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",a.Util._namedColorToRBA(v)||a.Util._hex3ColorToRGBA(v)||a.Util._hex4ColorToRGBA(v)||a.Util._hex6ColorToRGBA(v)||a.Util._hex8ColorToRGBA(v)||a.Util._rgbColorToRGBA(v)||a.Util._rgbaColorToRGBA(v)||a.Util._hslColorToRGBA(v)},_namedColorToRBA(v){var x=E[v.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];var x=v.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];var x=v.split(/ *, */).map((b,R)=>b.slice(-1)==="%"?R===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[x,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),R=Number(b[0])/360,U=Number(b[1])/100,O=Number(b[2])/100;let G,M,L;if(U===0)return L=O*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};O<.5?G=O*(1+U):G=O+U-O*U;const V=2*O-G,X=[0,0,0];for(let Z=0;Z<3;Z++)M=R+1/3*-(Z-1),M<0&&M++,M>1&&M--,6*M<1?L=V+(G-V)*6*M:2*M<1?L=G:3*M<2?L=V+(G-V)*(2/3-M)*6:L=V,X[Z]=L*255;return{r:Math.round(X[0]),g:Math.round(X[1]),b:Math.round(X[2]),a:1}}},haveIntersection(v,x){return!(x.x>v.x+v.width||x.x+x.width<v.x||x.y>v.y+v.height||x.y+x.height<v.y)},cloneObject(v){var x={};for(var b in v)this._isPlainObject(v[b])?x[b]=this.cloneObject(v[b]):this._isArray(v[b])?x[b]=this.cloneArray(v[b]):x[b]=v[b];return x},cloneArray(v){return v.slice(0)},degToRad(v){return v*h},radToDeg(v){return v*f},_degToRad(v){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(v)},_radToDeg(v){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(v)},_getRotation(v){return e.Konva.angleDeg?a.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(_+v)},error(v){console.error(_+v)},warn(v){e.Konva.showWarnings&&console.warn(w+v)},each(v,x){for(var b in v)x(b,v[b])},_inRange(v,x,b){return x<=v&&v<b},_getProjectionToSegment(v,x,b,R,U,O){var G,M,L,V=(v-b)*(v-b)+(x-R)*(x-R);if(V==0)G=v,M=x,L=(U-b)*(U-b)+(O-R)*(O-R);else{var X=((U-v)*(b-v)+(O-x)*(R-x))/V;X<0?(G=v,M=x,L=(v-U)*(v-U)+(x-O)*(x-O)):X>1?(G=b,M=R,L=(b-U)*(b-U)+(R-O)*(R-O)):(G=v+X*(b-v),M=x+X*(R-x),L=(G-U)*(G-U)+(M-O)*(M-O))}return[G,M,L]},_getProjectionToLine(v,x,b){var R=a.Util.cloneObject(v),U=Number.MAX_VALUE;return x.forEach(function(O,G){if(!(!b&&G===x.length-1)){var M=x[(G+1)%x.length],L=a.Util._getProjectionToSegment(O.x,O.y,M.x,M.y,v.x,v.y),V=L[0],X=L[1],Z=L[2];Z<U&&(R.x=V,R.y=X,U=Z)}}),R},_prepareArrayForTween(v,x,b){var R,U=[],O=[];if(v.length>x.length){var G=x;x=v,v=G}for(R=0;R<v.length;R+=2)U.push({x:v[R],y:v[R+1]});for(R=0;R<x.length;R+=2)O.push({x:x[R],y:x[R+1]});var M=[];return O.forEach(function(L){var V=a.Util._getProjectionToLine(L,U,b);M.push(V.x),M.push(V.y)}),M},_prepareToStringify(v){var x;v.visitedByCircularReferenceRemoval=!0;for(var b in v)if(v.hasOwnProperty(b)&&v[b]&&typeof v[b]=="object"){if(x=Object.getOwnPropertyDescriptor(v,b),v[b].visitedByCircularReferenceRemoval||a.Util._isElement(v[b]))if(x.configurable)delete v[b];else return null;else if(a.Util._prepareToStringify(v[b])===null)if(x.configurable)delete v[b];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,x){for(var b in x)v[b]=x[b];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){e.Konva.releaseCanvasOnDestroy&&v.forEach(x=>{x.width=0,x.height=0})},drawRoundedRectPath(v,x,b,R){let U=0,O=0,G=0,M=0;typeof R=="number"?U=O=G=M=Math.min(R,x/2,b/2):(U=Math.min(R[0]||0,x/2,b/2),O=Math.min(R[1]||0,x/2,b/2),M=Math.min(R[2]||0,x/2,b/2),G=Math.min(R[3]||0,x/2,b/2)),v.moveTo(U,0),v.lineTo(x-O,0),v.arc(x-O,O,O,Math.PI*3/2,0,!1),v.lineTo(x,b-M),v.arc(x-M,b-M,M,0,Math.PI/2,!1),v.lineTo(G,b),v.arc(G,b-G,G,Math.PI/2,Math.PI,!1),v.lineTo(0,U),v.arc(U,U,U,Math.PI,Math.PI*3/2,!1)}}})(it);var tt={},Ce={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.getComponentValidator=le.getBooleanValidator=le.getNumberArrayValidator=le.getFunctionValidator=le.getStringOrGradientValidator=le.getStringValidator=le.getNumberOrAutoValidator=le.getNumberOrArrayOfNumbersValidator=le.getNumberValidator=le.alphaComponent=le.RGBComponent=void 0;const nn=Ee,ot=it;function an(a){return ot.Util._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||ot.Util._isBoolean(a)?a:Object.prototype.toString.call(a)}function lp(a){return a>255?255:a<0?0:Math.round(a)}le.RGBComponent=lp;function up(a){return a>1?1:a<1e-4?1e-4:a}le.alphaComponent=up;function cp(){if(nn.Konva.isUnminified)return function(a,e){return ot.Util._isNumber(a)||ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),a}}le.getNumberValidator=cp;function dp(a){if(nn.Konva.isUnminified)return function(e,n){let i=ot.Util._isNumber(e),o=ot.Util._isArray(e)&&e.length==a;return!i&&!o&&ot.Util.warn(an(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+a+")"),e}}le.getNumberOrArrayOfNumbersValidator=dp;function hp(){if(nn.Konva.isUnminified)return function(a,e){var n=ot.Util._isNumber(a),i=a==="auto";return n||i||ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),a}}le.getNumberOrAutoValidator=hp;function fp(){if(nn.Konva.isUnminified)return function(a,e){return ot.Util._isString(a)||ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),a}}le.getStringValidator=fp;function gp(){if(nn.Konva.isUnminified)return function(a,e){const n=ot.Util._isString(a),i=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return n||i||ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),a}}le.getStringOrGradientValidator=gp;function pp(){if(nn.Konva.isUnminified)return function(a,e){return ot.Util._isFunction(a)||ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),a}}le.getFunctionValidator=pp;function vp(){if(nn.Konva.isUnminified)return function(a,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&a instanceof n||(ot.Util._isArray(a)?a.forEach(function(i){ot.Util._isNumber(i)||ot.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),a}}le.getNumberArrayValidator=vp;function mp(){if(nn.Konva.isUnminified)return function(a,e){var n=a===!0||a===!1;return n||ot.Util.warn(an(a)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),a}}le.getBooleanValidator=mp;function yp(a){if(nn.Konva.isUnminified)return function(e,n){return e==null||ot.Util.isObject(e)||ot.Util.warn(an(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+a),e}}le.getComponentValidator=yp;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const e=it,n=le;var i="get",o="set";a.Factory={addGetterSetter(l,c,h,f,p){a.Factory.addGetter(l,c,h),a.Factory.addSetter(l,c,f,p),a.Factory.addOverloadedGetterSetter(l,c)},addGetter(l,c,h){var f=i+e.Util._capitalize(c);l.prototype[f]=l.prototype[f]||function(){var p=this.attrs[c];return p===void 0?h:p}},addSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]||a.Factory.overWriteSetter(l,c,h,f)},overWriteSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]=function(m){return h&&m!==void 0&&m!==null&&(m=h.call(this,m,c)),this._setAttr(c,m),f&&f.call(this),this}},addComponentsGetterSetter(l,c,h,f,p){var m=h.length,C=e.Util._capitalize,w=i+C(c),_=o+C(c),y,E;l.prototype[w]=function(){var T={};for(y=0;y<m;y++)E=h[y],T[E]=this.getAttr(c+C(E));return T};var P=(0,n.getComponentValidator)(h);l.prototype[_]=function(T){var k=this.attrs[c],v;f&&(T=f.call(this,T)),P&&P.call(this,T,c);for(v in T)T.hasOwnProperty(v)&&this._setAttr(c+C(v),T[v]);return T||h.forEach(x=>{this._setAttr(c+C(x),void 0)}),this._fireChangeEvent(c,k,T),p&&p.call(this),this},a.Factory.addOverloadedGetterSetter(l,c)},addOverloadedGetterSetter(l,c){var h=e.Util._capitalize(c),f=o+h,p=i+h;l.prototype[c]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(l,c,h,f){e.Util.error("Adding deprecated "+c);var p=i+e.Util._capitalize(c),m=c+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[p]=function(){e.Util.error(m);var C=this.attrs[c];return C===void 0?h:C},a.Factory.addSetter(l,c,f,function(){e.Util.error(m)}),a.Factory.addOverloadedGetterSetter(l,c)},backCompat(l,c){e.Util.each(c,function(h,f){var p=l.prototype[f],m=i+e.Util._capitalize(h),C=o+e.Util._capitalize(h);function w(){p.apply(this,arguments),e.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}l.prototype[h]=w,l.prototype[m]=w,l.prototype[C]=w})},afterSetFilter(){this._filterUpToDate=!1}}})(Ce);var Tr={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.HitContext=tn.SceneContext=tn.Context=void 0;const Ff=it,_p=Ee;function Sp(a){var e=[],n=a.length,i=Ff.Util,o,l;for(o=0;o<n;o++)l=a[o],i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),e.push(l);return e}var m0=",",xp="(",wp=")",Ep="([",Cp="])",Pp=";",bp="()",Op="=",y0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Tp=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const kp=100;class bs{constructor(e){this.canvas=e,_p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var i=this.traceArr,o=i.length,l="",c,h,f,p;for(c=0;c<o;c++)h=i[c],f=h.method,f?(p=h.args,l+=f,e?l+=bp:Ff.Util._isArray(p[0])?l+=Ep+p.join(m0)+Cp:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),l+=xp+p.join(m0)+wp)):(l+=h.property,e||(l+=Op+h.val)),l+=Pp;return l}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,i;n.push(e),i=n.length,i>=kp&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,o,l,c){this._context.arc(e,n,i,o,l,c)}arcTo(e,n,i,o,l){this._context.arcTo(e,n,i,o,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,o,l,c){this._context.bezierCurveTo(e,n,i,o,l,c)}clearRect(e,n,i,o){this._context.clearRect(e,n,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,o){return this._context.createLinearGradient(e,n,i,o)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,o,l,c){return this._context.createRadialGradient(e,n,i,o,l,c)}drawImage(e,n,i,o,l,c,h,f,p){var m=arguments,C=this._context;m.length===3?C.drawImage(e,n,i):m.length===5?C.drawImage(e,n,i,o,l):m.length===9&&C.drawImage(e,n,i,o,l,c,h,f,p)}ellipse(e,n,i,o,l,c,h,f){this._context.ellipse(e,n,i,o,l,c,h,f)}isPointInPath(e,n,i,o){return i?this._context.isPointInPath(i,e,n,o):this._context.isPointInPath(e,n,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,o){this._context.fillRect(e,n,i,o)}strokeRect(e,n,i,o){this._context.strokeRect(e,n,i,o)}fillText(e,n,i,o){o?this._context.fillText(e,n,i,o):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,o){return this._context.getImageData(e,n,i,o)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,o){this._context.rect(e,n,i,o)}roundRect(e,n,i,o,l){this._context.roundRect(e,n,i,o,l)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,o){this._context.quadraticCurveTo(e,n,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,o,l,c){this._context.setTransform(e,n,i,o,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,o){this._context.strokeText(e,n,i,o)}transform(e,n,i,o,l,c){this._context.transform(e,n,i,o,l,c)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=y0.length,i=this.setAttr,o,l,c=function(h){var f=e[h],p;e[h]=function(){return l=Sp(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:h,args:l}),p}};for(o=0;o<n;o++)c(y0[o]);e.setAttr=function(){i.apply(e,arguments);var h=arguments[0],f=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:h,val:f})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}tn.Context=bs;Tp.forEach(function(a){Object.defineProperty(bs.prototype,a,{get(){return this._context[a]},set(e){this._context[a]=e}})});class Rp extends bs{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):o?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,i.x,i.y);if(o){for(var c=0;c<o.length;c+=2)l.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,o,l=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",c=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,h=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=f.x*p,C=f.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(m),Math.abs(C))),this.setAttr("shadowOffsetX",h.x*m),this.setAttr("shadowOffsetY",h.y*C)}}tn.SceneContext=Rp;class Mp extends bs{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const l=e.getStrokeScaleEnabled();if(!l){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),l||this.restore()}}}tn.HitContext=Mp;Object.defineProperty(Tr,"__esModule",{value:!0});Tr.HitCanvas=Tr.SceneCanvas=Tr.Canvas=void 0;const _s=it,If=tn,Lf=Ee,Ap=Ce,Np=le;var is;function Fp(){if(is)return is;var a=_s.Util.createCanvasElement(),e=a.getContext("2d");return is=function(){var n=Lf.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i}(),_s.Util.releaseCanvas(a),is}class Os{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},i=n.pixelRatio||Lf.Konva.pixelRatio||Fp();this.pixelRatio=i,this._canvas=_s.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(o){return _s.Util.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Tr.Canvas=Os;Ap.Factory.addGetterSetter(Os,"pixelRatio",void 0,(0,Np.getNumberValidator)());class Ip extends Os{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new If.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Tr.SceneCanvas=Ip;class Lp extends Os{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new If.HitContext(this),this.setSize(e.width,e.height)}}Tr.HitCanvas=Lp;var Ts={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const e=Ee,n=it;a.DD={get isDragging(){var i=!1;return a.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){var i;return a.DD._dragElements.forEach(o=>{i=o.node}),i},_dragElements:new Map,_drag(i){const o=[];a.DD._dragElements.forEach((l,c)=>{const{node:h}=l,f=h.getStage();f.setPointersPositions(i),l.pointerId===void 0&&(l.pointerId=n.Util._getFirstPointerId(i));const p=f._changedPointerPositions.find(w=>w.id===l.pointerId);if(p){if(l.dragStatus!=="dragging"){var m=h.dragDistance(),C=Math.max(Math.abs(p.x-l.startPointerPos.x),Math.abs(p.y-l.startPointerPos.y));if(C<m||(h.startDrag({evt:i}),!h.isDragging()))return}h._setDragPosition(i,l),o.push(h)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:i},!0)})},_endDragBefore(i){const o=[];a.DD._dragElements.forEach(l=>{const{node:c}=l,h=c.getStage();if(i&&h.setPointersPositions(i),!h._changedPointerPositions.find(m=>m.id===l.pointerId))return;(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(a.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,l.dragStatus="stopped");const p=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;p&&o.indexOf(p)===-1&&o.push(p)}),o.forEach(l=>{l.draw()})},_endDragAfter(i){a.DD._dragElements.forEach((o,l)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:i},!0),o.dragStatus!=="dragging"&&a.DD._dragElements.delete(l)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1))})(Ts);Object.defineProperty(tt,"__esModule",{value:!0});tt.Node=void 0;const Te=it,Xa=Ce,Aa=Tr,Sn=Ee,vr=Ts,ut=le;var ps="absoluteOpacity",as="allEventListeners",en="absoluteTransform",_0="absoluteScale",qn="canvas",Dp="Change",Gp="children",$p="konva",xc="listening",S0="mouseenter",x0="mouseleave",w0="set",E0="Shape",vs=" ",C0="stage",xn="transform",jp="Stage",wc="visible",zp=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(vs);let Bp=1;class pe{constructor(e){this._id=Bp++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===xn||e===en)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var i=this._cache.get(e),o=e===xn||e===en,l=i===void 0||o&&i.dirty===!0;return l&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const o=n.map(l=>l+"Change.konva").join(vs);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(qn)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===en&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(qn)){const{scene:e,filter:n,hit:i}=this._cache.get(qn);Te.Util.releaseCanvas(e,n,i),this._cache.delete(qn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var o=Math.ceil(n.width||i.width),l=Math.ceil(n.height||i.height),c=n.pixelRatio,h=n.x===void 0?Math.floor(i.x):n.x,f=n.y===void 0?Math.floor(i.y):n.y,p=n.offset||0,m=n.drawBorder||!1,C=n.hitCanvasPixelRatio||1;if(!o||!l){Te.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const w=Math.abs(Math.round(i.x)-h)>.5?1:0,_=Math.abs(Math.round(i.y)-f)>.5?1:0;o+=p*2+w,l+=p*2+_,h-=p,f-=p;var y=new Aa.SceneCanvas({pixelRatio:c,width:o,height:l}),E=new Aa.SceneCanvas({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),P=new Aa.HitCanvas({pixelRatio:C,width:o,height:l}),T=y.getContext(),k=P.getContext();return P.isCache=!0,y.isCache=!0,this._cache.delete(qn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,E.getContext()._context.imageSmoothingEnabled=!1),T.save(),k.save(),T.translate(-h,-f),k.translate(-h,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ps),this._clearSelfAndDescendantCache(_0),this.drawScene(y,this),this.drawHit(P,this),this._isUnderCache=!1,T.restore(),k.restore(),m&&(T.save(),T.beginPath(),T.rect(0,0,o,l),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),this._cache.set(qn,{scene:y,filter:E,hit:P,x:h,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(qn)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,l=1/0,c=-1/0,h=-1/0,f=this.getAbsoluteTransform(n);return i.forEach(function(p){var m=f.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),{x:o,y:l,width:c-o,height:h-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),i=n.scene,o=n.filter,l=o.getContext(),c,h,f,p;if(e){if(!this._filterUpToDate){var m=i.pixelRatio;o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(c=e.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/m,i.getHeight()/m),h=l.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<c;f++){if(p=e[f],typeof p!="function"){Te.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,h),l.putImageData(h,0,0)}}catch(C){Te.Util.error("Unable to apply filter. "+C.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return i}on(e,n){if(this._cache&&this._cache.delete(as),arguments.length===3)return this._delegate.apply(this,arguments);var i=e.split(vs),o=i.length,l,c,h,f,p;for(l=0;l<o;l++)c=i[l],h=c.split("."),f=h[0],p=h[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:n});return this}off(e,n){var i=(e||"").split(vs),o=i.length,l,c,h,f,p,m;if(this._cache&&this._cache.delete(as),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<o;l++)if(h=i[l],f=h.split("."),p=f[0],m=f[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(c in this.eventListeners)this._off(c,m,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){var o=this;this.on(e,function(l){for(var c=l.target.findAncestors(n,!0,o),h=0;h<c.length;h++)l=Te.Util.cloneObject(l),l.currentTarget=c[h],i.call(c[h],l)})}remove(){return this.isDragging()&&this.stopDrag(),vr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(en),this._clearSelfAndDescendantCache(ps),this._clearSelfAndDescendantCache(_0),this._clearSelfAndDescendantCache(C0),this._clearSelfAndDescendantCache(wc),this._clearSelfAndDescendantCache(xc)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Te.Util._capitalize(e);return Te.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,i;if(!e)return this;for(n in e)n!==Gp&&(i=w0+Te.Util._capitalize(n),Te.Util._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(xc,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(wc,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),o=!1;vr.DD._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(o=!0)});var l=!n&&!Sn.Konva.hitOnDragEnabled&&(o||Sn.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,i=0,o,l,c,h;function f(m){for(o=[],l=m.length,c=0;c<l;c++)h=m[c],i++,h.nodeType!==E0&&(o=o.concat(h.getChildren().slice())),h._id===n._id&&(c=l);o.length>0&&o[0].getDepth()<=e&&f(o)}const p=this.getStage();return n.nodeType!==jp&&p&&f(p.getChildren()),i}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(xn),this._clearSelfAndDescendantCache(en)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),l=new Te.Transform,c=this.offset();return l.m=o.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...o}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(xn);var l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(xn),this._clearSelfAndDescendantCache(en),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,i=e.y,o=this.x(),l=this.y();return n!==void 0&&(o+=n),i!==void 0&&(l+=i),this.setPosition({x:o,y:l}),this}_eachAncestorReverse(e,n){var i=[],o=this.getParent(),l,c;if(!(n&&n._id===this._id)){for(i.unshift(this);o&&(!n||o._id!==n._id);)i.unshift(o),o=o.parent;for(l=i.length,c=0;c<l;c++)e(i[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Te.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Te.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Te.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Te.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Te.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Te.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ps,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,i,o,l,c;const h={attrs:{},className:this.getClassName()};for(n in e)i=e[n],c=Te.Util.isObject(i)&&!Te.Util._isPlainObject(i)&&!Te.Util._isArray(i),!c&&(o=typeof this[n]=="function"&&this[n],delete e[n],l=o?o.call(this):null,e[n]=i,l!==i&&(h.attrs[n]=i));return Te.Util._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){var o=[];n&&this._isMatch(e)&&o.push(this);for(var l=this.parent;l;){if(l===i)return o;l._isMatch(e)&&o.push(l),l=l.parent}return o}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),i=n.length,o,l;for(o=0;o<i;o++)if(l=n[o],Te.Util.isValidSelector(l)||(Te.Util.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Te.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Te.Util.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(C0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(en,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Te.Transform,this._eachAncestorReverse(function(o){var l=o.transformsEnabled();l==="all"?n.multiply(o.getTransform()):l==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),n;n=this._cache.get(en)||new Te.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,h=this.attrs.offsetY||0;n.translate(o-c,l-h)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(xn,this._getTransform)}_getTransform(){var e,n,i=this._cache.get(xn)||new Te.Transform;i.reset();var o=this.x(),l=this.y(),c=Sn.Konva.getAngle(this.rotation()),h=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,C=this.attrs.offsetX||0,w=this.attrs.offsetY||0;return(o!==0||l!==0)&&i.translate(o,l),c!==0&&i.rotate(c),(p!==0||m!==0)&&i.skew(p,m),(h!==1||f!==1)&&i.scale(h,f),(C!==0||w!==0)&&i.translate(-1*C,-1*w),i.dirty=!1,i}clone(e){var n=Te.Util.cloneObject(this.attrs),i,o,l,c,h;for(i in e)n[i]=e[i];var f=new this.constructor(n);for(i in this.eventListeners)for(o=this.eventListeners[i],l=o.length,c=0;c<l;c++)h=o[c],h.name.indexOf($p)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(h));return f}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(n.x),l=e.y!==void 0?e.y:Math.floor(n.y),c=e.pixelRatio||1,h=new Aa.SceneCanvas({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:c}),f=h.getContext();const p=new Aa.SceneCanvas({width:h.width/h.pixelRatio+Math.abs(o),height:h.height/h.pixelRatio+Math.abs(l),pixelRatio:h.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||l)&&f.translate(-1*o,-1*l),this.drawScene(h,void 0,p),f.restore(),h}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,Te.Util._urlToImage(this.toDataURL(e),function(l){n(l),o?.(l)})}catch(o){i(o)}})}toBlob(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,this.toCanvas(e).toBlob(l=>{n(l),o?.(l)},e?.mimeType,e?.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Sn.Konva.dragDistance}_off(e,n,i){var o=this.eventListeners[e],l,c,h;for(l=0;l<o.length;l++)if(c=o[l].name,h=o[l].handler,(c!=="konva"||n==="konva")&&(!n||c===n)&&(!i||i===h)){if(o.splice(l,1),o.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,n,i){this._fire(e+Dp,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){var n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){var i=this[w0+Te.Util._capitalize(e)];return Te.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Sn.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var i=this.attrs[e];i===n&&!Te.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){var o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,n,i){n&&this.nodeType===E0&&(n.target=this);var o=(e===S0||e===x0)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!o){this._fire(e,n);var l=(e===S0||e===x0)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i,o;const l=(n=this._cache.get(as))!==null&&n!==void 0?n:{};let c=l?.[e];if(c===void 0){c=[];let h=Object.getPrototypeOf(this);for(;h;){const f=(o=(i=h.eventListeners)===null||i===void 0?void 0:i[e])!==null&&o!==void 0?o:[];c.push(...f),h=Object.getPrototypeOf(h)}l[e]=c,this._cache.set(as,l)}return c}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(var o=0;o<i.length;o++)i[o].handler.call(this,n);const l=this.eventListeners[e];if(l)for(var o=0;o<l.length;o++)l[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(i){var l=i._getPointerById(n)||i._changedPointerPositions[0]||o;vr.DD._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-o.x,y:l.y-o.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){vr.DD._dragElements.has(this._id)||this._createDragElement(e);const i=vr.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(i){var o={x:i.x-n.offset.x,y:i.y-n.offset.y},l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,o,e);c?o=c:Te.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const n=vr.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),vr.DD._endDragBefore(e),vr.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=vr.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,i=!n||Sn.Konva.dragButtons.indexOf(e.evt.button)>=0;if(i&&!this.isDragging()){var o=!1;vr.DD._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(o=!0)}),o||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=vr.DD._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",o=n&&n.dragStatus==="ready";i?this.stopDrag():o&&vr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Te.Util.haveIntersection(i,this.getClientRect())}static create(e,n){return Te.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var i=pe.prototype.getClassName.call(e),o=e.children,l,c,h;n&&(e.attrs.container=n),Sn.Konva[i]||(Te.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const f=Sn.Konva[i];if(l=new f(e.attrs),o)for(c=o.length,h=0;h<c;h++)l.add(pe._createNode(o[h]));return l}}tt.Node=pe;pe.prototype.nodeType="Node";pe.prototype._attrsAffectingSize=[];pe.prototype.eventListeners={};pe.prototype.on.call(pe.prototype,zp,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(xn),this._clearSelfAndDescendantCache(en)});pe.prototype.on.call(pe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(wc)});pe.prototype.on.call(pe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(xc)});pe.prototype.on.call(pe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ps)});const Xe=Xa.Factory.addGetterSetter;Xe(pe,"zIndex");Xe(pe,"absolutePosition");Xe(pe,"position");Xe(pe,"x",0,(0,ut.getNumberValidator)());Xe(pe,"y",0,(0,ut.getNumberValidator)());Xe(pe,"globalCompositeOperation","source-over",(0,ut.getStringValidator)());Xe(pe,"opacity",1,(0,ut.getNumberValidator)());Xe(pe,"name","",(0,ut.getStringValidator)());Xe(pe,"id","",(0,ut.getStringValidator)());Xe(pe,"rotation",0,(0,ut.getNumberValidator)());Xa.Factory.addComponentsGetterSetter(pe,"scale",["x","y"]);Xe(pe,"scaleX",1,(0,ut.getNumberValidator)());Xe(pe,"scaleY",1,(0,ut.getNumberValidator)());Xa.Factory.addComponentsGetterSetter(pe,"skew",["x","y"]);Xe(pe,"skewX",0,(0,ut.getNumberValidator)());Xe(pe,"skewY",0,(0,ut.getNumberValidator)());Xa.Factory.addComponentsGetterSetter(pe,"offset",["x","y"]);Xe(pe,"offsetX",0,(0,ut.getNumberValidator)());Xe(pe,"offsetY",0,(0,ut.getNumberValidator)());Xe(pe,"dragDistance",null,(0,ut.getNumberValidator)());Xe(pe,"width",0,(0,ut.getNumberValidator)());Xe(pe,"height",0,(0,ut.getNumberValidator)());Xe(pe,"listening",!0,(0,ut.getBooleanValidator)());Xe(pe,"preventDefault",!0,(0,ut.getBooleanValidator)());Xe(pe,"filters",null,function(a){return this._filterUpToDate=!1,a});Xe(pe,"visible",!0,(0,ut.getBooleanValidator)());Xe(pe,"transformsEnabled","all",(0,ut.getStringValidator)());Xe(pe,"size");Xe(pe,"dragBoundFunc");Xe(pe,"draggable",!1,(0,ut.getBooleanValidator)());Xa.Factory.backCompat(pe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.Container=void 0;const Hi=Ce,ec=tt,ks=le;class Zn extends ec.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(o){e(o)&&i.push(o)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var i=[];return this._descendants(o=>{const l=o._isMatch(e);return l&&i.push(o),!!(l&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const o of i){if(n=e(o),n)return!0;if(o.hasChildren()&&(n=o._descendants(e),n))return!0}return!1}toObject(){var e=ec.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=ec.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){var o=this.getLayer(),l=e||o&&o.getCanvas(),c=l&&l.getContext(),h=this._getCanvasCache(),f=h&&h.scene,p=l&&l.isCache;if(!this.isVisible()&&!p)return this;if(f){c.save();var m=this.getAbsoluteTransform(n).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),o=e||i&&i.hitCanvas,l=o&&o.getContext(),c=this._getCanvasCache(),h=c&&c.hit;if(h){l.save();var f=this.getAbsoluteTransform(n).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",o,n);return this}_drawChildren(e,n,i,o){var l,c=n&&n.getContext(),h=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),m=typeof h=="number"&&typeof f=="number"||p;const C=i===this;if(m){c.save();var w=this.getAbsoluteTransform(i),_=w.getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),c.beginPath();let T;if(p)T=p.call(this,c,this);else{var y=this.clipX(),E=this.clipY();c.rect(y||0,E||0,h,f)}c.clip.apply(c,T),_=w.copy().invert().getMatrix(),c.transform(_[0],_[1],_[2],_[3],_[4],_[5])}var P=!C&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";P&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(T){T[e](n,i,o)}),P&&c.restore(),m&&c.restore()}getClientRect(e={}){var n,i=e.skipTransform,o=e.relativeTo,l,c,h,f,p={x:1/0,y:1/0,width:0,height:0},m=this;(n=this.children)===null||n===void 0||n.forEach(function(E){if(E.visible()){var P=E.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(l===void 0?(l=P.x,c=P.y,h=P.x+P.width,f=P.y+P.height):(l=Math.min(l,P.x),c=Math.min(c,P.y),h=Math.max(h,P.x+P.width),f=Math.max(f,P.y+P.height)))}});for(var C=this.find("Shape"),w=!1,_=0;_<C.length;_++){var y=C[_];if(y._isVisible(this)){w=!0;break}}return w&&l!==void 0?p={x:l,y:c,width:h-l,height:f-c}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,o)}}Jn.Container=Zn;Hi.Factory.addComponentsGetterSetter(Zn,"clip",["x","y","width","height"]);Hi.Factory.addGetterSetter(Zn,"clipX",void 0,(0,ks.getNumberValidator)());Hi.Factory.addGetterSetter(Zn,"clipY",void 0,(0,ks.getNumberValidator)());Hi.Factory.addGetterSetter(Zn,"clipWidth",void 0,(0,ks.getNumberValidator)());Hi.Factory.addGetterSetter(Zn,"clipHeight",void 0,(0,ks.getNumberValidator)());Hi.Factory.addGetterSetter(Zn,"clipFunc");var Df={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.releaseCapture=rr.setPointerCapture=rr.hasPointerCapture=rr.createEvent=rr.getCapturedShape=void 0;const Up=Ee,Ba=new Map,Gf=Up.Konva._global.PointerEvent!==void 0;function Hp(a){return Ba.get(a)}rr.getCapturedShape=Hp;function Gc(a){return{evt:a,pointerId:a.pointerId}}rr.createEvent=Gc;function Vp(a,e){return Ba.get(a)===e}rr.hasPointerCapture=Vp;function Wp(a,e){$f(a),e.getStage()&&(Ba.set(a,e),Gf&&e._fire("gotpointercapture",Gc(new PointerEvent("gotpointercapture"))))}rr.setPointerCapture=Wp;function $f(a,e){const n=Ba.get(a);if(!n)return;const i=n.getStage();i&&i.content,Ba.delete(a),Gf&&n._fire("lostpointercapture",Gc(new PointerEvent("lostpointercapture")))}rr.releaseCapture=$f;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const e=it,n=Ce,i=Jn,o=Ee,l=Tr,c=Ts,h=Ee,f=rr;var p="Stage",m="string",C="px",w="mouseout",_="mouseleave",y="mouseover",E="mouseenter",P="mousemove",T="mousedown",k="mouseup",v="pointermove",x="pointerdown",b="pointerup",R="pointercancel",U="lostpointercapture",O="pointerout",G="pointerleave",M="pointerover",L="pointerenter",V="contextmenu",X="touchstart",Z="touchend",K="touchmove",se="touchcancel",he="wheel",fe=5,Oe=[[E,"_pointerenter"],[T,"_pointerdown"],[P,"_pointermove"],[k,"_pointerup"],[_,"_pointerleave"],[X,"_pointerdown"],[K,"_pointermove"],[Z,"_pointerup"],[se,"_pointercancel"],[y,"_pointerover"],[he,"_wheel"],[V,"_contextmenu"],[x,"_pointerdown"],[v,"_pointermove"],[b,"_pointerup"],[R,"_pointercancel"],[U,"_lostpointercapture"]];const Q={mouse:{[O]:w,[G]:_,[M]:y,[L]:E,[v]:P,[x]:T,[b]:k,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O]:"touchout",[G]:"touchleave",[M]:"touchover",[L]:"touchenter",[v]:K,[x]:X,[b]:Z,[R]:se,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O]:O,[G]:G,[M]:M,[L]:L,[v]:v,[x]:x,[b]:b,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Y=Ge=>Ge.indexOf("pointer")>=0?"pointer":Ge.indexOf("touch")>=0?"touch":"mouse",ve=Ge=>{const F=Y(Ge);if(F==="pointer")return o.Konva.pointerEventsEnabled&&Q.pointer;if(F==="touch")return Q.touch;if(F==="mouse")return Q.mouse};function ke(Ge={}){return(Ge.clipFunc||Ge.clipWidth||Ge.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ge}const we="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class qe extends i.Container{constructor(F){super(ke(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ke(this.attrs)}),this._checkVisibility()}_validateAdd(F){const H=F.getType()==="Layer",ie=F.getType()==="FastLayer";H||ie||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===m){if(F.charAt(0)==="."){var H=F.slice(1);F=document.getElementsByClassName(H)[0]}else{var ie;F.charAt(0)!=="#"?ie=F:ie=F.slice(1),F=document.getElementById(ie)}if(!F)throw"Can not find container in document with id "+ie}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var F=this.children,H=F.length,ie;for(ie=0;ie<H;ie++)F[ie].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,F)}destroy(){super.destroy();var F=this.content;F&&e.Util._isInDocument(F)&&this.container().removeChild(F);var H=a.stages.indexOf(this);return H>-1&&a.stages.splice(H,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(e.Util.warn(we),null)}_getPointerById(F){return this._pointerPositions.find(H=>H.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();var H=new l.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),ie=H.getContext()._context,ge=this.children;return(F.x||F.y)&&ie.translate(-1*F.x,-1*F.y),ge.forEach(function(de){if(de.isVisible()){var Ie=de._toKonvaCanvas(F);ie.drawImage(Ie._canvas,F.x,F.y,Ie.getWidth()/Ie.getPixelRatio(),Ie.getHeight()/Ie.getPixelRatio())}}),H}getIntersection(F){if(!F)return null;var H=this.children,ie=H.length,ge=ie-1,de;for(de=ge;de>=0;de--){const Ie=H[de].getIntersection(F);if(Ie)return Ie}return null}_resizeDOM(){var F=this.width(),H=this.height();this.content&&(this.content.style.width=F+C,this.content.style.height=H+C),this.bufferCanvas.setSize(F,H),this.bufferHitCanvas.setSize(F,H),this.children.forEach(ie=>{ie.setSize({width:F,height:H}),ie.draw()})}add(F,...H){if(arguments.length>1){for(var ie=0;ie<arguments.length;ie++)this.add(arguments[ie]);return this}super.add(F);var ge=this.children.length;return ge>fe&&e.Util.warn("The stage has "+ge+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),o.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return f.hasPointerCapture(F,this)}setPointerCapture(F){f.setPointerCapture(F,this)}releaseCapture(F){f.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&Oe.forEach(([F,H])=>{this.content.addEventListener(F,ie=>{this[H](ie)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const H=ve(F.type);H&&this._fire(H.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const H=ve(F.type);H&&this._fire(H.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let H=this[F+"targetShape"];return H&&!H.getStage()&&(H=null),H}_pointerleave(F){const H=ve(F.type),ie=Y(F.type);if(H){this.setPointersPositions(F);var ge=this._getTargetShape(ie),de=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;ge&&de?(ge._fireAndBubble(H.pointerout,{evt:F}),ge._fireAndBubble(H.pointerleave,{evt:F}),this._fire(H.pointerleave,{evt:F,target:this,currentTarget:this}),this[ie+"targetShape"]=null):de&&(this._fire(H.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(H.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(F){const H=ve(F.type),ie=Y(F.type);if(H){this.setPointersPositions(F);var ge=!1;this._changedPointerPositions.forEach(de=>{var Ie=this.getIntersection(de);if(c.DD.justDragged=!1,o.Konva["_"+ie+"ListenClick"]=!0,!Ie||!Ie.isListening())return;o.Konva.capturePointerEventsEnabled&&Ie.setPointerCapture(de.id),this[ie+"ClickStartShape"]=Ie,Ie._fireAndBubble(H.pointerdown,{evt:F,pointerId:de.id}),ge=!0;const Fe=F.type.indexOf("touch")>=0;Ie.preventDefault()&&F.cancelable&&Fe&&F.preventDefault()}),ge||this._fire(H.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(F){const H=ve(F.type),ie=Y(F.type);if(!H)return;o.Konva.isDragging()&&c.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F);var ge=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;if(!ge)return;var de={};let Ie=!1;var Fe=this._getTargetShape(ie);this._changedPointerPositions.forEach(At=>{const Re=f.getCapturedShape(At.id)||this.getIntersection(At),gt=At.id,Ye={evt:F,pointerId:gt};var Me=Fe!==Re;if(Me&&Fe&&(Fe._fireAndBubble(H.pointerout,{...Ye},Re),Fe._fireAndBubble(H.pointerleave,{...Ye},Re)),Re){if(de[Re._id])return;de[Re._id]=!0}Re&&Re.isListening()?(Ie=!0,Me&&(Re._fireAndBubble(H.pointerover,{...Ye},Fe),Re._fireAndBubble(H.pointerenter,{...Ye},Fe),this[ie+"targetShape"]=Re),Re._fireAndBubble(H.pointermove,{...Ye})):Fe&&(this._fire(H.pointerover,{evt:F,target:this,currentTarget:this,pointerId:gt}),this[ie+"targetShape"]=null)}),Ie||this._fire(H.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const H=ve(F.type),ie=Y(F.type);if(!H)return;this.setPointersPositions(F);const ge=this[ie+"ClickStartShape"],de=this[ie+"ClickEndShape"];var Ie={};let Fe=!1;this._changedPointerPositions.forEach(At=>{const Re=f.getCapturedShape(At.id)||this.getIntersection(At);if(Re){if(Re.releaseCapture(At.id),Ie[Re._id])return;Ie[Re._id]=!0}const gt=At.id,Ye={evt:F,pointerId:gt};let Me=!1;o.Konva["_"+ie+"InDblClickWindow"]?(Me=!0,clearTimeout(this[ie+"DblTimeout"])):c.DD.justDragged||(o.Konva["_"+ie+"InDblClickWindow"]=!0,clearTimeout(this[ie+"DblTimeout"])),this[ie+"DblTimeout"]=setTimeout(function(){o.Konva["_"+ie+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),Re&&Re.isListening()?(Fe=!0,this[ie+"ClickEndShape"]=Re,Re._fireAndBubble(H.pointerup,{...Ye}),o.Konva["_"+ie+"ListenClick"]&&ge&&ge===Re&&(Re._fireAndBubble(H.pointerclick,{...Ye}),Me&&de&&de===Re&&Re._fireAndBubble(H.pointerdblclick,{...Ye}))):(this[ie+"ClickEndShape"]=null,o.Konva["_"+ie+"ListenClick"]&&this._fire(H.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:gt}),Me&&this._fire(H.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:gt}))}),Fe||this._fire(H.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+ie+"ListenClick"]=!1,F.cancelable&&ie!=="touch"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(V,{evt:F}):this._fire(V,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(he,{evt:F}):this._fire(he,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const H=f.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());H&&H._fireAndBubble(b,f.createEvent(F)),f.releaseCapture(F.pointerId)}_lostpointercapture(F){f.releaseCapture(F.pointerId)}setPointersPositions(F){var H=this._getContentPosition(),ie=null,ge=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,de=>{this._pointerPositions.push({id:de.identifier,x:(de.clientX-H.left)/H.scaleX,y:(de.clientY-H.top)/H.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,de=>{this._changedPointerPositions.push({id:de.identifier,x:(de.clientX-H.left)/H.scaleX,y:(de.clientY-H.top)/H.scaleY})})):(ie=(F.clientX-H.left)/H.scaleX,ge=(F.clientY-H.top)/H.scaleY,this.pointerPos={x:ie,y:ge},this._pointerPositions=[{x:ie,y:ge,id:e.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:ie,y:ge,id:e.Util._getFirstPointerId(F)}])}_setPointerPosition(F){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!o.Konva.isBrowser){var F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}a.Stage=qe,qe.prototype.nodeType=p,(0,h._registerNode)(qe),n.Factory.addGetterSetter(qe,"container")})(Df);var Ka={},xt={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const e=Ee,n=it,i=Ce,o=tt,l=le,c=Ee,h=rr;var f="hasShadow",p="shadowRGBA",m="patternImage",C="linearGradient",w="radialGradient";let _;function y(){return _||(_=n.Util.createCanvasElement().getContext("2d"),_)}a.shapes={};function E(G){const M=this.attrs.fillRule;M?G.fill(M):G.fill()}function P(G){G.stroke()}function T(G){G.fill()}function k(G){G.stroke()}function v(){this._clearCache(f)}function x(){this._clearCache(p)}function b(){this._clearCache(m)}function R(){this._clearCache(C)}function U(){this._clearCache(w)}class O extends o.Node{constructor(M){super(M);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in a.shapes)););this.colorKey=L,a.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(m,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var M=y();const L=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const V=new n.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(e.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const X=V.getMatrix(),Z=typeof DOMMatrix>"u"?{a:X[0],b:X[1],c:X[2],d:X[3],e:X[4],f:X[5]}:new DOMMatrix(X);L.setTransform(Z)}return L}}_getLinearGradient(){return this._getCache(C,this.__getLinearGradient)}__getLinearGradient(){var M=this.fillLinearGradientColorStops();if(M){for(var L=y(),V=this.fillLinearGradientStartPoint(),X=this.fillLinearGradientEndPoint(),Z=L.createLinearGradient(V.x,V.y,X.x,X.y),K=0;K<M.length;K+=2)Z.addColorStop(M[K],M[K+1]);return Z}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){var M=this.fillRadialGradientColorStops();if(M){for(var L=y(),V=this.fillRadialGradientStartPoint(),X=this.fillRadialGradientEndPoint(),Z=L.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),X.x,X.y,this.fillRadialGradientEndRadius()),K=0;K<M.length;K+=2)Z.addColorStop(M[K],M[K+1]);return Z}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){var L=this.getStage();if(!L)return!1;const V=L.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const X=M||this.hasFill(),Z=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(X&&Z&&K)return!0;const se=this.hasShadow(),he=this.shadowForStrokeEnabled();return!!(X&&Z&&se&&he)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){const L=M.skipTransform,V=M.relativeTo,X=this.getSelfRect(),K=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,se=X.width+K,he=X.height+K,fe=!M.skipShadow&&this.hasShadow(),Oe=fe?this.shadowOffsetX():0,Q=fe?this.shadowOffsetY():0,Y=se+Math.abs(Oe),ve=he+Math.abs(Q),ke=fe&&this.shadowBlur()||0,we=Y+ke*2,qe=ve+ke*2,Ge={width:we,height:qe,x:-(K/2+ke)+Math.min(Oe,0)+X.x,y:-(K/2+ke)+Math.min(Q,0)+X.y};return L?Ge:this._transformedRect(Ge,V)}drawScene(M,L,V){var X=this.getLayer(),Z=M||X.getCanvas(),K=Z.getContext(),se=this._getCanvasCache(),he=this.getSceneFunc(),fe=this.hasShadow(),Oe,Q,Y=Z.isCache,ve=L===this;if(!this.isVisible()&&!ve)return this;if(se){K.save();var ke=this.getAbsoluteTransform(L).getMatrix();return K.transform(ke[0],ke[1],ke[2],ke[3],ke[4],ke[5]),this._drawCachedSceneCanvas(K),K.restore(),this}if(!he)return this;if(K.save(),this._useBufferCanvas()&&!Y){Oe=this.getStage();const Ge=V||Oe.bufferCanvas;Q=Ge.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var we=this.getAbsoluteTransform(L).getMatrix();Q.transform(we[0],we[1],we[2],we[3],we[4],we[5]),he.call(this,Q,this),Q.restore();var qe=Ge.pixelRatio;fe&&K._applyShadow(this),K._applyOpacity(this),K._applyGlobalCompositeOperation(this),K.drawImage(Ge._canvas,0,0,Ge.width/qe,Ge.height/qe)}else{if(K._applyLineJoin(this),!ve){var we=this.getAbsoluteTransform(L).getMatrix();K.transform(we[0],we[1],we[2],we[3],we[4],we[5]),K._applyOpacity(this),K._applyGlobalCompositeOperation(this)}fe&&K._applyShadow(this),he.call(this,K,this)}return K.restore(),this}drawHit(M,L,V=!1){if(!this.shouldDrawHit(L,V))return this;var X=this.getLayer(),Z=M||X.hitCanvas,K=Z&&Z.getContext(),se=this.hitFunc()||this.sceneFunc(),he=this._getCanvasCache(),fe=he&&he.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),fe){K.save();var Oe=this.getAbsoluteTransform(L).getMatrix();return K.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),this._drawCachedHitCanvas(K),K.restore(),this}if(!se)return this;if(K.save(),K._applyLineJoin(this),!(this===L)){var Y=this.getAbsoluteTransform(L).getMatrix();K.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5])}return se.call(this,K,this),K.restore(),this}drawHitFromCache(M=0){var L=this._getCanvasCache(),V=this._getCachedSceneCanvas(),X=L.hit,Z=X.getContext(),K=X.getWidth(),se=X.getHeight(),he,fe,Oe,Q,Y,ve;Z.clear(),Z.drawImage(V._canvas,0,0,K,se);try{for(he=Z.getImageData(0,0,K,se),fe=he.data,Oe=fe.length,Q=n.Util._hexToRgb(this.colorKey),Y=0;Y<Oe;Y+=4)ve=fe[Y+3],ve>M?(fe[Y]=Q.r,fe[Y+1]=Q.g,fe[Y+2]=Q.b,fe[Y+3]=255):fe[Y+3]=0;Z.putImageData(he,0,0)}catch(ke){n.Util.error("Unable to draw hit graph from cached scene canvas. "+ke.message)}return this}hasPointerCapture(M){return h.hasPointerCapture(M,this)}setPointerCapture(M){h.setPointerCapture(M,this)}releaseCapture(M){h.releaseCapture(M,this)}}a.Shape=O,O.prototype._fillFunc=E,O.prototype._strokeFunc=P,O.prototype._fillFuncHit=T,O.prototype._strokeFuncHit=k,O.prototype._centroid=!1,O.prototype.nodeType="Shape",(0,c._registerNode)(O),O.prototype.eventListeners={},O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",U),i.Factory.addGetterSetter(O,"stroke",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"strokeWidth",2,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(O,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(O,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"lineJoin"),i.Factory.addGetterSetter(O,"lineCap"),i.Factory.addGetterSetter(O,"sceneFunc"),i.Factory.addGetterSetter(O,"hitFunc"),i.Factory.addGetterSetter(O,"dash"),i.Factory.addGetterSetter(O,"dashOffset",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowColor",void 0,(0,l.getStringValidator)()),i.Factory.addGetterSetter(O,"shadowBlur",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOpacity",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(O,"shadowOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternImage"),i.Factory.addGetterSetter(O,"fill",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"fillPatternX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(O,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(O,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(O,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(O,"fillEnabled",!0),i.Factory.addGetterSetter(O,"strokeEnabled",!0),i.Factory.addGetterSetter(O,"shadowEnabled",!0),i.Factory.addGetterSetter(O,"dashEnabled",!0),i.Factory.addGetterSetter(O,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(O,"fillPriority","color"),i.Factory.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternScaleX",1,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternScaleY",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(O,"fillPatternRotation",0),i.Factory.addGetterSetter(O,"fillRule",void 0,(0,l.getStringValidator)()),i.Factory.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(xt);Object.defineProperty(Ka,"__esModule",{value:!0});Ka.Layer=void 0;const Zr=it,tc=Jn,Ni=tt,$c=Ce,P0=Tr,Xp=le,Kp=xt,qp=Ee;var Yp="#",Qp="beforeDraw",Jp="draw",jf=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Zp=jf.length;let Vi=class extends tc.Container{constructor(e){super(e),this.canvas=new P0.SceneCanvas,this.hitCanvas=new P0.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ni.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=Ni.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ni.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ni.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Ni.Node.prototype.remove.call(this),e&&e.parentNode&&Zr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Zr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Ni.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Zr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Zr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Zr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let o=0;o<Zp;o++){const l=jf[o],c=this._getIntersection({x:e.x+l.x*n,y:e.y+l.y*n}),h=c.shape;if(h)return h;if(i=!!c.antialiased,!c.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,o=i[3];if(o===255){const l=Zr.Util._rgbToHex(i[0],i[1],i[2]),c=Kp.shapes[Yp+l];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,n){var i=this.getLayer(),o=e||i&&i.getCanvas();return this._fire(Qp,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),tc.Container.prototype.drawScene.call(this,o,n),this._fire(Jp,{node:this}),this}drawHit(e,n){var i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),tc.Container.prototype.drawHit.call(this,o,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Zr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Zr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Zr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ka.Layer=Vi;Vi.prototype.nodeType="Layer";(0,qp._registerNode)(Vi);$c.Factory.addGetterSetter(Vi,"imageSmoothingEnabled",!0);$c.Factory.addGetterSetter(Vi,"clearBeforeDraw",!0);$c.Factory.addGetterSetter(Vi,"hitGraphEnabled",!0,(0,Xp.getBooleanValidator)());var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.FastLayer=void 0;const ev=it,tv=Ka,rv=Ee;class jc extends tv.Layer{constructor(e){super(e),this.listening(!1),ev.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Rs.FastLayer=jc;jc.prototype.nodeType="FastLayer";(0,rv._registerNode)(jc);var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Group=void 0;const nv=it,iv=Jn,av=Ee;class zc extends iv.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&nv.Util.throw("You may only add groups and shapes to groups.")}}Wi.Group=zc;zc.prototype.nodeType="Group";(0,av._registerNode)(zc);var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.Animation=void 0;const rc=Ee,b0=it,nc=function(){return rc.glob.performance&&rc.glob.performance.now?function(){return rc.glob.performance.now()}:function(){return new Date().getTime()}}();class Gr{constructor(e,n){this.id=Gr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:nc(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let o=0;o<i;o++)if(n[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Gr.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=nc(),Gr._addAnimation(this),this}stop(){return Gr._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===n){this.animations.splice(l,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const o=n[i],l=o.layers,c=o.func;o._updateFrameObject(nc());const h=l.length;let f;if(c?f=c.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<h;p++){const m=l[p];m._id!==void 0&&(e[m._id]=m)}}for(let i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=Gr;e.animations.length?(e._runFrames(),b0.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,b0.Util.requestAnimFrame(this._animationLoop))}}Xi.Animation=Gr;Gr.animations=[];Gr.animIdCounter=0;Gr.animRunning=!1;var zf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const e=it,n=Xi,i=tt,o=Ee;var l={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=1,h=2,f=3,p=0,m=["fill","stroke","shadowColor"];class C{constructor(y,E,P,T,k,v,x){this.prop=y,this.propFunc=E,this.begin=T,this._pos=T,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=k-this.begin,this.pause()}fire(y){var E=this[y];E&&E()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===h?this.setTime(y):this.state===f&&this.setTime(this.duration-y)}pause(){this.state=c,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(y){var E=this,P=y.node,T=P._id,k,v=y.easing||a.Easings.Linear,x=!!y.yoyo,b;typeof y.duration>"u"?k=.3:y.duration===0?k=.001:k=y.duration,this.node=P,this._id=p++;var R=P.getLayer()||(P instanceof o.Konva.Stage?P.getLayers():null);R||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){E.tween.onEnterFrame()},R),this.tween=new C(b,function(U){E._tweenFunc(U)},v,0,1,k*1e3,x),this._addListeners(),w.attrs[T]||(w.attrs[T]={}),w.attrs[T][this._id]||(w.attrs[T][this._id]={}),w.tweens[T]||(w.tweens[T]={});for(b in y)l[b]===void 0&&this._addAttr(b,y[b]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,E){var P=this.node,T=P._id,k,v,x,b,R,U,O,G;if(x=w.tweens[T][y],x&&delete w.attrs[T][x][y],k=P.getAttr(y),e.Util._isArray(E))if(v=[],R=Math.max(E.length,k.length),y==="points"&&E.length!==k.length&&(E.length>k.length?(O=k,k=e.Util._prepareArrayForTween(k,E,P.closed())):(U=E,E=e.Util._prepareArrayForTween(E,k,P.closed()))),y.indexOf("fill")===0)for(b=0;b<R;b++)if(b%2===0)v.push(E[b]-k[b]);else{var M=e.Util.colorToRGBA(k[b]);G=e.Util.colorToRGBA(E[b]),k[b]=M,v.push({r:G.r-M.r,g:G.g-M.g,b:G.b-M.b,a:G.a-M.a})}else for(b=0;b<R;b++)v.push(E[b]-k[b]);else m.indexOf(y)!==-1?(k=e.Util.colorToRGBA(k),G=e.Util.colorToRGBA(E),v={r:G.r-k.r,g:G.g-k.g,b:G.b-k.b,a:G.a-k.a}):v=E-k;w.attrs[T][this._id][y]={start:k,diff:v,end:E,trueEnd:U,trueStart:O},w.tweens[T][y]=this._id}_tweenFunc(y){var E=this.node,P=w.attrs[E._id][this._id],T,k,v,x,b,R,U,O;for(T in P){if(k=P[T],v=k.start,x=k.diff,O=k.end,e.Util._isArray(v))if(b=[],U=Math.max(v.length,O.length),T.indexOf("fill")===0)for(R=0;R<U;R++)R%2===0?b.push((v[R]||0)+x[R]*y):b.push("rgba("+Math.round(v[R].r+x[R].r*y)+","+Math.round(v[R].g+x[R].g*y)+","+Math.round(v[R].b+x[R].b*y)+","+(v[R].a+x[R].a*y)+")");else for(R=0;R<U;R++)b.push((v[R]||0)+x[R]*y);else m.indexOf(T)!==-1?b="rgba("+Math.round(v.r+x.r*y)+","+Math.round(v.g+x.g*y)+","+Math.round(v.b+x.b*y)+","+(v.a+x.a*y)+")":b=v+x*y;E.setAttr(T,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueEnd&&y.setAttr("points",E.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueStart&&y.points(E.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,E=this._id,P=w.tweens[y],T;this.pause();for(T in P)delete w.tweens[y][T];delete w.attrs[y][E]}}a.Tween=w,w.attrs={},w.tweens={},i.Node.prototype.to=function(_){var y=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),y&&y()};var E=new w(_);E.play()},a.Easings={BackEaseIn(_,y,E,P){var T=1.70158;return E*(_/=P)*_*((T+1)*_-T)+y},BackEaseOut(_,y,E,P){var T=1.70158;return E*((_=_/P-1)*_*((T+1)*_+T)+1)+y},BackEaseInOut(_,y,E,P){var T=1.70158;return(_/=P/2)<1?E/2*(_*_*(((T*=1.525)+1)*_-T))+y:E/2*((_-=2)*_*(((T*=1.525)+1)*_+T)+2)+y},ElasticEaseIn(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+E:(k||(k=P*.3),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),-(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y)},ElasticEaseOut(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+E:(k||(k=P*.3),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),T*Math.pow(2,-10*_)*Math.sin((_*P-v)*(2*Math.PI)/k)+E+y)},ElasticEaseInOut(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P/2)===2?y+E:(k||(k=P*(.3*1.5)),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),_<1?-.5*(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y:T*Math.pow(2,-10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k)*.5+E+y)},BounceEaseOut(_,y,E,P){return(_/=P)<1/2.75?E*(7.5625*_*_)+y:_<2/2.75?E*(7.5625*(_-=1.5/2.75)*_+.75)+y:_<2.5/2.75?E*(7.5625*(_-=2.25/2.75)*_+.9375)+y:E*(7.5625*(_-=2.625/2.75)*_+.984375)+y},BounceEaseIn(_,y,E,P){return E-a.Easings.BounceEaseOut(P-_,0,E,P)+y},BounceEaseInOut(_,y,E,P){return _<P/2?a.Easings.BounceEaseIn(_*2,0,E,P)*.5+y:a.Easings.BounceEaseOut(_*2-P,0,E,P)*.5+E*.5+y},EaseIn(_,y,E,P){return E*(_/=P)*_+y},EaseOut(_,y,E,P){return-E*(_/=P)*(_-2)+y},EaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_+y:-E/2*(--_*(_-2)-1)+y},StrongEaseIn(_,y,E,P){return E*(_/=P)*_*_*_*_+y},StrongEaseOut(_,y,E,P){return E*((_=_/P-1)*_*_*_*_+1)+y},StrongEaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_*_*_*_+y:E/2*((_-=2)*_*_*_*_+2)+y},Linear(_,y,E,P){return E*_/P+y}}})(zf);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const e=Ee,n=it,i=tt,o=Jn,l=Df,c=Ka,h=Rs,f=Wi,p=Ts,m=xt,C=Xi,w=zf,_=tn,y=Tr;a.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:o.Container,Stage:l.Stage,stages:l.stages,Layer:c.Layer,FastLayer:h.FastLayer,Group:f.Group,DD:p.DD,Shape:m.Shape,shapes:m.shapes,Animation:C.Animation,Tween:w.Tween,Easings:w.Easings,Context:_.Context,Canvas:y.Canvas}),a.default=a.Konva})(ys);var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Arc=void 0;const As=Ce,ov=xt,O0=Ee,Ns=le,sv=Ee;class on extends ov.Shape{_sceneFunc(e){var n=O0.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),o=O0.Konva.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(o,Math.PI)),c=1,h=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),f=Math.sin(Math.min(o,Math.PI/2)),p=l*(l>0?e:n),m=c*n,C=h*(h>0?e:n),w=f*(f>0?n:e);return{x:p,y:i?-1*w:C,width:m-p,height:w-C}}}Ms.Arc=on;on.prototype._centroid=!0;on.prototype.className="Arc";on.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,sv._registerNode)(on);As.Factory.addGetterSetter(on,"innerRadius",0,(0,Ns.getNumberValidator)());As.Factory.addGetterSetter(on,"outerRadius",0,(0,Ns.getNumberValidator)());As.Factory.addGetterSetter(on,"angle",0,(0,Ns.getNumberValidator)());As.Factory.addGetterSetter(on,"clockwise",!1,(0,Ns.getBooleanValidator)());var Fs={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.Line=void 0;const Is=Ce,lv=xt,Bf=le,uv=Ee;function Ec(a,e,n,i,o,l,c){var h=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-e,2)),f=Math.sqrt(Math.pow(o-n,2)+Math.pow(l-i,2)),p=c*h/(h+f),m=c*f/(h+f),C=n-p*(o-a),w=i-p*(l-e),_=n+m*(o-a),y=i+m*(l-e);return[C,w,_,y]}function T0(a,e){var n=a.length,i=[],o,l;for(o=2;o<n-2;o+=2)l=Ec(a[o-2],a[o-1],a[o],a[o+1],a[o+2],a[o+3],e),!isNaN(l[0])&&(i.push(l[0]),i.push(l[1]),i.push(a[o]),i.push(a[o+1]),i.push(l[2]),i.push(l[3]));return i}class Pn extends lv.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),i=n.length,o=this.tension(),l=this.closed(),c=this.bezier(),h,f,p;if(i){if(e.beginPath(),e.moveTo(n[0],n[1]),o!==0&&i>4){for(h=this.getTensionPoints(),f=h.length,p=l?0:4,l||e.quadraticCurveTo(h[0],h[1],h[2],h[3]);p<f-2;)e.bezierCurveTo(h[p++],h[p++],h[p++],h[p++],h[p++],h[p++]);l||e.quadraticCurveTo(h[f-2],h[f-1],n[i-2],n[i-1])}else if(c)for(p=2;p<i;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<i;p+=2)e.lineTo(n[p],n[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():T0(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,i=this.tension(),o=Ec(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),l=Ec(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),c=T0(e,i),h=[o[2],o[3]].concat(c).concat([l[0],l[1],e[n-2],e[n-1],l[2],l[3],o[0],o[1],e[0],e[1]]);return h}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);return{x:n,y:o,width:i-n,height:l-o}}}qa.Line=Pn;Pn.prototype.className="Line";Pn.prototype._attrsAffectingSize=["points","bezier","tension"];(0,uv._registerNode)(Pn);Is.Factory.addGetterSetter(Pn,"closed",!1);Is.Factory.addGetterSetter(Pn,"bezier",!1);Is.Factory.addGetterSetter(Pn,"tension",0,(0,Bf.getNumberValidator)());Is.Factory.addGetterSetter(Pn,"points",[],(0,Bf.getNumberArrayValidator)());var Ki={},Uf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(c,h,f)=>{let p,m,C;p=f/2,m=0;for(let _=0;_<20;_++)C=p*a.tValues[20][_]+p,m+=a.cValues[20][_]*i(c,h,C);return p*m};a.getCubicArcLength=e;const n=(c,h,f)=>{f===void 0&&(f=1);const p=c[0]-2*c[1]+c[2],m=h[0]-2*h[1]+h[2],C=2*c[1]-2*c[0],w=2*h[1]-2*h[0],_=4*(p*p+m*m),y=4*(p*C+m*w),E=C*C+w*w;if(_===0)return f*Math.sqrt(Math.pow(c[2]-c[0],2)+Math.pow(h[2]-h[0],2));const P=y/(2*_),T=E/_,k=f+P,v=T-P*P,x=k*k+v>0?Math.sqrt(k*k+v):0,b=P*P+v>0?Math.sqrt(P*P+v):0,R=P+Math.sqrt(P*P+v)!==0?v*Math.log(Math.abs((k+x)/(P+b))):0;return Math.sqrt(_)/2*(k*x-P*b+R)};a.getQuadraticArcLength=n;function i(c,h,f){const p=o(1,f,c),m=o(1,f,h),C=p*p+m*m;return Math.sqrt(C)}const o=(c,h,f)=>{const p=f.length-1;let m,C;if(p===0)return 0;if(c===0){C=0;for(let w=0;w<=p;w++)C+=a.binomialCoefficients[p][w]*Math.pow(1-h,p-w)*Math.pow(h,w)*f[w];return C}else{m=new Array(p);for(let w=0;w<p;w++)m[w]=p*(f[w+1]-f[w]);return o(c-1,h,m)}},l=(c,h,f)=>{let p=1,m=c/h,C=(c-f(m))/h,w=0;for(;p>.001;){const _=f(m+C),y=Math.abs(c-_)/h;if(y<p)p=y,m+=C;else{const E=f(m-C),P=Math.abs(c-E)/h;P<p?(p=P,m-=C):C/=2}if(w++,w>500)break}return m};a.t2length=l})(Uf);Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Path=void 0;const cv=Ce,dv=xt,hv=Ee,Fi=Uf;class St extends dv.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=St.parsePathData(this.data()),this.pathLength=St.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var i=!1,o=0;o<n.length;o++){var l=n[o].command,c=n[o].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":var h=c[0],f=c[1],p=c[2],m=c[3],C=c[4],w=c[5],_=c[6],y=c[7],E=p>m?p:m,P=p>m?1:p/m,T=p>m?m/p:1;e.translate(h,f),e.rotate(_),e.scale(P,T),e.arc(0,0,E,C,C+w,1-y),e.scale(1/P,1/T),e.rotate(-_),e.translate(-h,-f);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var m=p.points[4],C=p.points[5],w=p.points[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),C<0)for(let y=m-_;y>w;y-=_){const E=St.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}else for(let y=m+_;y<w;y+=_){const E=St.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}}else if(p.command==="C")for(let y=0;y<=1;y+=.01){const E=St.getPointOnCubicBezier(y,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(E.x,E.y)}else e=e.concat(p.points)});for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],isNaN(c)||(n=Math.min(n,c),i=Math.max(i,c)),isNaN(h)||(o=Math.min(o,h),l=Math.max(l,h));return{x:n,y:o,width:i-n,height:l-o}}getLength(){return this.pathLength}getPointAtLength(e){return St.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,o){return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n))}static getPathLength(e){let n=0;for(var i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var i,o=0,l=n.length;if(!l)return null;for(;o<l&&e>n[o].pathLength;)e-=n[o].pathLength,++o;if(o===l)return i=n[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=n[o].points.slice(0,2),{x:i[0],y:i[1]};var c=n[o],h=c.points;switch(c.command){case"L":return St.getPointOnLine(e,c.start.x,c.start.y,h[0],h[1]);case"C":return St.getPointOnCubicBezier((0,Fi.t2length)(e,St.getPathLength(n),E=>(0,Fi.getCubicArcLength)([c.start.x,h[0],h[2],h[4]],[c.start.y,h[1],h[3],h[5]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return St.getPointOnQuadraticBezier((0,Fi.t2length)(e,St.getPathLength(n),E=>(0,Fi.getQuadraticArcLength)([c.start.x,h[0],h[2]],[c.start.y,h[1],h[3]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],p=h[1],m=h[2],C=h[3],w=h[4],_=h[5],y=h[6];return w+=_*e/c.pathLength,St.getPointOnEllipticalArc(f,p,m,C,w,y)}return null}static getPointOnLine(e,n,i,o,l,c,h){c===void 0&&(c=n),h===void 0&&(h=i);var f=(l-i)/(o-n+1e-8),p=Math.sqrt(e*e/(1+f*f));o<n&&(p*=-1);var m=f*p,C;if(o===n)C={x:c,y:h+m};else if((h-i)/(c-n+1e-8)===f)C={x:c+p,y:h+m};else{var w,_,y=this.getLineLength(n,i,o,l),E=(c-n)*(o-n)+(h-i)*(l-i);E=E/(y*y),w=n+E*(o-n),_=i+E*(l-i);var P=this.getLineLength(c,h,w,_),T=Math.sqrt(e*e-P*P);p=Math.sqrt(T*T/(1+f*f)),o<n&&(p*=-1),m=f*p,C={x:w+p,y:_+m}}return C}static getPointOnCubicBezier(e,n,i,o,l,c,h,f,p){function m(P){return P*P*P}function C(P){return 3*P*P*(1-P)}function w(P){return 3*P*(1-P)*(1-P)}function _(P){return(1-P)*(1-P)*(1-P)}var y=f*m(e)+c*C(e)+o*w(e)+n*_(e),E=p*m(e)+h*C(e)+l*w(e)+i*_(e);return{x:y,y:E}}static getPointOnQuadraticBezier(e,n,i,o,l,c,h){function f(_){return _*_}function p(_){return 2*_*(1-_)}function m(_){return(1-_)*(1-_)}var C=c*f(e)+o*p(e)+n*m(e),w=h*f(e)+l*p(e)+i*m(e);return{x:C,y:w}}static getPointOnEllipticalArc(e,n,i,o,l,c){var h=Math.cos(c),f=Math.sin(c),p={x:i*Math.cos(l),y:o*Math.sin(l)};return{x:e+(p.x*h-p.y*f),y:n+(p.x*f+p.y*h)}}static parsePathData(e){if(!e)return[];var n=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var o=0;o<i.length;o++)n=n.replace(new RegExp(i[o],"g"),"|"+i[o]);var l=n.split("|"),c=[],h=[],f=0,p=0,m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,C;for(o=1;o<l.length;o++){var w=l[o],_=w.charAt(0);for(w=w.slice(1),h.length=0;C=m.exec(w);)h.push(C[0]);for(var y=[],E=0,P=h.length;E<P;E++){if(h[E]==="00"){y.push(0,0);continue}var T=parseFloat(h[E]);isNaN(T)?y.push(0):y.push(T)}for(;y.length>0&&!isNaN(y[0]);){var k="",v=[],x=f,b=p,R,U,O,G,M,L,V,X,Z,K;switch(_){case"l":f+=y.shift(),p+=y.shift(),k="L",v.push(f,p);break;case"L":f=y.shift(),p=y.shift(),v.push(f,p);break;case"m":var se=y.shift(),he=y.shift();if(f+=se,p+=he,k="M",c.length>2&&c[c.length-1].command==="z"){for(var fe=c.length-2;fe>=0;fe--)if(c[fe].command==="M"){f=c[fe].points[0]+se,p=c[fe].points[1]+he;break}}v.push(f,p),_="l";break;case"M":f=y.shift(),p=y.shift(),k="M",v.push(f,p),_="L";break;case"h":f+=y.shift(),k="L",v.push(f,p);break;case"H":f=y.shift(),k="L",v.push(f,p);break;case"v":p+=y.shift(),k="L",v.push(f,p);break;case"V":p=y.shift(),k="L",v.push(f,p);break;case"C":v.push(y.shift(),y.shift(),y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"c":v.push(f+y.shift(),p+y.shift(),f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"S":U=f,O=p,R=c[c.length-1],R.command==="C"&&(U=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(U,O,y.shift(),y.shift()),f=y.shift(),p=y.shift(),k="C",v.push(f,p);break;case"s":U=f,O=p,R=c[c.length-1],R.command==="C"&&(U=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(U,O,f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"Q":v.push(y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"q":v.push(f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="Q",v.push(f,p);break;case"T":U=f,O=p,R=c[c.length-1],R.command==="Q"&&(U=f+(f-R.points[0]),O=p+(p-R.points[1])),f=y.shift(),p=y.shift(),k="Q",v.push(U,O,f,p);break;case"t":U=f,O=p,R=c[c.length-1],R.command==="Q"&&(U=f+(f-R.points[0]),O=p+(p-R.points[1])),f+=y.shift(),p+=y.shift(),k="Q",v.push(U,O,f,p);break;case"A":G=y.shift(),M=y.shift(),L=y.shift(),V=y.shift(),X=y.shift(),Z=f,K=p,f=y.shift(),p=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,K,f,p,V,X,G,M,L);break;case"a":G=y.shift(),M=y.shift(),L=y.shift(),V=y.shift(),X=y.shift(),Z=f,K=p,f+=y.shift(),p+=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,K,f,p,V,X,G,M,L);break}c.push({command:k||_,points:v,start:{x,y:b},pathLength:this.calcLength(x,b,k||_,v)})}(_==="z"||_==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(e,n,i,o){var l,c,h,f,p=St;switch(i){case"L":return p.getLineLength(e,n,o[0],o[1]);case"C":return(0,Fi.getCubicArcLength)([e,o[0],o[2],o[4]],[n,o[1],o[3],o[5]],1);case"Q":return(0,Fi.getQuadraticArcLength)([e,o[0],o[2]],[n,o[1],o[3]],1);case"A":l=0;var m=o[4],C=o[5],w=o[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),c=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],m,0),C<0)for(f=m-_;f>w;f-=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;else for(f=m+_;f<w;f+=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;return h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],w,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),l}return 0}static convertEndpointToCenterParameterization(e,n,i,o,l,c,h,f,p){var m=p*(Math.PI/180),C=Math.cos(m)*(e-i)/2+Math.sin(m)*(n-o)/2,w=-1*Math.sin(m)*(e-i)/2+Math.cos(m)*(n-o)/2,_=C*C/(h*h)+w*w/(f*f);_>1&&(h*=Math.sqrt(_),f*=Math.sqrt(_));var y=Math.sqrt((h*h*(f*f)-h*h*(w*w)-f*f*(C*C))/(h*h*(w*w)+f*f*(C*C)));l===c&&(y*=-1),isNaN(y)&&(y=0);var E=y*h*w/f,P=y*-f*C/h,T=(e+i)/2+Math.cos(m)*E-Math.sin(m)*P,k=(n+o)/2+Math.sin(m)*E+Math.cos(m)*P,v=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},x=function(M,L){return(M[0]*L[0]+M[1]*L[1])/(v(M)*v(L))},b=function(M,L){return(M[0]*L[1]<M[1]*L[0]?-1:1)*Math.acos(x(M,L))},R=b([1,0],[(C-E)/h,(w-P)/f]),U=[(C-E)/h,(w-P)/f],O=[(-1*C-E)/h,(-1*w-P)/f],G=b(U,O);return x(U,O)<=-1&&(G=Math.PI),x(U,O)>=1&&(G=0),c===0&&G>0&&(G=G-2*Math.PI),c===1&&G<0&&(G=G+2*Math.PI),[T,k,h,f,R,G,m,c]}}Ki.Path=St;St.prototype.className="Path";St.prototype._attrsAffectingSize=["data"];(0,hv._registerNode)(St);cv.Factory.addGetterSetter(St,"data");Object.defineProperty(Fs,"__esModule",{value:!0});Fs.Arrow=void 0;const Ls=Ce,fv=qa,Hf=le,gv=Ee,k0=Ki;class ei extends fv.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,i=this.points(),o=i,l=this.tension()!==0&&i.length>4;l&&(o=this.getTensionPoints());var c=this.pointerLength(),h=i.length,f,p;if(l){const w=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[h-2],i[h-1]],_=k0.Path.calcLength(o[o.length-4],o[o.length-3],"C",w),y=k0.Path.getPointOnQuadraticBezier(Math.min(1,1-c/_),w[0],w[1],w[2],w[3],w[4],w[5]);f=i[h-2]-y.x,p=i[h-1]-y.y}else f=i[h-2]-i[h-4],p=i[h-1]-i[h-3];var m=(Math.atan2(p,f)+n)%n,C=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[h-2],i[h-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),l?(f=(o[0]+o[2])/2-i[0],p=(o[1]+o[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-f)+n)%n),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Fs.Arrow=ei;ei.prototype.className="Arrow";(0,gv._registerNode)(ei);Ls.Factory.addGetterSetter(ei,"pointerLength",10,(0,Hf.getNumberValidator)());Ls.Factory.addGetterSetter(ei,"pointerWidth",10,(0,Hf.getNumberValidator)());Ls.Factory.addGetterSetter(ei,"pointerAtBeginning",!1);Ls.Factory.addGetterSetter(ei,"pointerAtEnding",!0);var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Circle=void 0;const pv=Ce,vv=xt,mv=le,yv=Ee;class qi extends vv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Ds.Circle=qi;qi.prototype._centroid=!0;qi.prototype.className="Circle";qi.prototype._attrsAffectingSize=["radius"];(0,yv._registerNode)(qi);pv.Factory.addGetterSetter(qi,"radius",0,(0,mv.getNumberValidator)());var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Ellipse=void 0;const Bc=Ce,_v=xt,Vf=le,Sv=Ee;class bn extends _v.Shape{_sceneFunc(e){var n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Gs.Ellipse=bn;bn.prototype.className="Ellipse";bn.prototype._centroid=!0;bn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Sv._registerNode)(bn);Bc.Factory.addComponentsGetterSetter(bn,"radius",["x","y"]);Bc.Factory.addGetterSetter(bn,"radiusX",0,(0,Vf.getNumberValidator)());Bc.Factory.addGetterSetter(bn,"radiusY",0,(0,Vf.getNumberValidator)());var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.Image=void 0;const ic=it,ti=Ce,xv=xt,wv=Ee,Ya=le;let jr=class Wf extends xv.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),l=this.attrs.image;let c;if(l){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?c=[l,this.cropX(),this.cropY(),h,f,0,0,n,i]:c=[l,0,0,n,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?ic.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),l&&(o&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){var n=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?ic.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,i=null){var o=ic.Util.createImageElement();o.onload=function(){var l=new Wf({image:o});n(l)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}};$s.Image=jr;jr.prototype.className="Image";(0,wv._registerNode)(jr);ti.Factory.addGetterSetter(jr,"cornerRadius",0,(0,Ya.getNumberOrArrayOfNumbersValidator)(4));ti.Factory.addGetterSetter(jr,"image");ti.Factory.addComponentsGetterSetter(jr,"crop",["x","y","width","height"]);ti.Factory.addGetterSetter(jr,"cropX",0,(0,Ya.getNumberValidator)());ti.Factory.addGetterSetter(jr,"cropY",0,(0,Ya.getNumberValidator)());ti.Factory.addGetterSetter(jr,"cropWidth",0,(0,Ya.getNumberValidator)());ti.Factory.addGetterSetter(jr,"cropHeight",0,(0,Ya.getNumberValidator)());var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.Tag=ji.Label=void 0;const js=Ce,Ev=xt,Cv=Wi,Uc=le,Xf=Ee;var Kf=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Pv="Change.konva",bv="none",Cc="up",Pc="right",bc="down",Oc="left",Ov=Kf.length;class Hc extends Cv.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,i,o=function(){n._sync()};for(i=0;i<Ov;i++)e.on(Kf[i]+Pv,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),i,o,l,c,h,f,p;if(e&&n){switch(i=e.width(),o=e.height(),l=n.pointerDirection(),c=n.pointerWidth(),p=n.pointerHeight(),h=0,f=0,l){case Cc:h=i/2,f=-1*p;break;case Pc:h=i+c,f=o/2;break;case bc:h=i/2,f=o+p;break;case Oc:h=-1*c,f=o/2;break}n.setAttrs({x:-1*h,y:-1*f,width:i,height:o}),e.setAttrs({x:-1*h,y:-1*f})}}}ji.Label=Hc;Hc.prototype.className="Label";(0,Xf._registerNode)(Hc);class ri extends Ev.Shape{_sceneFunc(e){var n=this.width(),i=this.height(),o=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),h=this.cornerRadius();let f=0,p=0,m=0,C=0;typeof h=="number"?f=p=m=C=Math.min(h,n/2,i/2):(f=Math.min(h[0]||0,n/2,i/2),p=Math.min(h[1]||0,n/2,i/2),C=Math.min(h[2]||0,n/2,i/2),m=Math.min(h[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(f,0),o===Cc&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*c),e.lineTo((n+l)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),o===Pc&&(e.lineTo(n,(i-c)/2),e.lineTo(n+l,i/2),e.lineTo(n,(i+c)/2)),e.lineTo(n,i-C),e.arc(n-C,i-C,C,0,Math.PI/2,!1),o===bc&&(e.lineTo((n+l)/2,i),e.lineTo(n/2,i+c),e.lineTo((n-l)/2,i)),e.lineTo(m,i),e.arc(m,i-m,m,Math.PI/2,Math.PI,!1),o===Oc&&(e.lineTo(0,(i+c)/2),e.lineTo(-1*l,i/2),e.lineTo(0,(i-c)/2)),e.lineTo(0,f),e.arc(f,f,f,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,i=this.pointerWidth(),o=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),h=this.height();return l===Cc?(n-=o,h+=o):l===bc?h+=o:l===Oc?(e-=i*1.5,c+=i):l===Pc&&(c+=i*1.5),{x:e,y:n,width:c,height:h}}}ji.Tag=ri;ri.prototype.className="Tag";(0,Xf._registerNode)(ri);js.Factory.addGetterSetter(ri,"pointerDirection",bv);js.Factory.addGetterSetter(ri,"pointerWidth",0,(0,Uc.getNumberValidator)());js.Factory.addGetterSetter(ri,"pointerHeight",0,(0,Uc.getNumberValidator)());js.Factory.addGetterSetter(ri,"cornerRadius",0,(0,Uc.getNumberOrArrayOfNumbersValidator)(4));var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.Rect=void 0;const Tv=Ce,kv=xt,Rv=Ee,Mv=it,Av=le;let zs=class extends kv.Shape{_sceneFunc(e){var n=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),n?Mv.Util.drawRoundedRectPath(e,i,o,n):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};Qa.Rect=zs;zs.prototype.className="Rect";(0,Rv._registerNode)(zs);Tv.Factory.addGetterSetter(zs,"cornerRadius",0,(0,Av.getNumberOrArrayOfNumbersValidator)(4));var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.RegularPolygon=void 0;const qf=Ce,Nv=xt,Yf=le,Fv=Ee;class ni extends Nv.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var o=0;o<e;o++)i.push({x:n*Math.sin(o*2*Math.PI/e),y:-1*n*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();var n=e[0].x,i=e[0].y,o=e[0].x,l=e[0].y;return e.forEach(c=>{n=Math.min(n,c.x),i=Math.max(i,c.x),o=Math.min(o,c.y),l=Math.max(l,c.y)}),{x:n,y:o,width:i-n,height:l-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Bs.RegularPolygon=ni;ni.prototype.className="RegularPolygon";ni.prototype._centroid=!0;ni.prototype._attrsAffectingSize=["radius"];(0,Fv._registerNode)(ni);qf.Factory.addGetterSetter(ni,"radius",0,(0,Yf.getNumberValidator)());qf.Factory.addGetterSetter(ni,"sides",0,(0,Yf.getNumberValidator)());var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Ring=void 0;const Qf=Ce,Iv=xt,Jf=le,Lv=Ee;var R0=Math.PI*2;class ii extends Iv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,R0,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),R0,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Us.Ring=ii;ii.prototype.className="Ring";ii.prototype._centroid=!0;ii.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Lv._registerNode)(ii);Qf.Factory.addGetterSetter(ii,"innerRadius",0,(0,Jf.getNumberValidator)());Qf.Factory.addGetterSetter(ii,"outerRadius",0,(0,Jf.getNumberValidator)());var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Sprite=void 0;const ai=Ce,Dv=xt,Gv=Xi,Zf=le,$v=Ee;class zr extends Dv.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Gv.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+0],f=l[o+1],p=l[o+2],m=l[o+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,m),e.closePath(),e.fillStrokeShape(this)),C)if(c){var w=c[n],_=i*2;e.drawImage(C,h,f,p,m,w[_+0],w[_+1],p,m)}else e.drawImage(C,h,f,p,m,0,0,p,m)}_hitFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+2],f=l[o+3];if(e.beginPath(),c){var p=c[n],m=i*2;e.rect(p[m+0],p[m+1],h,f)}else e.rect(0,0,h,f);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),i=this.animations(),o=i[n],l=o.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}Hs.Sprite=zr;zr.prototype.className="Sprite";(0,$v._registerNode)(zr);ai.Factory.addGetterSetter(zr,"animation");ai.Factory.addGetterSetter(zr,"animations");ai.Factory.addGetterSetter(zr,"frameOffsets");ai.Factory.addGetterSetter(zr,"image");ai.Factory.addGetterSetter(zr,"frameIndex",0,(0,Zf.getNumberValidator)());ai.Factory.addGetterSetter(zr,"frameRate",17,(0,Zf.getNumberValidator)());ai.Factory.backCompat(zr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Star=void 0;const Vc=Ce,jv=xt,Wc=le,zv=Ee;class On extends jv.Shape{_sceneFunc(e){var n=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var l=1;l<o*2;l++){var c=l%2===0?i:n,h=c*Math.sin(l*Math.PI/o),f=-1*c*Math.cos(l*Math.PI/o);e.lineTo(h,f)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Vs.Star=On;On.prototype.className="Star";On.prototype._centroid=!0;On.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,zv._registerNode)(On);Vc.Factory.addGetterSetter(On,"numPoints",5,(0,Wc.getNumberValidator)());Vc.Factory.addGetterSetter(On,"innerRadius",0,(0,Wc.getNumberValidator)());Vc.Factory.addGetterSetter(On,"outerRadius",0,(0,Wc.getNumberValidator)());var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Text=Qn.stringToArray=void 0;const Tc=it,jt=Ce,Bv=xt,Tn=le,Uv=Ee;function e1(a){return Array.from(a)}Qn.stringToArray=e1;var Ii="auto",Hv="center",t1="inherit",Na="justify",Vv="Change.konva",Wv="2d",M0="-",r1="left",Xv="text",Kv="Text",qv="top",Yv="bottom",A0="middle",n1="normal",Qv="px ",os=" ",Jv="right",N0="rtl",Zv="word",em="char",F0="none",ac="…",i1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],tm=i1.length;function rm(a){return a.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}var ss;function oc(){return ss||(ss=Tc.Util.createCanvasElement().getContext(Wv),ss)}function nm(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function im(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function am(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}let st=class extends Bv.Shape{constructor(e){super(am(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<tm;n++)this.on(i1[n]+Vv,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,i=n.length;if(this.text()){var o=this.padding(),l=this.fontSize(),c=this.lineHeight()*l,h=this.verticalAlign(),f=this.direction(),p=0,m=this.align(),C=this.getWidth(),w=this.letterSpacing(),_=this.fill(),y=this.textDecoration(),E=y.indexOf("underline")!==-1,P=y.indexOf("line-through")!==-1,T;f=f===t1?e.direction:f;var k=0,k=c/2,v=0,x=0;for(f===N0&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",A0),e.setAttr("textAlign",r1),h===A0?p=(this.getHeight()-i*c-o*2)/2:h===Yv&&(p=this.getHeight()-i*c-o*2),e.translate(o,p+o),T=0;T<i;T++){var v=0,x=0,b=n[T],R=b.text,U=b.width,O=b.lastInParagraph,G,M,L;if(e.save(),m===Jv?v+=C-U-o*2:m===Hv&&(v+=(C-U-o*2)/2),E){e.save(),e.beginPath(),e.moveTo(v,k+x+Math.round(l/2)),G=R.split(" ").length-1,M=G===0,L=m===Na&&!O?C-o*2:U,e.lineTo(v+Math.round(L),k+x+Math.round(l/2)),e.lineWidth=l/15;const he=this._getLinearGradient();e.strokeStyle=he||_,e.stroke(),e.restore()}if(P){e.save(),e.beginPath(),e.moveTo(v,k+x),G=R.split(" ").length-1,M=G===0,L=m===Na&&O&&!M?C-o*2:U,e.lineTo(v+Math.round(L),k+x),e.lineWidth=l/15;const he=this._getLinearGradient();e.strokeStyle=he||_,e.stroke(),e.restore()}if(f!==N0&&(w!==0||m===Na)){G=R.split(" ").length-1;for(var V=e1(R),X=0;X<V.length;X++){var Z=V[X];Z===" "&&!O&&m===Na&&(v+=(C-o*2-U)/G),this._partialTextX=v,this._partialTextY=k+x,this._partialText=Z,e.fillStrokeShape(this),v+=this.measureSize(Z).width+w}}else w!==0&&e.setAttr("letterSpacing",`${w}px`),this._partialTextX=v,this._partialTextY=k+x,this._partialText=R,e.fillStrokeShape(this);e.restore(),i>1&&(k+=c)}}}_hitFunc(e){var n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=Tc.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Xv,n),this}getWidth(){var e=this.attrs.width===Ii||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Ii||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Tc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=oc(),i=this.fontSize(),o;return n.save(),n.font=this._getContextFont(),o=n.measureText(e),n.restore(),{width:o.width,height:i}}_getContextFont(){return this.fontStyle()+os+this.fontVariant()+os+(this.fontSize()+Qv)+rm(this.fontFamily())}_addTextLine(e){this.align()===Na&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),i=e.length;return oc().measureText(e).width+(i?n*(i-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),i=0,o=this.lineHeight()*n,l=this.attrs.width,c=this.attrs.height,h=l!==Ii&&l!==void 0,f=c!==Ii&&c!==void 0,p=this.padding(),m=l-p*2,C=c-p*2,w=0,_=this.wrap(),y=_!==F0,E=_!==em&&y,P=this.ellipsis();this.textArr=[],oc().font=this._getContextFont();for(var T=P?this._getTextWidth(ac):0,k=0,v=e.length;k<v;++k){var x=e[k],b=this._getTextWidth(x);if(h&&b>m)for(;x.length>0;){for(var R=0,U=x.length,O="",G=0;R<U;){var M=R+U>>>1,L=x.slice(0,M+1),V=this._getTextWidth(L)+T;V<=m?(R=M+1,O=L,G=V):U=M}if(O){if(E){var X,Z=x[O.length],K=Z===os||Z===M0;K&&G<=m?X=O.length:X=Math.max(O.lastIndexOf(os),O.lastIndexOf(M0))+1,X>0&&(R=X,O=O.slice(0,R),G=this._getTextWidth(O))}O=O.trimRight(),this._addTextLine(O),i=Math.max(i,G),w+=o;var se=this._shouldHandleEllipsis(w);if(se){this._tryToAddEllipsisToLastLine();break}if(x=x.slice(R),x=x.trimLeft(),x.length>0&&(b=this._getTextWidth(x),b<=m)){this._addTextLine(x),w+=o,i=Math.max(i,b);break}}else break}else this._addTextLine(x),w+=o,i=Math.max(i,b),this._shouldHandleEllipsis(w)&&k<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&w+o>C)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){var n=+this.fontSize(),i=this.lineHeight()*n,o=this.attrs.height,l=o!==Ii&&o!==void 0,c=this.padding(),h=o-c*2,f=this.wrap(),p=f!==F0;return!p||l&&e+i>h}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Ii&&e!==void 0,i=this.padding(),o=e-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];if(!(!c||!l)){if(n){var h=this._getTextWidth(c.text+ac)<o;h||(c.text=c.text.slice(0,c.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+ac)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};Qn.Text=st;st.prototype._fillFunc=nm;st.prototype._strokeFunc=im;st.prototype.className=Kv;st.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Uv._registerNode)(st);jt.Factory.overWriteSetter(st,"width",(0,Tn.getNumberOrAutoValidator)());jt.Factory.overWriteSetter(st,"height",(0,Tn.getNumberOrAutoValidator)());jt.Factory.addGetterSetter(st,"direction",t1);jt.Factory.addGetterSetter(st,"fontFamily","Arial");jt.Factory.addGetterSetter(st,"fontSize",12,(0,Tn.getNumberValidator)());jt.Factory.addGetterSetter(st,"fontStyle",n1);jt.Factory.addGetterSetter(st,"fontVariant",n1);jt.Factory.addGetterSetter(st,"padding",0,(0,Tn.getNumberValidator)());jt.Factory.addGetterSetter(st,"align",r1);jt.Factory.addGetterSetter(st,"verticalAlign",qv);jt.Factory.addGetterSetter(st,"lineHeight",1,(0,Tn.getNumberValidator)());jt.Factory.addGetterSetter(st,"wrap",Zv);jt.Factory.addGetterSetter(st,"ellipsis",!1,(0,Tn.getBooleanValidator)());jt.Factory.addGetterSetter(st,"letterSpacing",0,(0,Tn.getNumberValidator)());jt.Factory.addGetterSetter(st,"text","",(0,Tn.getStringValidator)());jt.Factory.addGetterSetter(st,"textDecoration","");var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.TextPath=void 0;const sc=it,kr=Ce,om=xt,Fa=Ki,lc=Qn,a1=le,sm=Ee;var lm="",o1="normal";function s1(a){a.fillText(this.partialText,0,0)}function l1(a){a.strokeText(this.partialText,0,0)}class wt extends om.Shape{constructor(e){super(e),this.dummyCanvas=sc.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Fa.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:Fa.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Fa.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),i=this.fill(),o=this.fontSize(),l=this.glyphInfo;n==="underline"&&e.beginPath();for(var c=0;c<l.length;c++){e.save();var h=l[c].p0;e.translate(h.x,h.y),e.rotate(l[c].rotation),this.partialText=l[c].text,e.fillStrokeShape(this),n==="underline"&&(c===0&&e.moveTo(0,o/2+1),e.lineTo(o,o/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;e.moveTo(i.x,i.y)}for(var o=0;o<n.length;o++){var l=n[o].p1;e.lineTo(l.x,l.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return sc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return lc.Text.prototype.setText.call(this,e)}_getContextFont(){return lc.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),l=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let h=0;o==="center"&&(h=Math.max(0,this.pathLength/2-c/2)),o==="right"&&(h=Math.max(0,this.pathLength-c));const f=(0,lc.stringToArray)(this.text());let p=h;for(var m=0;m<f.length;m++){const C=this._getPointAtLength(p);if(!C)return;let w=this._getTextSize(f[m]).width+i;if(f[m]===" "&&o==="justify"){const k=this.text().split(" ").length-1;w+=(this.pathLength-c)/k}const _=this._getPointAtLength(p+w);if(!_)return;const y=Fa.Path.getLineLength(C.x,C.y,_.x,_.y);let E=0;if(l)try{E=l(f[m-1],f[m])*this.fontSize()}catch{E=0}C.x+=E,_.x+=E,this.textWidth+=E;const P=Fa.Path.getPointOnLine(E+y/2,C.x,C.y,_.x,_.y),T=Math.atan2(_.y-C.y,_.x-C.x);this.glyphInfo.push({transposeX:P.x,transposeY:P.y,text:f[m],rotation:T,p0:C,p1:_}),p+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});for(var n=e[0]||0,i=e[0]||0,o=e[1]||0,l=e[1]||0,c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);var p=this.fontSize();return{x:n-p/2,y:o-p/2,width:i-n+p,height:l-o+p}}destroy(){return sc.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Ws.TextPath=wt;wt.prototype._fillFunc=s1;wt.prototype._strokeFunc=l1;wt.prototype._fillFuncHit=s1;wt.prototype._strokeFuncHit=l1;wt.prototype.className="TextPath";wt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,sm._registerNode)(wt);kr.Factory.addGetterSetter(wt,"data");kr.Factory.addGetterSetter(wt,"fontFamily","Arial");kr.Factory.addGetterSetter(wt,"fontSize",12,(0,a1.getNumberValidator)());kr.Factory.addGetterSetter(wt,"fontStyle",o1);kr.Factory.addGetterSetter(wt,"align","left");kr.Factory.addGetterSetter(wt,"letterSpacing",0,(0,a1.getNumberValidator)());kr.Factory.addGetterSetter(wt,"textBaseline","middle");kr.Factory.addGetterSetter(wt,"fontVariant",o1);kr.Factory.addGetterSetter(wt,"text",lm);kr.Factory.addGetterSetter(wt,"textDecoration",null);kr.Factory.addGetterSetter(wt,"kerningFunc",null);var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Transformer=void 0;const Ve=it,$e=Ce,I0=tt,um=xt,cm=Qa,L0=Wi,Or=Ee,kn=le,dm=Ee;var u1="tr-konva",hm=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${u1}`).join(" "),D0="nodesRect",fm=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],gm={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const pm="ontouchstart"in Or.Konva._global;function vm(a,e,n){if(a==="rotater")return n;e+=Ve.Util.degToRad(gm[a]||0);var i=(Ve.Util.radToDeg(e)%360+360)%360;return Ve.Util._inRange(i,315+22.5,360)||Ve.Util._inRange(i,0,22.5)?"ns-resize":Ve.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":Ve.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":Ve.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":Ve.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":Ve.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":Ve.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":Ve.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(Ve.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var Ss=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],G0=1e8;function mm(a){return{x:a.x+a.width/2*Math.cos(a.rotation)+a.height/2*Math.sin(-a.rotation),y:a.y+a.height/2*Math.cos(a.rotation)+a.width/2*Math.sin(a.rotation)}}function c1(a,e,n){const i=n.x+(a.x-n.x)*Math.cos(e)-(a.y-n.y)*Math.sin(e),o=n.y+(a.x-n.x)*Math.sin(e)+(a.y-n.y)*Math.cos(e);return{...a,rotation:a.rotation+e,x:i,y:o}}function ym(a,e){const n=mm(a);return c1(a,e,n)}function _m(a,e,n){let i=e;for(let o=0;o<a.length;o++){const l=Or.Konva.getAngle(a[o]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<n&&(i=l)}return i}let kc=0;class Ne extends L0.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(hm,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Ve.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u1+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(o=>o.isAncestorOf(this)?(Ve.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},c=o._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");o.on(c,l),o.on(fm.map(h=>h+`.${this._getEventNamespace()}`).join(" "),l),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(o)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const o=e.getAbsolutePosition(),l=o.x-n.x,c=o.y-n.y;this.nodes().forEach(h=>{if(h===e||h.isDragging())return;const f=h.getAbsolutePosition();h.setAbsolutePosition({x:f.x+l,y:f.y+c}),h.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(D0),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(D0,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){var o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(i),c=e.getAbsolutePosition(i),h=o.x*l.x-e.offsetX()*l.x,f=o.y*l.y-e.offsetY()*l.y;const p=(Or.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:c.x+h*Math.cos(p)+f*Math.sin(-p),y:c.y+f*Math.cos(p)+h*Math.sin(p),width:o.width*l.x,height:o.height*l.y,rotation:p};return c1(m,-Or.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-G0,y:-G0,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var C=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],w=p.getAbsoluteTransform();C.forEach(function(_){var y=w.point(_);n.push(y)})});const i=new Ve.Transform;i.rotate(-Or.Konva.getAngle(this.rotation()));var o=1/0,l=1/0,c=-1/0,h=-1/0;n.forEach(function(p){var m=i.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),i.invert();const f=i.point({x:o,y:l});return{x:f.x,y:f.y,width:c-o,height:h-l,rotation:Or.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ss.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new cm.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:pm?10:"auto"}),i=this;n.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),n.on("dragstart",o=>{n.stopDrag(),o.cancelBubble=!0}),n.on("dragend",o=>{o.cancelBubble=!0}),n.on("mouseenter",()=>{var o=Or.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=vm(e,o,l);n.getStage().content&&(n.getStage().content.style.cursor=c),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new um.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,i){var o=i.getParent(),l=o.padding();n.beginPath(),n.rect(-l,-l,i.width()+l*2,i.height()+l*2),n.moveTo(i.width()/2,-l),o.rotateEnabled()&&o.rotateLineVisible()&&n.lineTo(i.width()/2,-o.rotateAnchorOffset()*Ve.Util._sign(i.height())-l),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(this.shouldOverdrawWholeArea()){var o=this.padding();n.beginPath(),n.rect(-o,-o,i.width()+o*2,i.height()+o*2),n.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,o=n.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var c=e.target.getAbsolutePosition(),h=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-c.x,y:h.y-c.y},kc++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:e.evt,target:f})})}_handleMouseMove(e){var n,i,o,l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const h=c.getPointerPosition();let f={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const p=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,e)),l.setAbsolutePosition(f);const m=l.getAbsolutePosition();if(!(p.x===m.x&&p.y===m.y)){if(this._movingAnchorName==="rotater"){var C=this._getNodeRect();n=l.x()-C.width/2,i=-l.y()+C.height/2;let X=Math.atan2(-i,n)+Math.PI/2;C.height<0&&(X-=Math.PI);var w=Or.Konva.getAngle(this.rotation());const Z=w+X,K=Or.Konva.getAngle(this.rotationSnapTolerance()),he=_m(this.rotationSnaps(),Z,K)-C.rotation,fe=ym(C,he);this._fitNodesInto(fe,e);return}var _=this.shiftBehavior(),y;_==="inverted"?y=this.keepRatio()&&!e.shiftKey:_==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;var v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-left").x()>E.x?-1:1,T=this.findOne(".top-left").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-left").x(E.x-n),this.findOne(".top-left").y(E.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-right").x()<E.x?-1:1,T=this.findOne(".top-right").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-right").x(E.x+n),this.findOne(".top-right").y(E.y-i)}var k=l.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(l.y()-E.y,2));var P=E.x<l.x()?-1:1,T=l.y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,l.x(E.x-n),l.y(E.y+i)}k=l.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(l.y()-E.y,2));var P=this.findOne(".bottom-right").x()<E.x?-1:1,T=this.findOne(".bottom-right").y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".bottom-right").x(E.x+n),this.findOne(".bottom-right").y(E.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||e.altKey;if(v){var x=this.findOne(".top-left"),b=this.findOne(".bottom-right"),R=x.x(),U=x.y(),O=this.getWidth()-b.x(),G=this.getHeight()-b.y();b.move({x:-R,y:-U}),x.move({x:O,y:G})}var M=this.findOne(".top-left").getAbsolutePosition();n=M.x,i=M.y;var L=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),V=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:L,height:V,rotation:Or.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();kc--,this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:e,target:i})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var i=this._getNodeRect();const o=1;if(Ve.Util._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(Ve.Util._inRange(e.height,-this.padding()*2-o,o)){this.update();return}var l=new Ve.Transform;if(l.rotate(Or.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const w=l.point({x:-this.padding()*2,y:0});e.x+=w.x,e.y+=w.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const w=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const w=l.point({x:0,y:-this.padding()*2});e.x+=w.x,e.y+=w.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const w=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const w=this.boundBoxFunc()(i,e);w?e=w:Ve.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,h=new Ve.Transform;h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.width/c,i.height/c);const f=new Ve.Transform,p=e.width/c,m=e.height/c;this.flipEnabled()===!1?(f.translate(e.x,e.y),f.rotate(e.rotation),f.translate(e.width<0?e.width:0,e.height<0?e.height:0),f.scale(Math.abs(p),Math.abs(m))):(f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(p,m));const C=f.multiply(h.invert());this._nodes.forEach(w=>{var _;const y=w.getParent().getAbsoluteTransform(),E=w.getTransform().copy();E.translate(w.offsetX(),w.offsetY());const P=new Ve.Transform;P.multiply(y.copy().invert()).multiply(C).multiply(y).multiply(E);const T=P.decompose();w.setAttrs(T),(_=w.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(Ve.Util._getRotation(e.rotation)),this._nodes.forEach(w=>{this._fire("transform",{evt:n,target:w}),w._fire("transform",{evt:n,target:w})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(Ve.Util._getRotation(n.rotation));var i=n.width,o=n.height,l=this.enabledAnchors(),c=this.resizeEnabled(),h=this.padding(),f=this.anchorSize();const p=this.find("._anchor");p.forEach(C=>{C.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+h,offsetY:f/2+h,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+h,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-h,offsetY:f/2+h,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+h,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-h,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-h,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Ve.Util._sign(o)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(C=>{m(C)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),L0.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return I0.Node.prototype.toObject.call(this)}clone(e){var n=I0.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Xs.Transformer=Ne;Ne.isTransforming=()=>kc>0;function Sm(a){return a instanceof Array||Ve.Util.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(e){Ss.indexOf(e)===-1&&Ve.Util.warn("Unknown anchor name: "+e+". Available names are: "+Ss.join(", "))}),a||[]}Ne.prototype.className="Transformer";(0,dm._registerNode)(Ne);$e.Factory.addGetterSetter(Ne,"enabledAnchors",Ss,Sm);$e.Factory.addGetterSetter(Ne,"flipEnabled",!0,(0,kn.getBooleanValidator)());$e.Factory.addGetterSetter(Ne,"resizeEnabled",!0);$e.Factory.addGetterSetter(Ne,"anchorSize",10,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"rotateEnabled",!0);$e.Factory.addGetterSetter(Ne,"rotateLineVisible",!0);$e.Factory.addGetterSetter(Ne,"rotationSnaps",[]);$e.Factory.addGetterSetter(Ne,"rotateAnchorOffset",50,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"rotateAnchorCursor","crosshair");$e.Factory.addGetterSetter(Ne,"rotationSnapTolerance",5,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"borderEnabled",!0);$e.Factory.addGetterSetter(Ne,"anchorStroke","rgb(0, 161, 255)");$e.Factory.addGetterSetter(Ne,"anchorStrokeWidth",1,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"anchorFill","white");$e.Factory.addGetterSetter(Ne,"anchorCornerRadius",0,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"borderStroke","rgb(0, 161, 255)");$e.Factory.addGetterSetter(Ne,"borderStrokeWidth",1,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"borderDash");$e.Factory.addGetterSetter(Ne,"keepRatio",!0);$e.Factory.addGetterSetter(Ne,"shiftBehavior","default");$e.Factory.addGetterSetter(Ne,"centeredScaling",!1);$e.Factory.addGetterSetter(Ne,"ignoreStroke",!1);$e.Factory.addGetterSetter(Ne,"padding",0,(0,kn.getNumberValidator)());$e.Factory.addGetterSetter(Ne,"node");$e.Factory.addGetterSetter(Ne,"nodes");$e.Factory.addGetterSetter(Ne,"boundBoxFunc");$e.Factory.addGetterSetter(Ne,"anchorDragBoundFunc");$e.Factory.addGetterSetter(Ne,"anchorStyleFunc");$e.Factory.addGetterSetter(Ne,"shouldOverdrawWholeArea",!1);$e.Factory.addGetterSetter(Ne,"useSingleNodeRotation",!0);$e.Factory.backCompat(Ne,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Wedge=void 0;const qs=Ce,xm=xt,wm=Ee,d1=le,Em=Ee;class sn extends xm.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,wm.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Ks.Wedge=sn;sn.prototype.className="Wedge";sn.prototype._centroid=!0;sn.prototype._attrsAffectingSize=["radius"];(0,Em._registerNode)(sn);qs.Factory.addGetterSetter(sn,"radius",0,(0,d1.getNumberValidator)());qs.Factory.addGetterSetter(sn,"angle",0,(0,d1.getNumberValidator)());qs.Factory.addGetterSetter(sn,"clockwise",!1);qs.Factory.backCompat(sn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Blur=void 0;const $0=Ce,Cm=tt,Pm=le;function j0(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var bm=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Om=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Tm(a,e){var n=a.data,i=a.width,o=a.height,l,c,h,f,p,m,C,w,_,y,E,P,T,k,v,x,b,R,U,O,G,M,L,V,X=e+e+1,Z=i-1,K=o-1,se=e+1,he=se*(se+1)/2,fe=new j0,Oe=null,Q=fe,Y=null,ve=null,ke=bm[e],we=Om[e];for(h=1;h<X;h++)Q=Q.next=new j0,h===se&&(Oe=Q);for(Q.next=fe,C=m=0,c=0;c<o;c++){for(x=b=R=U=w=_=y=E=0,P=se*(O=n[m]),T=se*(G=n[m+1]),k=se*(M=n[m+2]),v=se*(L=n[m+3]),w+=he*O,_+=he*G,y+=he*M,E+=he*L,Q=fe,h=0;h<se;h++)Q.r=O,Q.g=G,Q.b=M,Q.a=L,Q=Q.next;for(h=1;h<se;h++)f=m+((Z<h?Z:h)<<2),w+=(Q.r=O=n[f])*(V=se-h),_+=(Q.g=G=n[f+1])*V,y+=(Q.b=M=n[f+2])*V,E+=(Q.a=L=n[f+3])*V,x+=O,b+=G,R+=M,U+=L,Q=Q.next;for(Y=fe,ve=Oe,l=0;l<i;l++)n[m+3]=L=E*ke>>we,L!==0?(L=255/L,n[m]=(w*ke>>we)*L,n[m+1]=(_*ke>>we)*L,n[m+2]=(y*ke>>we)*L):n[m]=n[m+1]=n[m+2]=0,w-=P,_-=T,y-=k,E-=v,P-=Y.r,T-=Y.g,k-=Y.b,v-=Y.a,f=C+((f=l+e+1)<Z?f:Z)<<2,x+=Y.r=n[f],b+=Y.g=n[f+1],R+=Y.b=n[f+2],U+=Y.a=n[f+3],w+=x,_+=b,y+=R,E+=U,Y=Y.next,P+=O=ve.r,T+=G=ve.g,k+=M=ve.b,v+=L=ve.a,x-=O,b-=G,R-=M,U-=L,ve=ve.next,m+=4;C+=i}for(l=0;l<i;l++){for(b=R=U=x=_=y=E=w=0,m=l<<2,P=se*(O=n[m]),T=se*(G=n[m+1]),k=se*(M=n[m+2]),v=se*(L=n[m+3]),w+=he*O,_+=he*G,y+=he*M,E+=he*L,Q=fe,h=0;h<se;h++)Q.r=O,Q.g=G,Q.b=M,Q.a=L,Q=Q.next;for(p=i,h=1;h<=e;h++)m=p+l<<2,w+=(Q.r=O=n[m])*(V=se-h),_+=(Q.g=G=n[m+1])*V,y+=(Q.b=M=n[m+2])*V,E+=(Q.a=L=n[m+3])*V,x+=O,b+=G,R+=M,U+=L,Q=Q.next,h<K&&(p+=i);for(m=l,Y=fe,ve=Oe,c=0;c<o;c++)f=m<<2,n[f+3]=L=E*ke>>we,L>0?(L=255/L,n[f]=(w*ke>>we)*L,n[f+1]=(_*ke>>we)*L,n[f+2]=(y*ke>>we)*L):n[f]=n[f+1]=n[f+2]=0,w-=P,_-=T,y-=k,E-=v,P-=Y.r,T-=Y.g,k-=Y.b,v-=Y.a,f=l+((f=c+se)<K?f:K)*i<<2,w+=x+=Y.r=n[f],_+=b+=Y.g=n[f+1],y+=R+=Y.b=n[f+2],E+=U+=Y.a=n[f+3],Y=Y.next,P+=O=ve.r,T+=G=ve.g,k+=M=ve.b,v+=L=ve.a,x-=O,b-=G,R-=M,U-=L,ve=ve.next,m+=i}}const km=function(e){var n=Math.round(this.blurRadius());n>0&&Tm(e,n)};Ys.Blur=km;$0.Factory.addGetterSetter(Cm.Node,"blurRadius",0,(0,Pm.getNumberValidator)(),$0.Factory.afterSetFilter);var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.Brighten=void 0;const z0=Ce,Rm=tt,Mm=le,Am=function(a){var e=this.brightness()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=4)n[o]+=e,n[o+1]+=e,n[o+2]+=e};Qs.Brighten=Am;z0.Factory.addGetterSetter(Rm.Node,"brightness",0,(0,Mm.getNumberValidator)(),z0.Factory.afterSetFilter);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.Contrast=void 0;const B0=Ce,Nm=tt,Fm=le,Im=function(a){var e=Math.pow((this.contrast()+100)/100,2),n=a.data,i=n.length,o=150,l=150,c=150,h;for(h=0;h<i;h+=4)o=n[h],l=n[h+1],c=n[h+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,o=o<0?0:o>255?255:o,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,n[h]=o,n[h+1]=l,n[h+2]=c};Js.Contrast=Im;B0.Factory.addGetterSetter(Nm.Node,"contrast",0,(0,Fm.getNumberValidator)(),B0.Factory.afterSetFilter);var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Emboss=void 0;const Cn=Ce,el=tt,Lm=it,h1=le,Dm=function(a){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),o=this.embossBlend(),l=0,c=0,h=a.data,f=a.width,p=a.height,m=f*4,C=p;switch(i){case"top-left":l=-1,c=-1;break;case"top":l=-1,c=0;break;case"top-right":l=-1,c=1;break;case"right":l=0,c=1;break;case"bottom-right":l=1,c=1;break;case"bottom":l=1,c=0;break;case"bottom-left":l=1,c=-1;break;case"left":l=0,c=-1;break;default:Lm.Util.error("Unknown emboss direction: "+i)}do{var w=(C-1)*m,_=l;C+_<1&&(_=0),C+_>p&&(_=0);var y=(C-1+_)*f*4,E=f;do{var P=w+(E-1)*4,T=c;E+T<1&&(T=0),E+T>f&&(T=0);var k=y+(E-1+T)*4,v=h[P]-h[k],x=h[P+1]-h[k+1],b=h[P+2]-h[k+2],R=v,U=R>0?R:-R,O=x>0?x:-x,G=b>0?b:-b;if(O>U&&(R=x),G>U&&(R=b),R*=e,o){var M=h[P]+R,L=h[P+1]+R,V=h[P+2]+R;h[P]=M>255?255:M<0?0:M,h[P+1]=L>255?255:L<0?0:L,h[P+2]=V>255?255:V<0?0:V}else{var X=n-R;X<0?X=0:X>255&&(X=255),h[P]=h[P+1]=h[P+2]=X}}while(--E)}while(--C)};Zs.Emboss=Dm;Cn.Factory.addGetterSetter(el.Node,"embossStrength",.5,(0,h1.getNumberValidator)(),Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(el.Node,"embossWhiteLevel",.5,(0,h1.getNumberValidator)(),Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(el.Node,"embossDirection","top-left",null,Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(el.Node,"embossBlend",!1,null,Cn.Factory.afterSetFilter);var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.Enhance=void 0;const U0=Ce,Gm=tt,$m=le;function uc(a,e,n,i,o){var l=n-e,c=o-i,h;return l===0?i+c/2:c===0?i:(h=(a-e)/l,h=c*h+i,h)}const jm=function(a){var e=a.data,n=e.length,i=e[0],o=i,l,c=e[1],h=c,f,p=e[2],m=p,C,w,_=this.enhance();if(_!==0){for(w=0;w<n;w+=4)l=e[w+0],l<i?i=l:l>o&&(o=l),f=e[w+1],f<c?c=f:f>h&&(h=f),C=e[w+2],C<p?p=C:C>m&&(m=C);o===i&&(o=255,i=0),h===c&&(h=255,c=0),m===p&&(m=255,p=0);var y,E,P,T,k,v,x,b,R;for(_>0?(E=o+_*(255-o),P=i-_*(i-0),k=h+_*(255-h),v=c-_*(c-0),b=m+_*(255-m),R=p-_*(p-0)):(y=(o+i)*.5,E=o+_*(o-y),P=i+_*(i-y),T=(h+c)*.5,k=h+_*(h-T),v=c+_*(c-T),x=(m+p)*.5,b=m+_*(m-x),R=p+_*(p-x)),w=0;w<n;w+=4)e[w+0]=uc(e[w+0],i,o,P,E),e[w+1]=uc(e[w+1],c,h,v,k),e[w+2]=uc(e[w+2],p,m,R,b)}};tl.Enhance=jm;U0.Factory.addGetterSetter(Gm.Node,"enhance",0,(0,$m.getNumberValidator)(),U0.Factory.afterSetFilter);var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.Grayscale=void 0;const zm=function(a){var e=a.data,n=e.length,i,o;for(i=0;i<n;i+=4)o=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o};rl.Grayscale=zm;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.HSL=void 0;const zi=Ce,Xc=tt,Kc=le;zi.Factory.addGetterSetter(Xc.Node,"hue",0,(0,Kc.getNumberValidator)(),zi.Factory.afterSetFilter);zi.Factory.addGetterSetter(Xc.Node,"saturation",0,(0,Kc.getNumberValidator)(),zi.Factory.afterSetFilter);zi.Factory.addGetterSetter(Xc.Node,"luminance",0,(0,Kc.getNumberValidator)(),zi.Factory.afterSetFilter);const Bm=function(a){var e=a.data,n=e.length,i=1,o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,h,f=i*o*Math.cos(l*Math.PI/180),p=i*o*Math.sin(l*Math.PI/180),m=.299*i+.701*f+.167*p,C=.587*i-.587*f+.33*p,w=.114*i-.114*f-.497*p,_=.299*i-.299*f-.328*p,y=.587*i+.413*f+.035*p,E=.114*i-.114*f+.293*p,P=.299*i-.3*f+1.25*p,T=.587*i-.586*f-1.05*p,k=.114*i+.886*f-.2*p,v,x,b,R;for(h=0;h<n;h+=4)v=e[h+0],x=e[h+1],b=e[h+2],R=e[h+3],e[h+0]=m*v+C*x+w*b+c,e[h+1]=_*v+y*x+E*b+c,e[h+2]=P*v+T*x+k*b+c,e[h+3]=R};nl.HSL=Bm;var il={};Object.defineProperty(il,"__esModule",{value:!0});il.HSV=void 0;const Bi=Ce,qc=tt,Yc=le,Um=function(a){var e=a.data,n=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c,h=i*o*Math.cos(l*Math.PI/180),f=i*o*Math.sin(l*Math.PI/180),p=.299*i+.701*h+.167*f,m=.587*i-.587*h+.33*f,C=.114*i-.114*h-.497*f,w=.299*i-.299*h-.328*f,_=.587*i+.413*h+.035*f,y=.114*i-.114*h+.293*f,E=.299*i-.3*h+1.25*f,P=.587*i-.586*h-1.05*f,T=.114*i+.886*h-.2*f,k,v,x,b;for(c=0;c<n;c+=4)k=e[c+0],v=e[c+1],x=e[c+2],b=e[c+3],e[c+0]=p*k+m*v+C*x,e[c+1]=w*k+_*v+y*x,e[c+2]=E*k+P*v+T*x,e[c+3]=b};il.HSV=Um;Bi.Factory.addGetterSetter(qc.Node,"hue",0,(0,Yc.getNumberValidator)(),Bi.Factory.afterSetFilter);Bi.Factory.addGetterSetter(qc.Node,"saturation",0,(0,Yc.getNumberValidator)(),Bi.Factory.afterSetFilter);Bi.Factory.addGetterSetter(qc.Node,"value",0,(0,Yc.getNumberValidator)(),Bi.Factory.afterSetFilter);var al={};Object.defineProperty(al,"__esModule",{value:!0});al.Invert=void 0;const Hm=function(a){var e=a.data,n=e.length,i;for(i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};al.Invert=Hm;var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.Kaleidoscope=void 0;const xs=Ce,f1=tt,H0=it,g1=le;var Vm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w=0,_=0,y=0,E=0,P,T=Math.sqrt(h*h+f*f);m=l-h,C=c-f,P=Math.sqrt(m*m+C*C),T=P>T?P:T;var k=c,v=l,x,b,R=360/v*Math.PI/180,U,O;for(b=0;b<v;b+=1)for(U=Math.sin(b*R),O=Math.cos(b*R),x=0;x<k;x+=1)m=Math.floor(h+T*x/k*O),C=Math.floor(f+T*x/k*U),p=(C*l+m)*4,w=i[p+0],_=i[p+1],y=i[p+2],E=i[p+3],p=(b+x*l)*4,o[p+0]=w,o[p+1]=_,o[p+2]=y,o[p+3]=E},Wm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w,_,y=0,E=0,P=0,T=0,k,v=Math.sqrt(h*h+f*f);m=l-h,C=c-f,k=Math.sqrt(m*m+C*C),v=k>v?k:v;var x=c,b=l,R,U,O=n.polarRotation||0,G,M;for(m=0;m<l;m+=1)for(C=0;C<c;C+=1)w=m-h,_=C-f,R=Math.sqrt(w*w+_*_)*x/v,U=(Math.atan2(_,w)*180/Math.PI+360+O)%360,U=U*b/360,G=Math.floor(U),M=Math.floor(R),p=(M*l+G)*4,y=i[p+0],E=i[p+1],P=i[p+2],T=i[p+3],p=(C*l+m)*4,o[p+0]=y,o[p+1]=E,o[p+2]=P,o[p+3]=T};const Xm=function(a){var e=a.width,n=a.height,i,o,l,c,h,f,p,m,C,w,_=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),E=Math.floor(e*(y%360)/360);if(!(_<1)){var P=H0.Util.createCanvasElement();P.width=e,P.height=n;var T=P.getContext("2d").getImageData(0,0,e,n);H0.Util.releaseCanvas(P),Vm(a,T,{polarCenterX:e/2,polarCenterY:n/2});for(var k=e/Math.pow(2,_);k<=8;)k=k*2,_-=1;k=Math.ceil(k);var v=k,x=0,b=v,R=1;for(E+k>e&&(x=v,b=0,R=-1),o=0;o<n;o+=1)for(i=x;i!==b;i+=R)l=Math.round(i+E)%e,C=(e*o+l)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+i)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;for(o=0;o<n;o+=1)for(v=Math.floor(k),c=0;c<_;c+=1){for(i=0;i<v+1;i+=1)C=(e*o+i)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+v*2-i-1)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;v*=2}Wm(T,a,{polarRotation:0})}};ol.Kaleidoscope=Xm;xs.Factory.addGetterSetter(f1.Node,"kaleidoscopePower",2,(0,g1.getNumberValidator)(),xs.Factory.afterSetFilter);xs.Factory.addGetterSetter(f1.Node,"kaleidoscopeAngle",0,(0,g1.getNumberValidator)(),xs.Factory.afterSetFilter);var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.Mask=void 0;const V0=Ce,Km=tt,qm=le;function ls(a,e,n){var i=(n*a.width+e)*4,o=[];return o.push(a.data[i++],a.data[i++],a.data[i++],a.data[i++]),o}function Ia(a,e){return Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2))}function Ym(a){for(var e=[0,0,0],n=0;n<a.length;n++)e[0]+=a[n][0],e[1]+=a[n][1],e[2]+=a[n][2];return e[0]/=a.length,e[1]/=a.length,e[2]/=a.length,e}function Qm(a,e){var n=ls(a,0,0),i=ls(a,a.width-1,0),o=ls(a,0,a.height-1),l=ls(a,a.width-1,a.height-1),c=e||10;if(Ia(n,i)<c&&Ia(i,l)<c&&Ia(l,o)<c&&Ia(o,n)<c){for(var h=Ym([i,n,l,o]),f=[],p=0;p<a.width*a.height;p++){var m=Ia(h,[a.data[p*4],a.data[p*4+1],a.data[p*4+2]]);f[p]=m<c?0:255}return f}}function Jm(a,e){for(var n=0;n<a.width*a.height;n++)a.data[4*n+3]=e[n]}function Zm(a,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m===255*8?255:0}return c}function e3(a,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m>=255*4?255:0}return c}function t3(a,e,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m}return c}const r3=function(a){var e=this.threshold(),n=Qm(a,e);return n&&(n=Zm(n,a.width,a.height),n=e3(n,a.width,a.height),n=t3(n,a.width,a.height),Jm(a,n)),a};sl.Mask=r3;V0.Factory.addGetterSetter(Km.Node,"threshold",0,(0,qm.getNumberValidator)(),V0.Factory.afterSetFilter);var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.Noise=void 0;const W0=Ce,n3=tt,i3=le,a3=function(a){var e=this.noise()*255,n=a.data,i=n.length,o=e/2,l;for(l=0;l<i;l+=4)n[l+0]+=o-2*o*Math.random(),n[l+1]+=o-2*o*Math.random(),n[l+2]+=o-2*o*Math.random()};ll.Noise=a3;W0.Factory.addGetterSetter(n3.Node,"noise",.2,(0,i3.getNumberValidator)(),W0.Factory.afterSetFilter);var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.Pixelate=void 0;const X0=Ce,o3=it,s3=tt,l3=le,u3=function(a){var e=Math.ceil(this.pixelSize()),n=a.width,i=a.height,o,l,c,h,f,p,m,C=Math.ceil(n/e),w=Math.ceil(i/e),_,y,E,P,T,k,v,x=a.data;if(e<=0){o3.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<C;T+=1)for(k=0;k<w;k+=1){for(h=0,f=0,p=0,m=0,_=T*e,y=_+e,E=k*e,P=E+e,v=0,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,h+=x[c+0],f+=x[c+1],p+=x[c+2],m+=x[c+3],v+=1);for(h=h/v,f=f/v,p=p/v,m=m/v,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,x[c+0]=h,x[c+1]=f,x[c+2]=p,x[c+3]=m)}};ul.Pixelate=u3;X0.Factory.addGetterSetter(s3.Node,"pixelSize",8,(0,l3.getNumberValidator)(),X0.Factory.afterSetFilter);var cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.Posterize=void 0;const K0=Ce,c3=tt,d3=le,h3=function(a){var e=Math.round(this.levels()*254)+1,n=a.data,i=n.length,o=255/e,l;for(l=0;l<i;l+=1)n[l]=Math.floor(n[l]/o)*o};cl.Posterize=h3;K0.Factory.addGetterSetter(c3.Node,"levels",.5,(0,d3.getNumberValidator)(),K0.Factory.afterSetFilter);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.RGB=void 0;const ws=Ce,Qc=tt,f3=le,g3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c,h;for(c=0;c<n;c+=4)h=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255,e[c]=h*i,e[c+1]=h*o,e[c+2]=h*l,e[c+3]=e[c+3]};dl.RGB=g3;ws.Factory.addGetterSetter(Qc.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});ws.Factory.addGetterSetter(Qc.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});ws.Factory.addGetterSetter(Qc.Node,"blue",0,f3.RGBComponent,ws.Factory.afterSetFilter);var hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.RGBA=void 0;const Ua=Ce,fl=tt,p3=le,v3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c=this.alpha(),h,f;for(h=0;h<n;h+=4)f=1-c,e[h]=i*c+e[h]*f,e[h+1]=o*c+e[h+1]*f,e[h+2]=l*c+e[h+2]*f};hl.RGBA=v3;Ua.Factory.addGetterSetter(fl.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Ua.Factory.addGetterSetter(fl.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Ua.Factory.addGetterSetter(fl.Node,"blue",0,p3.RGBComponent,Ua.Factory.afterSetFilter);Ua.Factory.addGetterSetter(fl.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a});var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.Sepia=void 0;const m3=function(a){var e=a.data,n=e.length,i,o,l,c;for(i=0;i<n;i+=4)o=e[i+0],l=e[i+1],c=e[i+2],e[i+0]=Math.min(255,o*.393+l*.769+c*.189),e[i+1]=Math.min(255,o*.349+l*.686+c*.168),e[i+2]=Math.min(255,o*.272+l*.534+c*.131)};gl.Sepia=m3;var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.Solarize=void 0;const y3=function(a){var e=a.data,n=a.width,i=a.height,o=n*4,l=i;do{var c=(l-1)*o,h=n;do{var f=c+(h-1)*4,p=e[f],m=e[f+1],C=e[f+2];p>127&&(p=255-p),m>127&&(m=255-m),C>127&&(C=255-C),e[f]=p,e[f+1]=m,e[f+2]=C}while(--h)}while(--l)};pl.Solarize=y3;var vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.Threshold=void 0;const q0=Ce,_3=tt,S3=le,x3=function(a){var e=this.threshold()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=1)n[o]=n[o]<e?0:255};vl.Threshold=x3;q0.Factory.addGetterSetter(_3.Node,"threshold",.5,(0,S3.getNumberValidator)(),q0.Factory.afterSetFilter);Object.defineProperty(Ps,"__esModule",{value:!0});Ps.Konva=void 0;const Y0=ys,w3=Ms,E3=Fs,C3=Ds,P3=Gs,b3=$s,Q0=ji,O3=qa,T3=Ki,k3=Qa,R3=Bs,M3=Us,A3=Hs,N3=Vs,F3=Qn,I3=Ws,L3=Xs,D3=Ks,G3=Ys,$3=Qs,j3=Js,z3=Zs,B3=tl,U3=rl,H3=nl,V3=il,W3=al,X3=ol,K3=sl,q3=ll,Y3=ul,Q3=cl,J3=dl,Z3=hl,e4=gl,t4=pl,r4=vl;Ps.Konva=Y0.Konva.Util._assign(Y0.Konva,{Arc:w3.Arc,Arrow:E3.Arrow,Circle:C3.Circle,Ellipse:P3.Ellipse,Image:b3.Image,Label:Q0.Label,Tag:Q0.Tag,Line:O3.Line,Path:T3.Path,Rect:k3.Rect,RegularPolygon:R3.RegularPolygon,Ring:M3.Ring,Sprite:A3.Sprite,Star:N3.Star,Text:F3.Text,TextPath:I3.TextPath,Transformer:L3.Transformer,Wedge:D3.Wedge,Filters:{Blur:G3.Blur,Brighten:$3.Brighten,Contrast:j3.Contrast,Emboss:z3.Emboss,Enhance:B3.Enhance,Grayscale:U3.Grayscale,HSL:H3.HSL,HSV:V3.HSV,Invert:W3.Invert,Kaleidoscope:X3.Kaleidoscope,Mask:K3.Mask,Noise:q3.Noise,Pixelate:Y3.Pixelate,Posterize:Q3.Posterize,RGB:J3.RGB,RGBA:Z3.RGBA,Sepia:e4.Sepia,Solarize:t4.Solarize,Threshold:r4.Threshold}});var n4=Nf.exports;Object.defineProperty(n4,"__esModule",{value:!0});const i4=Ps;Nf.exports=i4.Konva;var Rc={exports:{}};(function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=ys;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const i=ys;a.exports=i.Konva})(Rc,Rc.exports);var a4=Rc.exports;const Ha=Es(a4);var p1={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4=function(e){var n={},i=A,o=gs,l=Object.assign;function c(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}function U(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case p:return"Portal";case w:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y:return(t.displayName||"Context")+".Consumer";case _:return(t._context.displayName||"Context")+".Provider";case E:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:U(t.type)||"Memo";case v:r=t._payload,t=t._init;try{return U(t(r))}catch{}}return null}function O(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(r);case 8:return r===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function G(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function M(t){if(G(t)!==t)throw Error(c(188))}function L(t){var r=t.alternate;if(!r){if(r=G(t),r===null)throw Error(c(188));return r!==t?null:t}for(var s=t,u=r;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return M(d),t;if(g===u)return M(d),r;g=g.sibling}throw Error(c(188))}if(s.return!==u.return)s=d,u=g;else{for(var S=!1,N=d.child;N;){if(N===s){S=!0,s=d,u=g;break}if(N===u){S=!0,u=d,s=g;break}N=N.sibling}if(!S){for(N=g.child;N;){if(N===s){S=!0,s=g,u=d;break}if(N===u){S=!0,u=g,s=d;break}N=N.sibling}if(!S)throw Error(c(189))}}if(s.alternate!==u)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?t:r}function V(t){return t=L(t),t!==null?X(t):null}function X(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=X(t);if(r!==null)return r;t=t.sibling}return null}function Z(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=Z(t);if(r!==null)return r}t=t.sibling}return null}var K=Array.isArray,se=e.getPublicInstance,he=e.getRootHostContext,fe=e.getChildHostContext,Oe=e.prepareForCommit,Q=e.resetAfterCommit,Y=e.createInstance,ve=e.appendInitialChild,ke=e.finalizeInitialChildren,we=e.prepareUpdate,qe=e.shouldSetTextContent,Ge=e.createTextInstance,F=e.scheduleTimeout,H=e.cancelTimeout,ie=e.noTimeout,ge=e.isPrimaryRenderer,de=e.supportsMutation,Ie=e.supportsPersistence,Fe=e.supportsHydration,At=e.getInstanceFromNode,Re=e.preparePortalMount,gt=e.getCurrentEventPriority,Ye=e.detachDeletedInstance,Me=e.supportsMicrotasks,ct=e.scheduleMicrotask,pt=e.supportsTestSelectors,je=e.findFiberRoot,ze=e.getBoundingRect,dt=e.getTextContent,Qt=e.isHiddenSubtree,Br=e.matchAccessibilityRole,ea=e.setFocusIfFocusable,An=e.setupIntersectionObserver,_r=e.appendChild,ta=e.appendChildToContainer,ra=e.commitTextUpdate,na=e.commitMount,ia=e.commitUpdate,ir=e.insertBefore,ln=e.insertInContainerBefore,ci=e.removeChild,aa=e.removeChildFromContainer,Nn=e.resetTextContent,Ur=e.hideInstance,oa=e.hideTextInstance,J=e.unhideInstance,me=e.unhideTextInstance,vt=e.clearContainer,Nt=e.cloneInstance,Hr=e.createContainerChildSet,un=e.appendChildToContainerChildSet,sa=e.finalizeContainerChildren,la=e.replaceContainerChildren,ua=e.cloneHiddenInstance,ro=e.cloneHiddenTextInstance,Tl=e.canHydrateInstance,ca=e.canHydrateTextInstance,da=e.canHydrateSuspenseInstance,di=e.isSuspenseInstancePending,ha=e.isSuspenseInstanceFallback,kl=e.getSuspenseInstanceFallbackErrorDetails,hi=e.registerSuspenseInstanceRetry,fi=e.getNextHydratableSibling,Rl=e.getFirstHydratableChild,Ml=e.getFirstHydratableChildWithinContainer,Al=e.getFirstHydratableChildWithinSuspenseInstance,Nl=e.hydrateInstance,Fl=e.hydrateTextInstance,Fn=e.hydrateSuspenseInstance,Il=e.getNextHydratableInstanceAfterSuspenseInstance,Ll=e.commitHydratedContainer,Dl=e.commitHydratedSuspenseInstance,Gl=e.clearSuspenseBoundary,$l=e.clearSuspenseBoundaryFromContainer,no=e.shouldDeleteUnhydratedTailInstances,jl=e.didNotMatchHydratedContainerTextInstance,io=e.didNotMatchHydratedTextInstance,In;function Ln(t){if(In===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);In=r&&r[1]||""}return`
`+In+t}var gi=!1;function pi(t,r){if(!t||gi)return"";gi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(q){var u=q}Reflect.construct(t,[],r)}else{try{r.call()}catch(q){u=q}t.call(r.prototype)}else{try{throw Error()}catch(q){u=q}t()}}catch(q){if(q&&u&&typeof q.stack=="string"){for(var d=q.stack.split(`
`),g=u.stack.split(`
`),S=d.length-1,N=g.length-1;1<=S&&0<=N&&d[S]!==g[N];)N--;for(;1<=S&&0<=N;S--,N--)if(d[S]!==g[N]){if(S!==1||N!==1)do if(S--,N--,0>N||d[S]!==g[N]){var j=`
`+d[S].replace(" at new "," at ");return t.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",t.displayName)),j}while(1<=S&&0<=N);break}}}finally{gi=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Ln(t):""}var zl=Object.prototype.hasOwnProperty,ar=[],cn=-1;function Rr(t){return{current:t}}function Ue(t){0>cn||(t.current=ar[cn],ar[cn]=null,cn--)}function He(t,r){cn++,ar[cn]=t.current,t.current=r}var or={},Et=Rr(or),Ft=Rr(!1),Sr=or;function Vr(t,r){var s=t.type.contextTypes;if(!s)return or;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=r[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Ct(t){return t=t.childContextTypes,t!=null}function vi(){Ue(Ft),Ue(Et)}function ao(t,r,s){if(Et.current!==or)throw Error(c(168));He(Et,r),He(Ft,s)}function fa(t,r,s){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in r))throw Error(c(108,O(t)||"Unknown",d));return l({},s,u)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,Sr=Et.current,He(Et,t),He(Ft,Ft.current),!0}function oo(t,r,s){var u=t.stateNode;if(!u)throw Error(c(169));s?(t=fa(t,r,Sr),u.__reactInternalMemoizedMergedChildContext=t,Ue(Ft),Ue(Et),He(Et,t)):Ue(Ft),He(Ft,s)}var Ut=Math.clz32?Math.clz32:Ul,Bl=Math.log,so=Math.LN2;function Ul(t){return t>>>=0,t===0?32:31-(Bl(t)/so|0)|0}var Wr=64,yi=4194304;function dn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dn(t,r){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,S=s&268435455;if(S!==0){var N=S&~d;N!==0?u=dn(N):(g&=S,g!==0&&(u=dn(g)))}else S=s&~d,S!==0?u=dn(S):g!==0&&(u=dn(g));if(u===0)return 0;if(r!==0&&r!==u&&!(r&d)&&(d=u&-u,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if(u&4&&(u|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)s=31-Ut(r),d=1<<s,u|=t[s],r&=~d;return u}function Gn(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lo(t,r){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var S=31-Ut(g),N=1<<S,j=d[S];j===-1?(!(N&s)||N&u)&&(d[S]=Gn(N,r)):j<=r&&(t.expiredLanes|=N),g&=~N}}function ga(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uo(){var t=Wr;return Wr<<=1,!(Wr&4194240)&&(Wr=64),t}function _i(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function $n(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=s}function co(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-Ut(s),g=1<<d;r[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function pa(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var u=31-Ut(s),d=1<<u;d&r|t[u]&r&&(t[u]|=r),s&=~d}}var Ae=0;function ho(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fo=o.unstable_scheduleCallback,go=o.unstable_cancelCallback,po=o.unstable_shouldYield,Hl=o.unstable_requestPaint,ht=o.unstable_now,Si=o.unstable_ImmediatePriority,z=o.unstable_UserBlockingPriority,W=o.unstable_NormalPriority,ne=o.unstable_IdlePriority,ee=null,ue=null;function Se(t){if(ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot(ee,t,void 0,(t.current.flags&128)===128)}catch{}}function Ke(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var at=typeof Object.is=="function"?Object.is:Ke,zt=null,mt=!1,Ht=!1;function sr(t){zt===null?zt=[t]:zt.push(t)}function Vl(t){mt=!0,sr(t)}function Mr(){if(!Ht&&zt!==null){Ht=!0;var t=0,r=Ae;try{var s=zt;for(Ae=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}zt=null,mt=!1}catch(d){throw zt!==null&&(zt=zt.slice(t+1)),fo(Si,Mr),d}finally{Ae=r,Ht=!1}}return null}var xi=[],wi=0,vo=null,mo=0,lr=[],ur=0,jn=null,Xr=1,Kr="";function zn(t,r){xi[wi++]=mo,xi[wi++]=vo,vo=t,mo=r}function Md(t,r,s){lr[ur++]=Xr,lr[ur++]=Kr,lr[ur++]=jn,jn=t;var u=Xr;t=Kr;var d=32-Ut(u)-1;u&=~(1<<d),s+=1;var g=32-Ut(r)+d;if(30<g){var S=d-d%5;g=(u&(1<<S)-1).toString(32),u>>=S,d-=S,Xr=1<<32-Ut(r)+d|s<<d|u,Kr=g+t}else Xr=1<<g|s<<d|u,Kr=t}function Wl(t){t.return!==null&&(zn(t,1),Md(t,1,0))}function Xl(t){for(;t===vo;)vo=xi[--wi],xi[wi]=null,mo=xi[--wi],xi[wi]=null;for(;t===jn;)jn=lr[--ur],lr[ur]=null,Kr=lr[--ur],lr[ur]=null,Xr=lr[--ur],lr[ur]=null}var Jt=null,cr=null,Ze=!1,va=!1,xr=null;function Ad(t,r){var s=pr(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Nd(t,r){switch(t.tag){case 5:return r=Tl(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,Jt=t,cr=Rl(r),!0):!1;case 6:return r=ca(r,t.pendingProps),r!==null?(t.stateNode=r,Jt=t,cr=null,!0):!1;case 13:if(r=da(r),r!==null){var s=jn!==null?{id:Xr,overflow:Kr}:null;return t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=pr(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,Jt=t,cr=null,!0}return!1;default:return!1}}function Kl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ql(t){if(Ze){var r=cr;if(r){var s=r;if(!Nd(t,r)){if(Kl(t))throw Error(c(418));r=fi(s);var u=Jt;r&&Nd(t,r)?Ad(u,s):(t.flags=t.flags&-4097|2,Ze=!1,Jt=t)}}else{if(Kl(t))throw Error(c(418));t.flags=t.flags&-4097|2,Ze=!1,Jt=t}}}function Fd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function yo(t){if(!Fe||t!==Jt)return!1;if(!Ze)return Fd(t),Ze=!0,!1;if(t.tag!==3&&(t.tag!==5||no(t.type)&&!qe(t.type,t.memoizedProps))){var r=cr;if(r){if(Kl(t))throw Id(),Error(c(418));for(;r;)Ad(t,r),r=fi(r)}}if(Fd(t),t.tag===13){if(!Fe)throw Error(c(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));cr=Il(t)}else cr=Jt?fi(t.stateNode):null;return!0}function Id(){for(var t=cr;t;)t=fi(t)}function Ei(){Fe&&(cr=Jt=null,va=Ze=!1)}function Yl(t){xr===null?xr=[t]:xr.push(t)}var K1=h.ReactCurrentBatchConfig;function _o(t,r){if(at(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),u=Object.keys(r);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!zl.call(r,d)||!at(t[d],r[d]))return!1}return!0}function q1(t){switch(t.tag){case 5:return Ln(t.type);case 16:return Ln("Lazy");case 13:return Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 2:case 15:return t=pi(t.type,!1),t;case 11:return t=pi(t.type.render,!1),t;case 1:return t=pi(t.type,!0),t;default:return""}}function wr(t,r){if(t&&t.defaultProps){r=l({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}var So=Rr(null),xo=null,Ci=null,Ql=null;function Jl(){Ql=Ci=xo=null}function Ld(t,r,s){ge?(He(So,r._currentValue),r._currentValue=s):(He(So,r._currentValue2),r._currentValue2=s)}function Zl(t){var r=So.current;Ue(So),ge?t._currentValue=r:t._currentValue2=r}function eu(t,r,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===s)break;t=t.return}}function Pi(t,r){xo=t,Ql=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Vt=!0),t.firstContext=null)}function dr(t){var r=ge?t._currentValue:t._currentValue2;if(Ql!==t)if(t={context:t,memoizedValue:r,next:null},Ci===null){if(xo===null)throw Error(c(308));Ci=t,xo.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return r}var Bn=null;function tu(t){Bn===null?Bn=[t]:Bn.push(t)}function Dd(t,r,s,u){var d=r.interleaved;return d===null?(s.next=s,tu(r)):(s.next=d.next,d.next=s),r.interleaved=s,Ar(t,u)}function Ar(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var hn=!1;function ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function fn(t,r,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Pe&2){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,Ar(t,s)}return d=u.interleaved,d===null?(r.next=r,tu(u)):(r.next=d.next,d.next=r),u.interleaved=r,Ar(t,s)}function wo(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,pa(t,s)}}function $d(t,r){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=S:g=g.next=S,s=s.next}while(s!==null);g===null?d=g=r:g=g.next=r}else d=g=r;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function Eo(t,r,s,u){var d=t.updateQueue;hn=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var j=N,q=j.next;j.next=null,S===null?g=q:S.next=q,S=j;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==S&&(N===null?oe.firstBaseUpdate=q:N.next=q,oe.lastBaseUpdate=j))}if(g!==null){var ye=d.baseState;S=0,oe=q=j=null,N=g;do{var te=N.lane,Qe=N.eventTime;if((u&te)===te){oe!==null&&(oe=oe.next={eventTime:Qe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var We=t,Kt=N;switch(te=r,Qe=s,Kt.tag){case 1:if(We=Kt.payload,typeof We=="function"){ye=We.call(Qe,ye,te);break e}ye=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Kt.payload,te=typeof We=="function"?We.call(Qe,ye,te):We,te==null)break e;ye=l({},ye,te);break e;case 2:hn=!0}}N.callback!==null&&N.lane!==0&&(t.flags|=64,te=d.effects,te===null?d.effects=[N]:te.push(N))}else Qe={eventTime:Qe,lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(q=oe=Qe,j=ye):oe=oe.next=Qe,S|=te;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;te=N,N=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);if(oe===null&&(j=ye),d.baseState=j,d.firstBaseUpdate=q,d.lastBaseUpdate=oe,r=d.shared.interleaved,r!==null){d=r;do S|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);Hn|=S,t.lanes=S,t.memoizedState=ye}}function jd(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(c(191,d));d.call(u)}}}var zd=new i.Component().refs;function nu(t,r,s,u){r=t.memoizedState,s=s(u,r),s=s==null?r:l({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Co={isMounted:function(t){return(t=t._reactInternals)?G(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var u=Gt(),d=vn(t),g=qr(u,d);g.payload=r,s!=null&&(g.callback=s),r=fn(t,g,d),r!==null&&(gr(r,t,d,u),wo(r,t,d))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var u=Gt(),d=vn(t),g=qr(u,d);g.tag=1,g.payload=r,s!=null&&(g.callback=s),r=fn(t,g,d),r!==null&&(gr(r,t,d,u),wo(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Gt(),u=vn(t),d=qr(s,u);d.tag=2,r!=null&&(d.callback=r),r=fn(t,d,u),r!==null&&(gr(r,t,u,s),wo(r,t,u))}};function Bd(t,r,s,u,d,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,S):r.prototype&&r.prototype.isPureReactComponent?!_o(s,u)||!_o(d,g):!0}function Ud(t,r,s){var u=!1,d=or,g=r.contextType;return typeof g=="object"&&g!==null?g=dr(g):(d=Ct(r)?Sr:Et.current,u=r.contextTypes,g=(u=u!=null)?Vr(t,d):or),r=new r(s,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Co,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function Hd(t,r,s,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,u),r.state!==t&&Co.enqueueReplaceState(r,r.state,null)}function iu(t,r,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs=zd,ru(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=dr(g):(g=Ct(r)?Sr:Et.current,d.context=Vr(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(nu(t,r,g,s),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Co.enqueueReplaceState(d,d.state,null),Eo(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function ma(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(c(309));var u=s.stateNode}if(!u)throw Error(c(147,t));var d=u,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(S){var N=d.refs;N===zd&&(N=d.refs={}),S===null?delete N[g]:N[g]=S},r._stringRef=g,r)}if(typeof t!="string")throw Error(c(284));if(!s._owner)throw Error(c(290,t))}return t}function Po(t,r){throw t=Object.prototype.toString.call(r),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vd(t){var r=t._init;return r(t._payload)}function Wd(t){function r($,I){if(t){var B=$.deletions;B===null?($.deletions=[I],$.flags|=16):B.push(I)}}function s($,I){if(!t)return null;for(;I!==null;)r($,I),I=I.sibling;return null}function u($,I){for($=new Map;I!==null;)I.key!==null?$.set(I.key,I):$.set(I.index,I),I=I.sibling;return $}function d($,I){return $=yn($,I),$.index=0,$.sibling=null,$}function g($,I,B){return $.index=B,t?(B=$.alternate,B!==null?(B=B.index,B<I?($.flags|=2,I):B):($.flags|=2,I)):($.flags|=1048576,I)}function S($){return t&&$.alternate===null&&($.flags|=2),$}function N($,I,B,re){return I===null||I.tag!==6?(I=Vu(B,$.mode,re),I.return=$,I):(I=d(I,B),I.return=$,I)}function j($,I,B,re){var ce=B.type;return ce===m?oe($,I,B.props.children,re,B.key):I!==null&&(I.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===v&&Vd(ce)===I.type)?(re=d(I,B.props),re.ref=ma($,I,B),re.return=$,re):(re=Qo(B.type,B.key,B.props,null,$.mode,re),re.ref=ma($,I,B),re.return=$,re)}function q($,I,B,re){return I===null||I.tag!==4||I.stateNode.containerInfo!==B.containerInfo||I.stateNode.implementation!==B.implementation?(I=Wu(B,$.mode,re),I.return=$,I):(I=d(I,B.children||[]),I.return=$,I)}function oe($,I,B,re,ce){return I===null||I.tag!==7?(I=Kn(B,$.mode,re,ce),I.return=$,I):(I=d(I,B),I.return=$,I)}function ye($,I,B){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Vu(""+I,$.mode,B),I.return=$,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case f:return B=Qo(I.type,I.key,I.props,null,$.mode,B),B.ref=ma($,null,I),B.return=$,B;case p:return I=Wu(I,$.mode,B),I.return=$,I;case v:var re=I._init;return ye($,re(I._payload),B)}if(K(I)||R(I))return I=Kn(I,$.mode,B,null),I.return=$,I;Po($,I)}return null}function te($,I,B,re){var ce=I!==null?I.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ce!==null?null:N($,I,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case f:return B.key===ce?j($,I,B,re):null;case p:return B.key===ce?q($,I,B,re):null;case v:return ce=B._init,te($,I,ce(B._payload),re)}if(K(B)||R(B))return ce!==null?null:oe($,I,B,re,null);Po($,B)}return null}function Qe($,I,B,re,ce){if(typeof re=="string"&&re!==""||typeof re=="number")return $=$.get(B)||null,N(I,$,""+re,ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case f:return $=$.get(re.key===null?B:re.key)||null,j(I,$,re,ce);case p:return $=$.get(re.key===null?B:re.key)||null,q(I,$,re,ce);case v:var xe=re._init;return Qe($,I,B,xe(re._payload),ce)}if(K(re)||R(re))return $=$.get(B)||null,oe(I,$,re,ce,null);Po(I,re)}return null}function We($,I,B,re){for(var ce=null,xe=null,_e=I,Le=I=0,Ot=null;_e!==null&&Le<B.length;Le++){_e.index>Le?(Ot=_e,_e=null):Ot=_e.sibling;var De=te($,_e,B[Le],re);if(De===null){_e===null&&(_e=Ot);break}t&&_e&&De.alternate===null&&r($,_e),I=g(De,I,Le),xe===null?ce=De:xe.sibling=De,xe=De,_e=Ot}if(Le===B.length)return s($,_e),Ze&&zn($,Le),ce;if(_e===null){for(;Le<B.length;Le++)_e=ye($,B[Le],re),_e!==null&&(I=g(_e,I,Le),xe===null?ce=_e:xe.sibling=_e,xe=_e);return Ze&&zn($,Le),ce}for(_e=u($,_e);Le<B.length;Le++)Ot=Qe(_e,$,Le,B[Le],re),Ot!==null&&(t&&Ot.alternate!==null&&_e.delete(Ot.key===null?Le:Ot.key),I=g(Ot,I,Le),xe===null?ce=Ot:xe.sibling=Ot,xe=Ot);return t&&_e.forEach(function(_n){return r($,_n)}),Ze&&zn($,Le),ce}function Kt($,I,B,re){var ce=R(B);if(typeof ce!="function")throw Error(c(150));if(B=ce.call(B),B==null)throw Error(c(151));for(var xe=ce=null,_e=I,Le=I=0,Ot=null,De=B.next();_e!==null&&!De.done;Le++,De=B.next()){_e.index>Le?(Ot=_e,_e=null):Ot=_e.sibling;var _n=te($,_e,De.value,re);if(_n===null){_e===null&&(_e=Ot);break}t&&_e&&_n.alternate===null&&r($,_e),I=g(_n,I,Le),xe===null?ce=_n:xe.sibling=_n,xe=_n,_e=Ot}if(De.done)return s($,_e),Ze&&zn($,Le),ce;if(_e===null){for(;!De.done;Le++,De=B.next())De=ye($,De.value,re),De!==null&&(I=g(De,I,Le),xe===null?ce=De:xe.sibling=De,xe=De);return Ze&&zn($,Le),ce}for(_e=u($,_e);!De.done;Le++,De=B.next())De=Qe(_e,$,Le,De.value,re),De!==null&&(t&&De.alternate!==null&&_e.delete(De.key===null?Le:De.key),I=g(De,I,Le),xe===null?ce=De:xe.sibling=De,xe=De);return t&&_e.forEach(function(Pg){return r($,Pg)}),Ze&&zn($,Le),ce}function Jr($,I,B,re){if(typeof B=="object"&&B!==null&&B.type===m&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case f:e:{for(var ce=B.key,xe=I;xe!==null;){if(xe.key===ce){if(ce=B.type,ce===m){if(xe.tag===7){s($,xe.sibling),I=d(xe,B.props.children),I.return=$,$=I;break e}}else if(xe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===v&&Vd(ce)===xe.type){s($,xe.sibling),I=d(xe,B.props),I.ref=ma($,xe,B),I.return=$,$=I;break e}s($,xe);break}else r($,xe);xe=xe.sibling}B.type===m?(I=Kn(B.props.children,$.mode,re,B.key),I.return=$,$=I):(re=Qo(B.type,B.key,B.props,null,$.mode,re),re.ref=ma($,I,B),re.return=$,$=re)}return S($);case p:e:{for(xe=B.key;I!==null;){if(I.key===xe)if(I.tag===4&&I.stateNode.containerInfo===B.containerInfo&&I.stateNode.implementation===B.implementation){s($,I.sibling),I=d(I,B.children||[]),I.return=$,$=I;break e}else{s($,I);break}else r($,I);I=I.sibling}I=Wu(B,$.mode,re),I.return=$,$=I}return S($);case v:return xe=B._init,Jr($,I,xe(B._payload),re)}if(K(B))return We($,I,B,re);if(R(B))return Kt($,I,B,re);Po($,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,I!==null&&I.tag===6?(s($,I.sibling),I=d(I,B),I.return=$,$=I):(s($,I),I=Vu(B,$.mode,re),I.return=$,$=I),S($)):s($,I)}return Jr}var bi=Wd(!0),Xd=Wd(!1),ya={},hr=Rr(ya),_a=Rr(ya),Oi=Rr(ya);function Nr(t){if(t===ya)throw Error(c(174));return t}function au(t,r){He(Oi,r),He(_a,t),He(hr,ya),t=he(r),Ue(hr),He(hr,t)}function Ti(){Ue(hr),Ue(_a),Ue(Oi)}function Kd(t){var r=Nr(Oi.current),s=Nr(hr.current);r=fe(s,t.type,r),s!==r&&(He(_a,t),He(hr,r))}function ou(t){_a.current===t&&(Ue(hr),Ue(_a))}var rt=Rr(0);function bo(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||di(s)||ha(s)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var su=[];function lu(){for(var t=0;t<su.length;t++){var r=su[t];ge?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}su.length=0}var Oo=h.ReactCurrentDispatcher,uu=h.ReactCurrentBatchConfig,Un=0,nt=null,yt=null,Pt=null,To=!1,Sa=!1,xa=0,Y1=0;function It(){throw Error(c(321))}function cu(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!at(t[s],r[s]))return!1;return!0}function du(t,r,s,u,d,g){if(Un=g,nt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Oo.current=t===null||t.memoizedState===null?eg:tg,t=s(u,d),Sa){g=0;do{if(Sa=!1,xa=0,25<=g)throw Error(c(301));g+=1,Pt=yt=null,r.updateQueue=null,Oo.current=rg,t=s(u,d)}while(Sa)}if(Oo.current=Mo,r=yt!==null&&yt.next!==null,Un=0,Pt=yt=nt=null,To=!1,r)throw Error(c(300));return t}function hu(){var t=xa!==0;return xa=0,t}function Fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?nt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function fr(){if(yt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=Pt===null?nt.memoizedState:Pt.next;if(r!==null)Pt=r,yt=t;else{if(t===null)throw Error(c(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Pt===null?nt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function wa(t,r){return typeof r=="function"?r(t):r}function fu(t){var r=fr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=yt,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var N=S=null,j=null,q=g;do{var oe=q.lane;if((Un&oe)===oe)j!==null&&(j=j.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),u=q.hasEagerState?q.eagerState:t(u,q.action);else{var ye={lane:oe,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};j===null?(N=j=ye,S=u):j=j.next=ye,nt.lanes|=oe,Hn|=oe}q=q.next}while(q!==null&&q!==g);j===null?S=u:j.next=N,at(u,r.memoizedState)||(Vt=!0),r.memoizedState=u,r.baseState=S,r.baseQueue=j,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,nt.lanes|=g,Hn|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function gu(t){var r=fr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=r.memoizedState;if(d!==null){s.pending=null;var S=d=d.next;do g=t(g,S.action),S=S.next;while(S!==d);at(g,r.memoizedState)||(Vt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,u]}function qd(){}function Yd(t,r){var s=nt,u=fr(),d=r(),g=!at(u.memoizedState,d);if(g&&(u.memoizedState=d,Vt=!0),u=u.queue,pu(Zd.bind(null,s,u,t),[t]),u.getSnapshot!==r||g||Pt!==null&&Pt.memoizedState.tag&1){if(s.flags|=2048,Ea(9,Jd.bind(null,s,u,d,r),void 0,null),bt===null)throw Error(c(349));Un&30||Qd(s,r,d)}return d}function Qd(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Jd(t,r,s,u){r.value=s,r.getSnapshot=u,eh(r)&&th(t)}function Zd(t,r,s){return s(function(){eh(r)&&th(t)})}function eh(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!at(t,s)}catch{return!0}}function th(t){var r=Ar(t,1);r!==null&&gr(r,t,1,-1)}function rh(t){var r=Fr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},r.queue=t,t=t.dispatch=Z1.bind(null,nt,t),[r.memoizedState,t]}function Ea(t,r,s,u){return t={tag:t,create:r,destroy:s,deps:u,next:null},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,r.lastEffect=t)),t}function nh(){return fr().memoizedState}function ko(t,r,s,u){var d=Fr();nt.flags|=t,d.memoizedState=Ea(1|r,s,void 0,u===void 0?null:u)}function Ro(t,r,s,u){var d=fr();u=u===void 0?null:u;var g=void 0;if(yt!==null){var S=yt.memoizedState;if(g=S.destroy,u!==null&&cu(u,S.deps)){d.memoizedState=Ea(r,s,g,u);return}}nt.flags|=t,d.memoizedState=Ea(1|r,s,g,u)}function ih(t,r){return ko(8390656,8,t,r)}function pu(t,r){return Ro(2048,8,t,r)}function ah(t,r){return Ro(4,2,t,r)}function oh(t,r){return Ro(4,4,t,r)}function sh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function lh(t,r,s){return s=s!=null?s.concat([t]):null,Ro(4,4,sh.bind(null,r,t),s)}function vu(){}function uh(t,r){var s=fr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&cu(r,u[1])?u[0]:(s.memoizedState=[t,r],t)}function ch(t,r){var s=fr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&cu(r,u[1])?u[0]:(t=t(),s.memoizedState=[t,r],t)}function dh(t,r,s){return Un&21?(at(s,r)||(s=uo(),nt.lanes|=s,Hn|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=s)}function Q1(t,r){var s=Ae;Ae=s!==0&&4>s?s:4,t(!0);var u=uu.transition;uu.transition={};try{t(!1),r()}finally{Ae=s,uu.transition=u}}function hh(){return fr().memoizedState}function J1(t,r,s){var u=vn(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},fh(t))gh(r,s);else if(s=Dd(t,r,s,u),s!==null){var d=Gt();gr(s,t,u,d),ph(s,r,u)}}function Z1(t,r,s){var u=vn(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(fh(t))gh(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,N=g(S,s);if(d.hasEagerState=!0,d.eagerState=N,at(N,S)){var j=r.interleaved;j===null?(d.next=d,tu(r)):(d.next=j.next,j.next=d),r.interleaved=d;return}}catch{}finally{}s=Dd(t,r,d,u),s!==null&&(d=Gt(),gr(s,t,u,d),ph(s,r,u))}}function fh(t){var r=t.alternate;return t===nt||r!==null&&r===nt}function gh(t,r){Sa=To=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function ph(t,r,s){if(s&4194240){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,pa(t,s)}}var Mo={readContext:dr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},eg={readContext:dr,useCallback:function(t,r){return Fr().memoizedState=[t,r===void 0?null:r],t},useContext:dr,useEffect:ih,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,ko(4194308,4,sh.bind(null,r,t),s)},useLayoutEffect:function(t,r){return ko(4194308,4,t,r)},useInsertionEffect:function(t,r){return ko(4,2,t,r)},useMemo:function(t,r){var s=Fr();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var u=Fr();return r=s!==void 0?s(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=J1.bind(null,nt,t),[u.memoizedState,t]},useRef:function(t){var r=Fr();return t={current:t},r.memoizedState=t},useState:rh,useDebugValue:vu,useDeferredValue:function(t){return Fr().memoizedState=t},useTransition:function(){var t=rh(!1),r=t[0];return t=Q1.bind(null,t[1]),Fr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var u=nt,d=Fr();if(Ze){if(s===void 0)throw Error(c(407));s=s()}else{if(s=r(),bt===null)throw Error(c(349));Un&30||Qd(u,r,s)}d.memoizedState=s;var g={value:s,getSnapshot:r};return d.queue=g,ih(Zd.bind(null,u,g,t),[t]),u.flags|=2048,Ea(9,Jd.bind(null,u,g,s,r),void 0,null),s},useId:function(){var t=Fr(),r=bt.identifierPrefix;if(Ze){var s=Kr,u=Xr;s=(u&~(1<<32-Ut(u)-1)).toString(32)+s,r=":"+r+"R"+s,s=xa++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Y1++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},tg={readContext:dr,useCallback:uh,useContext:dr,useEffect:pu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:fu,useRef:nh,useState:function(){return fu(wa)},useDebugValue:vu,useDeferredValue:function(t){var r=fr();return dh(r,yt.memoizedState,t)},useTransition:function(){var t=fu(wa)[0],r=fr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1},rg={readContext:dr,useCallback:uh,useContext:dr,useEffect:pu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:gu,useRef:nh,useState:function(){return gu(wa)},useDebugValue:vu,useDeferredValue:function(t){var r=fr();return yt===null?r.memoizedState=t:dh(r,yt.memoizedState,t)},useTransition:function(){var t=gu(wa)[0],r=fr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1};function ki(t,r){try{var s="",u=r;do s+=q1(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d,digest:null}}function mu(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function yu(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function vh(t,r,s){s=qr(-1,s),s.tag=3,s.payload={element:null};var u=r.value;return s.callback=function(){Vo||(Vo=!0,Gu=u),yu(t,r)},s}function mh(t,r,s){s=qr(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=r.value;s.payload=function(){return u(d)},s.callback=function(){yu(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){yu(t,r),typeof u!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),s}function yh(t,r,s){var u=t.pingCache;if(u===null){u=t.pingCache=new ng;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(s)||(d.add(s),t=mg.bind(null,t,r,s),r.then(t,t))}function _h(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Sh(t,r,s,u,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=qr(-1,1),r.tag=2,fn(s,r,1))),s.lanes|=1),t)}var ig=h.ReactCurrentOwner,Vt=!1;function Bt(t,r,s,u){r.child=t===null?Xd(r,null,s,u):bi(r,t.child,s,u)}function xh(t,r,s,u,d){s=s.render;var g=r.ref;return Pi(r,d),u=du(t,r,s,u,g,d),s=hu(),t!==null&&!Vt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Yr(t,r,d)):(Ze&&s&&Wl(r),r.flags|=1,Bt(t,r,u,d),r.child)}function wh(t,r,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Hu(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=g,Eh(t,r,g,u,d)):(t=Qo(s.type,null,u,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!(t.lanes&d)){var S=g.memoizedProps;if(s=s.compare,s=s!==null?s:_o,s(S,u)&&t.ref===r.ref)return Yr(t,r,d)}return r.flags|=1,t=yn(g,u),t.ref=r.ref,t.return=r,r.child=t}function Eh(t,r,s,u,d){if(t!==null){var g=t.memoizedProps;if(_o(g,u)&&t.ref===r.ref)if(Vt=!1,r.pendingProps=u=g,(t.lanes&d)!==0)t.flags&131072&&(Vt=!0);else return r.lanes=t.lanes,Yr(t,r,d)}return _u(t,r,s,u,d)}function Ch(t,r,s){var u=r.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Mi,Zt),Zt|=s;else{if(!(s&1073741824))return t=g!==null?g.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,He(Mi,Zt),Zt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,He(Mi,Zt),Zt|=u}else g!==null?(u=g.baseLanes|s,r.memoizedState=null):u=s,He(Mi,Zt),Zt|=u;return Bt(t,r,d,s),r.child}function Ph(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function _u(t,r,s,u,d){var g=Ct(s)?Sr:Et.current;return g=Vr(r,g),Pi(r,d),s=du(t,r,s,u,g,d),u=hu(),t!==null&&!Vt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Yr(t,r,d)):(Ze&&u&&Wl(r),r.flags|=1,Bt(t,r,s,d),r.child)}function bh(t,r,s,u,d){if(Ct(s)){var g=!0;mi(r)}else g=!1;if(Pi(r,d),r.stateNode===null)No(t,r),Ud(r,s,u),iu(r,s,u,d),u=!0;else if(t===null){var S=r.stateNode,N=r.memoizedProps;S.props=N;var j=S.context,q=s.contextType;typeof q=="object"&&q!==null?q=dr(q):(q=Ct(s)?Sr:Et.current,q=Vr(r,q));var oe=s.getDerivedStateFromProps,ye=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";ye||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==u||j!==q)&&Hd(r,S,u,q),hn=!1;var te=r.memoizedState;S.state=te,Eo(r,u,S,d),j=r.memoizedState,N!==u||te!==j||Ft.current||hn?(typeof oe=="function"&&(nu(r,s,oe,u),j=r.memoizedState),(N=hn||Bd(r,s,N,u,te,j,q))?(ye||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=j),S.props=u,S.state=j,S.context=q,u=N):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{S=r.stateNode,Gd(t,r),N=r.memoizedProps,q=r.type===r.elementType?N:wr(r.type,N),S.props=q,ye=r.pendingProps,te=S.context,j=s.contextType,typeof j=="object"&&j!==null?j=dr(j):(j=Ct(s)?Sr:Et.current,j=Vr(r,j));var Qe=s.getDerivedStateFromProps;(oe=typeof Qe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==ye||te!==j)&&Hd(r,S,u,j),hn=!1,te=r.memoizedState,S.state=te,Eo(r,u,S,d);var We=r.memoizedState;N!==ye||te!==We||Ft.current||hn?(typeof Qe=="function"&&(nu(r,s,Qe,u),We=r.memoizedState),(q=hn||Bd(r,s,q,u,te,We,j)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(u,We,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(u,We,j)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=We),S.props=u,S.state=We,S.context=j,u=q):(typeof S.componentDidUpdate!="function"||N===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),u=!1)}return Su(t,r,s,u,g,d)}function Su(t,r,s,u,d,g){Ph(t,r);var S=(r.flags&128)!==0;if(!u&&!S)return d&&oo(r,s,!1),Yr(t,r,g);u=r.stateNode,ig.current=r;var N=S&&typeof s.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&S?(r.child=bi(r,t.child,null,g),r.child=bi(r,null,N,g)):Bt(t,r,N,g),r.memoizedState=u.state,d&&oo(r,s,!0),r.child}function Oh(t){var r=t.stateNode;r.pendingContext?ao(t,r.pendingContext,r.pendingContext!==r.context):r.context&&ao(t,r.context,!1),au(t,r.containerInfo)}function Th(t,r,s,u,d){return Ei(),Yl(d),r.flags|=256,Bt(t,r,s,u),r.child}var xu={dehydrated:null,treeContext:null,retryLane:0};function wu(t){return{baseLanes:t,cachePool:null,transitions:null}}function kh(t,r,s){var u=r.pendingProps,d=rt.current,g=!1,S=(r.flags&128)!==0,N;if((N=S)||(N=t!==null&&t.memoizedState===null?!1:(d&2)!==0),N?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),He(rt,d&1),t===null)return ql(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?ha(t)?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(S=u.children,t=u.fallback,g?(u=r.mode,g=r.child,S={mode:"hidden",children:S},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=S):g=Jo(S,u,0,null),t=Kn(t,u,s,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=wu(s),r.memoizedState=xu,t):Eu(r,S));if(d=t.memoizedState,d!==null&&(N=d.dehydrated,N!==null))return ag(t,r,S,u,N,d,s);if(g){g=u.fallback,S=r.mode,d=t.child,N=d.sibling;var j={mode:"hidden",children:u.children};return!(S&1)&&r.child!==d?(u=r.child,u.childLanes=0,u.pendingProps=j,r.deletions=null):(u=yn(d,j),u.subtreeFlags=d.subtreeFlags&14680064),N!==null?g=yn(N,g):(g=Kn(g,S,s,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=t.child.memoizedState,S=S===null?wu(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},g.memoizedState=S,g.childLanes=t.childLanes&~s,r.memoizedState=xu,u}return g=t.child,t=g.sibling,u=yn(g,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=s),u.return=r,u.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=u,r.memoizedState=null,u}function Eu(t,r){return r=Jo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Ao(t,r,s,u){return u!==null&&Yl(u),bi(r,t.child,null,s),t=Eu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ag(t,r,s,u,d,g,S){if(s)return r.flags&256?(r.flags&=-257,u=mu(Error(c(422))),Ao(t,r,S,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=u.fallback,d=r.mode,u=Jo({mode:"visible",children:u.children},d,0,null),g=Kn(g,d,S,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,r.mode&1&&bi(r,t.child,null,S),r.child.memoizedState=wu(S),r.memoizedState=xu,g);if(!(r.mode&1))return Ao(t,r,S,null);if(ha(d))return u=kl(d).digest,g=Error(c(419)),u=mu(g,u,void 0),Ao(t,r,S,u);if(s=(S&t.childLanes)!==0,Vt||s){if(u=bt,u!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|S)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Ar(t,d),gr(u,t,d,-1))}return Uu(),u=mu(Error(c(421))),Ao(t,r,S,u)}return di(d)?(r.flags|=128,r.child=t.child,r=yg.bind(null,t),hi(d,r),null):(t=g.treeContext,Fe&&(cr=Al(d),Jt=r,Ze=!0,xr=null,va=!1,t!==null&&(lr[ur++]=Xr,lr[ur++]=Kr,lr[ur++]=jn,Xr=t.id,Kr=t.overflow,jn=r)),r=Eu(r,u.children),r.flags|=4096,r)}function Rh(t,r,s){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),eu(t.return,r,s)}function Cu(t,r,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Mh(t,r,s){var u=r.pendingProps,d=u.revealOrder,g=u.tail;if(Bt(t,r,u.children,s),u=rt.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rh(t,s,r);else if(t.tag===19)Rh(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(He(rt,u),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(s=r.child,d=null;s!==null;)t=s.alternate,t!==null&&bo(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=r.child,r.child=null):(d=s.sibling,s.sibling=null),Cu(r,!1,d,s,g);break;case"backwards":for(s=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&bo(t)===null){r.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Cu(r,!0,s,null,g);break;case"together":Cu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function No(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Yr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Hn|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(c(153));if(r.child!==null){for(t=r.child,s=yn(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=yn(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function og(t,r,s){switch(r.tag){case 3:Oh(r),Ei();break;case 5:Kd(r);break;case 1:Ct(r.type)&&mi(r);break;case 4:au(r,r.stateNode.containerInfo);break;case 10:Ld(r,r.type._context,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(He(rt,rt.current&1),r.flags|=128,null):s&r.child.childLanes?kh(t,r,s):(He(rt,rt.current&1),t=Yr(t,r,s),t!==null?t.sibling:null);He(rt,rt.current&1);break;case 19:if(u=(s&r.childLanes)!==0,t.flags&128){if(u)return Mh(t,r,s);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(rt,rt.current),u)break;return null;case 22:case 23:return r.lanes=0,Ch(t,r,s)}return Yr(t,r,s)}function Ir(t){t.flags|=4}function Ah(t,r){if(t!==null&&t.child===r.child)return!0;if(r.flags&16)return!1;for(t=r.child;t!==null;){if(t.flags&12854||t.subtreeFlags&12854)return!1;t=t.sibling}return!0}var Ca,Pa,Fo,Io;if(de)Ca=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)ve(t,s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Pa=function(){},Fo=function(t,r,s,u,d){if(t=t.memoizedProps,t!==u){var g=r.stateNode,S=Nr(hr.current);s=we(g,s,t,u,d,S),(r.updateQueue=s)&&Ir(r)}},Io=function(t,r,s,u){s!==u&&Ir(r)};else if(Ie){Ca=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=ua(g,d.type,d.memoizedProps,d)),ve(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ro(g,d.memoizedProps,d)),ve(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Ca(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var Nh=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=ua(g,d.type,d.memoizedProps,d)),un(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ro(g,d.memoizedProps,d)),un(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Nh(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Pa=function(t,r){var s=r.stateNode;if(!Ah(t,r)){t=s.containerInfo;var u=Hr(t);Nh(u,r,!1,!1),s.pendingChildren=u,Ir(r),sa(t,u)}},Fo=function(t,r,s,u,d){var g=t.stateNode,S=t.memoizedProps;if((t=Ah(t,r))&&S===u)r.stateNode=g;else{var N=r.stateNode,j=Nr(hr.current),q=null;S!==u&&(q=we(N,s,S,u,d,j)),t&&q===null?r.stateNode=g:(g=Nt(g,q,s,S,u,r,t,N),ke(g,s,u,d,j)&&Ir(r),r.stateNode=g,t?Ir(r):Ca(g,r,!1,!1))}},Io=function(t,r,s,u){s!==u?(t=Nr(Oi.current),s=Nr(hr.current),r.stateNode=Ge(u,t,s,r),Ir(r)):r.stateNode=t.stateNode}}else Pa=function(){},Fo=function(){},Io=function(){};function ba(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Lt(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(r)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,r}function sg(t,r,s){var u=r.pendingProps;switch(Xl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(r),null;case 1:return Ct(r.type)&&vi(),Lt(r),null;case 3:return s=r.stateNode,Ti(),Ue(Ft),Ue(Et),lu(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(yo(r)?Ir(r):t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,xr!==null&&(zu(xr),xr=null))),Pa(t,r),Lt(r),null;case 5:ou(r),s=Nr(Oi.current);var d=r.type;if(t!==null&&r.stateNode!=null)Fo(t,r,d,u,s),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(c(166));return Lt(r),null}if(t=Nr(hr.current),yo(r)){if(!Fe)throw Error(c(175));t=Nl(r.stateNode,r.type,r.memoizedProps,s,t,r,!va),r.updateQueue=t,t!==null&&Ir(r)}else{var g=Y(d,u,s,t,r);Ca(g,r,!1,!1),r.stateNode=g,ke(g,d,u,s,t)&&Ir(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Lt(r),null;case 6:if(t&&r.stateNode!=null)Io(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(c(166));if(t=Nr(Oi.current),s=Nr(hr.current),yo(r)){if(!Fe)throw Error(c(176));if(t=r.stateNode,s=r.memoizedProps,(u=Fl(t,s,r,!va))&&(d=Jt,d!==null))switch(d.tag){case 3:jl(d.stateNode.containerInfo,t,s,(d.mode&1)!==0);break;case 5:io(d.type,d.memoizedProps,d.stateNode,t,s,(d.mode&1)!==0)}u&&Ir(r)}else r.stateNode=Ge(u,t,s,r)}return Lt(r),null;case 13:if(Ue(rt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&cr!==null&&r.mode&1&&!(r.flags&128))Id(),Ei(),r.flags|=98560,d=!1;else if(d=yo(r),u!==null&&u.dehydrated!==null){if(t===null){if(!d)throw Error(c(318));if(!Fe)throw Error(c(344));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));Fn(d,r)}else Ei(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Lt(r),d=!1}else xr!==null&&(zu(xr),xr=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(s=u!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||rt.current&1?_t===0&&(_t=3):Uu())),r.updateQueue!==null&&(r.flags|=4),Lt(r),null);case 4:return Ti(),Pa(t,r),t===null&&Re(r.stateNode.containerInfo),Lt(r),null;case 10:return Zl(r.type._context),Lt(r),null;case 17:return Ct(r.type)&&vi(),Lt(r),null;case 19:if(Ue(rt),d=r.memoizedState,d===null)return Lt(r),null;if(u=(r.flags&128)!==0,g=d.rendering,g===null)if(u)ba(d,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(g=bo(t),g!==null){for(r.flags|=128,ba(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=s,s=r.child;s!==null;)u=s,d=t,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,d=g.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),s=s.sibling;return He(rt,rt.current&1|2),r.child}t=t.sibling}d.tail!==null&&ht()>Du&&(r.flags|=128,u=!0,ba(d,!1),r.lanes=4194304)}else{if(!u)if(t=bo(g),t!==null){if(r.flags|=128,u=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),ba(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Ze)return Lt(r),null}else 2*ht()-d.renderingStartTime>Du&&s!==1073741824&&(r.flags|=128,u=!0,ba(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=ht(),r.sibling=null,t=rt.current,He(rt,u?t&1|2:t&1),r):(Lt(r),null);case 22:case 23:return Bu(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?Zt&1073741824&&(Lt(r),de&&r.subtreeFlags&6&&(r.flags|=8192)):Lt(r),null;case 24:return null;case 25:return null}throw Error(c(156,r.tag))}function lg(t,r){switch(Xl(r),r.tag){case 1:return Ct(r.type)&&vi(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ti(),Ue(Ft),Ue(Et),lu(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return ou(r),null;case 13:if(Ue(rt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(c(340));Ei()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ue(rt),null;case 4:return Ti(),null;case 10:return Zl(r.type._context),null;case 22:case 23:return Bu(),null;case 24:return null;default:return null}}var Lo=!1,Dt=!1,ug=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ri(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){et(t,r,u)}else s.current=null}function Pu(t,r,s){try{s()}catch(u){et(t,r,u)}}var Fh=!1;function cg(t,r){for(Oe(t.containerInfo),ae=r;ae!==null;)if(t=ae,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,ae=r;else for(;ae!==null;){t=ae;try{var s=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var u=s.memoizedProps,d=s.memoizedState,g=t.stateNode,S=g.getSnapshotBeforeUpdate(t.elementType===t.type?u:wr(t.type,u),d);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:de&&vt(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(N){et(t,t.return,N)}if(r=t.sibling,r!==null){r.return=t.return,ae=r;break}ae=t.return}return s=Fh,Fh=!1,s}function Oa(t,r,s){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Pu(r,s,g)}d=d.next}while(d!==u)}}function Do(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==r)}}function bu(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=se(s);break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Ih(t){var r=t.alternate;r!==null&&(t.alternate=null,Ih(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ye(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lh(t){return t.tag===5||t.tag===3||t.tag===4}function Dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ou(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?ln(s,t,r):ta(s,t);else if(u!==4&&(t=t.child,t!==null))for(Ou(t,r,s),t=t.sibling;t!==null;)Ou(t,r,s),t=t.sibling}function Tu(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?ir(s,t,r):_r(s,t);else if(u!==4&&(t=t.child,t!==null))for(Tu(t,r,s),t=t.sibling;t!==null;)Tu(t,r,s),t=t.sibling}var kt=null,Er=!1;function Lr(t,r,s){for(s=s.child;s!==null;)ku(t,r,s),s=s.sibling}function ku(t,r,s){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount(ee,s)}catch{}switch(s.tag){case 5:Dt||Ri(s,r);case 6:if(de){var u=kt,d=Er;kt=null,Lr(t,r,s),kt=u,Er=d,kt!==null&&(Er?aa(kt,s.stateNode):ci(kt,s.stateNode))}else Lr(t,r,s);break;case 18:de&&kt!==null&&(Er?$l(kt,s.stateNode):Gl(kt,s.stateNode));break;case 4:de?(u=kt,d=Er,kt=s.stateNode.containerInfo,Er=!0,Lr(t,r,s),kt=u,Er=d):(Ie&&(u=s.stateNode.containerInfo,d=Hr(u),la(u,d)),Lr(t,r,s));break;case 0:case 11:case 14:case 15:if(!Dt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,S=g.destroy;g=g.tag,S!==void 0&&(g&2||g&4)&&Pu(s,r,S),d=d.next}while(d!==u)}Lr(t,r,s);break;case 1:if(!Dt&&(Ri(s,r),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(N){et(s,r,N)}Lr(t,r,s);break;case 21:Lr(t,r,s);break;case 22:s.mode&1?(Dt=(u=Dt)||s.memoizedState!==null,Lr(t,r,s),Dt=u):Lr(t,r,s);break;default:Lr(t,r,s)}}function Gh(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ug),r.forEach(function(u){var d=_g.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function Cr(t,r){var s=r.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,S=r;if(de){var N=S;e:for(;N!==null;){switch(N.tag){case 5:kt=N.stateNode,Er=!1;break e;case 3:kt=N.stateNode.containerInfo,Er=!0;break e;case 4:kt=N.stateNode.containerInfo,Er=!0;break e}N=N.return}if(kt===null)throw Error(c(160));ku(g,S,d),kt=null,Er=!1}else ku(g,S,d);var j=d.alternate;j!==null&&(j.return=null),d.return=null}catch(q){et(d,r,q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)$h(r,t),r=r.sibling}function $h(t,r){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cr(r,t),Dr(t),u&4){try{Oa(3,t,t.return),Do(3,t)}catch(te){et(t,t.return,te)}try{Oa(5,t,t.return)}catch(te){et(t,t.return,te)}}break;case 1:Cr(r,t),Dr(t),u&512&&s!==null&&Ri(s,s.return);break;case 5:if(Cr(r,t),Dr(t),u&512&&s!==null&&Ri(s,s.return),de){if(t.flags&32){var d=t.stateNode;try{Nn(d)}catch(te){et(t,t.return,te)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(s=s!==null?s.memoizedProps:g,u=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{ia(d,r,u,s,g,t)}catch(te){et(t,t.return,te)}}}break;case 6:if(Cr(r,t),Dr(t),u&4&&de){if(t.stateNode===null)throw Error(c(162));d=t.stateNode,g=t.memoizedProps,s=s!==null?s.memoizedProps:g;try{ra(d,s,g)}catch(te){et(t,t.return,te)}}break;case 3:if(Cr(r,t),Dr(t),u&4){if(de&&Fe&&s!==null&&s.memoizedState.isDehydrated)try{Ll(r.containerInfo)}catch(te){et(t,t.return,te)}if(Ie){d=r.containerInfo,g=r.pendingChildren;try{la(d,g)}catch(te){et(t,t.return,te)}}}break;case 4:if(Cr(r,t),Dr(t),u&4&&Ie){g=t.stateNode,d=g.containerInfo,g=g.pendingChildren;try{la(d,g)}catch(te){et(t,t.return,te)}}break;case 13:Cr(r,t),Dr(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Lu=ht())),u&4&&Gh(t);break;case 22:var S=s!==null&&s.memoizedState!==null;if(t.mode&1?(Dt=(s=Dt)||S,Cr(r,t),Dt=s):Cr(r,t),Dr(t),u&8192){if(s=t.memoizedState!==null,(t.stateNode.isHidden=s)&&!S&&t.mode&1)for(ae=t,u=t.child;u!==null;){for(r=ae=u;ae!==null;){S=ae;var N=S.child;switch(S.tag){case 0:case 11:case 14:case 15:Oa(4,S,S.return);break;case 1:Ri(S,S.return);var j=S.stateNode;if(typeof j.componentWillUnmount=="function"){var q=S,oe=S.return;try{var ye=q;j.props=ye.memoizedProps,j.state=ye.memoizedState,j.componentWillUnmount()}catch(te){et(q,oe,te)}}break;case 5:Ri(S,S.return);break;case 22:if(S.memoizedState!==null){Bh(r);continue}}N!==null?(N.return=S,ae=N):Bh(r)}u=u.sibling}if(de){e:if(u=null,de)for(r=t;;){if(r.tag===5){if(u===null){u=r;try{d=r.stateNode,s?Ur(d):J(r.stateNode,r.memoizedProps)}catch(te){et(t,t.return,te)}}}else if(r.tag===6){if(u===null)try{g=r.stateNode,s?oa(g):me(g,r.memoizedProps)}catch(te){et(t,t.return,te)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}}}break;case 19:Cr(r,t),Dr(t),u&4&&Gh(t);break;case 21:break;default:Cr(r,t),Dr(t)}}function Dr(t){var r=t.flags;if(r&2){try{if(de){e:{for(var s=t.return;s!==null;){if(Lh(s)){var u=s;break e}s=s.return}throw Error(c(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Nn(d),u.flags&=-33);var g=Dh(t);Tu(t,g,d);break;case 3:case 4:var S=u.stateNode.containerInfo,N=Dh(t);Ou(t,N,S);break;default:throw Error(c(161))}}}catch(j){et(t,t.return,j)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dg(t,r,s){ae=t,jh(t)}function jh(t,r,s){for(var u=(t.mode&1)!==0;ae!==null;){var d=ae,g=d.child;if(d.tag===22&&u){var S=d.memoizedState!==null||Lo;if(!S){var N=d.alternate,j=N!==null&&N.memoizedState!==null||Dt;N=Lo;var q=Dt;if(Lo=S,(Dt=j)&&!q)for(ae=d;ae!==null;)S=ae,j=S.child,S.tag===22&&S.memoizedState!==null?Uh(d):j!==null?(j.return=S,ae=j):Uh(d);for(;g!==null;)ae=g,jh(g),g=g.sibling;ae=d,Lo=N,Dt=q}zh(t)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ae=g):zh(t)}}function zh(t){for(;ae!==null;){var r=ae;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Dt||Do(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Dt)if(s===null)u.componentDidMount();else{var d=r.elementType===r.type?s.memoizedProps:wr(r.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&jd(r,g,u);break;case 3:var S=r.updateQueue;if(S!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=se(r.child.stateNode);break;case 1:s=r.child.stateNode}jd(r,S,s)}break;case 5:var N=r.stateNode;s===null&&r.flags&4&&na(N,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(Fe&&r.memoizedState===null){var j=r.alternate;if(j!==null){var q=j.memoizedState;if(q!==null){var oe=q.dehydrated;oe!==null&&Dl(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Dt||r.flags&512&&bu(r)}catch(ye){et(r,r.return,ye)}}if(r===t){ae=null;break}if(s=r.sibling,s!==null){s.return=r.return,ae=s;break}ae=r.return}}function Bh(t){for(;ae!==null;){var r=ae;if(r===t){ae=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ae=s;break}ae=r.return}}function Uh(t){for(;ae!==null;){var r=ae;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Do(4,r)}catch(j){et(r,s,j)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var d=r.return;try{u.componentDidMount()}catch(j){et(r,d,j)}}var g=r.return;try{bu(r)}catch(j){et(r,g,j)}break;case 5:var S=r.return;try{bu(r)}catch(j){et(r,S,j)}}}catch(j){et(r,r.return,j)}if(r===t){ae=null;break}var N=r.sibling;if(N!==null){N.return=r.return,ae=N;break}ae=r.return}}var Go=0,$o=1,jo=2,zo=3,Bo=4;if(typeof Symbol=="function"&&Symbol.for){var Ta=Symbol.for;Go=Ta("selector.component"),$o=Ta("selector.has_pseudo_class"),jo=Ta("selector.role"),zo=Ta("selector.test_id"),Bo=Ta("selector.text")}function Ru(t){var r=At(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(c(364));return r}if(t=je(t),t===null)throw Error(c(362));return t.stateNode.current}function Mu(t,r){switch(r.$$typeof){case Go:if(t.type===r.value)return!0;break;case $o:e:{r=r.value,t=[t,0];for(var s=0;s<t.length;){var u=t[s++],d=t[s++],g=r[d];if(u.tag!==5||!Qt(u)){for(;g!=null&&Mu(u,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(u=u.child;u!==null;)t.push(u,d),u=u.sibling}}r=!1}return r;case jo:if(t.tag===5&&Br(t.stateNode,r.value))return!0;break;case Bo:if((t.tag===5||t.tag===6)&&(t=dt(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case zo:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Au(t){switch(t.$$typeof){case Go:return"<"+(U(t.value)||"Unknown")+">";case $o:return":has("+(Au(t)||"")+")";case jo:return'[role="'+t.value+'"]';case Bo:return'"'+t.value+'"';case zo:return'[data-testname="'+t.value+'"]';default:throw Error(c(365))}}function Hh(t,r){var s=[];t=[t,0];for(var u=0;u<t.length;){var d=t[u++],g=t[u++],S=r[g];if(d.tag!==5||!Qt(d)){for(;S!=null&&Mu(d,S);)g++,S=r[g];if(g===r.length)s.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return s}function Nu(t,r){if(!pt)throw Error(c(363));t=Ru(t),t=Hh(t,r),r=[],t=Array.from(t);for(var s=0;s<t.length;){var u=t[s++];if(u.tag===5)Qt(u)||r.push(u.stateNode);else for(u=u.child;u!==null;)t.push(u),u=u.sibling}return r}var hg=Math.ceil,Uo=h.ReactCurrentDispatcher,Fu=h.ReactCurrentOwner,lt=h.ReactCurrentBatchConfig,Pe=0,bt=null,ft=null,Rt=0,Zt=0,Mi=Rr(0),_t=0,ka=null,Hn=0,Ho=0,Iu=0,Ra=null,Wt=null,Lu=0,Du=1/0,Qr=null;function Ai(){Du=ht()+500}var Vo=!1,Gu=null,gn=null,Wo=!1,pn=null,Xo=0,Ma=0,$u=null,Ko=-1,qo=0;function Gt(){return Pe&6?ht():Ko!==-1?Ko:Ko=ht()}function vn(t){return t.mode&1?Pe&2&&Rt!==0?Rt&-Rt:K1.transition!==null?(qo===0&&(qo=uo()),qo):(t=Ae,t!==0?t:gt()):1}function gr(t,r,s,u){if(50<Ma)throw Ma=0,$u=null,Error(c(185));$n(t,s,u),(!(Pe&2)||t!==bt)&&(t===bt&&(!(Pe&2)&&(Ho|=s),_t===4&&mn(t,Rt)),Xt(t,u),s===1&&Pe===0&&!(r.mode&1)&&(Ai(),mt&&Mr()))}function Xt(t,r){var s=t.callbackNode;lo(t,r);var u=Dn(t,t===bt?Rt:0);if(u===0)s!==null&&go(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(s!=null&&go(s),r===1)t.tag===0?Vl(Wh.bind(null,t)):sr(Wh.bind(null,t)),Me?ct(function(){!(Pe&6)&&Mr()}):fo(Si,Mr),s=null;else{switch(ho(u)){case 1:s=Si;break;case 4:s=z;break;case 16:s=W;break;case 536870912:s=ne;break;default:s=W}s=t0(s,Vh.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Vh(t,r){if(Ko=-1,qo=0,Pe&6)throw Error(c(327));var s=t.callbackNode;if(Xn()&&t.callbackNode!==s)return null;var u=Dn(t,t===bt?Rt:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=Yo(t,u);else{r=u;var d=Pe;Pe|=2;var g=qh();(bt!==t||Rt!==r)&&(Qr=null,Ai(),Vn(t,r));do try{pg();break}catch(N){Kh(t,N)}while(!0);Jl(),Uo.current=g,Pe=d,ft!==null?r=0:(bt=null,Rt=0,r=_t)}if(r!==0){if(r===2&&(d=ga(t),d!==0&&(u=d,r=ju(t,d))),r===1)throw s=ka,Vn(t,0),mn(t,u),Xt(t,ht()),s;if(r===6)mn(t,u);else{if(d=t.current.alternate,!(u&30)&&!fg(d)&&(r=Yo(t,u),r===2&&(g=ga(t),g!==0&&(u=g,r=ju(t,g))),r===1))throw s=ka,Vn(t,0),mn(t,u),Xt(t,ht()),s;switch(t.finishedWork=d,t.finishedLanes=u,r){case 0:case 1:throw Error(c(345));case 2:Wn(t,Wt,Qr);break;case 3:if(mn(t,u),(u&130023424)===u&&(r=Lu+500-ht(),10<r)){if(Dn(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){Gt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=F(Wn.bind(null,t,Wt,Qr),r);break}Wn(t,Wt,Qr);break;case 4:if(mn(t,u),(u&4194240)===u)break;for(r=t.eventTimes,d=-1;0<u;){var S=31-Ut(u);g=1<<S,S=r[S],S>d&&(d=S),u&=~g}if(u=d,u=ht()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*hg(u/1960))-u,10<u){t.timeoutHandle=F(Wn.bind(null,t,Wt,Qr),u);break}Wn(t,Wt,Qr);break;case 5:Wn(t,Wt,Qr);break;default:throw Error(c(329))}}}return Xt(t,ht()),t.callbackNode===s?Vh.bind(null,t):null}function ju(t,r){var s=Ra;return t.current.memoizedState.isDehydrated&&(Vn(t,r).flags|=256),t=Yo(t,r),t!==2&&(r=Wt,Wt=s,r!==null&&zu(r)),t}function zu(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function fg(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!at(g(),d))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mn(t,r){for(r&=~Iu,r&=~Ho,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-Ut(r),u=1<<s;t[s]=-1,r&=~u}}function Wh(t){if(Pe&6)throw Error(c(327));Xn();var r=Dn(t,0);if(!(r&1))return Xt(t,ht()),null;var s=Yo(t,r);if(t.tag!==0&&s===2){var u=ga(t);u!==0&&(r=u,s=ju(t,u))}if(s===1)throw s=ka,Vn(t,0),mn(t,r),Xt(t,ht()),s;if(s===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Wn(t,Wt,Qr),Xt(t,ht()),null}function Xh(t){pn!==null&&pn.tag===0&&!(Pe&6)&&Xn();var r=Pe;Pe|=1;var s=lt.transition,u=Ae;try{if(lt.transition=null,Ae=1,t)return t()}finally{Ae=u,lt.transition=s,Pe=r,!(Pe&6)&&Mr()}}function Bu(){Zt=Mi.current,Ue(Mi)}function Vn(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==ie&&(t.timeoutHandle=ie,H(s)),ft!==null)for(s=ft.return;s!==null;){var u=s;switch(Xl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&vi();break;case 3:Ti(),Ue(Ft),Ue(Et),lu();break;case 5:ou(u);break;case 4:Ti();break;case 13:Ue(rt);break;case 19:Ue(rt);break;case 10:Zl(u.type._context);break;case 22:case 23:Bu()}s=s.return}if(bt=t,ft=t=yn(t.current,null),Rt=Zt=r,_t=0,ka=null,Iu=Ho=Hn=0,Wt=Ra=null,Bn!==null){for(r=0;r<Bn.length;r++)if(s=Bn[r],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var S=g.next;g.next=d,u.next=S}s.pending=u}Bn=null}return t}function Kh(t,r){do{var s=ft;try{if(Jl(),Oo.current=Mo,To){for(var u=nt.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}To=!1}if(Un=0,Pt=yt=nt=null,Sa=!1,xa=0,Fu.current=null,s===null||s.return===null){_t=1,ka=r,ft=null;break}e:{var g=t,S=s.return,N=s,j=r;if(r=Rt,N.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var q=j,oe=N,ye=oe.tag;if(!(oe.mode&1)&&(ye===0||ye===11||ye===15)){var te=oe.alternate;te?(oe.updateQueue=te.updateQueue,oe.memoizedState=te.memoizedState,oe.lanes=te.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Qe=_h(S);if(Qe!==null){Qe.flags&=-257,Sh(Qe,S,N,g,r),Qe.mode&1&&yh(g,q,r),r=Qe,j=q;var We=r.updateQueue;if(We===null){var Kt=new Set;Kt.add(j),r.updateQueue=Kt}else We.add(j);break e}else{if(!(r&1)){yh(g,q,r),Uu();break e}j=Error(c(426))}}else if(Ze&&N.mode&1){var Jr=_h(S);if(Jr!==null){!(Jr.flags&65536)&&(Jr.flags|=256),Sh(Jr,S,N,g,r),Yl(ki(j,N));break e}}g=j=ki(j,N),_t!==4&&(_t=2),Ra===null?Ra=[g]:Ra.push(g),g=S;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var $=vh(g,j,r);$d(g,$);break e;case 1:N=j;var I=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof I.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(gn===null||!gn.has(B)))){g.flags|=65536,r&=-r,g.lanes|=r;var re=mh(g,N,r);$d(g,re);break e}}g=g.return}while(g!==null)}Qh(s)}catch(ce){r=ce,ft===s&&s!==null&&(ft=s=s.return);continue}break}while(!0)}function qh(){var t=Uo.current;return Uo.current=Mo,t===null?Mo:t}function Uu(){(_t===0||_t===3||_t===2)&&(_t=4),bt===null||!(Hn&268435455)&&!(Ho&268435455)||mn(bt,Rt)}function Yo(t,r){var s=Pe;Pe|=2;var u=qh();(bt!==t||Rt!==r)&&(Qr=null,Vn(t,r));do try{gg();break}catch(d){Kh(t,d)}while(!0);if(Jl(),Pe=s,Uo.current=u,ft!==null)throw Error(c(261));return bt=null,Rt=0,_t}function gg(){for(;ft!==null;)Yh(ft)}function pg(){for(;ft!==null&&!po();)Yh(ft)}function Yh(t){var r=e0(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,r===null?Qh(t):ft=r,Fu.current=null}function Qh(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=lg(s,r),s!==null){s.flags&=32767,ft=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,ft=null;return}}else if(s=sg(s,r,Zt),s!==null){ft=s;return}if(r=r.sibling,r!==null){ft=r;return}ft=r=t}while(r!==null);_t===0&&(_t=5)}function Wn(t,r,s){var u=Ae,d=lt.transition;try{lt.transition=null,Ae=1,vg(t,r,s,u)}finally{lt.transition=d,Ae=u}return null}function vg(t,r,s,u){do Xn();while(pn!==null);if(Pe&6)throw Error(c(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(co(t,g),t===bt&&(ft=bt=null,Rt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Wo||(Wo=!0,t0(W,function(){return Xn(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=lt.transition,lt.transition=null;var S=Ae;Ae=1;var N=Pe;Pe|=4,Fu.current=null,cg(t,s),$h(s,t),Q(t.containerInfo),t.current=s,dg(s),Hl(),Pe=N,Ae=S,lt.transition=g}else t.current=s;if(Wo&&(Wo=!1,pn=t,Xo=d),g=t.pendingLanes,g===0&&(gn=null),Se(s.stateNode),Xt(t,ht()),r!==null)for(u=t.onRecoverableError,s=0;s<r.length;s++)d=r[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Vo)throw Vo=!1,t=Gu,Gu=null,t;return Xo&1&&t.tag!==0&&Xn(),g=t.pendingLanes,g&1?t===$u?Ma++:(Ma=0,$u=t):Ma=0,Mr(),null}function Xn(){if(pn!==null){var t=ho(Xo),r=lt.transition,s=Ae;try{if(lt.transition=null,Ae=16>t?16:t,pn===null)var u=!1;else{if(t=pn,pn=null,Xo=0,Pe&6)throw Error(c(331));var d=Pe;for(Pe|=4,ae=t.current;ae!==null;){var g=ae,S=g.child;if(ae.flags&16){var N=g.deletions;if(N!==null){for(var j=0;j<N.length;j++){var q=N[j];for(ae=q;ae!==null;){var oe=ae;switch(oe.tag){case 0:case 11:case 15:Oa(8,oe,g)}var ye=oe.child;if(ye!==null)ye.return=oe,ae=ye;else for(;ae!==null;){oe=ae;var te=oe.sibling,Qe=oe.return;if(Ih(oe),oe===q){ae=null;break}if(te!==null){te.return=Qe,ae=te;break}ae=Qe}}}var We=g.alternate;if(We!==null){var Kt=We.child;if(Kt!==null){We.child=null;do{var Jr=Kt.sibling;Kt.sibling=null,Kt=Jr}while(Kt!==null)}}ae=g}}if(g.subtreeFlags&2064&&S!==null)S.return=g,ae=S;else e:for(;ae!==null;){if(g=ae,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Oa(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,ae=$;break e}ae=g.return}}var I=t.current;for(ae=I;ae!==null;){S=ae;var B=S.child;if(S.subtreeFlags&2064&&B!==null)B.return=S,ae=B;else e:for(S=I;ae!==null;){if(N=ae,N.flags&2048)try{switch(N.tag){case 0:case 11:case 15:Do(9,N)}}catch(ce){et(N,N.return,ce)}if(N===S){ae=null;break e}var re=N.sibling;if(re!==null){re.return=N.return,ae=re;break e}ae=N.return}}if(Pe=d,Mr(),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot(ee,t)}catch{}u=!0}return u}finally{Ae=s,lt.transition=r}}return!1}function Jh(t,r,s){r=ki(s,r),r=vh(t,r,1),t=fn(t,r,1),r=Gt(),t!==null&&($n(t,1,r),Xt(t,r))}function et(t,r,s){if(t.tag===3)Jh(t,t,s);else for(;r!==null;){if(r.tag===3){Jh(r,t,s);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(gn===null||!gn.has(u))){t=ki(s,t),t=mh(r,t,1),r=fn(r,t,1),t=Gt(),r!==null&&($n(r,1,t),Xt(r,t));break}}r=r.return}}function mg(t,r,s){var u=t.pingCache;u!==null&&u.delete(r),r=Gt(),t.pingedLanes|=t.suspendedLanes&s,bt===t&&(Rt&s)===s&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>ht()-Lu?Vn(t,0):Iu|=s),Xt(t,r)}function Zh(t,r){r===0&&(t.mode&1?(r=yi,yi<<=1,!(yi&130023424)&&(yi=4194304)):r=1);var s=Gt();t=Ar(t,r),t!==null&&($n(t,r,s),Xt(t,s))}function yg(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Zh(t,s)}function _g(t,r){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(c(314))}u!==null&&u.delete(r),Zh(t,s)}var e0;e0=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Ft.current)Vt=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Vt=!1,og(t,r,s);Vt=!!(t.flags&131072)}else Vt=!1,Ze&&r.flags&1048576&&Md(r,mo,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;No(t,r),t=r.pendingProps;var d=Vr(r,Et.current);Pi(r,s),d=du(null,r,u,t,d,s);var g=hu();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ct(u)?(g=!0,mi(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ru(r),d.updater=Co,r.stateNode=d,d._reactInternals=r,iu(r,u,t,s),r=Su(null,r,u,!0,g,s)):(r.tag=0,Ze&&g&&Wl(r),Bt(null,r,d,s),r=r.child),r;case 16:u=r.elementType;e:{switch(No(t,r),t=r.pendingProps,d=u._init,u=d(u._payload),r.type=u,d=r.tag=xg(u),t=wr(u,t),d){case 0:r=_u(null,r,u,t,s);break e;case 1:r=bh(null,r,u,t,s);break e;case 11:r=xh(null,r,u,t,s);break e;case 14:r=wh(null,r,u,wr(u.type,t),s);break e}throw Error(c(306,u,""))}return r;case 0:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),_u(t,r,u,d,s);case 1:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),bh(t,r,u,d,s);case 3:e:{if(Oh(r),t===null)throw Error(c(387));u=r.pendingProps,g=r.memoizedState,d=g.element,Gd(t,r),Eo(r,u,null,s);var S=r.memoizedState;if(u=S.element,Fe&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=ki(Error(c(423)),r),r=Th(t,r,u,s,d);break e}else if(u!==d){d=ki(Error(c(424)),r),r=Th(t,r,u,s,d);break e}else for(Fe&&(cr=Ml(r.stateNode.containerInfo),Jt=r,Ze=!0,xr=null,va=!1),s=Xd(r,null,u,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ei(),u===d){r=Yr(t,r,s);break e}Bt(t,r,u,s)}r=r.child}return r;case 5:return Kd(r),t===null&&ql(r),u=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,S=d.children,qe(u,d)?S=null:g!==null&&qe(u,g)&&(r.flags|=32),Ph(t,r),Bt(t,r,S,s),r.child;case 6:return t===null&&ql(r),null;case 13:return kh(t,r,s);case 4:return au(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=bi(r,null,u,s):Bt(t,r,u,s),r.child;case 11:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),xh(t,r,u,d,s);case 7:return Bt(t,r,r.pendingProps,s),r.child;case 8:return Bt(t,r,r.pendingProps.children,s),r.child;case 12:return Bt(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(u=r.type._context,d=r.pendingProps,g=r.memoizedProps,S=d.value,Ld(r,u,S),g!==null)if(at(g.value,S)){if(g.children===d.children&&!Ft.current){r=Yr(t,r,s);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var N=g.dependencies;if(N!==null){S=g.child;for(var j=N.firstContext;j!==null;){if(j.context===u){if(g.tag===1){j=qr(-1,s&-s),j.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var oe=q.pending;oe===null?j.next=j:(j.next=oe.next,oe.next=j),q.pending=j}}g.lanes|=s,j=g.alternate,j!==null&&(j.lanes|=s),eu(g.return,s,r),N.lanes|=s;break}j=j.next}}else if(g.tag===10)S=g.type===r.type?null:g.child;else if(g.tag===18){if(S=g.return,S===null)throw Error(c(341));S.lanes|=s,N=S.alternate,N!==null&&(N.lanes|=s),eu(S,s,r),S=g.sibling}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}Bt(t,r,d.children,s),r=r.child}return r;case 9:return d=r.type,u=r.pendingProps.children,Pi(r,s),d=dr(d),u=u(d),r.flags|=1,Bt(t,r,u,s),r.child;case 14:return u=r.type,d=wr(u,r.pendingProps),d=wr(u.type,d),wh(t,r,u,d,s);case 15:return Eh(t,r,r.type,r.pendingProps,s);case 17:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),No(t,r),r.tag=1,Ct(u)?(t=!0,mi(r)):t=!1,Pi(r,s),Ud(r,u,d),iu(r,u,d,s),Su(null,r,u,!0,t,s);case 19:return Mh(t,r,s);case 22:return Ch(t,r,s)}throw Error(c(156,r.tag))};function t0(t,r){return fo(t,r)}function Sg(t,r,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(t,r,s,u){return new Sg(t,r,s,u)}function Hu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xg(t){if(typeof t=="function")return Hu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E)return 11;if(t===k)return 14}return 2}function yn(t,r){var s=t.alternate;return s===null?(s=pr(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Qo(t,r,s,u,d,g){var S=2;if(u=t,typeof t=="function")Hu(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case m:return Kn(s.children,d,g,r);case C:S=8,d|=8;break;case w:return t=pr(12,s,r,d|2),t.elementType=w,t.lanes=g,t;case P:return t=pr(13,s,r,d),t.elementType=P,t.lanes=g,t;case T:return t=pr(19,s,r,d),t.elementType=T,t.lanes=g,t;case x:return Jo(s,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:S=10;break e;case y:S=9;break e;case E:S=11;break e;case k:S=14;break e;case v:S=16,u=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return r=pr(S,s,r,d),r.elementType=t,r.type=u,r.lanes=g,r}function Kn(t,r,s,u){return t=pr(7,t,u,r),t.lanes=s,t}function Jo(t,r,s,u){return t=pr(22,t,u,r),t.elementType=x,t.lanes=s,t.stateNode={isHidden:!1},t}function Vu(t,r,s){return t=pr(6,t,null,r),t.lanes=s,t}function Wu(t,r,s){return r=pr(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function wg(t,r,s,u,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ie,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_i(0),this.expirationTimes=_i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.identifierPrefix=u,this.onRecoverableError=d,Fe&&(this.mutableSourceEagerHydrationData=null)}function r0(t,r,s,u,d,g,S,N,j){return t=new wg(t,r,s,N,j),r===1?(r=1,g===!0&&(r|=8)):r=0,g=pr(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ru(g),t}function n0(t){if(!t)return or;t=t._reactInternals;e:{if(G(t)!==t||t.tag!==1)throw Error(c(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Ct(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(c(171))}if(t.tag===1){var s=t.type;if(Ct(s))return fa(t,s,r)}return r}function i0(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=V(r),t===null?null:t.stateNode}function a0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Zo(t,r){a0(t,r),(t=t.alternate)&&a0(t,r)}function Eg(t){return t=V(t),t===null?null:t.stateNode}function Cg(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Ar(t,134217728);if(r!==null){var s=Gt();gr(r,t,134217728,s)}Zo(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Ar(t,1);if(r!==null){var s=Gt();gr(r,t,1,s)}Zo(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=vn(t),s=Ar(t,r);if(s!==null){var u=Gt();gr(s,t,r,u)}Zo(t,r)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=dn(r.pendingLanes);s!==0&&(pa(r,s|1),Xt(r,ht()),!(Pe&6)&&(Ai(),Mr()))}break;case 13:Xh(function(){var u=Ar(t,1);if(u!==null){var d=Gt();gr(u,t,1,d)}}),Zo(t,1)}},n.batchedUpdates=function(t,r){var s=Pe;Pe|=1;try{return t(r)}finally{Pe=s,Pe===0&&(Ai(),mt&&Mr())}},n.createComponentSelector=function(t){return{$$typeof:Go,value:t}},n.createContainer=function(t,r,s,u,d,g,S){return r0(t,r,!1,null,s,u,d,g,S)},n.createHasPseudoClassSelector=function(t){return{$$typeof:$o,value:t}},n.createHydrationContainer=function(t,r,s,u,d,g,S,N,j){return t=r0(s,u,!0,t,d,g,S,N,j),t.context=n0(null),s=t.current,u=Gt(),d=vn(s),g=qr(u,d),g.callback=r??null,fn(s,g,d),t.current.lanes=d,$n(t,d,u),Xt(t,u),t},n.createPortal=function(t,r,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:u==null?null:""+u,children:t,containerInfo:r,implementation:s}},n.createRoleSelector=function(t){return{$$typeof:jo,value:t}},n.createTestNameSelector=function(t){return{$$typeof:zo,value:t}},n.createTextSelector=function(t){return{$$typeof:Bo,value:t}},n.deferredUpdates=function(t){var r=Ae,s=lt.transition;try{return lt.transition=null,Ae=16,t()}finally{Ae=r,lt.transition=s}},n.discreteUpdates=function(t,r,s,u,d){var g=Ae,S=lt.transition;try{return lt.transition=null,Ae=1,t(r,s,u,d)}finally{Ae=g,lt.transition=S,Pe===0&&Ai()}},n.findAllNodes=Nu,n.findBoundingRects=function(t,r){if(!pt)throw Error(c(363));r=Nu(t,r),t=[];for(var s=0;s<r.length;s++)t.push(ze(r[s]));for(r=t.length-1;0<r;r--){s=t[r];for(var u=s.x,d=u+s.width,g=s.y,S=g+s.height,N=r-1;0<=N;N--)if(r!==N){var j=t[N],q=j.x,oe=q+j.width,ye=j.y,te=ye+j.height;if(u>=q&&g>=ye&&d<=oe&&S<=te){t.splice(r,1);break}else if(u!==q||s.width!==j.width||te<g||ye>S){if(!(g!==ye||s.height!==j.height||oe<u||q>d)){q>u&&(j.width+=q-u,j.x=u),oe<d&&(j.width=d-q),t.splice(r,1);break}}else{ye>g&&(j.height+=ye-g,j.y=g),te<S&&(j.height=S-ye),t.splice(r,1);break}}}return t},n.findHostInstance=i0,n.findHostInstanceWithNoPortals=function(t){return t=L(t),t=t!==null?Z(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return i0(t)},n.flushControlled=function(t){var r=Pe;Pe|=1;var s=lt.transition,u=Ae;try{lt.transition=null,Ae=1,t()}finally{Ae=u,lt.transition=s,Pe=r,Pe===0&&(Ai(),Mr())}},n.flushPassiveEffects=Xn,n.flushSync=Xh,n.focusWithin=function(t,r){if(!pt)throw Error(c(363));for(t=Ru(t),r=Hh(t,r),r=Array.from(r),t=0;t<r.length;){var s=r[t++];if(!Qt(s)){if(s.tag===5&&ea(s.stateNode))return!0;for(s=s.child;s!==null;)r.push(s),s=s.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Ae},n.getFindAllNodesFailureDescription=function(t,r){if(!pt)throw Error(c(363));var s=0,u=[];t=[Ru(t),0];for(var d=0;d<t.length;){var g=t[d++],S=t[d++],N=r[S];if((g.tag!==5||!Qt(g))&&(Mu(g,N)&&(u.push(Au(N)),S++,S>s&&(s=S)),S<r.length))for(g=g.child;g!==null;)t.push(g,S),g=g.sibling}if(s<r.length){for(t=[];s<r.length;s++)t.push(Au(r[s]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return se(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:Eg,findFiberByHostInstance:t.findFiberByHostInstance||Cg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{ee=r.inject(t),ue=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,s,u){if(!pt)throw Error(c(363));t=Nu(t,r);var d=An(t,s,u).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var s=r._getVersion;s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s)},n.runWithPriority=function(t,r){var s=Ae;try{return Ae=t,r()}finally{Ae=s}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,s,u){var d=r.current,g=Gt(),S=vn(d);return s=n0(s),r.context===null?r.context=s:r.pendingContext=s,r=qr(g,S),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=fn(d,r,S),t!==null&&(gr(t,d,S,g),wo(t,d,S)),S},n};p1.exports=o4;var s4=p1.exports;const l4=Es(s4);var v1={exports:{}},oi={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */oi.ConcurrentRoot=1;oi.ContinuousEventPriority=4;oi.DefaultEventPriority=16;oi.DiscreteEventPriority=1;oi.IdleEventPriority=536870912;oi.LegacyRoot=0;v1.exports=oi;var m1=v1.exports;const J0={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Z0=!1,ef=!1;const Jc=".react-konva-event",u4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,c4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,d4={};function ml(a,e,n=d4){if(!Z0&&"zIndex"in e&&(console.warn(c4),Z0=!0),!ef&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(u4),ef=!0)}for(var l in n)if(!J0[l]){var c=l.slice(0,2)==="on",h=n[l]!==e[l];if(c&&h){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),a.off(f,n[l])}var p=!e.hasOwnProperty(l);p&&a.setAttr(l,void 0)}var m=e._useStrictMode,C={},w=!1;const _={};for(var l in e)if(!J0[l]){var c=l.slice(0,2)==="on",y=n[l]!==e[l];if(c&&y){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e[l]&&(_[f]=e[l])}!c&&(e[l]!==n[l]||m&&e[l]!==a.getAttr(l))&&(w=!0,C[l]=e[l])}w&&(a.setAttrs(C),Rn(a));for(var f in _)a.on(f+Jc,_[f])}function Rn(a){if(!Ee.Konva.autoDrawEnabled){var e=a.getLayer()||a.getStage();e&&e.batchDraw()}}const y1={},h4={};Ha.Node.prototype._applyProps=ml;function f4(a,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}a.add(e),Rn(a)}function g4(a,e,n){let i=Ha[a];i||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Ha.Group);const o={},l={};for(var c in e){var h=c.slice(0,2)==="on";h?l[c]=e[c]:o[c]=e[c]}const f=new i(o);return ml(f,l),f}function p4(a,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function v4(a,e,n){return!1}function m4(a){return a}function y4(){return null}function _4(){return null}function S4(a,e,n,i){return h4}function x4(){}function w4(a){}function E4(a,e){return!1}function C4(){return y1}function P4(){return y1}const b4=setTimeout,O4=clearTimeout,T4=-1;function k4(a,e){return!1}const R4=!1,M4=!0,A4=!0;function N4(a,e){e.parent===a?e.moveToTop():a.add(e),Rn(a)}function F4(a,e){e.parent===a?e.moveToTop():a.add(e),Rn(a)}function _1(a,e,n){e._remove(),a.add(e),e.setZIndex(n.getZIndex()),Rn(a)}function I4(a,e,n){_1(a,e,n)}function L4(a,e){e.destroy(),e.off(Jc),Rn(a)}function D4(a,e){e.destroy(),e.off(Jc),Rn(a)}function G4(a,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function $4(a,e,n){}function j4(a,e,n,i,o){ml(a,o,i)}function z4(a){a.hide(),Rn(a)}function B4(a){}function U4(a,e){(e.visible==null||e.visible)&&a.show()}function H4(a,e){}function V4(a){}function W4(){}const X4=()=>m1.DefaultEventPriority,K4=Object.freeze(Object.defineProperty({__proto__:null,appendChild:N4,appendChildToContainer:F4,appendInitialChild:f4,cancelTimeout:O4,clearContainer:V4,commitMount:$4,commitTextUpdate:G4,commitUpdate:j4,createInstance:g4,createTextInstance:p4,detachDeletedInstance:W4,finalizeInitialChildren:v4,getChildHostContext:P4,getCurrentEventPriority:X4,getPublicInstance:m4,getRootHostContext:C4,hideInstance:z4,hideTextInstance:B4,idlePriority:gs.unstable_IdlePriority,insertBefore:_1,insertInContainerBefore:I4,isPrimaryRenderer:R4,noTimeout:T4,now:gs.unstable_now,prepareForCommit:y4,preparePortalMount:_4,prepareUpdate:S4,removeChild:L4,removeChildFromContainer:D4,resetAfterCommit:x4,resetTextContent:w4,run:gs.unstable_runWithPriority,scheduleTimeout:b4,shouldDeprioritizeSubtree:E4,shouldSetTextContent:k4,supportsMutation:A4,unhideInstance:U4,unhideTextInstance:H4,warnsIfNotActing:M4},Symbol.toStringTag,{value:"Module"}));var q4=Object.defineProperty,Y4=Object.defineProperties,Q4=Object.getOwnPropertyDescriptors,tf=Object.getOwnPropertySymbols,J4=Object.prototype.hasOwnProperty,Z4=Object.prototype.propertyIsEnumerable,rf=(a,e,n)=>e in a?q4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,nf=(a,e)=>{for(var n in e||(e={}))J4.call(e,n)&&rf(a,n,e[n]);if(tf)for(var n of tf(e))Z4.call(e,n)&&rf(a,n,e[n]);return a},e5=(a,e)=>Y4(a,Q4(e));function S1(a,e,n){if(!a)return;if(n(a)===!0)return a;let i=e?a.return:a.child;for(;i;){const o=S1(i,e,n);if(o)return o;i=e?null:i.sibling}}function x1(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const Zc=x1(A.createContext(null));class w1 extends A.Component{render(){return A.createElement(Zc.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:af,ReactCurrentDispatcher:of}=A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function t5(){const a=A.useContext(Zc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=A.useId();return A.useMemo(()=>{for(const i of[af?.current,a,a?.alternate]){if(!i)continue;const o=S1(i,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(o)return o}},[a,e])}function r5(){var a,e;const n=t5(),[i]=A.useState(()=>new Map);i.clear();let o=n;for(;o;){const l=(a=o.type)==null?void 0:a._context;l&&l!==Zc&&!i.has(l)&&i.set(l,(e=of?.current)==null?void 0:e.readContext(x1(l))),o=o.return}return i}function n5(){const a=r5();return A.useMemo(()=>Array.from(a.keys()).reduce((e,n)=>i=>A.createElement(e,null,A.createElement(n.Provider,e5(nf({},i),{value:a.get(n)}))),e=>A.createElement(w1,nf({},e))),[a])}function i5(a){const e=Be.useRef({});return Be.useLayoutEffect(()=>{e.current=a}),Be.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const a5=a=>{const e=Be.useRef(),n=Be.useRef(),i=Be.useRef(),o=i5(a),l=n5(),c=h=>{const{forwardedRef:f}=a;f&&(typeof f=="function"?f(h):f.current=h)};return Be.useLayoutEffect(()=>(n.current=new Ha.Stage({width:a.width,height:a.height,container:e.current}),c(n.current),i.current=ja.createContainer(n.current,m1.LegacyRoot,!1,null),ja.updateContainer(Be.createElement(l,{},a.children),i.current),()=>{Ha.isBrowser&&(c(null),ja.updateContainer(null,i.current,null),n.current.destroy())}),[]),Be.useLayoutEffect(()=>{c(n.current),ml(n.current,a,o),ja.updateContainer(Be.createElement(l,{},a.children),i.current,null)}),Be.createElement("div",{ref:e,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},o5="Layer",s5="Rect",l5="Image",u5="Text",ja=l4(K4);ja.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Be.version,rendererPackageName:"react-konva"});const c5=Be.forwardRef((a,e)=>Be.createElement(w1,{},Be.createElement(a5,{...a,forwardedRef:e}))),d5=({imageSrc:a,objectBoxes:e,labelColors:n})=>{const[i,o]=A.useState({width:0,height:0}),[l,c]=A.useState({width:450,height:450}),[h,f]=A.useState(new window.Image),[p,m]=A.useState(1),[C,w]=A.useState({x:0,y:0}),_=y=>{y.evt.preventDefault();const P=y.target.getStage().getPointerPosition(),T=y.evt.deltaY>0?p/1.1:p*1.1;m(T);const k={x:P.x-(P.x-C.x)*(T/p),y:P.y-(P.y-C.y)*(T/p)};w(k)};return A.useEffect(()=>{const y=new window.Image;y.src=a,f(y),y.onload=()=>{y.width/y.height,l.width/l.height;let E=y.width,P=y.height;m(1),w({x:0,y:0}),o({width:E,height:P})}},[a]),D.jsx("div",{children:D.jsx(c5,{width:l.width,height:l.height,onWheel:_,draggable:!0,children:D.jsxs(o5,{children:[D.jsx(l5,{image:h,width:i.width,height:i.height,x:C.x,y:C.y,scaleX:p,scaleY:p}),e.map((y,E)=>D.jsxs(Be.Fragment,{children:[D.jsx(s5,{x:y.x*p+C.x,y:y.y*p+C.y,width:y.width*p,height:y.height*p,fill:"rgba(0,0,0,0)",stroke:n[y.label],strokeWidth:2}),D.jsx(u5,{text:y.label,x:y.x*p+C.x,y:y.y*p+C.y,fontSize:12,fill:n[y.label]})]},E))]})})})},h5=d5;var ed={},yl={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function f5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var g5=function a(e,n){f5(this,a),this.data=e,this.text=n.text||e,this.options=n};Yt.default=g5;Object.defineProperty(yl,"__esModule",{value:!0});yl.CODE39=void 0;var p5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),v5=Yt,m5=y5(v5);function y5(a){return a&&a.__esModule?a:{default:a}}function _5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function S5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function x5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var w5=function(a){x5(e,a);function e(n,i){return _5(this,e),n=n.toUpperCase(),i.mod43&&(n+=P5(b5(n))),S5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return p5(e,[{key:"encode",value:function(){for(var i=cc("*"),o=0;o<this.data.length;o++)i+=cc(this.data[o])+"0";return i+=cc("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(m5.default),E1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],E5=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function cc(a){return C5(C1(a))}function C5(a){return E5[a].toString(2)}function P5(a){return E1[a]}function C1(a){return E1.indexOf(a)}function b5(a){for(var e=0,n=0;n<a.length;n++)e+=C1(a[n]);return e=e%43,e}yl.CODE39=w5;var $r={},td={},Yi={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});var La;function dc(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var P1=Je.SET_A=0,b1=Je.SET_B=1,O1=Je.SET_C=2;Je.SHIFT=98;var O5=Je.START_A=103,T5=Je.START_B=104,k5=Je.START_C=105;Je.MODULO=103;Je.STOP=106;Je.FNC1=207;Je.SET_BY_CODE=(La={},dc(La,O5,P1),dc(La,T5,b1),dc(La,k5,O1),La);Je.SWAP={101:P1,100:b1,99:O1};Je.A_START_CHAR="Ð";Je.B_START_CHAR="Ñ";Je.C_START_CHAR="Ò";Je.A_CHARS="[\0-_È-Ï]";Je.B_CHARS="[ -È-Ï]";Je.C_CHARS="(Ï*[0-9]{2}Ï*)";Je.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Yi,"__esModule",{value:!0});var R5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),M5=Yt,A5=N5(M5),tr=Je;function N5(a){return a&&a.__esModule?a:{default:a}}function F5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function I5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function L5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var D5=function(a){L5(e,a);function e(n,i){F5(this,e);var o=I5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return R5(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=tr.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(tr.FNC1);var c=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+c.result+e.getBar((c.checksum+o)%tr.MODULO)+e.getBar(tr.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return tr.BARS[i]?tr.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===tr.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===tr.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var c=void 0,h=void 0;if(i[0]>=200){h=i.shift()-105;var f=tr.SWAP[h];f!==void 0?c=e.next(i,o+1,f):((l===tr.SET_A||l===tr.SET_B)&&h===tr.SHIFT&&(i[0]=l===tr.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),c=e.next(i,o+1,l))}else h=e.correctIndex(i,l),c=e.next(i,o+1,l);var p=e.getBar(h),m=h*o;return{result:p+c.result,checksum:m+c.checksum}}}]),e}(A5.default);Yi.default=D5;var rd={};Object.defineProperty(rd,"__esModule",{value:!0});var wn=Je,T1=function(e){return e.match(new RegExp("^"+wn.A_CHARS+"*"))[0].length},k1=function(e){return e.match(new RegExp("^"+wn.B_CHARS+"*"))[0].length},R1=function(e){return e.match(new RegExp("^"+wn.C_CHARS+"*"))[0]};function nd(a,e){var n=e?wn.A_CHARS:wn.B_CHARS,i=a.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"Ì"+M1(a.substring(i[1].length));var o=a.match(new RegExp("^"+n+"+"))[0];return o.length===a.length?a:o+String.fromCharCode(e?205:206)+nd(a.substring(o.length),!e)}function M1(a){var e=R1(a),n=e.length;if(n===a.length)return a;a=a.substring(n);var i=T1(a)>=k1(a);return e+String.fromCharCode(i?206:205)+nd(a,i)}rd.default=function(a){var e=void 0,n=R1(a).length;if(n>=2)e=wn.C_START_CHAR+M1(a);else{var i=T1(a)>k1(a);e=(i?wn.A_START_CHAR:wn.B_START_CHAR)+nd(a,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return"Ë"+l})};Object.defineProperty(td,"__esModule",{value:!0});var G5=Yi,$5=A1(G5),j5=rd,z5=A1(j5);function A1(a){return a&&a.__esModule?a:{default:a}}function B5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function hc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function U5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var H5=function(a){U5(e,a);function e(n,i){if(B5(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,z5.default)(n),i));else var o=hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return hc(o)}return e}($5.default);td.default=H5;var id={};Object.defineProperty(id,"__esModule",{value:!0});var V5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),W5=Yi,X5=K5(W5),sf=Je;function K5(a){return a&&a.__esModule?a:{default:a}}function q5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Q5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var J5=function(a){Q5(e,a);function e(n,i){return q5(this,e),Y5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,sf.A_START_CHAR+n,i))}return V5(e,[{key:"valid",value:function(){return new RegExp("^"+sf.A_CHARS+"+$").test(this.data)}}]),e}(X5.default);id.default=J5;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});var Z5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),e6=Yi,t6=r6(e6),lf=Je;function r6(a){return a&&a.__esModule?a:{default:a}}function n6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function a6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var o6=function(a){a6(e,a);function e(n,i){return n6(this,e),i6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,lf.B_START_CHAR+n,i))}return Z5(e,[{key:"valid",value:function(){return new RegExp("^"+lf.B_CHARS+"+$").test(this.data)}}]),e}(t6.default);ad.default=o6;var od={};Object.defineProperty(od,"__esModule",{value:!0});var s6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l6=Yi,u6=c6(l6),uf=Je;function c6(a){return a&&a.__esModule?a:{default:a}}function d6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function h6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function f6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var g6=function(a){f6(e,a);function e(n,i){return d6(this,e),h6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,uf.C_START_CHAR+n,i))}return s6(e,[{key:"valid",value:function(){return new RegExp("^"+uf.C_CHARS+"+$").test(this.data)}}]),e}(u6.default);od.default=g6;Object.defineProperty($r,"__esModule",{value:!0});$r.CODE128C=$r.CODE128B=$r.CODE128A=$r.CODE128=void 0;var p6=td,v6=_l(p6),m6=id,y6=_l(m6),_6=ad,S6=_l(_6),x6=od,w6=_l(x6);function _l(a){return a&&a.__esModule?a:{default:a}}$r.CODE128=v6.default;$r.CODE128A=y6.default;$r.CODE128B=S6.default;$r.CODE128C=w6.default;var qt={},sd={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.SIDE_BIN="101";yr.MIDDLE_BIN="01010";yr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};yr.EAN2_STRUCTURE=["LL","LG","GL","GG"];yr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];yr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Sl={},si={};Object.defineProperty(si,"__esModule",{value:!0});var E6=yr,C6=function(e,n,i){var o=e.split("").map(function(c,h){return E6.BINARIES[n[h]]}).map(function(c,h){return c?c[e[h]]:""});if(i){var l=e.length-1;o=o.map(function(c,h){return h<l?c+i:c})}return o.join("")};si.default=C6;Object.defineProperty(Sl,"__esModule",{value:!0});var P6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Li=yr,b6=si,cf=N1(b6),O6=Yt,T6=N1(O6);function N1(a){return a&&a.__esModule?a:{default:a}}function k6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function R6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function M6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var A6=function(a){M6(e,a);function e(n,i){k6(this,e);var o=R6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return P6(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:Li.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:Li.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:Li.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[Li.SIDE_BIN,this.leftEncode(),Li.MIDDLE_BIN,this.rightEncode(),Li.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(T6.default);Sl.default=A6;Object.defineProperty(sd,"__esModule",{value:!0});var N6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Da=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},F6=yr,I6=Sl,L6=D6(I6);function D6(a){return a&&a.__esModule?a:{default:a}}function G6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function $6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function j6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var df=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},z6=function(a){j6(e,a);function e(n,i){G6(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=df(n));var o=$6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return N6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===df(this.data)}},{key:"leftText",value:function(){return Da(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=F6.EAN13_STRUCTURE[this.data[0]];return Da(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return Da(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return Da(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=Da(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(L6.default);sd.default=z6;var ld={};Object.defineProperty(ld,"__esModule",{value:!0});var B6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),us=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},U6=Sl,H6=V6(U6);function V6(a){return a&&a.__esModule?a:{default:a}}function W6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function X6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function K6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var hf=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},q6=function(a){K6(e,a);function e(n,i){return W6(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=hf(n)),X6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return B6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===hf(this.data)}},{key:"leftText",value:function(){return us(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return us(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return us(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return us(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(H6.default);ld.default=q6;var ud={};Object.defineProperty(ud,"__esModule",{value:!0});var Y6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Q6=yr,J6=si,Z6=F1(J6),e8=Yt,t8=F1(e8);function F1(a){return a&&a.__esModule?a:{default:a}}function r8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function n8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function i8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var a8=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},o8=function(a){i8(e,a);function e(n,i){return r8(this,e),n8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return Y6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=Q6.EAN5_STRUCTURE[a8(this.data)];return{data:"1011"+(0,Z6.default)(this.data,i,"01"),text:this.text}}}]),e}(t8.default);ud.default=o8;var cd={};Object.defineProperty(cd,"__esModule",{value:!0});var s8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l8=yr,u8=si,c8=I1(u8),d8=Yt,h8=I1(d8);function I1(a){return a&&a.__esModule?a:{default:a}}function f8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function g8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function p8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var v8=function(a){p8(e,a);function e(n,i){return f8(this,e),g8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return s8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=l8.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,c8.default)(this.data,i,"01"),text:this.text}}}]),e}(h8.default);cd.default=v8;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});var m8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();Ja.checksum=Mc;var y8=si,Di=L1(y8),_8=Yt,S8=L1(_8);function L1(a){return a&&a.__esModule?a:{default:a}}function x8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function w8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function E8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var C8=function(a){E8(e,a);function e(n,i){x8(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=Mc(n));var o=w8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return m8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Mc(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,Di.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,Di.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,Di.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,Di.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,Di.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,Di.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(S8.default);function Mc(a){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(a[n]);for(n=0;n<11;n+=2)e+=parseInt(a[n])*3;return(10-e%10)%10}Ja.default=C8;var dd={};Object.defineProperty(dd,"__esModule",{value:!0});var P8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),b8=si,O8=D1(b8),T8=Yt,k8=D1(T8),R8=Ja;function D1(a){return a&&a.__esModule?a:{default:a}}function M8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function fc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function A8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var N8=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],F8=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],I8=function(a){A8(e,a);function e(n,i){M8(this,e);var o=fc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=ff(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=ff(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return fc(o);else return fc(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return P8(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=F8[parseInt(o)][parseInt(i)];return(0,O8.default)(this.middleDigits,l)}}]),e}(k8.default);function ff(a,e){for(var n=parseInt(a[a.length-1]),i=N8[n],o="",l=0,c=0;c<i.length;c++){var h=i[c];h==="X"?o+=a[l++]:o+=h}return o=""+e+o,""+o+(0,R8.checksum)(o)}dd.default=I8;Object.defineProperty(qt,"__esModule",{value:!0});qt.UPCE=qt.UPC=qt.EAN2=qt.EAN5=qt.EAN8=qt.EAN13=void 0;var L8=sd,D8=Qi(L8),G8=ld,$8=Qi(G8),j8=ud,z8=Qi(j8),B8=cd,U8=Qi(B8),H8=Ja,V8=Qi(H8),W8=dd,X8=Qi(W8);function Qi(a){return a&&a.__esModule?a:{default:a}}qt.EAN13=D8.default;qt.EAN8=$8.default;qt.EAN5=z8.default;qt.EAN2=U8.default;qt.UPC=V8.default;qt.UPCE=X8.default;var Ui={},xl={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.START_BIN="1010";Za.END_BIN="11101";Za.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(xl,"__esModule",{value:!0});var K8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),cs=Za,q8=Yt,Y8=Q8(q8);function Q8(a){return a&&a.__esModule?a:{default:a}}function J8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Z8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ey(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var ty=function(a){ey(e,a);function e(){return J8(this,e),Z8(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return K8(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:cs.START_BIN+o+cs.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=cs.BINARIES[i[1]];return cs.BINARIES[i[0]].split("").map(function(l,c){return(l==="1"?"111":"1")+(o[c]==="1"?"000":"0")}).join("")}}]),e}(Y8.default);xl.default=ty;var hd={};Object.defineProperty(hd,"__esModule",{value:!0});var ry=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ny=xl,iy=ay(ny);function ay(a){return a&&a.__esModule?a:{default:a}}function oy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function sy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ly(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var gf=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},uy=function(a){ly(e,a);function e(n,i){return oy(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=gf(n)),sy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return ry(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===gf(this.data)}}]),e}(iy.default);hd.default=uy;Object.defineProperty(Ui,"__esModule",{value:!0});Ui.ITF14=Ui.ITF=void 0;var cy=xl,dy=G1(cy),hy=hd,fy=G1(hy);function G1(a){return a&&a.__esModule?a:{default:a}}Ui.ITF=dy.default;Ui.ITF14=fy.default;var mr={},li={};Object.defineProperty(li,"__esModule",{value:!0});var gy=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),py=Yt,vy=my(py);function my(a){return a&&a.__esModule?a:{default:a}}function yy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _y(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Sy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var xy=function(a){Sy(e,a);function e(n,i){return yy(this,e),_y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return gy(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),c=l.toString(2);c=wy(c,4-c.length);for(var h=0;h<c.length;h++)i+=c[h]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(vy.default);function wy(a,e){for(var n=0;n<e;n++)a="0"+a;return a}li.default=xy;var fd={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.mod10=Ey;ui.mod11=Cy;function Ey(a){for(var e=0,n=0;n<a.length;n++){var i=parseInt(a[n]);(n+a.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function Cy(a){for(var e=0,n=[2,3,4,5,6,7],i=0;i<a.length;i++){var o=parseInt(a[a.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(fd,"__esModule",{value:!0});var Py=li,by=Ty(Py),Oy=ui;function Ty(a){return a&&a.__esModule?a:{default:a}}function ky(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Ry(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function My(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Ay=function(a){My(e,a);function e(n,i){return ky(this,e),Ry(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Oy.mod10)(n),i))}return e}(by.default);fd.default=Ay;var gd={};Object.defineProperty(gd,"__esModule",{value:!0});var Ny=li,Fy=Ly(Ny),Iy=ui;function Ly(a){return a&&a.__esModule?a:{default:a}}function Dy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Gy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function $y(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var jy=function(a){$y(e,a);function e(n,i){return Dy(this,e),Gy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Iy.mod11)(n),i))}return e}(Fy.default);gd.default=jy;var pd={};Object.defineProperty(pd,"__esModule",{value:!0});var zy=li,By=Uy(zy),pf=ui;function Uy(a){return a&&a.__esModule?a:{default:a}}function Hy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Vy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Wy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Xy=function(a){Wy(e,a);function e(n,i){return Hy(this,e),n+=(0,pf.mod10)(n),n+=(0,pf.mod10)(n),Vy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(By.default);pd.default=Xy;var vd={};Object.defineProperty(vd,"__esModule",{value:!0});var Ky=li,qy=Yy(Ky),vf=ui;function Yy(a){return a&&a.__esModule?a:{default:a}}function Qy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Jy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Zy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var e_=function(a){Zy(e,a);function e(n,i){return Qy(this,e),n+=(0,vf.mod11)(n),n+=(0,vf.mod10)(n),Jy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(qy.default);vd.default=e_;Object.defineProperty(mr,"__esModule",{value:!0});mr.MSI1110=mr.MSI1010=mr.MSI11=mr.MSI10=mr.MSI=void 0;var t_=li,r_=eo(t_),n_=fd,i_=eo(n_),a_=gd,o_=eo(a_),s_=pd,l_=eo(s_),u_=vd,c_=eo(u_);function eo(a){return a&&a.__esModule?a:{default:a}}mr.MSI=r_.default;mr.MSI10=i_.default;mr.MSI11=o_.default;mr.MSI1010=l_.default;mr.MSI1110=c_.default;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.pharmacode=void 0;var d_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),h_=Yt,f_=g_(h_);function g_(a){return a&&a.__esModule?a:{default:a}}function p_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function v_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function m_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var y_=function(a){m_(e,a);function e(n,i){p_(this,e);var o=v_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return d_(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(f_.default);wl.pharmacode=y_;var El={};Object.defineProperty(El,"__esModule",{value:!0});El.codabar=void 0;var __=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),S_=Yt,x_=w_(S_);function w_(a){return a&&a.__esModule?a:{default:a}}function E_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function C_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function P_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var b_=function(a){P_(e,a);function e(n,i){E_(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=C_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return __(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(x_.default);El.codabar=b_;var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.GenericBarcode=void 0;var O_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),T_=Yt,k_=R_(T_);function R_(a){return a&&a.__esModule?a:{default:a}}function M_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function A_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function N_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var F_=function(a){N_(e,a);function e(n,i){return M_(this,e),A_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return O_(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(k_.default);Cl.GenericBarcode=F_;Object.defineProperty(ed,"__esModule",{value:!0});var I_=yl,ds=$r,Gi=qt,mf=Ui,Ga=mr,L_=wl,D_=El,G_=Cl;ed.default={CODE39:I_.CODE39,CODE128:ds.CODE128,CODE128A:ds.CODE128A,CODE128B:ds.CODE128B,CODE128C:ds.CODE128C,EAN13:Gi.EAN13,EAN8:Gi.EAN8,EAN5:Gi.EAN5,EAN2:Gi.EAN2,UPC:Gi.UPC,UPCE:Gi.UPCE,ITF14:mf.ITF14,ITF:mf.ITF,MSI:Ga.MSI,MSI10:Ga.MSI10,MSI11:Ga.MSI11,MSI1010:Ga.MSI1010,MSI1110:Ga.MSI1110,pharmacode:L_.pharmacode,codabar:D_.codabar,GenericBarcode:G_.GenericBarcode};var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});var $_=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a};Ji.default=function(a,e){return $_({},a,e)};var md={};Object.defineProperty(md,"__esModule",{value:!0});md.default=j_;function j_(a){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(a),e}var yd={};Object.defineProperty(yd,"__esModule",{value:!0});yd.default=z_;function z_(a){return a.marginTop=a.marginTop||a.margin,a.marginBottom=a.marginBottom||a.margin,a.marginRight=a.marginRight||a.margin,a.marginLeft=a.marginLeft||a.margin,a}var _d={},Sd={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.default=B_;function B_(a){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof a[n]=="string"&&(a[n]=parseInt(a[n],10)));return typeof a.displayValue=="string"&&(a.displayValue=a.displayValue!="false"),a}var bl={};Object.defineProperty(bl,"__esModule",{value:!0});var U_={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};bl.default=U_;Object.defineProperty(Sd,"__esModule",{value:!0});var H_=Pl,V_=$1(H_),W_=bl,yf=$1(W_);function $1(a){return a&&a.__esModule?a:{default:a}}function X_(a){var e={};for(var n in yf.default)yf.default.hasOwnProperty(n)&&(a.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=a.getAttribute("jsbarcode-"+n.toLowerCase())),a.hasAttribute("data-"+n.toLowerCase())&&(e[n]=a.getAttribute("data-"+n.toLowerCase())));return e.value=a.getAttribute("jsbarcode-value")||a.getAttribute("data-value"),e=(0,V_.default)(e),e}Sd.default=X_;var xd={},wd={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.getTotalWidthOfEncodings=nr.calculateEncodingAttributes=nr.getBarcodePadding=nr.getEncodingHeight=nr.getMaximumHeightOfEncodings=void 0;var K_=Ji,q_=Y_(K_);function Y_(a){return a&&a.__esModule?a:{default:a}}function j1(a,e){return e.height+(e.displayValue&&a.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function z1(a,e,n){if(n.displayValue&&e<a){if(n.textAlign=="center")return Math.floor((a-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(a-e)}return 0}function Q_(a,e,n){for(var i=0;i<a.length;i++){var o=a[i],l=(0,q_.default)(e,o.options),c;l.displayValue?c=e9(o.text,l,n):c=0;var h=o.data.length*l.width;o.width=Math.ceil(Math.max(c,h)),o.height=j1(o,l),o.barcodePadding=z1(c,h,l)}}function J_(a){for(var e=0,n=0;n<a.length;n++)e+=a[n].width;return e}function Z_(a){for(var e=0,n=0;n<a.length;n++)a[n].height>e&&(e=a[n].height);return e}function e9(a,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(a);if(!o)return 0;var l=o.width;return l}nr.getMaximumHeightOfEncodings=Z_;nr.getEncodingHeight=j1;nr.getBarcodePadding=z1;nr.calculateEncodingAttributes=Q_;nr.getTotalWidthOfEncodings=J_;Object.defineProperty(wd,"__esModule",{value:!0});var t9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),r9=Ji,n9=i9(r9),gc=nr;function i9(a){return a&&a.__esModule?a:{default:a}}function a9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var o9=function(){function a(e,n,i){a9(this,a),this.canvas=e,this.encodings=n,this.options=i}return t9(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,n9.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,gc.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,gc.getTotalWidthOfEncodings)(this.encodings),o=(0,gc.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,c;n.textPosition=="top"?c=n.marginTop+n.fontSize+n.textMargin:c=n.marginTop,o.fillStyle=n.lineColor;for(var h=0;h<l.length;h++){var f=h*n.width+i.barcodePadding;l[h]==="1"?o.fillRect(f,c,n.width,n.height):l[h]&&o.fillRect(f,c,n.width,n.height*l[h])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var c,h;n.textPosition=="top"?h=n.marginTop+n.fontSize-n.textMargin:h=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(c=0,o.textAlign="left"):n.textAlign=="right"?(c=i.width-1,o.textAlign="right"):(c=i.width/2,o.textAlign="center"),o.fillText(i.text,c,h)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),a}();wd.default=o9;var Ed={};Object.defineProperty(Ed,"__esModule",{value:!0});var s9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l9=Ji,u9=c9(l9),pc=nr;function c9(a){return a&&a.__esModule?a:{default:a}}function d9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var hs="http://www.w3.org/2000/svg",h9=function(){function a(e,n,i){d9(this,a),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return s9(a,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,u9.default)(this.options,o.options),c=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(c,l),this.drawSvgBarcode(c,l,o),this.drawSVGText(c,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,pc.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,pc.getTotalWidthOfEncodings)(this.encodings),i=(0,pc.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,c;i.textPosition=="top"?c=i.fontSize+i.textMargin:c=0;for(var h=0,f=0,p=0;p<l.length;p++)f=p*i.width+o.barcodePadding,l[p]==="1"?h++:h>0&&(this.drawRect(f-i.width*h,c,i.width*h,i.height,n),h=0);h>0&&this.drawRect(f-i.width*(h-1),c,i.width*h,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(hs,"text");if(i.displayValue){var c,h;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?h=i.fontSize-i.textMargin:h=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(c=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(c=o.width-1,l.setAttribute("text-anchor","end")):(c=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",c),l.setAttribute("y",h),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",hs),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(hs,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,c){var h=this.document.createElementNS(hs,"rect");return h.setAttribute("x",n),h.setAttribute("y",i),h.setAttribute("width",o),h.setAttribute("height",l),c.appendChild(h),h}}]),a}();Ed.default=h9;var Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});var f9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function g9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var p9=function(){function a(e,n,i){g9(this,a),this.object=e,this.encodings=n,this.options=i}return f9(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a}();Cd.default=p9;Object.defineProperty(xd,"__esModule",{value:!0});var v9=wd,m9=Pd(v9),y9=Ed,_9=Pd(y9),S9=Cd,x9=Pd(S9);function Pd(a){return a&&a.__esModule?a:{default:a}}xd.default={CanvasRenderer:m9.default,SVGRenderer:_9.default,ObjectRenderer:x9.default};var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});function bd(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Od(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Td(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var w9=function(a){Td(e,a);function e(n,i){bd(this,e);var o=Od(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),E9=function(a){Td(e,a);function e(){bd(this,e);var n=Od(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),C9=function(a){Td(e,a);function e(){bd(this,e);var n=Od(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);Zi.InvalidInputException=w9;Zi.InvalidElementException=E9;Zi.NoElementException=C9;Object.defineProperty(_d,"__esModule",{value:!0});var P9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b9=Sd,Ac=B1(b9),O9=xd,za=B1(O9),T9=Zi;function B1(a){return a&&a.__esModule?a:{default:a}}function kd(a){if(typeof a=="string")return k9(a);if(Array.isArray(a)){for(var e=[],n=0;n<a.length;n++)e.push(kd(a[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return R9(a);if(a&&a.nodeName&&a.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,Ac.default)(a),renderer:za.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,Ac.default)(a),renderer:za.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:za.default.CanvasRenderer};if(a&&(typeof a>"u"?"undefined":P9(a))==="object"&&!a.nodeName)return{element:a,renderer:za.default.ObjectRenderer};throw new T9.InvalidElementException}}function k9(a){var e=document.querySelectorAll(a);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(kd(e[i]));return n}}function R9(a){var e=document.createElement("canvas");return{element:e,options:(0,Ac.default)(a),renderer:za.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",e.toDataURL())}}}_d.default=kd;var Rd={};Object.defineProperty(Rd,"__esModule",{value:!0});var M9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function A9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var N9=function(){function a(e){A9(this,a),this.api=e}return M9(a,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),a}();Rd.default=N9;var F9=ed,Yn=Mn(F9),I9=Ji,to=Mn(I9),L9=md,U1=Mn(L9),D9=yd,_f=Mn(D9),G9=_d,$9=Mn(G9),j9=Pl,z9=Mn(j9),B9=Rd,U9=Mn(B9),H1=Zi,H9=bl,V1=Mn(H9);function Mn(a){return a&&a.__esModule?a:{default:a}}var rn=function(){},Ol=function(e,n,i){var o=new rn;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,$9.default)(e),o._encodings=[],o._options=V1.default,o._errorHandler=new U9.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=X1()),o.options(i)[i.format](n,i).render()),o};Ol.getModule=function(a){return Yn.default[a]};for(var Sf in Yn.default)Yn.default.hasOwnProperty(Sf)&&V9(Yn.default,Sf);function V9(a,e){rn.prototype[e]=rn.prototype[e.toUpperCase()]=rn.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,to.default)(o._options,i);l=(0,z9.default)(l);var c=a[e],h=W1(n,c,l);return o._encodings.push(h),o})}}function W1(a,e,n){a=""+a;var i=new e(a,n);if(!i.valid())throw new H1.InvalidInputException(i.constructor.name,a);var o=i.encode();o=(0,U1.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,to.default)(n,o[l].options);return o}function X1(){return Yn.default.CODE128?"CODE128":Object.keys(Yn.default)[0]}rn.prototype.options=function(a){return this._options=(0,to.default)(this._options,a),this};rn.prototype.blank=function(a){var e=new Array(a+1).join("0");return this._encodings.push({data:e}),this};rn.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var a;for(var e in this._renderProperties){a=this._renderProperties[e];var n=(0,to.default)(this._options,a.options);n.format=="auto"&&(n.format=X1()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Yn.default[n.format.toUpperCase()],l=W1(i,o,n);Nc(a,l,n)})}}};rn.prototype.render=function(){if(!this._renderProperties)throw new H1.NoElementException;if(Array.isArray(this._renderProperties))for(var a=0;a<this._renderProperties.length;a++)Nc(this._renderProperties[a],this._encodings,this._options);else Nc(this._renderProperties,this._encodings,this._options);return this};rn.prototype._defaults=V1.default;function Nc(a,e,n){e=(0,U1.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,to.default)(n,e[i].options),(0,_f.default)(e[i].options);(0,_f.default)(n);var o=a.renderer,l=new o(a.element,e,n);l.render(),a.afterRender&&a.afterRender()}typeof window<"u"&&(window.JsBarcode=Ol);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(a,e){var n=[];return jQuery(this).each(function(){n.push(this)}),Ol(n,a,e)});var W9=Ol;const X9=Es(W9),$i=Xg.apiUrl;function K9(){const[a,e]=A.useState("checkbox"),[n,i]=A.useState([]),[o,l]=A.useState(""),[c]=es(),[h]=es(),[f]=es(),[p]=es(),[m,C]=A.useState(!1),[w,_]=A.useState(!1),[y,E]=A.useState({}),[P,T]=A.useState(!1),[k,v]=A.useState({}),[x,b]=A.useState(!1),[R,U]=A.useState(!1),[O,G]=A.useState(!1),[M,L]=A.useState(!1),[V,X]=A.useState(!1),[Z,K]=A.useState(!1),[se,he]=A.useState(!1),[fe,Oe]=A.useState(!1),[Q,Y]=A.useState({}),[ve,ke]=A.useState([]),[we,qe]=A.useState(""),[Ge,F]=A.useState([]),[H,ie]=A.useState({}),[ge,de]=A.useState(!1),[Ie,Fe]=A.useState({}),[At,Re]=A.useState(!1),[gt,Ye]=A.useState([]),[Me,ct]=A.useState(null),[pt,je]=A.useState([]),[ze,dt]=A.useState(!1),[Qt,Br]=A.useState(!1),[ea,An]=A.useState(!1),[_r,ta]=A.useState([]),[ra,na]=A.useState(""),[ia,ir]=A.useState([]),[ln,ci]=A.useState(!1),[aa,Nn]=A.useState(!1),[Ur,oa]=A.useState(""),[J,me]=A.useState([]),[vt,Nt]=A.useState([]),[Hr,un]=A.useState([]),[sa,la]=A.useState(""),[ua,ro]=A.useState([]),[Tl,ca]=A.useState(!1);let da={};const[di,ha]=A.useState([]),[kl,hi]=A.useState([]),fi={action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",multiple:!1,onRemove:()=>{hi([])},beforeUpload:async z=>{try{const W=z.name.toLowerCase();if(W.endsWith(".xls")||W.endsWith(".xlsx")||W.endsWith(".xlsm")||W.endsWith(".xlsb")||W.endsWith(".csv")||W.endsWith(".ods")){let ne=[{uid:"-1",name:z.name,status:"done",url:""}];hi(ne);const ee=new FileReader;return ee.onload=ue=>{const Se=ue.target.result,Ke=Vg(Se,{type:"buffer"}),at=Ke.SheetNames[0],zt=Ke.Sheets[at],mt=Wg.sheet_to_json(zt,{header:1});let Ht=[];if(mt.length>=2)for(let sr=1;sr<mt.length;sr++){let Vl={product_code:mt[sr][0]?mt[sr][0]:"",barcode:mt[sr][1]?mt[sr][1]:"",product_name:mt[sr][2],product_description:mt[sr][3],url_images:JSON.parse(mt[sr][4])};Ht.push(Vl)}console.log(Ht),ha(Ht)},ee.readAsArrayBuffer(z),!1}else return be.error("Đã xảy ra lỗi, không đúng định dạng file: xls, xlsx, xlsm, xlsb, csv, ods"),!1}catch{return be.error("File không chính xác, tải dữ liệu mẫu để tiếp tục"),!1}}},Rl={beforeUpload:async z=>{const W=z.type==="image/jpeg"||z.type==="image/png";if(!W)return be.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),W;const ne=z.size/1024/1024<2;if(!ne)return be.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),ne;const ee=new FormData,ue={file:z,category_name:Q.name};for(const[Ke,at]of Object.entries(ue))ee.append(Ke,at);const Se=await $t.post("/api/method/mbw_audit.api.api.upload_file_for_product",ee);return Se.message=="ok"?(F(Ke=>[...Ke,Se.result.file_url]),be.success("Tải ảnh thành công")):be.error("Tải ảnh thất bại"),!1}},Ml={onRemove:z=>{},beforeUpload:async z=>{const W=z.type==="image/jpeg"||z.type==="image/png";if(!W)return be.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),W;const ne=z.size/1024/1024<2;if(!ne)return be.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),ne;const ee=new FormData,ue={file:z,category_name:Q.name};for(const[Ke,at]of Object.entries(ue))ee.append(Ke,at);const Se=await $t.post("/api/method/mbw_audit.api.api.upload_file_for_product",ee);return Se.message=="ok"?(Ye(Ke=>[...Ke,Se.result.file_url]),be.success("Tải ảnh thành công")):be.error("Tải ảnh thất bại"),!1}},Al={onRemove:()=>{un([])},action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",accept:"image/png, image/jpeg",beforeUpload:async z=>{const W=z.type==="image/jpeg"||z.type==="image/png";if(!W)return be.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),W;const ne=z.size/1024/1024<2;if(!ne)return be.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),ne;const ee=new FormData,ue={file:z};for(const[Ke,at]of Object.entries(ue))ee.append(Ke,at);const Se=await $t.post("/api/method/mbw_audit.api.api.upload_file_for_checking",ee);if(Se.message=="ok"){let Ke=[],at={uid:"-1",name:Se.result.date_time,status:"done",url:Se.result.file_url};Ke.push(at),un(Ke),ta(zt=>[...zt,Se.result.file_url]),be.success("Tải ảnh thành công")}else be.error("Tải ảnh thất bại");return!1}},Nl=[{title:"Mã Sản phẩm",dataIndex:"product_code",render:z=>D.jsx("div",{children:z})},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Hành động",key:"action",render:(z,W)=>D.jsxs(D.Fragment,{children:[D.jsx(yc,{className:"mr-4",onClick:()=>Et(W)}),D.jsx(Xu,{onClick:()=>vi(W)})]})}],Fl={onChange:(z,W)=>{je(W),W.length>0?dt(!0):dt(!1)}},Fn=async()=>{try{let z='/api/resource/VGM_Category?fields=["*"]';if(o!=null&&o!=""){let ne=`[["category_name", "like", "%${o}%"]]`;z+=`&filters=${ne}`}const W=await $t.get(z);if(W&&W.data){let ne=W.data.map((ee,ue)=>({...ee,key:ee.name,hidden:!0,selected:ue===0}));i(ne),ne.length>0&&Y(ne[0])}}catch{}finally{}};A.useEffect(()=>{Fn()},[]),A.useEffect(()=>{Fn()},[o]);const Il=z=>{l(z.target.value)},Ll=(z,W)=>{i(ne=>ne.map(ee=>ee.key===W.key?{...ee,hidden:!1}:ee))},Dl=(z,W)=>{i(ne=>ne.map(ee=>ee.key===W.key?{...ee,hidden:!0}:ee))},Gl=z=>{let W={item:z,title:"Xóa "+z.category_name,contentConfirm:"Bạn có chắc muốn xóa "+z.category_name+" ra khỏi hệ thống không?",contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};E(W),T(!0)},$l=async()=>{if(y!=null&&y.item!=null){let z=[];z=[y.item.name];let W=$i+".api.deleteListByDoctype",ne={doctype:"VGM_Category",items:JSON.stringify(z)},ee=await $t.post(W,ne);ee!=null&&ee.message!=null&&ee.message.status=="success"?(be.success("Xóa thành công"),Fn(),no()):be.error("Xóa thất bại, Danh mục này đang được sử dụng")}},no=()=>{T(!1),E({})},jl=z=>{h.setFieldsValue({name_item:z.category_name,des:z.category_description}),v(z),b(!0)},io=async()=>{G(!0);let z=h.getFieldsValue();if(k!=null&&k.name!=null){let W=`/api/resource/VGM_Category/${k.name}`,ne={category_name:z.name_item,category_description:z.des},ee=await $t.put(W,ne);ee!=null&&ee.data!=null?(be.success("Sửa thành công"),G(!1),Fn(),In()):(be.error("Sửa thất bại"),G(!1))}},In=()=>{v({}),b(!1)},Ln=()=>{_(!0)},gi=async()=>{U(!0);const z=c.getFieldsValue(),W=z.name_item.trim();if(!W){be.warning("Vui lòng nhập tên danh mục.");return}if(n.some(ee=>ee.category_name.toLowerCase()===W.toLowerCase())){be.error("Danh mục đã tồn tại."),U(!1);return}try{const ee={doc:JSON.stringify({doctype:"VGM_Category",category_name:W,category_description:z.des}),action:"Save"},ue=await $t.post("/api/method/frappe.desk.form.save.savedocs",ee);ue&&ue.docs&&ue.docs.length>0?(c.resetFields(),be.success("Thêm mới thành công"),U(!1),Fn(),_(!1)):(be.error("Thêm mới thất bại"),U(!1))}catch{be.error("Đã xảy ra lỗi khi thêm mới danh mục.")}},pi=()=>{_(!1)},zl=z=>{Y(z),i(W=>W.map(ne=>ne.key===z.key?{...ne,selected:!0}:{...ne,selected:!1}))};A.useEffect(()=>{ar()},[Q]),A.useEffect(()=>{Me!=null&&Me!=""&&Sr(Me)},[Me]),A.useEffect(()=>{ar()},[we]);const ar=async()=>{let z="";we!=null&&we!=""?z=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${Q.name}"],["product_name","like","%${we}%"]]`:z=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${Q.name}"]]`;let W=await $t.get(z);if(W&&W.data){let ne=W.data.map(ee=>({...ee,key:ee.name,category_name:Q.category_name}));ke(ne)}},cn=z=>{qe(z.target.value)},Rr=()=>{f.resetFields(),Dn([]),L(!1);let z=document.getElementById("barcode");z&&(z.innerHTML=""),Q!=null&&Q.name!=null&&C(!0)},Ue=async()=>{L(!0);let z=f.getFieldsValue();if(ve.filter(Ke=>Ke.product_code.toLowerCase()==z.product_code.toLowerCase()).length>0){be.error("Mã sản phẩm đã tồn tại");return}let ne=[];for(let Ke=0;Ke<Ge.length;Ke++)ne.push(Ge[Ke]);if(!z.product_name||ne.length===0){be.error("Vui lòng nhập tên sản phẩm và tải lên ít nhất một hình ảnh");return}let ee="/api/resource/VGM_Product",ue={barcode:z.barcode_product,product_code:z.product_code!=null?z.product_code.trim():null,product_name:z.product_name!=null?z.product_name.trim():null,product_description:z.product_description!=null?z.product_description.trim():null,category:Q.name,images:JSON.stringify(ne)},Se=await $t.post(ee,ue);if(Se!=null&&Se.data!=null){be.success("Thêm mới thành công"),L(!1),f.resetFields();let Ke=document.getElementById("barcode");Ke.innerHTML="",F([]),ar(),or()}else be.error("Thêm mới thất bại"),L(!1)},He=z=>{Sr(z.target.value)},or=()=>{C(!1)},Et=z=>{Fe(z),Re(!0),p.setFieldsValue({product_code:z.product_code,barcode_product:z.barcode,product_name:z.product_name,product_description:z.product_description}),ct(z.barcode);let W=JSON.parse(z.images),ne=[];for(let ee=0;ee<W.length;ee++){let ue={uid:ee,url:W[ee],url_base:W[ee]};ne.push(ue)}lo(ne)},Ft=z=>{Sr(z.target.value)},Sr=z=>{X9("#barcode",z,{width:4,height:40,displayValue:!0,font:"Arial",text:z,textMargin:10,fontSize:13,background:"#F5F7FA"})},Vr=async()=>{X(!0);let z=[],W=p.getFieldsValue();for(let Se=0;Se<Gn.length;Se++)Gn[Se].url_base!=null&&Gn[Se].url_base!=""&&z.push(Gn[Se].url_base);if(gt!=null)for(let Se=0;Se<gt.length;Se++)z.push(gt[Se].file_url);let ne=`/api/resource/VGM_Product/${Ie.name}`,ee={barcode:W.barcode_product,product_code:W.product_code!=null?W.product_code.trim():null,product_name:W.product_name!=null?W.product_name.trim():null,product_description:W.product_description!=null?W.product_description.trim():null,category:Q.name,images:JSON.stringify(z)},ue=await $t.put(ne,ee);if(ue!=null&&ue.data!=null){be.success("Sửa thành công"),X(!1),p.resetFields();let Se=document.getElementById("barcode");Se.innerHTML="",Ye([]),ar(),Ct()}else be.error("Sửa thất bại"),X(!1)},Ct=()=>{Re(!1)},vi=z=>{let W={item:z,title:`Xóa ${z.product_name}`,contentConfirm:`Bạn có chắc muốn xóa ${z.product_name} ra khỏi hệ thống không?`,contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};ie(W),de(!0)},ao=async()=>{let z=[];z=[H.item.name];let W=$i+".api.deleteListByDoctype",ne={doctype:"VGM_Product",items:JSON.stringify(z)},ee=await $t.post(W,ne);ee!=null&&ee.message!=null&&ee.message.status=="success"?(be.success("Xóa thành công"),ie({}),ar(),fa()):be.error("Xóa thất bại , Sản phẩm đang được sử dụng")},fa=()=>{de(!1)},mi=()=>{Br(!0)},oo=async()=>{let z=$i+".api.deleteListByDoctype",W=[];for(let ue=0;ue<pt.length;ue++)W.push(pt[ue].name);let ne={doctype:"VGM_Product",items:JSON.stringify(W)},ee=await $t.post(z,ne);ee!=null&&ee.message!=null&&ee.message.status=="success"?(be.success("Xóa thành công"),je([]),dt(!1),ar(),Ut()):be.error("Xóa thất bại")},Ut=()=>{Br(!1)},Bl=()=>{An(!0)},so=async()=>{K(!0);let z=$i+".api.checkImageProductExist";console.log(_r);let W={collection_name:Q.name,linkimages:_r.length>0?_r[_r.length-1]:""},ne=await $t.post(z,W),ee=[];for(let ue=0;ue<ve.length;ue++)ee.push({key:ve[ue].name,product_code:ve[ue].product_code,product_name:ve[ue].product_name,product_count:0});if(ne!=null&&ne.message!=null){la("data:image/png;base64,"+ne.message.results.verbose[0].base64_image);let ue=[];ee.forEach(Se=>{ne.message.results.count[Se.product_name]!=null&&(Se.product_count=ne.message.results.count[Se.product_name]);let zt=ne.message.results.verbose[0].locates.filter(function(mt){return mt.label===Se.product_name}).map(function(mt){let Ht=mt.bbox;return{x:Ht[0],y:Ht[1],width:Ht[2]-Ht[0],height:Ht[3]-Ht[1],label:mt.label}});ue=ue.concat(zt)}),ro(ue)}na(_r.length>0?_r[_r.length-1]:""),K(!1),ir(ee),ci(!0),Wr()},Ul=()=>{const z="0123456789ABCDEF";let W="#";for(let ne=0;ne<6;ne++)W+=z[Math.floor(Math.random()*16)];return W};ua.forEach(z=>{da[z.label]||(da[z.label]=Ul())});const Wr=()=>{un([]),An(!1)},yi=()=>{ci(!1)},[dn,Dn]=A.useState([]),[Gn,lo]=A.useState([]),ga=({fileList:z})=>{Dn(z)},uo=({fileList:z})=>{lo(z)},_i=async z=>{let W=z.url;W||(W=await new Promise(ue=>{const Se=new FileReader;Se.readAsDataURL(z.originFileObj),Se.onload=()=>ue(Se.result)}));const ne=new Image;ne.src=W,window.open(W)?.document.write(ne.outerHTML)},$n=()=>{Nn(!0)},co=()=>{Nn(!1)},pa=z=>{oa(z.target.value)},Ae=()=>{ca(!1),hi([])};A.useEffect(()=>{po()},[Ur]);const ho=J.length>0,go={productFromERPSelected:J,onChange:(z,W)=>{me(W)}};A.useEffect(()=>{po()},[]);const po=async()=>{let z="/api/method/mbw_dms.api.selling.product.list_product";Ur!=null&&Ur!=""&&(z=`${z}?item_name=${Ur.trim()}`);let W=await $t.get(z),ne=[];W!=null&&W.result!=null&&W.result.data!=null&&(ne=W.result.data.map(ee=>({...ee,key:ee.name}))),Nt(ne)},Hl=async()=>{he(!0);let z=[];for(let ue=0;ue<J.length;ue++){let Se={product_code:J[ue].item_code,barcode:J[ue].item_code,product_name:J[ue].item_name,product_description:J[ue].description,url_images:J[ue].image!=null&&J[ue].image!=""?[J[ue].image]:[]};z.push(Se)}let W={listproduct:JSON.stringify(z),category:Q.name},ne=$i+".api.import_product",ee=await $t.post(ne,W);ee!=null&&ee.message!=null&&ee.message.status=="success"?(be.success("Thêm mới thành công"),he(!1),me([]),ar(),co()):(be.error("Thêm mới thất bại"),he(!1))},ht=()=>{ca(!0),hi([])},Si=async()=>{if(di&&di.length>0){Oe(!0);let z={listproduct:JSON.stringify(di),category:Q.name},W=$i+".api.import_product",ne=await $t.post(W,z);ne!=null&&ne.message!=null&&ne.message.status=="success"?(be.success("Thêm mới thành công"),Oe(!1),ar(),ca(!1)):(be.error("Thêm mới thất bại"),Oe(!1))}else be.error("File không chính xác, tải dữ liệu mẫu để tiếp tục")};return D.jsxs(D.Fragment,{children:[D.jsx($g,{title:"Sản phẩm",buttons:[ze&&{label:"Xóa",type:"primary",icon:D.jsx(Xu,{}),size:"20px",className:"flex items-center mr-2",danger:!0,action:mi},{label:"Nhập file",icon:D.jsx(Hg,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:ht},{label:"Thêm sản phẩm từ ERP",icon:D.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:$n},{label:"Kiểm tra sản phẩm",type:"primary",icon:D.jsx(sp,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:Bl},{label:"Thêm mới",type:"primary",icon:D.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center",action:Rr}]}),D.jsxs(Ef,{gutter:16,children:[D.jsx(vc,{span:18,push:6,children:D.jsxs("div",{className:"bg-white rounded-xl border-[#DFE3E8] border-[0.2px] border-solid",children:[D.jsx(Mt,{className:"w-[320px] border-none p-4",children:D.jsx(Pr,{value:we,onChange:cn,placeholder:"Tìm kiếm sản phẩm",prefix:D.jsx(Ku,{})})}),D.jsx("div",{className:"pt-3",children:D.jsx(c0,{rowSelection:{type:a,...Fl},columns:Nl,dataSource:ve})})]})}),D.jsx(vc,{span:6,pull:18,children:D.jsxs("div",{className:"bg-white rounded-xl p-4 border-[#DFE3E8] border-[0.2px] border-solid",children:[D.jsxs("div",{className:"flex justify-between items-center",children:[D.jsx("div",{children:D.jsx("p",{className:"text-base leading-5 font-medium text-[#212B36]",children:"Danh mục"})}),D.jsx("div",{className:"cursor-pointer",onClick:Ln,children:D.jsx(qu,{})})]}),D.jsx("div",{className:"py-3",children:D.jsx(Mt,{className:"w-full border-none",name:"filter_category",children:D.jsx(Pr,{onChange:Il,value:o,placeholder:"Tìm kiếm danh mục",prefix:D.jsx(Ku,{})})})}),D.jsx(Sc,{style:{maxHeight:"calc(100vh - 500px)",overflow:"auto",paddingRight:"10px"},header:!1,footer:!1,bordered:!1,dataSource:n,renderItem:z=>D.jsx(Sc.Item,{onMouseEnter:W=>Ll(W,z),onMouseLeave:W=>Dl(W,z),onClick:()=>zl(z),children:D.jsxs("div",{className:"item_category",children:[D.jsxs("span",{className:`${z.selected?"selected":""}`,children:[D.jsx(np.Text,{})," ",z.category_name]}),D.jsxs("span",{style:{display:z.hidden?"none":"block"},children:[D.jsx("span",{style:{marginRight:"10px"},children:D.jsx(yc,{onClick:()=>jl(z)},"edit")}),D.jsx("span",{onClick:()=>Gl(z),children:D.jsx(Xu,{},"delete")})]})]})})})]})})]}),D.jsxs(br,{title:"Kiểm tra ảnh sản phẩm",open:ea,width:777,afterClose:Wr,onOk:so,onCancel:Wr,footer:[D.jsx(er,{onClick:Wr,children:"Hủy"},"back"),D.jsx(er,{type:"primary",onClick:so,loading:Z,children:"Kiểm tra"},"submit")],children:[D.jsx("p",{className:"text-[#637381] font-normal text-sm",children:"Chọn ảnh sản phẩm bất kì để kiểm tra nhận diện sản phẩm"}),D.jsxs(_c,{...Al,fileList:Hr,children:[D.jsx("p",{className:"ant-upload-drag-icon",children:D.jsx(qu,{})}),D.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn ảnh để tải lên"})]})]}),D.jsxs(br,{title:"Kiểm tra ảnh sản phẩm",open:ln,width:920,onCancel:yi,footer:null,children:[D.jsxs("div",{style:{marginBottom:"20px",display:"flex"},children:[D.jsx("img",{src:ra,style:{width:"450px",height:"450px",marginRight:"20px"}}),D.jsx(h5,{imageSrc:sa,objectBoxes:ua,labelColors:da})]}),D.jsxs("div",{children:[D.jsx("div",{children:"Kết quả kiểm tra hình ảnh:"}),D.jsx(jg,{dataSource:ia,columns:[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"},{title:"Số lượng",dataIndex:"product_count",key:"product_count"}],pagination:!1})]})]}),D.jsxs(br,{width:990,title:"Thêm sản phẩm từ ERP",open:aa,onCancel:co,footer:!1,children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx(Mt,{className:"w-[320px] border-none pt-4",children:D.jsx(Pr,{value:Ur,onChange:pa,placeholder:"Tìm kiếm sản phẩm",prefix:D.jsx(Ku,{})})}),D.jsxs("div",{children:[D.jsx("span",{style:{marginRight:8},children:ho?`Đã chọn ${J.length} danh mục`:""}),D.jsx(er,{type:"primary",onClick:Hl,loading:se,children:"Thêm"})]})]}),D.jsx("div",{className:"pt-4",children:D.jsx(c0,{rowSelection:go,columns:[{title:"Mã sản phẩm",dataIndex:"item_code",key:"item_code"},{title:"Tên sản phẩm",dataIndex:"item_name",key:"item_name"},{title:"Danh mục",dataIndex:"item_group",key:"item_group"}],dataSource:vt})})]}),D.jsx(br,{title:"Thêm mới sản phẩm",open:m,onOk:Ue,onCancel:or,width:1e3,footer:[D.jsx(er,{onClick:or,children:"Hủy"},"back"),D.jsx(er,{type:"primary",onClick:Ue,loading:M,children:"Lưu"},"submit")],children:D.jsx("div",{className:"pt-4",children:D.jsxs(ts,{layout:"vertical",form:f,children:[D.jsx(Mt,{label:"Mã sản phẩm",name:"product_code",required:!0,children:D.jsx(Pr,{})}),D.jsx(Mt,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:D.jsx(Pr,{onChange:z=>He(z)})}),D.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:D.jsx("svg",{id:"barcode"})}),D.jsx(Mt,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:D.jsx(Pr,{})}),D.jsx(Mt,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:D.jsx($a,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),D.jsx(Mt,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:D.jsx(v0,{...Rl,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:dn,onChange:ga,onPreview:_i,children:dn.length<5&&"+ Upload"})})]})})}),D.jsx(br,{title:"Sửa sản phẩm",open:At,onOk:Vr,onCancel:Ct,width:1e3,footer:[D.jsx(er,{onClick:Ct,children:"Hủy"},"back"),D.jsx(er,{type:"primary",onClick:Vr,loading:V,children:"Lưu"},"submit")],children:D.jsx("div",{className:"pt-4",children:D.jsxs(ts,{layout:"vertical",form:p,children:[D.jsx(Mt,{label:"Mã sản phẩm",name:"product_code",required:!0,children:D.jsx(Pr,{})}),D.jsx(Mt,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:D.jsx(Pr,{onChange:z=>Ft(z)})}),D.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:D.jsx("svg",{id:"barcode"})}),D.jsx(Mt,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:D.jsx(Pr,{})}),D.jsx(Mt,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:D.jsx($a,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),D.jsx(Mt,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:D.jsx(v0,{...Ml,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:Gn,onChange:uo,onPreview:_i,children:"+ Upload"})})]})})}),D.jsxs(br,{title:H.title,open:ge,onOk:ao,onCancel:fa,okText:"Xác nhận",cancelText:"Hủy",children:[D.jsx("div",{children:H.contentConfirm}),D.jsx("div",{children:H.contentRemind})]}),D.jsxs(br,{title:`Xóa ${pt.length} sản phẩm?`,open:Qt,onOk:oo,onCancel:Ut,okText:"Xác nhận",cancelText:"Hủy",children:[D.jsxs("div",{children:["Bạn có chắc muốn xóa ",pt.length," sản phẩm ra khỏi hệ thống không?"]}),D.jsx("div",{children:"Khi thực hiện hành động này, sẽ không thể hoàn tác."})]}),D.jsx(br,{title:"Thêm mới danh mục",open:w,onOk:gi,onCancel:pi,width:600,footer:[D.jsx(er,{onClick:pi,children:"Hủy"},"back"),D.jsx(er,{type:"primary",onClick:gi,loading:R,children:"Lưu"},"submit")],children:D.jsx("div",{className:"pt-4",children:D.jsxs(ts,{layout:"vertical",form:c,children:[D.jsx(Mt,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:D.jsx(Pr,{})}),D.jsx(Mt,{className:"pt-3",label:"Mô tả",name:"des",children:D.jsx($a,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})})]})})}),D.jsx(br,{title:"Sửa danh mục",open:x,onOk:io,onCancel:In,width:600,footer:[D.jsx(er,{onClick:In,children:"Hủy"},"back"),D.jsx(er,{type:"primary",onClick:io,loading:O,children:"Lưu"},"submit")],children:D.jsx("div",{className:"pt-4",children:D.jsxs(ts,{layout:"vertical",form:h,children:[D.jsx(Mt,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:D.jsx(Pr,{value:k.category_name})}),D.jsx(Mt,{className:"pt-3",label:"Mô tả",name:"des",children:D.jsx($a,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5},value:k.category_description})})]})})}),D.jsxs(br,{title:y.title,open:P,onOk:$l,onCancel:no,okText:"Xác nhận",cancelText:"Hủy",children:[D.jsx("div",{children:y.contentConfirm}),D.jsx("div",{children:y.contentRemind})]}),D.jsxs(br,{title:"Nhập dữ liệu từ tệp excel",open:Tl,width:777,onOk:Si,onCancel:Ae,footer:[D.jsx(er,{onClick:Ae,children:"Hủy"},"back"),D.jsx(er,{type:"primary",onClick:Si,loading:fe,children:"Lưu lại"},"submit")],children:[D.jsxs("p",{className:"text-[#637381] font-normal text-sm",children:["Chọn file excel có định dạng .xlsx để thực hiện nhập dữ liệu. Tải dữ liệu mẫu"," ",D.jsx("a",{target:"_blank",href:"/mbw_audit/data_sample/product_sample.xlsx",children:"tại đây"})]}),D.jsxs(_c,{...fi,fileList:kl,children:[D.jsx("p",{className:"ant-upload-drag-icon",children:D.jsx(qu,{})}),D.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn tệp để tải lên"})]})]})]})}function t7(){return D.jsxs(D.Fragment,{children:[D.jsx(zg,{children:D.jsx("title",{children:"Sản phẩm"})}),D.jsx(K9,{})]})}export{t7 as default};
