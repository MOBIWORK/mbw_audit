import{r as n,z as ce,E as de,s as y,j as e,aL as W,C as _,g as w,a2 as P,S as ee,a5 as X,a6 as te,T as ue,a7 as me,u as ge,F as ne,H as ae,aQ as se,aM as pe,A as Y,d as he}from"./main-z1F77frH.js";import{I as J}from"./index-iSRDxZH3.js";import{C as xe,a as fe}from"./CloseCircleOutlined-s7rPS5Z0.js";import{F as Ae,P as je}from"./view-8NFvA5LB.js";var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const ye=Ie;var be=function(a,f){return n.createElement(ce,de({},a,{ref:f,icon:ye}))};const re=n.forwardRef(be),oe="data:image/png;base64,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";function Re({form:t,recordData:a,onChangeScoringHuman:f}){const[N,x]=n.useState([]),[S,k]=n.useState([]),[I,z]=n.useState(0),[b,v]=n.useState(0),[E,R]=n.useState(0),[B,o]=n.useState([{label:"Đạt",value:1},{label:"Không đạt",value:0}]),[s,i]=n.useState(!1),[p,C]=n.useState(!1);n.useEffect(()=>{if(a){t.setFieldsValue({store:a.customer_name,campaign_name:a.campaign_name,employee_code:a.employee_name,quatity:a.quantity_cate,time_report:M(a.images_time),scoring_machine:a.scoring_machine==1?"Đạt":a.scoring_machine==0?"Không đạt":"",scoring_human:a.scoring_human}),R(a.scoring_human);let l=[];a.images!=null&&a.images!=""&&(l=JSON.parse(a.images)),l.length===0&&i(!0);let h=[];a.images_ai!=null&&a.images_ai!=""&&(h=JSON.parse(a.images_ai)),h.length===0&&(C(!0),y.warning("không tải được ảnh AI")),x(l),k(h)}},[a]);const g=l=>{z(l)},F=l=>{v(l)},U=()=>{I>0&&z(I-1)},q=()=>{I<N.length-1&&z(I+1)},V=()=>{b>0&&v(b-1)},T=()=>{b<S.length-1&&v(b+1)},Z=l=>{R(l),f(l)},M=l=>{let h=new Date(l),K=h.getDate(),Q=h.getMonth()+1,L=h.getFullYear(),G=h.getHours(),H=h.getMinutes();return`${K.toString().padStart(2,"0")}/${Q.toString().padStart(2,"0")}/${L} ${G.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 pt-6 pb-[40px]",children:[e.jsxs(W,{children:[e.jsx(_,{span:8,children:e.jsx(w,{label:"Khách hàng",name:"store",className:"pt-3",required:!0,children:e.jsx(P,{readOnly:!0})})}),e.jsx(_,{span:8,children:e.jsx(w,{label:"Chiến dịch",name:"campaign_name",className:"pt-3",required:!0,children:e.jsx(P,{readOnly:!0})})}),e.jsx(_,{span:8,children:e.jsx(w,{label:"Nhân viên thực hiện",name:"employee_code",className:"pt-3",required:!0,children:e.jsx(P,{readOnly:!0})})})]}),e.jsxs(W,{children:[e.jsx(_,{span:8,children:e.jsx(w,{label:"Thời gian thực hiện",name:"time_report",className:"pt-3",required:!0,children:e.jsx(P,{readOnly:!0})})}),e.jsx(_,{span:8,children:e.jsx(w,{label:"Điểm trưng bày AI chấm",name:"scoring_machine",className:"pt-3",required:!0,children:e.jsx(P,{readOnly:!0,style:{color:a&&a.scoring_machine===1?"green":a&&a.scoring_machine===0?"red":"black"}})})}),e.jsx(_,{span:8,children:e.jsx(w,{label:"Giám sát chấm",name:"scoring_human",className:"pt-3",required:!0,children:e.jsx(ee,{className:"w-[200px] h-[36px]",value:E,onChange:l=>Z(l),defaultValue:E,children:B.map(l=>e.jsx(ee.Option,{value:l.value,children:l.label},l.value))})})})]}),e.jsxs(W,{children:[e.jsx(_,{span:8,children:e.jsxs(w,{label:"Hình ảnh cửa hàng",className:"pt-3",required:!0,children:[e.jsxs("div",{style:{position:"relative",width:"100%",height:"auto",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(J,{src:N[I],fallback:oe,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover",alignSelf:"center",borderRadius:"10px"}}),!s&&e.jsx("div",{onClick:U,style:{height:"50px",width:"35px",display:"flex",justifyContent:"center",borderRadius:"5px",position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)",cursor:"pointer",fontSize:"24px",zIndex:1,backgroundColor:"rgba(0, 0, 0, 0.2)"},children:e.jsx(X,{onClick:U,style:{color:"white"}})}),!s&&e.jsx("div",{onClick:q,style:{height:"50px",width:"35px",display:"flex",justifyContent:"center",borderRadius:"5px",position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",cursor:"pointer",fontSize:"24px",zIndex:1,backgroundColor:"rgba(0, 0, 0, 0.2)"},children:e.jsx(te,{onClick:q,style:{color:"white"}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:"10px",overflowX:"hidden",marginTop:"10px"},children:N.map((l,h)=>e.jsx(J,{src:l,onClick:()=>g(h),style:{width:"80px",height:"80px",objectFit:"cover",cursor:"pointer",borderRadius:"10px"},preview:!1},h))})]})}),e.jsx(_,{span:8,children:e.jsxs(w,{label:"Hình ảnh AI trả về",className:"pt-3",required:!0,children:[e.jsxs("div",{style:{position:"relative",width:"100%",height:"auto",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(J,{src:S[b],fallback:oe,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover",alignSelf:"center",borderRadius:"10px"}}),!p&&e.jsx("div",{onClick:V,style:{height:"50px",width:"35px",display:"flex",justifyContent:"center",borderRadius:"5px",position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)",cursor:"pointer",fontSize:"24px",zIndex:1,backgroundColor:"rgba(0, 0, 0, 0.2)"},children:e.jsx(X,{onClick:V,style:{color:"white"}})}),!p&&e.jsx("div",{onClick:T,style:{height:"50px",width:"35px",display:"flex",justifyContent:"center",borderRadius:"5px",position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",cursor:"pointer",fontSize:"24px",zIndex:1,backgroundColor:"rgba(0, 0, 0, 0.2)"},children:e.jsx(te,{onClick:T,style:{color:"white"}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:"10px",overflowX:"hidden",marginTop:"10px"},children:S.map((l,h)=>e.jsx(J,{src:l,onClick:()=>F(h),style:{width:"80px",height:"80px",objectFit:"cover",cursor:"pointer",borderRadius:"10px"},preview:!1},h))})]})}),e.jsx(_,{span:8})]})]})})}function Se(t){const a={},[f,N]=n.useState([]);n.useState([{label:"Đạt",value:1},{label:"Không đạt",value:0}]);const[x,S]=n.useState({});t.recordData?.detail_skus.forEach(o=>{const s=o.category,i=1;a[s]=(a[s]||0)+i}),n.useEffect(()=>{S({})},[t.inputValue]);const k=(o,s,i)=>{N(p=>{let C=f.filter(g=>g.report_sku_id===i.name);if(C!=null&&C.length>0){let g=f.findIndex(F=>F.report_sku_id===i.name);f[g].sum_product_human=s}else f.push({report_sku_id:i.name,sum_product_human:s,scoring_human:i.scoring_human});return t.onChangeValReportSKU(f),[...f]})},I=(o,s)=>{S(i=>({...i,[o]:s}))},z=(o,s,i)=>{const p=parseInt(x[o]);isNaN(p)?(y.warning("Nhập số lượng"),k(i,0,s)):k(i,p,s)},b=t.recordData?.category_names.map((o,s)=>{const i=Object.keys(o)[0];return{key:s.toString(),stt:(s+1).toString(),categoryName:Object.values(o)[0],number_product:a[i]||0}}),v=[{title:"STT",dataIndex:"stt"},{title:"Tên sản phẩm",dataIndex:"name_product"},{title:"Số lượng sản phẩm AI đếm",dataIndex:"sum_product"},{title:"Số lượng sản phẩm giám sát đếm",dataIndex:"sum_product_human",render:(o,s,i)=>{const p=`${s.key}-${i}`;return e.jsx(e.Fragment,{children:e.jsx(P,{style:{width:"120px"},value:x[p]!==void 0?x[p]:o,onChange:C=>I(p,C.target.value),onBlur:()=>z(p,s,i)})})}},{title:"Điểm trưng bày AI chấm",dataIndex:"scoring_machine",render:o=>e.jsxs(e.Fragment,{children:[o===1&&e.jsxs("span",{style:{display:"flex"},children:[e.jsx(xe,{style:{fontSize:"17px",color:"green",paddingRight:"3px"}})," ",e.jsx("span",{style:{color:"green",verticalAlign:"middle"},children:"Đạt"})]}),o===0&&e.jsxs("span",{style:{display:"flex"},children:[e.jsx(fe,{style:{fontSize:"17px",color:"red",paddingRight:"3px"}})," ",e.jsx("span",{style:{color:"red",verticalAlign:"middle"},children:"Không đạt"})]})]})}],E=[{title:"STT",dataIndex:"stt"},{title:"Danh mục sản phẩm",dataIndex:"categoryName"},{title:"Số lượng sản phẩm",dataIndex:"number_product"}],[R,B]=n.useState([]);return n.useEffect(()=>{if(t.recordData){const o=t.recordData.category_names.map((s,i)=>{const p=Object.keys(s)[0];return t.recordData.detail_skus.filter(g=>g.category===p).map((g,F)=>({key:`${i}-${F}`,stt:`${(F+1).toString().padStart(2,"0")}`,name_product:g.product_name,sum_product:g.sum_product.toString(),image:g.images,creation:g.creation,scoring_machine:g.scoring_machine,scoring_human:g.scoring_human,sum_product_human:g.sum_product_human,name:g.name,index_category:i}))});console.log(o),B(o)}},[t.recordData]),e.jsx(e.Fragment,{children:e.jsx(ue,{columns:E,expandable:{expandedRowRender:(o,s)=>e.jsx("div",{style:{margin:5},children:e.jsx(me,{columns:v,dataSource:R[s],pagination:!1})}),rowExpandable:o=>R[o.key]&&R[o.key].length>0},dataSource:b})})}function Ce(){const[t,a]=n.useState(null),[f,N]=n.useState(0),[x,S]=n.useState([]),[k,I]=n.useState(!1),[z,b]=n.useState(!1),[v,E]=n.useState(!1),[R,B]=n.useState(!1),[o,s]=n.useState(!1),[i,p]=n.useState(""),[C,g]=n.useState([]),[F,U]=n.useState(!1),q=ge(),V=r=>{},[T]=ne.useForm(),Z=r=>{N(r)},M=r=>{S(r)},l=[{key:"1",label:e.jsx("span",{style:{fontWeight:700},children:"Thông tin chung"}),children:e.jsx(Re,{form:T,recordData:t,onChangeScoringHuman:Z})},{key:"2",label:e.jsx("span",{style:{fontWeight:700},children:"Sản phẩm"}),children:e.jsx(Se,{recordData:t,inputValue:t,onChangeValReportSKU:M})}];n.useEffect(()=>{let r=localStorage.getItem("recordData");if(console.log(r),r){let A=JSON.parse(r);a(A),N(A.scoring_human);let c=[];for(let d=0;d<A.detail_skus.length;d++){let u={report_sku_id:A.detail_skus[d].name,sum_product_human:A.detail_skus[d].sum_product_human,scoring_human:A.detail_skus[d].scoring_human};c.push(u)}S(c)}},[z]),n.useEffect(()=>{let r=JSON.parse(localStorage.getItem("dataReports"));if(r){const A=r.findIndex(c=>c.name===t?.name);A===0?E(!0):A===r.length-1?B(!0):(E(!1),B(!1))}},[t]);const h=async()=>{I(!0);let r={name:t.name,scoring:f,arr_product:x};const c=await Y.post("/api/method/mbw_audit.api.api.update_report",r);if(c!=null&&c.message=="ok"&&c.result!=null&&c.result.data=="success"){y.success("Cập nhật thành công"),I(!1);let d=JSON.parse(localStorage.getItem("dataReports")),u=JSON.parse(localStorage.getItem("recordData"));for(let m=0;m<u.detail_skus.length;m++)for(let j=0;j<x.length;j++)u.detail_skus[m].name==x[j].report_sku_id&&(u.detail_skus[m].sum_product_human=x[j].sum_product_human,u.detail_skus[m].scoring_human=x[j].scoring_human);u.scoring_human=f;const O=d.findIndex(m=>m.name===u.name);if(O!==null&&O<d.length-1){const m=d[O+1];localStorage.setItem("recordData",JSON.stringify(m)),b(j=>!j)}else return;d[O]=u,localStorage.setItem("dataReports",JSON.stringify(d))}else y.error("Cập nhật thất bại"),I(!1)},K=async()=>{I(!0);let r={name:t.name,scoring:f,arr_product:x};const c=await Y.post("/api/method/mbw_audit.api.api.update_report",r);if(c!=null&&c.message=="ok"&&c.result!=null&&c.result.data=="success"){y.success("Cập nhật thành công"),I(!1);let d=JSON.parse(localStorage.getItem("dataReports")),u=JSON.parse(localStorage.getItem("recordData"));for(let m=0;m<u.detail_skus.length;m++)for(let j=0;j<x.length;j++)u.detail_skus[m].name==x[j].report_sku_id&&(u.detail_skus[m].sum_product_human=x[j].sum_product_human,u.detail_skus[m].scoring_human=x[j].scoring_human);u.scoring_human=f;const O=d.findIndex(m=>m.name===u.name);d[O]=u,localStorage.setItem("dataReports",JSON.stringify(d))}else y.error("Cập nhật thất bại"),I(!1)},Q=()=>{let r=JSON.parse(localStorage.getItem("dataReports"));const A=r.findIndex(c=>c.name===t.name);if(A>0){const c=r[A-1];localStorage.setItem("recordData",JSON.stringify(c)),b(d=>!d)}},L=()=>t?`${t.customer_name} - ${t.campaign_name}`:"Tiêu đề",G=()=>{q("/reports"),localStorage.removeItem("recordData"),localStorage.removeItem("dataReports")},H=()=>{if(t.images!=null&&t.images!=""){let A=JSON.parse(t.images);if(A.length>0)g(A);else{y.warning("Bạn không có ảnh gian hàng sản phẩm để thực hiện gán nhãn");return}}else{y.warning("Bạn không có ảnh gian hàng sản phẩm để thực hiện gán nhãn");return}if(t.categories!=null&&t.categories!=""){let A=JSON.parse(t.categories);if(A.length>0)p(A[0]);else{y.warning("Bạn không có danh mục sản phẩm khi tạo chiến dịch");return}}else{y.warning("Bạn không có danh mục sản phẩm khi tạo chiến dịch");return}s(!0);let r=document.getElementsByClassName("ant-layout-content");r[0].style.padding="0px"},D=r=>{g([]),p(""),s(!1);let A=document.getElementsByClassName("ant-layout-content");A[0].style.padding="0px 24px 20px"},le=r=>{g([]),p(""),s(!1);let A=document.getElementsByClassName("ant-layout-content");A[0].style.padding="0px 24px 20px"},$=()=>{document.getElementById("fileInput").click()},ie=async r=>{console.log(r),U(!0);let A=r.target.files;const c=new FormData;for(let u=0;u<A.length;u++)c.append("file",A[u]);c.append("report_id",t.name);const d=await Y.post("/api/method/mbw_audit.api.api.update_images_for_report",c);if(console.log(d),d.message=="ok"){if(d.result.name!=null&&JSON.parse(localStorage.getItem("dataReports")).findIndex(m=>m.name===t.name)>=0){const m=d.result;localStorage.setItem("recordData",JSON.stringify(m)),b(j=>!j)}U(!1),y.success("Thành công"),document.getElementById("fileInput").value=""}else U(!0),y.error("Lỗi trong quá trình cập nhật"),document.getElementById("fileInput").value=""};return e.jsxs(e.Fragment,{children:[e.jsx("input",{id:"fileInput",type:"file",multiple:!0,accept:".png, .jpg, .jpeg",onChange:ie,style:{display:"none"}}),o==!1&&e.jsxs(e.Fragment,{children:[R==!1&&e.jsx(ae,{title:L(),icon:e.jsx("p",{onClick:()=>G(),className:"mr-2 cursor-pointer",children:e.jsx(X,{})}),buttons:[{label:"trước",type:"default",size:"20px",className:"flex items-center mr-2",icon:e.jsx(se,{}),action:Q,disabled:v},{label:"Lưu lại và Tiếp",type:"primary",size:"20px",className:"flex items-center mr-2",loading:k,action:h,disabled:R},{label:"Gán nhãn từ ảnh trưng bày",type:"primary",icon:e.jsx(Ae,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:H},{label:"Thêm ảnh trưng bày",type:"primary",icon:e.jsx(re,{className:"text-xl"}),size:"20px",className:"flex items-center",action:$,loading:F}]}),R==!0&&e.jsx(ae,{title:L(),icon:e.jsx("p",{onClick:()=>G(),className:"mr-2 cursor-pointer",children:e.jsx(X,{})}),buttons:[{label:"trước",type:"default",size:"20px",className:"flex items-center mr-2",icon:e.jsx(se,{}),action:Q,disabled:v},{label:"Lưu lại",type:"primary",size:"20px",className:"flex items-center mr-2",loading:k,action:K},{label:"Gán nhãn từ ảnh trưng bày",type:"primary",icon:e.jsx(Ae,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:H},{label:"Thêm ảnh trưng bày",type:"primary",icon:e.jsx(re,{className:"text-xl"}),size:"20px",className:"flex items-center",action:$}]}),e.jsx("div",{className:"bg-white  rounded-xl",children:e.jsx(ne,{layout:"vertical",form:T,children:e.jsx(pe,{items:l,defaultActiveKey:["1","2"],onChange:V,className:"custom-collapse"})})})]}),o==!0&&e.jsx(je,{category:i,arrImage:C,backPageEmit:D,completeProductLabelling:le})]})}function we(){return e.jsxs(e.Fragment,{children:[e.jsx(he,{children:e.jsx("title",{children:"BÁO CÁO"})}),e.jsx(Ce,{})]})}export{we as default};
