import{R as Be,r as I,C as ja,c as xn,d as gf,e as oc,g as pf,m as bg,f as Et,h as Og,i as Tg,k as kg,P as Rg,_ as Zh,l as Mg,n as e0,o as vf,p as Ag,q as Ng,K as cs,s as Cc,t as Pc,v as vs,w as mf,x as Ig,y as Ia,z as yf,B as _f,E as os,G as sc,J as Fg,L as Sf,M as Lg,N as t0,O as Dg,Q as Gg,U as r0,V as ss,j as L,W as Xo,A as Dt,H as $g,X as Du,F as Tt,I as wr,S as Gu,T as n0,Y as $u,Z as Er,$ as Zt,a0 as jg,a1 as Ko,a2 as Ze,a3 as zg,b as Bg}from"./main-Xl67n-75.js";import{E as lc,I as Ug,D as uc,L as Hg,a as Vg,V as i0,r as Wg,u as Xg}from"./xlsx-eb9sjPe4.js";import{p as Kg}from"./path-AHvYoJqN.js";const bc=Be.createContext({});bc.Consumer;var xf=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const qg=a=>{var{prefixCls:e,className:n,avatar:i,title:o,description:l}=a,c=xf(a,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:h}=I.useContext(ja),f=h("list",e),p=xn(`${f}-item-meta`,n),m=Be.createElement("div",{className:`${f}-item-meta-content`},o&&Be.createElement("h4",{className:`${f}-item-meta-title`},o),l&&Be.createElement("div",{className:`${f}-item-meta-description`},l));return Be.createElement("div",Object.assign({},c,{className:p}),i&&Be.createElement("div",{className:`${f}-item-meta-avatar`},i),(o||l)&&m)},Yg=(a,e)=>{var{prefixCls:n,children:i,actions:o,extra:l,className:c,colStyle:h}=a,f=xf(a,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:p,itemLayout:m}=I.useContext(bc),{getPrefixCls:C}=I.useContext(ja),w=()=>{let R;return I.Children.forEach(i,v=>{typeof v=="string"&&(R=!0)}),R&&I.Children.count(i)>1},_=()=>m==="vertical"?!!l:!w(),y=C("list",n),E=o&&o.length>0&&Be.createElement("ul",{className:`${y}-item-action`,key:"actions"},o.map((R,v)=>Be.createElement("li",{key:`${y}-item-action-${v}`},R,v!==o.length-1&&Be.createElement("em",{className:`${y}-item-action-split`})))),P=p?"div":"li",T=Be.createElement(P,Object.assign({},f,p?{}:{ref:e},{className:xn(`${y}-item`,{[`${y}-item-no-flex`]:!_()},c)}),m==="vertical"&&l?[Be.createElement("div",{className:`${y}-item-main`,key:"content"},i,E),Be.createElement("div",{className:`${y}-item-extra`,key:"extra"},l)]:[i,E,gf(l,{key:"extra"})]);return p?Be.createElement(oc,{ref:e,flex:1,style:h},T):T},wf=I.forwardRef(Yg);wf.Meta=qg;const Qg=wf,Jg=a=>{const{listBorderedCls:e,componentCls:n,paddingLG:i,margin:o,itemPaddingSM:l,itemPaddingLG:c,marginLG:h,borderRadiusLG:f}=a;return{[`${e}`]:{border:`${Et(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderRadius:f,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${Et(o)} ${Et(h)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},Zg=a=>{const{componentCls:e,screenSM:n,screenMD:i,marginLG:o,marginSM:l,margin:c}=a;return{[`@media screen and (max-width:${i}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:l}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:a.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${Et(c)}`}}}}}},e2=a=>{const{componentCls:e,antCls:n,controlHeight:i,minHeight:o,paddingSM:l,marginLG:c,padding:h,itemPadding:f,colorPrimary:p,itemPaddingSM:m,itemPaddingLG:C,paddingXS:w,margin:_,colorText:y,colorTextDescription:E,motionDurationSlow:P,lineWidth:T,headerBg:R,footerBg:v,emptyTextPadding:x,metaMarginBottom:b,avatarMarginRight:k,titleMarginBottom:B,descriptionFontSize:O}=a,G={};return["start","center","end"].forEach(M=>{G[`&-align-${M}`]={textAlign:M}}),{[`${e}`]:Object.assign(Object.assign({},Og(a)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:R},[`${e}-footer`]:{background:v},[`${e}-header, ${e}-footer`]:{paddingBlock:l},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:c},G),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:f,color:y,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:k},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:y},[`${e}-item-meta-title`]:{margin:`0 0 ${Et(a.marginXXS)} 0`,color:y,fontSize:a.fontSize,lineHeight:a.lineHeight,"> a":{color:y,transition:`all ${P}`,"&:hover":{color:p}}},[`${e}-item-meta-description`]:{color:E,fontSize:O,lineHeight:a.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:a.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Et(w)}`,color:E,fontSize:a.fontSize,lineHeight:a.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:T,height:a.calc(a.fontHeight).sub(a.calc(a.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:a.colorSplit}}},[`${e}-empty`]:{padding:`${Et(h)} 0`,color:E,fontSize:a.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:x,color:a.colorTextDisabled,fontSize:a.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:_,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:c},[`${e}-item-meta`]:{marginBlockEnd:b,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:B,color:y,fontSize:a.fontSizeLG,lineHeight:a.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:h,marginInlineStart:"auto","> li":{padding:`0 ${Et(h)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${Et(a.lineWidth)} ${a.lineType} ${a.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${Et(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${Et(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${Et(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:C},[`${e}-sm ${e}-item`]:{padding:m},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},t2=a=>({contentWidth:220,itemPadding:`${Et(a.paddingContentVertical)} 0`,itemPaddingSM:`${Et(a.paddingContentVerticalSM)} ${Et(a.paddingContentHorizontal)}`,itemPaddingLG:`${Et(a.paddingContentVerticalLG)} ${Et(a.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:a.padding,metaMarginBottom:a.padding,avatarMarginRight:a.padding,titleMarginBottom:a.paddingSM,descriptionFontSize:a.fontSize}),r2=pf("List",a=>{const e=bg(a,{listBorderedCls:`${a.componentCls}-bordered`,minHeight:a.controlHeightLG});return[e2(e),Jg(e),Zg(e)]},t2);var n2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function cc(a){var e,{pagination:n=!1,prefixCls:i,bordered:o=!1,split:l=!0,className:c,rootClassName:h,style:f,children:p,itemLayout:m,loadMore:C,grid:w,dataSource:_=[],size:y,header:E,footer:P,loading:T=!1,rowKey:R,renderItem:v,locale:x}=a,b=n2(a,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const k=n&&typeof n=="object"?n:{},[B,O]=I.useState(k.defaultCurrent||1),[G,M]=I.useState(k.defaultPageSize||10),{getPrefixCls:D,renderEmpty:V,direction:W,list:Y}=I.useContext(ja),X={current:1,total:0},oe=je=>(ze,dt)=>{var zt;O(ze),M(dt),n&&n[je]&&((zt=n?.[je])===null||zt===void 0||zt.call(n,ze,dt))},he=oe("onChange"),fe=oe("onShowSizeChange"),Me=(je,ze)=>{if(!v)return null;let dt;return typeof R=="function"?dt=R(je):R?dt=je[R]:dt=je.key,dt||(dt=`list-item-${ze}`),I.createElement(I.Fragment,{key:dt},v(je,ze))},se=()=>!!(C||n||P),Q=D("list",i),[Se,Oe,Ce]=r2(Q);let Xe=T;typeof Xe=="boolean"&&(Xe={spinning:Xe});const Ne=Xe&&Xe.spinning,N=Tg(y);let H="";switch(N){case"large":H="lg";break;case"small":H="sm";break}const te=xn(Q,{[`${Q}-vertical`]:m==="vertical",[`${Q}-${H}`]:H,[`${Q}-split`]:l,[`${Q}-bordered`]:o,[`${Q}-loading`]:Ne,[`${Q}-grid`]:!!w,[`${Q}-something-after-last-item`]:se(),[`${Q}-rtl`]:W==="rtl"},Y?.className,c,h,Oe,Ce),ge=kg(X,{total:_.length,current:B,pageSize:G},n||{}),de=Math.ceil(ge.total/ge.pageSize);ge.current>de&&(ge.current=de);const Ie=n?I.createElement("div",{className:xn(`${Q}-pagination`,`${Q}-pagination-align-${(e=ge?.align)!==null&&e!==void 0?e:"end"}`)},I.createElement(Rg,Object.assign({},ge,{onChange:he,onShowSizeChange:fe}))):null;let ke=Zh(_);n&&_.length>(ge.current-1)*ge.pageSize&&(ke=Zh(_).splice((ge.current-1)*ge.pageSize,ge.pageSize));const ot=Object.keys(w||{}).some(je=>["xs","sm","md","lg","xl","xxl"].includes(je)),Ae=Mg(ot),Ct=I.useMemo(()=>{for(let je=0;je<e0.length;je+=1){const ze=e0[je];if(Ae[ze])return ze}},[Ae]),Ye=I.useMemo(()=>{if(!w)return;const je=Ct&&w[Ct]?w[Ct]:w.column;if(je)return{width:`${100/je}%`,maxWidth:`${100/je}%`}},[w?.column,Ct]);let Fe=Ne&&I.createElement("div",{style:{minHeight:53}});if(ke.length>0){const je=ke.map((ze,dt)=>Me(ze,dt));Fe=w?I.createElement(vf,{gutter:w.gutter},I.Children.map(je,ze=>I.createElement("div",{key:ze?.key,style:Ye},ze))):I.createElement("ul",{className:`${Q}-items`},je)}else!p&&!Ne&&(Fe=I.createElement("div",{className:`${Q}-empty-text`},x&&x.emptyText||V?.("List")||I.createElement(Ag,{componentName:"List"})));const ut=ge.position||"bottom",kt=I.useMemo(()=>({grid:w,itemLayout:m}),[JSON.stringify(w),m]);return Se(I.createElement(bc.Provider,{value:kt},I.createElement("div",Object.assign({style:Object.assign(Object.assign({},Y?.style),f),className:te},b),(ut==="top"||ut==="both")&&Ie,E&&I.createElement("div",{className:`${Q}-header`},E),I.createElement(Ng,Object.assign({},Xe),Fe,p),P&&I.createElement("div",{className:`${Q}-footer`},P),C||(ut==="bottom"||ut==="both")&&Ie)))}cc.Item=Qg;var i2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const a2={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},o2=I.forwardRef((a,e)=>{const n=p=>{const{keyCode:m}=p;m===cs.ENTER&&p.preventDefault()},i=p=>{const{keyCode:m}=p,{onClick:C}=a;m===cs.ENTER&&C&&C()},{style:o,noStyle:l,disabled:c}=a,h=i2(a,["style","noStyle","disabled"]);let f={};return l||(f=Object.assign({},a2)),c&&(f.pointerEvents="none"),f=Object.assign(Object.assign({},f),o),I.createElement("div",Object.assign({role:"button",tabIndex:0,ref:e},h,{onKeyDown:n,onKeyUp:i,style:f}))}),a0=o2;var s2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const l2=s2;var u2=function(e,n){return I.createElement(Cc,Pc({},e,{ref:n,icon:l2}))};const c2=I.forwardRef(u2);var d2=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<a.rangeCount;i++)n.push(a.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return a.removeAllRanges(),function(){a.type==="Caret"&&a.removeAllRanges(),a.rangeCount||n.forEach(function(o){a.addRange(o)}),e&&e.focus()}},h2=d2,o0={"text/plain":"Text","text/html":"Url",default:"Text"},f2="Copy to clipboard: #{key}, Enter";function g2(a){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,e)}function p2(a,e){var n,i,o,l,c,h,f=!1;e||(e={}),n=e.debug||!1;try{o=h2(),l=document.createRange(),c=document.getSelection(),h=document.createElement("span"),h.textContent=a,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(m){if(m.stopPropagation(),e.format)if(m.preventDefault(),typeof m.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=o0[e.format]||o0.default;window.clipboardData.setData(C,a)}else m.clipboardData.clearData(),m.clipboardData.setData(e.format,a);e.onCopy&&(m.preventDefault(),e.onCopy(m.clipboardData))}),document.body.appendChild(h),l.selectNodeContents(h),c.addRange(l);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");f=!0}catch(m){n&&console.error("unable to copy using execCommand: ",m),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",a),e.onCopy&&e.onCopy(window.clipboardData),f=!0}catch(C){n&&console.error("unable to copy using clipboardData: ",C),n&&console.error("falling back to prompt"),i=g2("message"in e?e.message:f2),window.prompt(i,a)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(l):c.removeAllRanges()),h&&document.body.removeChild(h),o()}return f}var v2=p2;const m2=vs(v2);var y2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const _2=y2;var S2=function(e,n){return I.createElement(Cc,Pc({},e,{ref:n,icon:_2}))};const x2=I.forwardRef(S2),w2=(a,e,n,i)=>{const{titleMarginBottom:o,fontWeightStrong:l}=i;return{marginBottom:o,color:n,fontWeight:l,fontSize:a,lineHeight:e}},E2=a=>{const e=[1,2,3,4,5],n={};return e.forEach(i=>{n[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=w2(a[`fontSizeHeading${i}`],a[`lineHeightHeading${i}`],a.colorTextHeading,a)}),n},C2=a=>{const{componentCls:e}=a;return{"a&, a":Object.assign(Object.assign({},mf(a)),{textDecoration:a.linkDecoration,"&:active, &:hover":{textDecoration:a.linkHoverDecoration},[`&[disabled], &${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:a.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},P2=a=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Ig[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:a.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),b2=a=>{const{componentCls:e,paddingSM:n}=a,i=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:a.calc(a.paddingSM).mul(-1).equal(),marginTop:a.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${Et(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:a.calc(a.marginXS).add(2).equal(),insetBlockEnd:a.marginXS,color:a.colorTextDescription,fontWeight:"normal",fontSize:a.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},O2=a=>({[`${a.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:a.colorSuccess}},[`${a.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),T2=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),k2=a=>{const{componentCls:e,titleMarginTop:n}=a;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:a.colorText,wordBreak:"break-word",lineHeight:a.lineHeight,[`&${e}-secondary`]:{color:a.colorTextDescription},[`&${e}-success`]:{color:a.colorSuccess},[`&${e}-warning`]:{color:a.colorWarning},[`&${e}-danger`]:{color:a.colorError,"a&:active, a&:focus":{color:a.colorErrorActive},"a&:hover":{color:a.colorErrorHover}},[`&${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},E2(a)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),P2(a)),C2(a)),{[`
        ${e}-expand,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},mf(a)),{marginInlineStart:a.marginXXS})}),b2(a)),O2(a)),T2()),{"&-rtl":{direction:"rtl"}})}},R2=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Ef=pf("Typography",a=>[k2(a)],R2),M2=a=>{const{prefixCls:e,"aria-label":n,className:i,style:o,direction:l,maxLength:c,autoSize:h=!0,value:f,onSave:p,onCancel:m,onEnd:C,component:w,enterIcon:_=I.createElement(x2,null)}=a,y=I.useRef(null),E=I.useRef(!1),P=I.useRef(),[T,R]=I.useState(f);I.useEffect(()=>{R(f)},[f]),I.useEffect(()=>{if(y.current&&y.current.resizableTextArea){const{textArea:X}=y.current.resizableTextArea;X.focus();const{length:oe}=X.value;X.setSelectionRange(oe,oe)}},[]);const v=X=>{let{target:oe}=X;R(oe.value.replace(/[\n\r]/g,""))},x=()=>{E.current=!0},b=()=>{E.current=!1},k=X=>{let{keyCode:oe}=X;E.current||(P.current=oe)},B=()=>{p(T.trim())},O=X=>{let{keyCode:oe,ctrlKey:he,altKey:fe,metaKey:Me,shiftKey:se}=X;P.current===oe&&!E.current&&!he&&!fe&&!Me&&!se&&(oe===cs.ENTER?(B(),C?.()):oe===cs.ESC&&m())},G=()=>{B()},M=w?`${e}-${w}`:"",[D,V,W]=Ef(e),Y=xn(e,`${e}-edit-content`,{[`${e}-rtl`]:l==="rtl"},i,M,V,W);return D(I.createElement("div",{className:Y,style:o},I.createElement(Ia,{ref:y,maxLength:c,value:T,onChange:v,onKeyDown:k,onKeyUp:O,onCompositionStart:x,onCompositionEnd:b,onBlur:G,"aria-label":n,rows:1,autoSize:h}),_!==null?gf(_,{className:`${e}-edit-content-confirm`}):null))},A2=M2;function ju(a,e){return I.useMemo(()=>{const n=!!a;return[n,Object.assign(Object.assign({},e),n&&typeof a=="object"?a:null)]},[a])}const N2=(a,e)=>{const n=I.useRef(!1);I.useEffect(()=>{n.current?a():n.current=!0},e)};var I2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const F2=I.forwardRef((a,e)=>{const{prefixCls:n,component:i="article",className:o,rootClassName:l,setContentRef:c,children:h,direction:f,style:p}=a,m=I2(a,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:C,direction:w,typography:_}=I.useContext(ja),y=f??w;let E=e;c&&(E=yf(e,c));const P=C("typography",n),[T,R,v]=Ef(P),x=xn(P,_?.className,{[`${P}-rtl`]:y==="rtl"},o,l,R,v),b=Object.assign(Object.assign({},_?.style),p);return T(I.createElement(i,Object.assign({className:x,style:b,ref:E},m),h))}),Cf=F2;function Pf(a){const e=typeof a;return e==="string"||e==="number"}function L2(a){let e=0;return a.forEach(n=>{Pf(n)?e+=String(n).length:e+=1}),e}function zu(a,e){let n=0;const i=[];for(let o=0;o<a.length;o+=1){if(n===e)return i;const l=a[o],h=Pf(l)?String(l).length:1,f=n+h;if(f>e){const p=e-n;return i.push(String(l).slice(0,p)),i}i.push(l),n=f}return a}const D2=0,qo=1,s0=2,Bu=3,Uu=4,G2=a=>{let{enabledMeasure:e,children:n,text:i,width:o,fontSize:l,rows:c,onEllipsis:h}=a;const[[f,p,m],C]=I.useState([0,0,0]),[w,_]=I.useState(0),[y,E]=I.useState(D2),[P,T]=I.useState(0),R=I.useRef(null),v=I.useRef(null),x=I.useMemo(()=>_f(i),[i]),b=I.useMemo(()=>L2(x),[x]),k=I.useMemo(()=>!e||y!==Bu?w&&y!==Uu&&e?n(zu(x,w),w<b):n(x,!1):n(zu(x,p),p<b),[e,y,n,x,p,b]);os(()=>{e&&o&&l&&b&&(E(qo),C([0,Math.ceil(b/2),b]))},[e,o,l,i,b,c]),os(()=>{var M;y===qo&&T(((M=R.current)===null||M===void 0?void 0:M.offsetHeight)||0)},[y]),os(()=>{var M,D;if(P){if(y===qo){const V=((M=v.current)===null||M===void 0?void 0:M.offsetHeight)||0,W=c*P;V<=W?(E(Uu),h(!1)):E(s0)}else if(y===s0)if(f!==m){const V=((D=v.current)===null||D===void 0?void 0:D.offsetHeight)||0,W=c*P;let Y=f,X=m;f===m-1?X=f:V<=W?Y=p:X=p;const oe=Math.ceil((Y+X)/2);C([Y,oe,X])}else E(Bu),_(p),h(!0)}},[y,f,m,c,P]);const B={width:o,whiteSpace:"normal",margin:0,padding:0},O=(M,D,V)=>I.createElement("span",{"aria-hidden":!0,ref:D,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(l/2)*2},V)},M),G=(M,D)=>{const V=zu(x,M);return O(n(V,!0),D,B)};return I.createElement(I.Fragment,null,k,e&&y!==Bu&&y!==Uu&&I.createElement(I.Fragment,null,O("lg",R,{wordBreak:"keep-all",whiteSpace:"nowrap"}),y===qo?O(n(x,!1),v,B):G(p,v)))},$2=G2,j2=a=>{let{enabledEllipsis:e,isEllipsis:n,children:i,tooltipProps:o}=a;return!o?.title||!e?i:I.createElement(sc,Object.assign({open:n?void 0:!1},o),i)},z2=j2;var B2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function U2(a,e){let{mark:n,code:i,underline:o,delete:l,strong:c,keyboard:h,italic:f}=a,p=e;function m(C,w){w&&(p=I.createElement(C,{},p))}return m("strong",c),m("u",o),m("del",l),m("code",i),m("mark",n),m("kbd",h),m("i",f),p}function Yo(a,e,n){return a===!0||a===void 0?e:a||n&&e}function l0(a){return a===!1?[!1,!1]:Array.isArray(a)?a:[a]}const H2="...",V2=I.forwardRef((a,e)=>{var n,i,o;const{prefixCls:l,className:c,style:h,type:f,disabled:p,children:m,ellipsis:C,editable:w,copyable:_,component:y,title:E}=a,P=B2(a,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:T,direction:R}=I.useContext(ja),[v]=Fg("Text"),x=I.useRef(null),b=I.useRef(null),k=T("typography",l),B=Sf(P,["mark","code","delete","underline","strong","keyboard","italic"]),[O,G]=ju(w),[M,D]=Lg(!1,{value:G.editing}),{triggerType:V=["icon"]}=G,W=ie=>{var ve;ie&&((ve=G.onStart)===null||ve===void 0||ve.call(G)),D(ie)};N2(()=>{var ie;M||(ie=b.current)===null||ie===void 0||ie.focus()},[M]);const Y=ie=>{ie?.preventDefault(),W(!0)},X=ie=>{var ve;(ve=G.onChange)===null||ve===void 0||ve.call(G,ie),W(!1)},oe=()=>{var ie;(ie=G.onCancel)===null||ie===void 0||ie.call(G),W(!1)},[he,fe]=ju(_),[Me,se]=I.useState(!1),Q=I.useRef(null),Se={};fe.format&&(Se.format=fe.format);const Oe=()=>{Q.current&&clearTimeout(Q.current)},Ce=ie=>{var ve;ie?.preventDefault(),ie?.stopPropagation(),m2(fe.text||String(m)||"",Se),se(!0),Oe(),Q.current=setTimeout(()=>{se(!1)},3e3),(ve=fe.onCopy)===null||ve===void 0||ve.call(fe,ie)};I.useEffect(()=>Oe,[]);const[Xe,Ne]=I.useState(!1),[N,H]=I.useState(!1),[te,ge]=I.useState(!1),[de,Ie]=I.useState(!1),[ke,ot]=I.useState(!1),[Ae,Ct]=I.useState(!0),[Ye,Fe]=ju(C,{expandable:!1}),ut=Ye&&!te,{rows:kt=1}=Fe,je=I.useMemo(()=>!ut||Fe.suffix!==void 0||Fe.onEllipsis||Fe.expandable||O||he,[ut,Fe,O,he]);os(()=>{Ye&&!je&&(Ne(t0("webkitLineClamp")),H(t0("textOverflow")))},[je,Ye]);const ze=I.useMemo(()=>je?!1:kt===1?N:Xe,[je,N,Xe]),dt=ut&&(ze?ke:de),zt=ut&&kt===1&&ze,sn=ut&&kt>1&&ze,$t=ie=>{var ve;ge(!0),(ve=Fe.onExpand)===null||ve===void 0||ve.call(Fe,ie)},[Rn,Ki]=I.useState(0),[qi,Yi]=I.useState(0),oi=(ie,ve)=>{let{offsetWidth:ht}=ie;var Rt;Ki(ht),Yi(parseInt((Rt=window.getComputedStyle)===null||Rt===void 0?void 0:Rt.call(window,ve).fontSize,10)||0)},Qi=ie=>{var ve;Ie(ie),de!==ie&&((ve=Fe.onEllipsis)===null||ve===void 0||ve.call(Fe,ie))};I.useEffect(()=>{const ie=x.current;if(Ye&&ze&&ie){const ve=sn?ie.offsetHeight<ie.scrollHeight:ie.offsetWidth<ie.scrollWidth;ke!==ve&&ot(ve)}},[Ye,ze,m,sn,Ae,Rn]),I.useEffect(()=>{const ie=x.current;if(typeof IntersectionObserver>"u"||!ie||!ze||!ut)return;const ve=new IntersectionObserver(()=>{Ct(!!ie.offsetParent)});return ve.observe(ie),()=>{ve.disconnect()}},[ze,ut]);let nr={};Fe.tooltip===!0?nr={title:(n=G.text)!==null&&n!==void 0?n:m}:I.isValidElement(Fe.tooltip)?nr={title:Fe.tooltip}:typeof Fe.tooltip=="object"?nr=Object.assign({title:(i=G.text)!==null&&i!==void 0?i:m},Fe.tooltip):nr={title:Fe.tooltip};const zr=I.useMemo(()=>{const ie=ve=>["string","number"].includes(typeof ve);if(!(!Ye||ze)){if(ie(G.text))return G.text;if(ie(m))return m;if(ie(E))return E;if(ie(nr.title))return nr.title}},[Ye,ze,E,nr.title,dt]);if(M)return I.createElement(A2,{value:(o=G.text)!==null&&o!==void 0?o:typeof m=="string"?m:"",onSave:X,onCancel:oe,onEnd:G.onEnd,prefixCls:k,className:c,style:h,direction:R,component:y,maxLength:G.maxLength,autoSize:G.autoSize,enterIcon:G.enterIcon});const Ji=()=>{const{expandable:ie,symbol:ve}=Fe;if(!ie)return null;let ht;return ve?ht=ve:ht=v?.expand,I.createElement("a",{key:"expand",className:`${k}-expand`,onClick:$t,"aria-label":v?.expand},ht)},Zi=()=>{if(!O)return;const{icon:ie,tooltip:ve}=G,ht=_f(ve)[0]||v?.edit,Rt=typeof ht=="string"?ht:"";return V.includes("icon")?I.createElement(sc,{key:"edit",title:ve===!1?"":ht},I.createElement(a0,{ref:b,className:`${k}-edit`,onClick:Y,"aria-label":Rt},ie||I.createElement(lc,{role:"button"}))):null},ln=()=>{if(!he)return null;const{tooltips:ie,icon:ve}=fe,ht=l0(ie),Rt=l0(ve),Br=Me?Yo(ht[1],v?.copied):Yo(ht[0],v?.copy),si=Me?v?.copied:v?.copy,ta=typeof Br=="string"?Br:si;return I.createElement(sc,{key:"copy",title:Br},I.createElement(a0,{className:xn(`${k}-copy`,{[`${k}-copy-success`]:Me,[`${k}-copy-icon-only`]:m==null}),onClick:Ce,"aria-label":ta},Me?Yo(Rt[1],I.createElement(Gg,null),!0):Yo(Rt[0],I.createElement(c2,null),!0)))},Mn=ie=>[ie&&Ji(),Zi(),ln()],ea=ie=>[ie&&I.createElement("span",{"aria-hidden":!0,key:"ellipsis"},H2),Fe.suffix,Mn(ie)];return I.createElement(Dg,{onResize:oi,disabled:!ut},ie=>I.createElement(z2,{tooltipProps:nr,enabledEllipsis:ut,isEllipsis:dt},I.createElement(Cf,Object.assign({className:xn({[`${k}-${f}`]:f,[`${k}-disabled`]:p,[`${k}-ellipsis`]:Ye,[`${k}-single-line`]:ut&&kt===1,[`${k}-ellipsis-single-line`]:zt,[`${k}-ellipsis-multiple-line`]:sn},c),prefixCls:l,style:Object.assign(Object.assign({},h),{WebkitLineClamp:sn?kt:void 0}),component:y,ref:yf(ie,x,e),direction:R,onClick:V.includes("text")?Y:void 0,"aria-label":zr?.toString(),title:E},B),I.createElement($2,{enabledMeasure:ut&&!ze,text:m,rows:kt,width:Rn,fontSize:qi,onEllipsis:Qi},(ve,ht)=>{let Rt=ve;return ve.length&&ht&&zr&&(Rt=I.createElement("span",{key:"show-content","aria-hidden":!0},Rt)),U2(a,I.createElement(I.Fragment,null,Rt,ea(ht)))}))))}),ms=V2;var W2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const X2=I.forwardRef((a,e)=>{var{ellipsis:n,rel:i}=a,o=W2(a,["ellipsis","rel"]);const l=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete l.navigate,I.createElement(ms,Object.assign({},l,{ref:e,ellipsis:!!n,component:"a"}))}),K2=X2,q2=I.forwardRef((a,e)=>I.createElement(ms,Object.assign({ref:e},a,{component:"div"}))),Y2=q2;var Q2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const J2=(a,e)=>{var{ellipsis:n}=a,i=Q2(a,["ellipsis"]);const o=I.useMemo(()=>n&&typeof n=="object"?Sf(n,["expandable","rows"]):n,[n]);return I.createElement(ms,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},Z2=I.forwardRef(J2);var ep=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const tp=[1,2,3,4,5],rp=I.forwardRef((a,e)=>{const{level:n=1}=a,i=ep(a,["level"]);let o;return tp.includes(n)?o=`h${n}`:o="h1",I.createElement(ms,Object.assign({ref:e},i,{component:o}))}),np=rp,za=Cf;za.Text=Z2;za.Link=K2;za.Title=np;za.Paragraph=Y2;const ip=za,Oc=Ug;Oc.Dragger=uc;Oc.LIST_IGNORE=Hg;const u0=Oc;var ap={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M644.7 669.2a7.92 7.92 0 00-6.5-3.3H594c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.8-5.3 0-12.7-6.5-12.7h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-22.9-31.9zM688 306v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 458H208V148h560v296c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h312c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm402.6-320.8l-192-66.7c-.9-.3-1.7-.4-2.6-.4s-1.8.1-2.6.4l-192 66.7a7.96 7.96 0 00-5.4 7.5v251.1c0 2.5 1.1 4.8 3.1 6.3l192 150.2c1.4 1.1 3.2 1.7 4.9 1.7s3.5-.6 4.9-1.7l192-150.2c1.9-1.5 3.1-3.8 3.1-6.3V538.7c0-3.4-2.2-6.4-5.4-7.5zM826 763.7L688 871.6 550 763.7V577l138-48 138 48v186.7z"}}]},name:"file-protect",theme:"outlined"};const op=ap;var sp=function(e,n){return I.createElement(Cc,Pc({},e,{ref:n,icon:op}))};const lp=I.forwardRef(sp);var bf={exports:{}},ys={},ds={},we={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof r0<"u"?r0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.5",isBrowser:n(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle(o){return a.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var o;return(o=a.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(o){a.glob.Konva=o}};const i=o=>{a.Konva[o.prototype.getClassName()]=o};a._registerNode=i,a.Konva._injectGlobal(a.Konva)})(we);var nt={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const e=we;class n{constructor(x=[1,0,0,1,0,0]){this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]}point(x){var b=this.m;return{x:b[0]*x.x+b[2]*x.y+b[4],y:b[1]*x.x+b[3]*x.y+b[5]}}translate(x,b){return this.m[4]+=this.m[0]*x+this.m[2]*b,this.m[5]+=this.m[1]*x+this.m[3]*b,this}scale(x,b){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=b,this.m[3]*=b,this}rotate(x){var b=Math.cos(x),k=Math.sin(x),B=this.m[0]*b+this.m[2]*k,O=this.m[1]*b+this.m[3]*k,G=this.m[0]*-k+this.m[2]*b,M=this.m[1]*-k+this.m[3]*b;return this.m[0]=B,this.m[1]=O,this.m[2]=G,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(x,b){var k=this.m[0]+this.m[2]*b,B=this.m[1]+this.m[3]*b,O=this.m[2]+this.m[0]*x,G=this.m[3]+this.m[1]*x;return this.m[0]=k,this.m[1]=B,this.m[2]=O,this.m[3]=G,this}multiply(x){var b=this.m[0]*x.m[0]+this.m[2]*x.m[1],k=this.m[1]*x.m[0]+this.m[3]*x.m[1],B=this.m[0]*x.m[2]+this.m[2]*x.m[3],O=this.m[1]*x.m[2]+this.m[3]*x.m[3],G=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],M=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=b,this.m[1]=k,this.m[2]=B,this.m[3]=O,this.m[4]=G,this.m[5]=M,this}invert(){var x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*x,k=-this.m[1]*x,B=-this.m[2]*x,O=this.m[0]*x,G=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=k,this.m[2]=B,this.m[3]=O,this.m[4]=G,this.m[5]=M,this}getMatrix(){return this.m}decompose(){var x=this.m[0],b=this.m[1],k=this.m[2],B=this.m[3],O=this.m[4],G=this.m[5],M=x*B-b*k;let D={x:O,y:G,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||b!=0){var V=Math.sqrt(x*x+b*b);D.rotation=b>0?Math.acos(x/V):-Math.acos(x/V),D.scaleX=V,D.scaleY=M/V,D.skewX=(x*k+b*B)/M,D.skewY=0}else if(k!=0||B!=0){var W=Math.sqrt(k*k+B*B);D.rotation=Math.PI/2-(B>0?Math.acos(-k/W):-Math.acos(k/W)),D.scaleX=M/W,D.scaleY=W,D.skewX=0,D.skewY=(x*k+b*B)/M}return D.rotation=a.Util._getRotation(D.rotation),D}}a.Transform=n;var i="[object Array]",o="[object Number]",l="[object String]",c="[object Boolean]",h=Math.PI/180,f=180/Math.PI,p="#",m="",C="0",w="Konva warning: ",_="Konva error: ",y="rgb(",E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,T=[];const R=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};a.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===i},_isNumber(v){return Object.prototype.toString.call(v)===o&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===l},_isBoolean(v){return Object.prototype.toString.call(v)===c},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;var x=v[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){T.push(v),T.length===1&&R(function(){const x=T;T=[],x.forEach(function(b){b()})})},createCanvasElement(){var v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,x){var b=a.Util.createImageElement();b.onload=function(){x(b)},b.src=v},_rgbToHex(v,x,b){return((1<<24)+(v<<16)+(x<<8)+b).toString(16).slice(1)},_hexToRgb(v){v=v.replace(p,m);var x=parseInt(v,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor(){for(var v=(Math.random()*16777215<<0).toString(16);v.length<6;)v=C+v;return p+v},getRGB(v){var x;return v in E?(x=E[v],{r:x[0],g:x[1],b:x[2]}):v[0]===p?this._hexToRgb(v.substring(1)):v.substr(0,4)===y?(x=P.exec(v.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",a.Util._namedColorToRBA(v)||a.Util._hex3ColorToRGBA(v)||a.Util._hex4ColorToRGBA(v)||a.Util._hex6ColorToRGBA(v)||a.Util._hex8ColorToRGBA(v)||a.Util._rgbColorToRGBA(v)||a.Util._rgbaColorToRGBA(v)||a.Util._hslColorToRGBA(v)},_namedColorToRBA(v){var x=E[v.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];var x=v.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];var x=v.split(/ *, */).map((b,k)=>b.slice(-1)==="%"?k===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[x,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),k=Number(b[0])/360,B=Number(b[1])/100,O=Number(b[2])/100;let G,M,D;if(B===0)return D=O*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};O<.5?G=O*(1+B):G=O+B-O*B;const V=2*O-G,W=[0,0,0];for(let Y=0;Y<3;Y++)M=k+1/3*-(Y-1),M<0&&M++,M>1&&M--,6*M<1?D=V+(G-V)*6*M:2*M<1?D=G:3*M<2?D=V+(G-V)*(2/3-M)*6:D=V,W[Y]=D*255;return{r:Math.round(W[0]),g:Math.round(W[1]),b:Math.round(W[2]),a:1}}},haveIntersection(v,x){return!(x.x>v.x+v.width||x.x+x.width<v.x||x.y>v.y+v.height||x.y+x.height<v.y)},cloneObject(v){var x={};for(var b in v)this._isPlainObject(v[b])?x[b]=this.cloneObject(v[b]):this._isArray(v[b])?x[b]=this.cloneArray(v[b]):x[b]=v[b];return x},cloneArray(v){return v.slice(0)},degToRad(v){return v*h},radToDeg(v){return v*f},_degToRad(v){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(v)},_radToDeg(v){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(v)},_getRotation(v){return e.Konva.angleDeg?a.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(_+v)},error(v){console.error(_+v)},warn(v){e.Konva.showWarnings&&console.warn(w+v)},each(v,x){for(var b in v)x(b,v[b])},_inRange(v,x,b){return x<=v&&v<b},_getProjectionToSegment(v,x,b,k,B,O){var G,M,D,V=(v-b)*(v-b)+(x-k)*(x-k);if(V==0)G=v,M=x,D=(B-b)*(B-b)+(O-k)*(O-k);else{var W=((B-v)*(b-v)+(O-x)*(k-x))/V;W<0?(G=v,M=x,D=(v-B)*(v-B)+(x-O)*(x-O)):W>1?(G=b,M=k,D=(b-B)*(b-B)+(k-O)*(k-O)):(G=v+W*(b-v),M=x+W*(k-x),D=(G-B)*(G-B)+(M-O)*(M-O))}return[G,M,D]},_getProjectionToLine(v,x,b){var k=a.Util.cloneObject(v),B=Number.MAX_VALUE;return x.forEach(function(O,G){if(!(!b&&G===x.length-1)){var M=x[(G+1)%x.length],D=a.Util._getProjectionToSegment(O.x,O.y,M.x,M.y,v.x,v.y),V=D[0],W=D[1],Y=D[2];Y<B&&(k.x=V,k.y=W,B=Y)}}),k},_prepareArrayForTween(v,x,b){var k,B=[],O=[];if(v.length>x.length){var G=x;x=v,v=G}for(k=0;k<v.length;k+=2)B.push({x:v[k],y:v[k+1]});for(k=0;k<x.length;k+=2)O.push({x:x[k],y:x[k+1]});var M=[];return O.forEach(function(D){var V=a.Util._getProjectionToLine(D,B,b);M.push(V.x),M.push(V.y)}),M},_prepareToStringify(v){var x;v.visitedByCircularReferenceRemoval=!0;for(var b in v)if(v.hasOwnProperty(b)&&v[b]&&typeof v[b]=="object"){if(x=Object.getOwnPropertyDescriptor(v,b),v[b].visitedByCircularReferenceRemoval||a.Util._isElement(v[b]))if(x.configurable)delete v[b];else return null;else if(a.Util._prepareToStringify(v[b])===null)if(x.configurable)delete v[b];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,x){for(var b in x)v[b]=x[b];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){e.Konva.releaseCanvasOnDestroy&&v.forEach(x=>{x.width=0,x.height=0})},drawRoundedRectPath(v,x,b,k){let B=0,O=0,G=0,M=0;typeof k=="number"?B=O=G=M=Math.min(k,x/2,b/2):(B=Math.min(k[0]||0,x/2,b/2),O=Math.min(k[1]||0,x/2,b/2),M=Math.min(k[2]||0,x/2,b/2),G=Math.min(k[3]||0,x/2,b/2)),v.moveTo(B,0),v.lineTo(x-O,0),v.arc(x-O,O,O,Math.PI*3/2,0,!1),v.lineTo(x,b-M),v.arc(x-M,b-M,M,0,Math.PI/2,!1),v.lineTo(G,b),v.arc(G,b-G,G,Math.PI/2,Math.PI,!1),v.lineTo(0,B),v.arc(B,B,B,Math.PI,Math.PI*3/2,!1)}}})(nt);var et={},Ee={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.getComponentValidator=le.getBooleanValidator=le.getNumberArrayValidator=le.getFunctionValidator=le.getStringOrGradientValidator=le.getStringValidator=le.getNumberOrAutoValidator=le.getNumberOrArrayOfNumbersValidator=le.getNumberValidator=le.alphaComponent=le.RGBComponent=void 0;const rn=we,it=nt;function nn(a){return it.Util._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||it.Util._isBoolean(a)?a:Object.prototype.toString.call(a)}function up(a){return a>255?255:a<0?0:Math.round(a)}le.RGBComponent=up;function cp(a){return a>1?1:a<1e-4?1e-4:a}le.alphaComponent=cp;function dp(){if(rn.Konva.isUnminified)return function(a,e){return it.Util._isNumber(a)||it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),a}}le.getNumberValidator=dp;function hp(a){if(rn.Konva.isUnminified)return function(e,n){let i=it.Util._isNumber(e),o=it.Util._isArray(e)&&e.length==a;return!i&&!o&&it.Util.warn(nn(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+a+")"),e}}le.getNumberOrArrayOfNumbersValidator=hp;function fp(){if(rn.Konva.isUnminified)return function(a,e){var n=it.Util._isNumber(a),i=a==="auto";return n||i||it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),a}}le.getNumberOrAutoValidator=fp;function gp(){if(rn.Konva.isUnminified)return function(a,e){return it.Util._isString(a)||it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),a}}le.getStringValidator=gp;function pp(){if(rn.Konva.isUnminified)return function(a,e){const n=it.Util._isString(a),i=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return n||i||it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),a}}le.getStringOrGradientValidator=pp;function vp(){if(rn.Konva.isUnminified)return function(a,e){return it.Util._isFunction(a)||it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),a}}le.getFunctionValidator=vp;function mp(){if(rn.Konva.isUnminified)return function(a,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&a instanceof n||(it.Util._isArray(a)?a.forEach(function(i){it.Util._isNumber(i)||it.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),a}}le.getNumberArrayValidator=mp;function yp(){if(rn.Konva.isUnminified)return function(a,e){var n=a===!0||a===!1;return n||it.Util.warn(nn(a)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),a}}le.getBooleanValidator=yp;function _p(a){if(rn.Konva.isUnminified)return function(e,n){return e==null||it.Util.isObject(e)||it.Util.warn(nn(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+a),e}}le.getComponentValidator=_p;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const e=nt,n=le;var i="get",o="set";a.Factory={addGetterSetter(l,c,h,f,p){a.Factory.addGetter(l,c,h),a.Factory.addSetter(l,c,f,p),a.Factory.addOverloadedGetterSetter(l,c)},addGetter(l,c,h){var f=i+e.Util._capitalize(c);l.prototype[f]=l.prototype[f]||function(){var p=this.attrs[c];return p===void 0?h:p}},addSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]||a.Factory.overWriteSetter(l,c,h,f)},overWriteSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]=function(m){return h&&m!==void 0&&m!==null&&(m=h.call(this,m,c)),this._setAttr(c,m),f&&f.call(this),this}},addComponentsGetterSetter(l,c,h,f,p){var m=h.length,C=e.Util._capitalize,w=i+C(c),_=o+C(c),y,E;l.prototype[w]=function(){var T={};for(y=0;y<m;y++)E=h[y],T[E]=this.getAttr(c+C(E));return T};var P=(0,n.getComponentValidator)(h);l.prototype[_]=function(T){var R=this.attrs[c],v;f&&(T=f.call(this,T)),P&&P.call(this,T,c);for(v in T)T.hasOwnProperty(v)&&this._setAttr(c+C(v),T[v]);return T||h.forEach(x=>{this._setAttr(c+C(x),void 0)}),this._fireChangeEvent(c,R,T),p&&p.call(this),this},a.Factory.addOverloadedGetterSetter(l,c)},addOverloadedGetterSetter(l,c){var h=e.Util._capitalize(c),f=o+h,p=i+h;l.prototype[c]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(l,c,h,f){e.Util.error("Adding deprecated "+c);var p=i+e.Util._capitalize(c),m=c+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[p]=function(){e.Util.error(m);var C=this.attrs[c];return C===void 0?h:C},a.Factory.addSetter(l,c,f,function(){e.Util.error(m)}),a.Factory.addOverloadedGetterSetter(l,c)},backCompat(l,c){e.Util.each(c,function(h,f){var p=l.prototype[f],m=i+e.Util._capitalize(h),C=o+e.Util._capitalize(h);function w(){p.apply(this,arguments),e.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}l.prototype[h]=w,l.prototype[m]=w,l.prototype[C]=w})},afterSetFilter(){this._filterUpToDate=!1}}})(Ee);var Pr={},en={};Object.defineProperty(en,"__esModule",{value:!0});en.HitContext=en.SceneContext=en.Context=void 0;const Of=nt,Sp=we;function xp(a){var e=[],n=a.length,i=Of.Util,o,l;for(o=0;o<n;o++)l=a[o],i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),e.push(l);return e}var c0=",",wp="(",Ep=")",Cp="([",Pp="])",bp=";",Op="()",Tp="=",d0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],kp=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Rp=100;class _s{constructor(e){this.canvas=e,Sp.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var i=this.traceArr,o=i.length,l="",c,h,f,p;for(c=0;c<o;c++)h=i[c],f=h.method,f?(p=h.args,l+=f,e?l+=Op:Of.Util._isArray(p[0])?l+=Cp+p.join(c0)+Pp:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),l+=wp+p.join(c0)+Ep)):(l+=h.property,e||(l+=Tp+h.val)),l+=bp;return l}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,i;n.push(e),i=n.length,i>=Rp&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,o,l,c){this._context.arc(e,n,i,o,l,c)}arcTo(e,n,i,o,l){this._context.arcTo(e,n,i,o,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,o,l,c){this._context.bezierCurveTo(e,n,i,o,l,c)}clearRect(e,n,i,o){this._context.clearRect(e,n,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,o){return this._context.createLinearGradient(e,n,i,o)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,o,l,c){return this._context.createRadialGradient(e,n,i,o,l,c)}drawImage(e,n,i,o,l,c,h,f,p){var m=arguments,C=this._context;m.length===3?C.drawImage(e,n,i):m.length===5?C.drawImage(e,n,i,o,l):m.length===9&&C.drawImage(e,n,i,o,l,c,h,f,p)}ellipse(e,n,i,o,l,c,h,f){this._context.ellipse(e,n,i,o,l,c,h,f)}isPointInPath(e,n,i,o){return i?this._context.isPointInPath(i,e,n,o):this._context.isPointInPath(e,n,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,o){this._context.fillRect(e,n,i,o)}strokeRect(e,n,i,o){this._context.strokeRect(e,n,i,o)}fillText(e,n,i,o){o?this._context.fillText(e,n,i,o):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,o){return this._context.getImageData(e,n,i,o)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,o){this._context.rect(e,n,i,o)}roundRect(e,n,i,o,l){this._context.roundRect(e,n,i,o,l)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,o){this._context.quadraticCurveTo(e,n,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,o,l,c){this._context.setTransform(e,n,i,o,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,o){this._context.strokeText(e,n,i,o)}transform(e,n,i,o,l,c){this._context.transform(e,n,i,o,l,c)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=d0.length,i=this.setAttr,o,l,c=function(h){var f=e[h],p;e[h]=function(){return l=xp(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:h,args:l}),p}};for(o=0;o<n;o++)c(d0[o]);e.setAttr=function(){i.apply(e,arguments);var h=arguments[0],f=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:h,val:f})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}en.Context=_s;kp.forEach(function(a){Object.defineProperty(_s.prototype,a,{get(){return this._context[a]},set(e){this._context[a]=e}})});class Mp extends _s{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):o?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,i.x,i.y);if(o){for(var c=0;c<o.length;c+=2)l.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,o,l=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",c=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,h=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=f.x*p,C=f.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(m),Math.abs(C))),this.setAttr("shadowOffsetX",h.x*m),this.setAttr("shadowOffsetY",h.y*C)}}en.SceneContext=Mp;class Ap extends _s{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const l=e.getStrokeScaleEnabled();if(!l){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),l||this.restore()}}}en.HitContext=Ap;Object.defineProperty(Pr,"__esModule",{value:!0});Pr.HitCanvas=Pr.SceneCanvas=Pr.Canvas=void 0;const hs=nt,Tf=en,kf=we,Np=Ee,Ip=le;var Qo;function Fp(){if(Qo)return Qo;var a=hs.Util.createCanvasElement(),e=a.getContext("2d");return Qo=function(){var n=kf.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i}(),hs.Util.releaseCanvas(a),Qo}class Ss{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},i=n.pixelRatio||kf.Konva.pixelRatio||Fp();this.pixelRatio=i,this._canvas=hs.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(o){return hs.Util.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Pr.Canvas=Ss;Np.Factory.addGetterSetter(Ss,"pixelRatio",void 0,(0,Ip.getNumberValidator)());class Lp extends Ss{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Tf.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Pr.SceneCanvas=Lp;class Dp extends Ss{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Tf.HitContext(this),this.setSize(e.width,e.height)}}Pr.HitCanvas=Dp;var xs={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const e=we,n=nt;a.DD={get isDragging(){var i=!1;return a.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){var i;return a.DD._dragElements.forEach(o=>{i=o.node}),i},_dragElements:new Map,_drag(i){const o=[];a.DD._dragElements.forEach((l,c)=>{const{node:h}=l,f=h.getStage();f.setPointersPositions(i),l.pointerId===void 0&&(l.pointerId=n.Util._getFirstPointerId(i));const p=f._changedPointerPositions.find(w=>w.id===l.pointerId);if(p){if(l.dragStatus!=="dragging"){var m=h.dragDistance(),C=Math.max(Math.abs(p.x-l.startPointerPos.x),Math.abs(p.y-l.startPointerPos.y));if(C<m||(h.startDrag({evt:i}),!h.isDragging()))return}h._setDragPosition(i,l),o.push(h)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:i},!0)})},_endDragBefore(i){const o=[];a.DD._dragElements.forEach(l=>{const{node:c}=l,h=c.getStage();if(i&&h.setPointersPositions(i),!h._changedPointerPositions.find(m=>m.id===l.pointerId))return;(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(a.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,l.dragStatus="stopped");const p=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;p&&o.indexOf(p)===-1&&o.push(p)}),o.forEach(l=>{l.draw()})},_endDragAfter(i){a.DD._dragElements.forEach((o,l)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:i},!0),o.dragStatus!=="dragging"&&a.DD._dragElements.delete(l)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1))})(xs);Object.defineProperty(et,"__esModule",{value:!0});et.Node=void 0;const Te=nt,Ba=Ee,Oa=Pr,yn=we,fr=xs,lt=le;var ls="absoluteOpacity",Jo="allEventListeners",Zr="absoluteTransform",h0="absoluteScale",Vn="canvas",Gp="Change",$p="children",jp="konva",dc="listening",f0="mouseenter",g0="mouseleave",p0="set",v0="Shape",us=" ",m0="stage",_n="transform",zp="Stage",hc="visible",Bp=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(us);let Up=1;class pe{constructor(e){this._id=Up++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===_n||e===Zr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var i=this._cache.get(e),o=e===_n||e===Zr,l=i===void 0||o&&i.dirty===!0;return l&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const o=n.map(l=>l+"Change.konva").join(us);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(Vn)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Zr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Vn)){const{scene:e,filter:n,hit:i}=this._cache.get(Vn);Te.Util.releaseCanvas(e,n,i),this._cache.delete(Vn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var o=Math.ceil(n.width||i.width),l=Math.ceil(n.height||i.height),c=n.pixelRatio,h=n.x===void 0?Math.floor(i.x):n.x,f=n.y===void 0?Math.floor(i.y):n.y,p=n.offset||0,m=n.drawBorder||!1,C=n.hitCanvasPixelRatio||1;if(!o||!l){Te.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const w=Math.abs(Math.round(i.x)-h)>.5?1:0,_=Math.abs(Math.round(i.y)-f)>.5?1:0;o+=p*2+w,l+=p*2+_,h-=p,f-=p;var y=new Oa.SceneCanvas({pixelRatio:c,width:o,height:l}),E=new Oa.SceneCanvas({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),P=new Oa.HitCanvas({pixelRatio:C,width:o,height:l}),T=y.getContext(),R=P.getContext();return P.isCache=!0,y.isCache=!0,this._cache.delete(Vn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,E.getContext()._context.imageSmoothingEnabled=!1),T.save(),R.save(),T.translate(-h,-f),R.translate(-h,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ls),this._clearSelfAndDescendantCache(h0),this.drawScene(y,this),this.drawHit(P,this),this._isUnderCache=!1,T.restore(),R.restore(),m&&(T.save(),T.beginPath(),T.rect(0,0,o,l),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),this._cache.set(Vn,{scene:y,filter:E,hit:P,x:h,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(Vn)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,l=1/0,c=-1/0,h=-1/0,f=this.getAbsoluteTransform(n);return i.forEach(function(p){var m=f.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),{x:o,y:l,width:c-o,height:h-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),i=n.scene,o=n.filter,l=o.getContext(),c,h,f,p;if(e){if(!this._filterUpToDate){var m=i.pixelRatio;o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(c=e.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/m,i.getHeight()/m),h=l.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<c;f++){if(p=e[f],typeof p!="function"){Te.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,h),l.putImageData(h,0,0)}}catch(C){Te.Util.error("Unable to apply filter. "+C.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return i}on(e,n){if(this._cache&&this._cache.delete(Jo),arguments.length===3)return this._delegate.apply(this,arguments);var i=e.split(us),o=i.length,l,c,h,f,p;for(l=0;l<o;l++)c=i[l],h=c.split("."),f=h[0],p=h[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:n});return this}off(e,n){var i=(e||"").split(us),o=i.length,l,c,h,f,p,m;if(this._cache&&this._cache.delete(Jo),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<o;l++)if(h=i[l],f=h.split("."),p=f[0],m=f[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(c in this.eventListeners)this._off(c,m,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){var o=this;this.on(e,function(l){for(var c=l.target.findAncestors(n,!0,o),h=0;h<c.length;h++)l=Te.Util.cloneObject(l),l.currentTarget=c[h],i.call(c[h],l)})}remove(){return this.isDragging()&&this.stopDrag(),fr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Zr),this._clearSelfAndDescendantCache(ls),this._clearSelfAndDescendantCache(h0),this._clearSelfAndDescendantCache(m0),this._clearSelfAndDescendantCache(hc),this._clearSelfAndDescendantCache(dc)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Te.Util._capitalize(e);return Te.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,i;if(!e)return this;for(n in e)n!==$p&&(i=p0+Te.Util._capitalize(n),Te.Util._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(dc,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(hc,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),o=!1;fr.DD._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(o=!0)});var l=!n&&!yn.Konva.hitOnDragEnabled&&(o||yn.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,i=0,o,l,c,h;function f(m){for(o=[],l=m.length,c=0;c<l;c++)h=m[c],i++,h.nodeType!==v0&&(o=o.concat(h.getChildren().slice())),h._id===n._id&&(c=l);o.length>0&&o[0].getDepth()<=e&&f(o)}const p=this.getStage();return n.nodeType!==zp&&p&&f(p.getChildren()),i}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(_n),this._clearSelfAndDescendantCache(Zr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),l=new Te.Transform,c=this.offset();return l.m=o.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...o}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(_n);var l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(_n),this._clearSelfAndDescendantCache(Zr),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,i=e.y,o=this.x(),l=this.y();return n!==void 0&&(o+=n),i!==void 0&&(l+=i),this.setPosition({x:o,y:l}),this}_eachAncestorReverse(e,n){var i=[],o=this.getParent(),l,c;if(!(n&&n._id===this._id)){for(i.unshift(this);o&&(!n||o._id!==n._id);)i.unshift(o),o=o.parent;for(l=i.length,c=0;c<l;c++)e(i[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Te.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Te.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Te.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Te.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Te.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Te.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ls,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,i,o,l,c;const h={attrs:{},className:this.getClassName()};for(n in e)i=e[n],c=Te.Util.isObject(i)&&!Te.Util._isPlainObject(i)&&!Te.Util._isArray(i),!c&&(o=typeof this[n]=="function"&&this[n],delete e[n],l=o?o.call(this):null,e[n]=i,l!==i&&(h.attrs[n]=i));return Te.Util._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){var o=[];n&&this._isMatch(e)&&o.push(this);for(var l=this.parent;l;){if(l===i)return o;l._isMatch(e)&&o.push(l),l=l.parent}return o}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),i=n.length,o,l;for(o=0;o<i;o++)if(l=n[o],Te.Util.isValidSelector(l)||(Te.Util.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Te.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Te.Util.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(m0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Zr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Te.Transform,this._eachAncestorReverse(function(o){var l=o.transformsEnabled();l==="all"?n.multiply(o.getTransform()):l==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),n;n=this._cache.get(Zr)||new Te.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,h=this.attrs.offsetY||0;n.translate(o-c,l-h)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(_n,this._getTransform)}_getTransform(){var e,n,i=this._cache.get(_n)||new Te.Transform;i.reset();var o=this.x(),l=this.y(),c=yn.Konva.getAngle(this.rotation()),h=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,C=this.attrs.offsetX||0,w=this.attrs.offsetY||0;return(o!==0||l!==0)&&i.translate(o,l),c!==0&&i.rotate(c),(p!==0||m!==0)&&i.skew(p,m),(h!==1||f!==1)&&i.scale(h,f),(C!==0||w!==0)&&i.translate(-1*C,-1*w),i.dirty=!1,i}clone(e){var n=Te.Util.cloneObject(this.attrs),i,o,l,c,h;for(i in e)n[i]=e[i];var f=new this.constructor(n);for(i in this.eventListeners)for(o=this.eventListeners[i],l=o.length,c=0;c<l;c++)h=o[c],h.name.indexOf(jp)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(h));return f}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(n.x),l=e.y!==void 0?e.y:Math.floor(n.y),c=e.pixelRatio||1,h=new Oa.SceneCanvas({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:c}),f=h.getContext();const p=new Oa.SceneCanvas({width:h.width/h.pixelRatio+Math.abs(o),height:h.height/h.pixelRatio+Math.abs(l),pixelRatio:h.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||l)&&f.translate(-1*o,-1*l),this.drawScene(h,void 0,p),f.restore(),h}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,Te.Util._urlToImage(this.toDataURL(e),function(l){n(l),o?.(l)})}catch(o){i(o)}})}toBlob(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,this.toCanvas(e).toBlob(l=>{n(l),o?.(l)},e?.mimeType,e?.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():yn.Konva.dragDistance}_off(e,n,i){var o=this.eventListeners[e],l,c,h;for(l=0;l<o.length;l++)if(c=o[l].name,h=o[l].handler,(c!=="konva"||n==="konva")&&(!n||c===n)&&(!i||i===h)){if(o.splice(l,1),o.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,n,i){this._fire(e+Gp,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){var n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){var i=this[p0+Te.Util._capitalize(e)];return Te.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(yn.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var i=this.attrs[e];i===n&&!Te.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){var o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,n,i){n&&this.nodeType===v0&&(n.target=this);var o=(e===f0||e===g0)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!o){this._fire(e,n);var l=(e===f0||e===g0)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i,o;const l=(n=this._cache.get(Jo))!==null&&n!==void 0?n:{};let c=l?.[e];if(c===void 0){c=[];let h=Object.getPrototypeOf(this);for(;h;){const f=(o=(i=h.eventListeners)===null||i===void 0?void 0:i[e])!==null&&o!==void 0?o:[];c.push(...f),h=Object.getPrototypeOf(h)}l[e]=c,this._cache.set(Jo,l)}return c}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(var o=0;o<i.length;o++)i[o].handler.call(this,n);const l=this.eventListeners[e];if(l)for(var o=0;o<l.length;o++)l[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(i){var l=i._getPointerById(n)||i._changedPointerPositions[0]||o;fr.DD._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-o.x,y:l.y-o.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){fr.DD._dragElements.has(this._id)||this._createDragElement(e);const i=fr.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(i){var o={x:i.x-n.offset.x,y:i.y-n.offset.y},l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,o,e);c?o=c:Te.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const n=fr.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),fr.DD._endDragBefore(e),fr.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=fr.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,i=!n||yn.Konva.dragButtons.indexOf(e.evt.button)>=0;if(i&&!this.isDragging()){var o=!1;fr.DD._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(o=!0)}),o||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=fr.DD._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",o=n&&n.dragStatus==="ready";i?this.stopDrag():o&&fr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Te.Util.haveIntersection(i,this.getClientRect())}static create(e,n){return Te.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var i=pe.prototype.getClassName.call(e),o=e.children,l,c,h;n&&(e.attrs.container=n),yn.Konva[i]||(Te.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const f=yn.Konva[i];if(l=new f(e.attrs),o)for(c=o.length,h=0;h<c;h++)l.add(pe._createNode(o[h]));return l}}et.Node=pe;pe.prototype.nodeType="Node";pe.prototype._attrsAffectingSize=[];pe.prototype.eventListeners={};pe.prototype.on.call(pe.prototype,Bp,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(_n),this._clearSelfAndDescendantCache(Zr)});pe.prototype.on.call(pe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(hc)});pe.prototype.on.call(pe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(dc)});pe.prototype.on.call(pe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ls)});const We=Ba.Factory.addGetterSetter;We(pe,"zIndex");We(pe,"absolutePosition");We(pe,"position");We(pe,"x",0,(0,lt.getNumberValidator)());We(pe,"y",0,(0,lt.getNumberValidator)());We(pe,"globalCompositeOperation","source-over",(0,lt.getStringValidator)());We(pe,"opacity",1,(0,lt.getNumberValidator)());We(pe,"name","",(0,lt.getStringValidator)());We(pe,"id","",(0,lt.getStringValidator)());We(pe,"rotation",0,(0,lt.getNumberValidator)());Ba.Factory.addComponentsGetterSetter(pe,"scale",["x","y"]);We(pe,"scaleX",1,(0,lt.getNumberValidator)());We(pe,"scaleY",1,(0,lt.getNumberValidator)());Ba.Factory.addComponentsGetterSetter(pe,"skew",["x","y"]);We(pe,"skewX",0,(0,lt.getNumberValidator)());We(pe,"skewY",0,(0,lt.getNumberValidator)());Ba.Factory.addComponentsGetterSetter(pe,"offset",["x","y"]);We(pe,"offsetX",0,(0,lt.getNumberValidator)());We(pe,"offsetY",0,(0,lt.getNumberValidator)());We(pe,"dragDistance",null,(0,lt.getNumberValidator)());We(pe,"width",0,(0,lt.getNumberValidator)());We(pe,"height",0,(0,lt.getNumberValidator)());We(pe,"listening",!0,(0,lt.getBooleanValidator)());We(pe,"preventDefault",!0,(0,lt.getBooleanValidator)());We(pe,"filters",null,function(a){return this._filterUpToDate=!1,a});We(pe,"visible",!0,(0,lt.getBooleanValidator)());We(pe,"transformsEnabled","all",(0,lt.getStringValidator)());We(pe,"size");We(pe,"dragBoundFunc");We(pe,"draggable",!1,(0,lt.getBooleanValidator)());Ba.Factory.backCompat(pe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.Container=void 0;const Gi=Ee,Hu=et,ws=le;class qn extends Hu.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(o){e(o)&&i.push(o)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var i=[];return this._descendants(o=>{const l=o._isMatch(e);return l&&i.push(o),!!(l&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const o of i){if(n=e(o),n)return!0;if(o.hasChildren()&&(n=o._descendants(e),n))return!0}return!1}toObject(){var e=Hu.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=Hu.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){var o=this.getLayer(),l=e||o&&o.getCanvas(),c=l&&l.getContext(),h=this._getCanvasCache(),f=h&&h.scene,p=l&&l.isCache;if(!this.isVisible()&&!p)return this;if(f){c.save();var m=this.getAbsoluteTransform(n).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),o=e||i&&i.hitCanvas,l=o&&o.getContext(),c=this._getCanvasCache(),h=c&&c.hit;if(h){l.save();var f=this.getAbsoluteTransform(n).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",o,n);return this}_drawChildren(e,n,i,o){var l,c=n&&n.getContext(),h=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),m=typeof h=="number"&&typeof f=="number"||p;const C=i===this;if(m){c.save();var w=this.getAbsoluteTransform(i),_=w.getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),c.beginPath();let T;if(p)T=p.call(this,c,this);else{var y=this.clipX(),E=this.clipY();c.rect(y||0,E||0,h,f)}c.clip.apply(c,T),_=w.copy().invert().getMatrix(),c.transform(_[0],_[1],_[2],_[3],_[4],_[5])}var P=!C&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";P&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(T){T[e](n,i,o)}),P&&c.restore(),m&&c.restore()}getClientRect(e={}){var n,i=e.skipTransform,o=e.relativeTo,l,c,h,f,p={x:1/0,y:1/0,width:0,height:0},m=this;(n=this.children)===null||n===void 0||n.forEach(function(E){if(E.visible()){var P=E.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(l===void 0?(l=P.x,c=P.y,h=P.x+P.width,f=P.y+P.height):(l=Math.min(l,P.x),c=Math.min(c,P.y),h=Math.max(h,P.x+P.width),f=Math.max(f,P.y+P.height)))}});for(var C=this.find("Shape"),w=!1,_=0;_<C.length;_++){var y=C[_];if(y._isVisible(this)){w=!0;break}}return w&&l!==void 0?p={x:l,y:c,width:h-l,height:f-c}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,o)}}Kn.Container=qn;Gi.Factory.addComponentsGetterSetter(qn,"clip",["x","y","width","height"]);Gi.Factory.addGetterSetter(qn,"clipX",void 0,(0,ws.getNumberValidator)());Gi.Factory.addGetterSetter(qn,"clipY",void 0,(0,ws.getNumberValidator)());Gi.Factory.addGetterSetter(qn,"clipWidth",void 0,(0,ws.getNumberValidator)());Gi.Factory.addGetterSetter(qn,"clipHeight",void 0,(0,ws.getNumberValidator)());Gi.Factory.addGetterSetter(qn,"clipFunc");var Rf={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.releaseCapture=tr.setPointerCapture=tr.hasPointerCapture=tr.createEvent=tr.getCapturedShape=void 0;const Hp=we,Da=new Map,Mf=Hp.Konva._global.PointerEvent!==void 0;function Vp(a){return Da.get(a)}tr.getCapturedShape=Vp;function Tc(a){return{evt:a,pointerId:a.pointerId}}tr.createEvent=Tc;function Wp(a,e){return Da.get(a)===e}tr.hasPointerCapture=Wp;function Xp(a,e){Af(a),e.getStage()&&(Da.set(a,e),Mf&&e._fire("gotpointercapture",Tc(new PointerEvent("gotpointercapture"))))}tr.setPointerCapture=Xp;function Af(a,e){const n=Da.get(a);if(!n)return;const i=n.getStage();i&&i.content,Da.delete(a),Mf&&n._fire("lostpointercapture",Tc(new PointerEvent("lostpointercapture")))}tr.releaseCapture=Af;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const e=nt,n=Ee,i=Kn,o=we,l=Pr,c=xs,h=we,f=tr;var p="Stage",m="string",C="px",w="mouseout",_="mouseleave",y="mouseover",E="mouseenter",P="mousemove",T="mousedown",R="mouseup",v="pointermove",x="pointerdown",b="pointerup",k="pointercancel",B="lostpointercapture",O="pointerout",G="pointerleave",M="pointerover",D="pointerenter",V="contextmenu",W="touchstart",Y="touchend",X="touchmove",oe="touchcancel",he="wheel",fe=5,Me=[[E,"_pointerenter"],[T,"_pointerdown"],[P,"_pointermove"],[R,"_pointerup"],[_,"_pointerleave"],[W,"_pointerdown"],[X,"_pointermove"],[Y,"_pointerup"],[oe,"_pointercancel"],[y,"_pointerover"],[he,"_wheel"],[V,"_contextmenu"],[x,"_pointerdown"],[v,"_pointermove"],[b,"_pointerup"],[k,"_pointercancel"],[B,"_lostpointercapture"]];const se={mouse:{[O]:w,[G]:_,[M]:y,[D]:E,[v]:P,[x]:T,[b]:R,[k]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O]:"touchout",[G]:"touchleave",[M]:"touchover",[D]:"touchenter",[v]:X,[x]:W,[b]:Y,[k]:oe,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O]:O,[G]:G,[M]:M,[D]:D,[v]:v,[x]:x,[b]:b,[k]:k,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Q=Ne=>Ne.indexOf("pointer")>=0?"pointer":Ne.indexOf("touch")>=0?"touch":"mouse",Se=Ne=>{const N=Q(Ne);if(N==="pointer")return o.Konva.pointerEventsEnabled&&se.pointer;if(N==="touch")return se.touch;if(N==="mouse")return se.mouse};function Oe(Ne={}){return(Ne.clipFunc||Ne.clipWidth||Ne.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ne}const Ce="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Xe extends i.Container{constructor(N){super(Oe(N)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Oe(this.attrs)}),this._checkVisibility()}_validateAdd(N){const H=N.getType()==="Layer",te=N.getType()==="FastLayer";H||te||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const N=this.visible()?"":"none";this.content.style.display=N}setContainer(N){if(typeof N===m){if(N.charAt(0)==="."){var H=N.slice(1);N=document.getElementsByClassName(H)[0]}else{var te;N.charAt(0)!=="#"?te=N:te=N.slice(1),N=document.getElementById(te)}if(!N)throw"Can not find container in document with id "+te}return this._setAttr("container",N),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),N.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var N=this.children,H=N.length,te;for(te=0;te<H;te++)N[te].clear();return this}clone(N){return N||(N={}),N.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,N)}destroy(){super.destroy();var N=this.content;N&&e.Util._isInDocument(N)&&this.container().removeChild(N);var H=a.stages.indexOf(this);return H>-1&&a.stages.splice(H,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const N=this._pointerPositions[0]||this._changedPointerPositions[0];return N?{x:N.x,y:N.y}:(e.Util.warn(Ce),null)}_getPointerById(N){return this._pointerPositions.find(H=>H.id===N)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(N){N=N||{},N.x=N.x||0,N.y=N.y||0,N.width=N.width||this.width(),N.height=N.height||this.height();var H=new l.SceneCanvas({width:N.width,height:N.height,pixelRatio:N.pixelRatio||1}),te=H.getContext()._context,ge=this.children;return(N.x||N.y)&&te.translate(-1*N.x,-1*N.y),ge.forEach(function(de){if(de.isVisible()){var Ie=de._toKonvaCanvas(N);te.drawImage(Ie._canvas,N.x,N.y,Ie.getWidth()/Ie.getPixelRatio(),Ie.getHeight()/Ie.getPixelRatio())}}),H}getIntersection(N){if(!N)return null;var H=this.children,te=H.length,ge=te-1,de;for(de=ge;de>=0;de--){const Ie=H[de].getIntersection(N);if(Ie)return Ie}return null}_resizeDOM(){var N=this.width(),H=this.height();this.content&&(this.content.style.width=N+C,this.content.style.height=H+C),this.bufferCanvas.setSize(N,H),this.bufferHitCanvas.setSize(N,H),this.children.forEach(te=>{te.setSize({width:N,height:H}),te.draw()})}add(N,...H){if(arguments.length>1){for(var te=0;te<arguments.length;te++)this.add(arguments[te]);return this}super.add(N);var ge=this.children.length;return ge>fe&&e.Util.warn("The stage has "+ge+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),N.setSize({width:this.width(),height:this.height()}),N.draw(),o.Konva.isBrowser&&this.content.appendChild(N.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(N){return f.hasPointerCapture(N,this)}setPointerCapture(N){f.setPointerCapture(N,this)}releaseCapture(N){f.releaseCapture(N,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&Me.forEach(([N,H])=>{this.content.addEventListener(N,te=>{this[H](te)},{passive:!1})})}_pointerenter(N){this.setPointersPositions(N);const H=Se(N.type);H&&this._fire(H.pointerenter,{evt:N,target:this,currentTarget:this})}_pointerover(N){this.setPointersPositions(N);const H=Se(N.type);H&&this._fire(H.pointerover,{evt:N,target:this,currentTarget:this})}_getTargetShape(N){let H=this[N+"targetShape"];return H&&!H.getStage()&&(H=null),H}_pointerleave(N){const H=Se(N.type),te=Q(N.type);if(H){this.setPointersPositions(N);var ge=this._getTargetShape(te),de=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;ge&&de?(ge._fireAndBubble(H.pointerout,{evt:N}),ge._fireAndBubble(H.pointerleave,{evt:N}),this._fire(H.pointerleave,{evt:N,target:this,currentTarget:this}),this[te+"targetShape"]=null):de&&(this._fire(H.pointerleave,{evt:N,target:this,currentTarget:this}),this._fire(H.pointerout,{evt:N,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(N){const H=Se(N.type),te=Q(N.type);if(H){this.setPointersPositions(N);var ge=!1;this._changedPointerPositions.forEach(de=>{var Ie=this.getIntersection(de);if(c.DD.justDragged=!1,o.Konva["_"+te+"ListenClick"]=!0,!Ie||!Ie.isListening())return;o.Konva.capturePointerEventsEnabled&&Ie.setPointerCapture(de.id),this[te+"ClickStartShape"]=Ie,Ie._fireAndBubble(H.pointerdown,{evt:N,pointerId:de.id}),ge=!0;const ke=N.type.indexOf("touch")>=0;Ie.preventDefault()&&N.cancelable&&ke&&N.preventDefault()}),ge||this._fire(H.pointerdown,{evt:N,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(N){const H=Se(N.type),te=Q(N.type);if(!H)return;o.Konva.isDragging()&&c.DD.node.preventDefault()&&N.cancelable&&N.preventDefault(),this.setPointersPositions(N);var ge=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;if(!ge)return;var de={};let Ie=!1;var ke=this._getTargetShape(te);this._changedPointerPositions.forEach(ot=>{const Ae=f.getCapturedShape(ot.id)||this.getIntersection(ot),Ct=ot.id,Ye={evt:N,pointerId:Ct};var Fe=ke!==Ae;if(Fe&&ke&&(ke._fireAndBubble(H.pointerout,{...Ye},Ae),ke._fireAndBubble(H.pointerleave,{...Ye},Ae)),Ae){if(de[Ae._id])return;de[Ae._id]=!0}Ae&&Ae.isListening()?(Ie=!0,Fe&&(Ae._fireAndBubble(H.pointerover,{...Ye},ke),Ae._fireAndBubble(H.pointerenter,{...Ye},ke),this[te+"targetShape"]=Ae),Ae._fireAndBubble(H.pointermove,{...Ye})):ke&&(this._fire(H.pointerover,{evt:N,target:this,currentTarget:this,pointerId:Ct}),this[te+"targetShape"]=null)}),Ie||this._fire(H.pointermove,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(N){const H=Se(N.type),te=Q(N.type);if(!H)return;this.setPointersPositions(N);const ge=this[te+"ClickStartShape"],de=this[te+"ClickEndShape"];var Ie={};let ke=!1;this._changedPointerPositions.forEach(ot=>{const Ae=f.getCapturedShape(ot.id)||this.getIntersection(ot);if(Ae){if(Ae.releaseCapture(ot.id),Ie[Ae._id])return;Ie[Ae._id]=!0}const Ct=ot.id,Ye={evt:N,pointerId:Ct};let Fe=!1;o.Konva["_"+te+"InDblClickWindow"]?(Fe=!0,clearTimeout(this[te+"DblTimeout"])):c.DD.justDragged||(o.Konva["_"+te+"InDblClickWindow"]=!0,clearTimeout(this[te+"DblTimeout"])),this[te+"DblTimeout"]=setTimeout(function(){o.Konva["_"+te+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),Ae&&Ae.isListening()?(ke=!0,this[te+"ClickEndShape"]=Ae,Ae._fireAndBubble(H.pointerup,{...Ye}),o.Konva["_"+te+"ListenClick"]&&ge&&ge===Ae&&(Ae._fireAndBubble(H.pointerclick,{...Ye}),Fe&&de&&de===Ae&&Ae._fireAndBubble(H.pointerdblclick,{...Ye}))):(this[te+"ClickEndShape"]=null,o.Konva["_"+te+"ListenClick"]&&this._fire(H.pointerclick,{evt:N,target:this,currentTarget:this,pointerId:Ct}),Fe&&this._fire(H.pointerdblclick,{evt:N,target:this,currentTarget:this,pointerId:Ct}))}),ke||this._fire(H.pointerup,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+te+"ListenClick"]=!1,N.cancelable&&te!=="touch"&&N.preventDefault()}_contextmenu(N){this.setPointersPositions(N);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(V,{evt:N}):this._fire(V,{evt:N,target:this,currentTarget:this})}_wheel(N){this.setPointersPositions(N);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(he,{evt:N}):this._fire(he,{evt:N,target:this,currentTarget:this})}_pointercancel(N){this.setPointersPositions(N);const H=f.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());H&&H._fireAndBubble(b,f.createEvent(N)),f.releaseCapture(N.pointerId)}_lostpointercapture(N){f.releaseCapture(N.pointerId)}setPointersPositions(N){var H=this._getContentPosition(),te=null,ge=null;N=N||window.event,N.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(N.touches,de=>{this._pointerPositions.push({id:de.identifier,x:(de.clientX-H.left)/H.scaleX,y:(de.clientY-H.top)/H.scaleY})}),Array.prototype.forEach.call(N.changedTouches||N.touches,de=>{this._changedPointerPositions.push({id:de.identifier,x:(de.clientX-H.left)/H.scaleX,y:(de.clientY-H.top)/H.scaleY})})):(te=(N.clientX-H.left)/H.scaleX,ge=(N.clientY-H.top)/H.scaleY,this.pointerPos={x:te,y:ge},this._pointerPositions=[{x:te,y:ge,id:e.Util._getFirstPointerId(N)}],this._changedPointerPositions=[{x:te,y:ge,id:e.Util._getFirstPointerId(N)}])}_setPointerPosition(N){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(N)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var N=this.content.getBoundingClientRect();return{top:N.top,left:N.left,scaleX:N.width/this.content.clientWidth||1,scaleY:N.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!o.Konva.isBrowser){var N=this.container();if(!N)throw"Stage has no container. A container is required.";N.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),N.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(N){N.batchDraw()}),this}}a.Stage=Xe,Xe.prototype.nodeType=p,(0,h._registerNode)(Xe),n.Factory.addGetterSetter(Xe,"container")})(Rf);var Ua={},mt={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const e=we,n=nt,i=Ee,o=et,l=le,c=we,h=tr;var f="hasShadow",p="shadowRGBA",m="patternImage",C="linearGradient",w="radialGradient";let _;function y(){return _||(_=n.Util.createCanvasElement().getContext("2d"),_)}a.shapes={};function E(G){const M=this.attrs.fillRule;M?G.fill(M):G.fill()}function P(G){G.stroke()}function T(G){G.fill()}function R(G){G.stroke()}function v(){this._clearCache(f)}function x(){this._clearCache(p)}function b(){this._clearCache(m)}function k(){this._clearCache(C)}function B(){this._clearCache(w)}class O extends o.Node{constructor(M){super(M);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in a.shapes)););this.colorKey=D,a.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(m,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var M=y();const D=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const V=new n.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(e.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const W=V.getMatrix(),Y=typeof DOMMatrix>"u"?{a:W[0],b:W[1],c:W[2],d:W[3],e:W[4],f:W[5]}:new DOMMatrix(W);D.setTransform(Y)}return D}}_getLinearGradient(){return this._getCache(C,this.__getLinearGradient)}__getLinearGradient(){var M=this.fillLinearGradientColorStops();if(M){for(var D=y(),V=this.fillLinearGradientStartPoint(),W=this.fillLinearGradientEndPoint(),Y=D.createLinearGradient(V.x,V.y,W.x,W.y),X=0;X<M.length;X+=2)Y.addColorStop(M[X],M[X+1]);return Y}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){var M=this.fillRadialGradientColorStops();if(M){for(var D=y(),V=this.fillRadialGradientStartPoint(),W=this.fillRadialGradientEndPoint(),Y=D.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),W.x,W.y,this.fillRadialGradientEndRadius()),X=0;X<M.length;X+=2)Y.addColorStop(M[X],M[X+1]);return Y}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){var D=this.getStage();if(!D)return!1;const V=D.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const W=M||this.hasFill(),Y=this.hasStroke(),X=this.getAbsoluteOpacity()!==1;if(W&&Y&&X)return!0;const oe=this.hasShadow(),he=this.shadowForStrokeEnabled();return!!(W&&Y&&oe&&he)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){const D=M.skipTransform,V=M.relativeTo,W=this.getSelfRect(),X=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,oe=W.width+X,he=W.height+X,fe=!M.skipShadow&&this.hasShadow(),Me=fe?this.shadowOffsetX():0,se=fe?this.shadowOffsetY():0,Q=oe+Math.abs(Me),Se=he+Math.abs(se),Oe=fe&&this.shadowBlur()||0,Ce=Q+Oe*2,Xe=Se+Oe*2,Ne={width:Ce,height:Xe,x:-(X/2+Oe)+Math.min(Me,0)+W.x,y:-(X/2+Oe)+Math.min(se,0)+W.y};return D?Ne:this._transformedRect(Ne,V)}drawScene(M,D,V){var W=this.getLayer(),Y=M||W.getCanvas(),X=Y.getContext(),oe=this._getCanvasCache(),he=this.getSceneFunc(),fe=this.hasShadow(),Me,se,Q=Y.isCache,Se=D===this;if(!this.isVisible()&&!Se)return this;if(oe){X.save();var Oe=this.getAbsoluteTransform(D).getMatrix();return X.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),this._drawCachedSceneCanvas(X),X.restore(),this}if(!he)return this;if(X.save(),this._useBufferCanvas()&&!Q){Me=this.getStage();const Ne=V||Me.bufferCanvas;se=Ne.getContext(),se.clear(),se.save(),se._applyLineJoin(this);var Ce=this.getAbsoluteTransform(D).getMatrix();se.transform(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]),he.call(this,se,this),se.restore();var Xe=Ne.pixelRatio;fe&&X._applyShadow(this),X._applyOpacity(this),X._applyGlobalCompositeOperation(this),X.drawImage(Ne._canvas,0,0,Ne.width/Xe,Ne.height/Xe)}else{if(X._applyLineJoin(this),!Se){var Ce=this.getAbsoluteTransform(D).getMatrix();X.transform(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]),X._applyOpacity(this),X._applyGlobalCompositeOperation(this)}fe&&X._applyShadow(this),he.call(this,X,this)}return X.restore(),this}drawHit(M,D,V=!1){if(!this.shouldDrawHit(D,V))return this;var W=this.getLayer(),Y=M||W.hitCanvas,X=Y&&Y.getContext(),oe=this.hitFunc()||this.sceneFunc(),he=this._getCanvasCache(),fe=he&&he.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),fe){X.save();var Me=this.getAbsoluteTransform(D).getMatrix();return X.transform(Me[0],Me[1],Me[2],Me[3],Me[4],Me[5]),this._drawCachedHitCanvas(X),X.restore(),this}if(!oe)return this;if(X.save(),X._applyLineJoin(this),!(this===D)){var Q=this.getAbsoluteTransform(D).getMatrix();X.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return oe.call(this,X,this),X.restore(),this}drawHitFromCache(M=0){var D=this._getCanvasCache(),V=this._getCachedSceneCanvas(),W=D.hit,Y=W.getContext(),X=W.getWidth(),oe=W.getHeight(),he,fe,Me,se,Q,Se;Y.clear(),Y.drawImage(V._canvas,0,0,X,oe);try{for(he=Y.getImageData(0,0,X,oe),fe=he.data,Me=fe.length,se=n.Util._hexToRgb(this.colorKey),Q=0;Q<Me;Q+=4)Se=fe[Q+3],Se>M?(fe[Q]=se.r,fe[Q+1]=se.g,fe[Q+2]=se.b,fe[Q+3]=255):fe[Q+3]=0;Y.putImageData(he,0,0)}catch(Oe){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Oe.message)}return this}hasPointerCapture(M){return h.hasPointerCapture(M,this)}setPointerCapture(M){h.setPointerCapture(M,this)}releaseCapture(M){h.releaseCapture(M,this)}}a.Shape=O,O.prototype._fillFunc=E,O.prototype._strokeFunc=P,O.prototype._fillFuncHit=T,O.prototype._strokeFuncHit=R,O.prototype._centroid=!1,O.prototype.nodeType="Shape",(0,c._registerNode)(O),O.prototype.eventListeners={},O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",B),i.Factory.addGetterSetter(O,"stroke",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"strokeWidth",2,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(O,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(O,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"lineJoin"),i.Factory.addGetterSetter(O,"lineCap"),i.Factory.addGetterSetter(O,"sceneFunc"),i.Factory.addGetterSetter(O,"hitFunc"),i.Factory.addGetterSetter(O,"dash"),i.Factory.addGetterSetter(O,"dashOffset",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowColor",void 0,(0,l.getStringValidator)()),i.Factory.addGetterSetter(O,"shadowBlur",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOpacity",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(O,"shadowOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternImage"),i.Factory.addGetterSetter(O,"fill",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"fillPatternX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(O,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(O,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(O,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(O,"fillEnabled",!0),i.Factory.addGetterSetter(O,"strokeEnabled",!0),i.Factory.addGetterSetter(O,"shadowEnabled",!0),i.Factory.addGetterSetter(O,"dashEnabled",!0),i.Factory.addGetterSetter(O,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(O,"fillPriority","color"),i.Factory.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternScaleX",1,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternScaleY",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(O,"fillPatternRotation",0),i.Factory.addGetterSetter(O,"fillRule",void 0,(0,l.getStringValidator)()),i.Factory.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(mt);Object.defineProperty(Ua,"__esModule",{value:!0});Ua.Layer=void 0;const Jr=nt,Vu=Kn,Oi=et,kc=Ee,y0=Pr,Kp=le,qp=mt,Yp=we;var Qp="#",Jp="beforeDraw",Zp="draw",Nf=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ev=Nf.length;let $i=class extends Vu.Container{constructor(e){super(e),this.canvas=new y0.SceneCanvas,this.hitCanvas=new y0.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Oi.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=Oi.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Oi.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Oi.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Oi.Node.prototype.remove.call(this),e&&e.parentNode&&Jr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Jr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Oi.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Jr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Jr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Jr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let o=0;o<ev;o++){const l=Nf[o],c=this._getIntersection({x:e.x+l.x*n,y:e.y+l.y*n}),h=c.shape;if(h)return h;if(i=!!c.antialiased,!c.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,o=i[3];if(o===255){const l=Jr.Util._rgbToHex(i[0],i[1],i[2]),c=qp.shapes[Qp+l];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,n){var i=this.getLayer(),o=e||i&&i.getCanvas();return this._fire(Jp,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),Vu.Container.prototype.drawScene.call(this,o,n),this._fire(Zp,{node:this}),this}drawHit(e,n){var i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Vu.Container.prototype.drawHit.call(this,o,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Jr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Jr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Jr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ua.Layer=$i;$i.prototype.nodeType="Layer";(0,Yp._registerNode)($i);kc.Factory.addGetterSetter($i,"imageSmoothingEnabled",!0);kc.Factory.addGetterSetter($i,"clearBeforeDraw",!0);kc.Factory.addGetterSetter($i,"hitGraphEnabled",!0,(0,Kp.getBooleanValidator)());var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.FastLayer=void 0;const tv=nt,rv=Ua,nv=we;class Rc extends rv.Layer{constructor(e){super(e),this.listening(!1),tv.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Es.FastLayer=Rc;Rc.prototype.nodeType="FastLayer";(0,nv._registerNode)(Rc);var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.Group=void 0;const iv=nt,av=Kn,ov=we;class Mc extends av.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&iv.Util.throw("You may only add groups and shapes to groups.")}}ji.Group=Mc;Mc.prototype.nodeType="Group";(0,ov._registerNode)(Mc);var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.Animation=void 0;const Wu=we,_0=nt,Xu=function(){return Wu.glob.performance&&Wu.glob.performance.now?function(){return Wu.glob.performance.now()}:function(){return new Date().getTime()}}();class Dr{constructor(e,n){this.id=Dr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Xu(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let o=0;o<i;o++)if(n[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Dr.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Xu(),Dr._addAnimation(this),this}stop(){return Dr._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===n){this.animations.splice(l,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const o=n[i],l=o.layers,c=o.func;o._updateFrameObject(Xu());const h=l.length;let f;if(c?f=c.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<h;p++){const m=l[p];m._id!==void 0&&(e[m._id]=m)}}for(let i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=Dr;e.animations.length?(e._runFrames(),_0.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,_0.Util.requestAnimFrame(this._animationLoop))}}zi.Animation=Dr;Dr.animations=[];Dr.animIdCounter=0;Dr.animRunning=!1;var If={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const e=nt,n=zi,i=et,o=we;var l={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=1,h=2,f=3,p=0,m=["fill","stroke","shadowColor"];class C{constructor(y,E,P,T,R,v,x){this.prop=y,this.propFunc=E,this.begin=T,this._pos=T,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=R-this.begin,this.pause()}fire(y){var E=this[y];E&&E()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===h?this.setTime(y):this.state===f&&this.setTime(this.duration-y)}pause(){this.state=c,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(y){var E=this,P=y.node,T=P._id,R,v=y.easing||a.Easings.Linear,x=!!y.yoyo,b;typeof y.duration>"u"?R=.3:y.duration===0?R=.001:R=y.duration,this.node=P,this._id=p++;var k=P.getLayer()||(P instanceof o.Konva.Stage?P.getLayers():null);k||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){E.tween.onEnterFrame()},k),this.tween=new C(b,function(B){E._tweenFunc(B)},v,0,1,R*1e3,x),this._addListeners(),w.attrs[T]||(w.attrs[T]={}),w.attrs[T][this._id]||(w.attrs[T][this._id]={}),w.tweens[T]||(w.tweens[T]={});for(b in y)l[b]===void 0&&this._addAttr(b,y[b]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,E){var P=this.node,T=P._id,R,v,x,b,k,B,O,G;if(x=w.tweens[T][y],x&&delete w.attrs[T][x][y],R=P.getAttr(y),e.Util._isArray(E))if(v=[],k=Math.max(E.length,R.length),y==="points"&&E.length!==R.length&&(E.length>R.length?(O=R,R=e.Util._prepareArrayForTween(R,E,P.closed())):(B=E,E=e.Util._prepareArrayForTween(E,R,P.closed()))),y.indexOf("fill")===0)for(b=0;b<k;b++)if(b%2===0)v.push(E[b]-R[b]);else{var M=e.Util.colorToRGBA(R[b]);G=e.Util.colorToRGBA(E[b]),R[b]=M,v.push({r:G.r-M.r,g:G.g-M.g,b:G.b-M.b,a:G.a-M.a})}else for(b=0;b<k;b++)v.push(E[b]-R[b]);else m.indexOf(y)!==-1?(R=e.Util.colorToRGBA(R),G=e.Util.colorToRGBA(E),v={r:G.r-R.r,g:G.g-R.g,b:G.b-R.b,a:G.a-R.a}):v=E-R;w.attrs[T][this._id][y]={start:R,diff:v,end:E,trueEnd:B,trueStart:O},w.tweens[T][y]=this._id}_tweenFunc(y){var E=this.node,P=w.attrs[E._id][this._id],T,R,v,x,b,k,B,O;for(T in P){if(R=P[T],v=R.start,x=R.diff,O=R.end,e.Util._isArray(v))if(b=[],B=Math.max(v.length,O.length),T.indexOf("fill")===0)for(k=0;k<B;k++)k%2===0?b.push((v[k]||0)+x[k]*y):b.push("rgba("+Math.round(v[k].r+x[k].r*y)+","+Math.round(v[k].g+x[k].g*y)+","+Math.round(v[k].b+x[k].b*y)+","+(v[k].a+x[k].a*y)+")");else for(k=0;k<B;k++)b.push((v[k]||0)+x[k]*y);else m.indexOf(T)!==-1?b="rgba("+Math.round(v.r+x.r*y)+","+Math.round(v.g+x.g*y)+","+Math.round(v.b+x.b*y)+","+(v.a+x.a*y)+")":b=v+x*y;E.setAttr(T,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueEnd&&y.setAttr("points",E.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueStart&&y.points(E.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,E=this._id,P=w.tweens[y],T;this.pause();for(T in P)delete w.tweens[y][T];delete w.attrs[y][E]}}a.Tween=w,w.attrs={},w.tweens={},i.Node.prototype.to=function(_){var y=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),y&&y()};var E=new w(_);E.play()},a.Easings={BackEaseIn(_,y,E,P){var T=1.70158;return E*(_/=P)*_*((T+1)*_-T)+y},BackEaseOut(_,y,E,P){var T=1.70158;return E*((_=_/P-1)*_*((T+1)*_+T)+1)+y},BackEaseInOut(_,y,E,P){var T=1.70158;return(_/=P/2)<1?E/2*(_*_*(((T*=1.525)+1)*_-T))+y:E/2*((_-=2)*_*(((T*=1.525)+1)*_+T)+2)+y},ElasticEaseIn(_,y,E,P,T,R){var v=0;return _===0?y:(_/=P)===1?y+E:(R||(R=P*.3),!T||T<Math.abs(E)?(T=E,v=R/4):v=R/(2*Math.PI)*Math.asin(E/T),-(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/R))+y)},ElasticEaseOut(_,y,E,P,T,R){var v=0;return _===0?y:(_/=P)===1?y+E:(R||(R=P*.3),!T||T<Math.abs(E)?(T=E,v=R/4):v=R/(2*Math.PI)*Math.asin(E/T),T*Math.pow(2,-10*_)*Math.sin((_*P-v)*(2*Math.PI)/R)+E+y)},ElasticEaseInOut(_,y,E,P,T,R){var v=0;return _===0?y:(_/=P/2)===2?y+E:(R||(R=P*(.3*1.5)),!T||T<Math.abs(E)?(T=E,v=R/4):v=R/(2*Math.PI)*Math.asin(E/T),_<1?-.5*(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/R))+y:T*Math.pow(2,-10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/R)*.5+E+y)},BounceEaseOut(_,y,E,P){return(_/=P)<1/2.75?E*(7.5625*_*_)+y:_<2/2.75?E*(7.5625*(_-=1.5/2.75)*_+.75)+y:_<2.5/2.75?E*(7.5625*(_-=2.25/2.75)*_+.9375)+y:E*(7.5625*(_-=2.625/2.75)*_+.984375)+y},BounceEaseIn(_,y,E,P){return E-a.Easings.BounceEaseOut(P-_,0,E,P)+y},BounceEaseInOut(_,y,E,P){return _<P/2?a.Easings.BounceEaseIn(_*2,0,E,P)*.5+y:a.Easings.BounceEaseOut(_*2-P,0,E,P)*.5+E*.5+y},EaseIn(_,y,E,P){return E*(_/=P)*_+y},EaseOut(_,y,E,P){return-E*(_/=P)*(_-2)+y},EaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_+y:-E/2*(--_*(_-2)-1)+y},StrongEaseIn(_,y,E,P){return E*(_/=P)*_*_*_*_+y},StrongEaseOut(_,y,E,P){return E*((_=_/P-1)*_*_*_*_+1)+y},StrongEaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_*_*_*_+y:E/2*((_-=2)*_*_*_*_+2)+y},Linear(_,y,E,P){return E*_/P+y}}})(If);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const e=we,n=nt,i=et,o=Kn,l=Rf,c=Ua,h=Es,f=ji,p=xs,m=mt,C=zi,w=If,_=en,y=Pr;a.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:o.Container,Stage:l.Stage,stages:l.stages,Layer:c.Layer,FastLayer:h.FastLayer,Group:f.Group,DD:p.DD,Shape:m.Shape,shapes:m.shapes,Animation:C.Animation,Tween:w.Tween,Easings:w.Easings,Context:_.Context,Canvas:y.Canvas}),a.default=a.Konva})(ds);var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.Arc=void 0;const Ps=Ee,sv=mt,S0=we,bs=le,lv=we;class an extends sv.Shape{_sceneFunc(e){var n=S0.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),o=S0.Konva.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(o,Math.PI)),c=1,h=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),f=Math.sin(Math.min(o,Math.PI/2)),p=l*(l>0?e:n),m=c*n,C=h*(h>0?e:n),w=f*(f>0?n:e);return{x:p,y:i?-1*w:C,width:m-p,height:w-C}}}Cs.Arc=an;an.prototype._centroid=!0;an.prototype.className="Arc";an.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,lv._registerNode)(an);Ps.Factory.addGetterSetter(an,"innerRadius",0,(0,bs.getNumberValidator)());Ps.Factory.addGetterSetter(an,"outerRadius",0,(0,bs.getNumberValidator)());Ps.Factory.addGetterSetter(an,"angle",0,(0,bs.getNumberValidator)());Ps.Factory.addGetterSetter(an,"clockwise",!1,(0,bs.getBooleanValidator)());var Os={},Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Line=void 0;const Ts=Ee,uv=mt,Ff=le,cv=we;function fc(a,e,n,i,o,l,c){var h=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-e,2)),f=Math.sqrt(Math.pow(o-n,2)+Math.pow(l-i,2)),p=c*h/(h+f),m=c*f/(h+f),C=n-p*(o-a),w=i-p*(l-e),_=n+m*(o-a),y=i+m*(l-e);return[C,w,_,y]}function x0(a,e){var n=a.length,i=[],o,l;for(o=2;o<n-2;o+=2)l=fc(a[o-2],a[o-1],a[o],a[o+1],a[o+2],a[o+3],e),!isNaN(l[0])&&(i.push(l[0]),i.push(l[1]),i.push(a[o]),i.push(a[o+1]),i.push(l[2]),i.push(l[3]));return i}class En extends uv.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),i=n.length,o=this.tension(),l=this.closed(),c=this.bezier(),h,f,p;if(i){if(e.beginPath(),e.moveTo(n[0],n[1]),o!==0&&i>4){for(h=this.getTensionPoints(),f=h.length,p=l?0:4,l||e.quadraticCurveTo(h[0],h[1],h[2],h[3]);p<f-2;)e.bezierCurveTo(h[p++],h[p++],h[p++],h[p++],h[p++],h[p++]);l||e.quadraticCurveTo(h[f-2],h[f-1],n[i-2],n[i-1])}else if(c)for(p=2;p<i;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<i;p+=2)e.lineTo(n[p],n[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():x0(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,i=this.tension(),o=fc(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),l=fc(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),c=x0(e,i),h=[o[2],o[3]].concat(c).concat([l[0],l[1],e[n-2],e[n-1],l[2],l[3],o[0],o[1],e[0],e[1]]);return h}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);return{x:n,y:o,width:i-n,height:l-o}}}Ha.Line=En;En.prototype.className="Line";En.prototype._attrsAffectingSize=["points","bezier","tension"];(0,cv._registerNode)(En);Ts.Factory.addGetterSetter(En,"closed",!1);Ts.Factory.addGetterSetter(En,"bezier",!1);Ts.Factory.addGetterSetter(En,"tension",0,(0,Ff.getNumberValidator)());Ts.Factory.addGetterSetter(En,"points",[],(0,Ff.getNumberArrayValidator)());var Bi={},Lf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(c,h,f)=>{let p,m,C;p=f/2,m=0;for(let _=0;_<20;_++)C=p*a.tValues[20][_]+p,m+=a.cValues[20][_]*i(c,h,C);return p*m};a.getCubicArcLength=e;const n=(c,h,f)=>{f===void 0&&(f=1);const p=c[0]-2*c[1]+c[2],m=h[0]-2*h[1]+h[2],C=2*c[1]-2*c[0],w=2*h[1]-2*h[0],_=4*(p*p+m*m),y=4*(p*C+m*w),E=C*C+w*w;if(_===0)return f*Math.sqrt(Math.pow(c[2]-c[0],2)+Math.pow(h[2]-h[0],2));const P=y/(2*_),T=E/_,R=f+P,v=T-P*P,x=R*R+v>0?Math.sqrt(R*R+v):0,b=P*P+v>0?Math.sqrt(P*P+v):0,k=P+Math.sqrt(P*P+v)!==0?v*Math.log(Math.abs((R+x)/(P+b))):0;return Math.sqrt(_)/2*(R*x-P*b+k)};a.getQuadraticArcLength=n;function i(c,h,f){const p=o(1,f,c),m=o(1,f,h),C=p*p+m*m;return Math.sqrt(C)}const o=(c,h,f)=>{const p=f.length-1;let m,C;if(p===0)return 0;if(c===0){C=0;for(let w=0;w<=p;w++)C+=a.binomialCoefficients[p][w]*Math.pow(1-h,p-w)*Math.pow(h,w)*f[w];return C}else{m=new Array(p);for(let w=0;w<p;w++)m[w]=p*(f[w+1]-f[w]);return o(c-1,h,m)}},l=(c,h,f)=>{let p=1,m=c/h,C=(c-f(m))/h,w=0;for(;p>.001;){const _=f(m+C),y=Math.abs(c-_)/h;if(y<p)p=y,m+=C;else{const E=f(m-C),P=Math.abs(c-E)/h;P<p?(p=P,m-=C):C/=2}if(w++,w>500)break}return m};a.t2length=l})(Lf);Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Path=void 0;const dv=Ee,hv=mt,fv=we,Ti=Lf;class vt extends hv.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=vt.parsePathData(this.data()),this.pathLength=vt.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var i=!1,o=0;o<n.length;o++){var l=n[o].command,c=n[o].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":var h=c[0],f=c[1],p=c[2],m=c[3],C=c[4],w=c[5],_=c[6],y=c[7],E=p>m?p:m,P=p>m?1:p/m,T=p>m?m/p:1;e.translate(h,f),e.rotate(_),e.scale(P,T),e.arc(0,0,E,C,C+w,1-y),e.scale(1/P,1/T),e.rotate(-_),e.translate(-h,-f);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var m=p.points[4],C=p.points[5],w=p.points[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),C<0)for(let y=m-_;y>w;y-=_){const E=vt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}else for(let y=m+_;y<w;y+=_){const E=vt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}}else if(p.command==="C")for(let y=0;y<=1;y+=.01){const E=vt.getPointOnCubicBezier(y,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(E.x,E.y)}else e=e.concat(p.points)});for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],isNaN(c)||(n=Math.min(n,c),i=Math.max(i,c)),isNaN(h)||(o=Math.min(o,h),l=Math.max(l,h));return{x:n,y:o,width:i-n,height:l-o}}getLength(){return this.pathLength}getPointAtLength(e){return vt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,o){return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n))}static getPathLength(e){let n=0;for(var i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var i,o=0,l=n.length;if(!l)return null;for(;o<l&&e>n[o].pathLength;)e-=n[o].pathLength,++o;if(o===l)return i=n[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=n[o].points.slice(0,2),{x:i[0],y:i[1]};var c=n[o],h=c.points;switch(c.command){case"L":return vt.getPointOnLine(e,c.start.x,c.start.y,h[0],h[1]);case"C":return vt.getPointOnCubicBezier((0,Ti.t2length)(e,vt.getPathLength(n),E=>(0,Ti.getCubicArcLength)([c.start.x,h[0],h[2],h[4]],[c.start.y,h[1],h[3],h[5]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return vt.getPointOnQuadraticBezier((0,Ti.t2length)(e,vt.getPathLength(n),E=>(0,Ti.getQuadraticArcLength)([c.start.x,h[0],h[2]],[c.start.y,h[1],h[3]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],p=h[1],m=h[2],C=h[3],w=h[4],_=h[5],y=h[6];return w+=_*e/c.pathLength,vt.getPointOnEllipticalArc(f,p,m,C,w,y)}return null}static getPointOnLine(e,n,i,o,l,c,h){c===void 0&&(c=n),h===void 0&&(h=i);var f=(l-i)/(o-n+1e-8),p=Math.sqrt(e*e/(1+f*f));o<n&&(p*=-1);var m=f*p,C;if(o===n)C={x:c,y:h+m};else if((h-i)/(c-n+1e-8)===f)C={x:c+p,y:h+m};else{var w,_,y=this.getLineLength(n,i,o,l),E=(c-n)*(o-n)+(h-i)*(l-i);E=E/(y*y),w=n+E*(o-n),_=i+E*(l-i);var P=this.getLineLength(c,h,w,_),T=Math.sqrt(e*e-P*P);p=Math.sqrt(T*T/(1+f*f)),o<n&&(p*=-1),m=f*p,C={x:w+p,y:_+m}}return C}static getPointOnCubicBezier(e,n,i,o,l,c,h,f,p){function m(P){return P*P*P}function C(P){return 3*P*P*(1-P)}function w(P){return 3*P*(1-P)*(1-P)}function _(P){return(1-P)*(1-P)*(1-P)}var y=f*m(e)+c*C(e)+o*w(e)+n*_(e),E=p*m(e)+h*C(e)+l*w(e)+i*_(e);return{x:y,y:E}}static getPointOnQuadraticBezier(e,n,i,o,l,c,h){function f(_){return _*_}function p(_){return 2*_*(1-_)}function m(_){return(1-_)*(1-_)}var C=c*f(e)+o*p(e)+n*m(e),w=h*f(e)+l*p(e)+i*m(e);return{x:C,y:w}}static getPointOnEllipticalArc(e,n,i,o,l,c){var h=Math.cos(c),f=Math.sin(c),p={x:i*Math.cos(l),y:o*Math.sin(l)};return{x:e+(p.x*h-p.y*f),y:n+(p.x*f+p.y*h)}}static parsePathData(e){if(!e)return[];var n=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var o=0;o<i.length;o++)n=n.replace(new RegExp(i[o],"g"),"|"+i[o]);var l=n.split("|"),c=[],h=[],f=0,p=0,m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,C;for(o=1;o<l.length;o++){var w=l[o],_=w.charAt(0);for(w=w.slice(1),h.length=0;C=m.exec(w);)h.push(C[0]);for(var y=[],E=0,P=h.length;E<P;E++){if(h[E]==="00"){y.push(0,0);continue}var T=parseFloat(h[E]);isNaN(T)?y.push(0):y.push(T)}for(;y.length>0&&!isNaN(y[0]);){var R="",v=[],x=f,b=p,k,B,O,G,M,D,V,W,Y,X;switch(_){case"l":f+=y.shift(),p+=y.shift(),R="L",v.push(f,p);break;case"L":f=y.shift(),p=y.shift(),v.push(f,p);break;case"m":var oe=y.shift(),he=y.shift();if(f+=oe,p+=he,R="M",c.length>2&&c[c.length-1].command==="z"){for(var fe=c.length-2;fe>=0;fe--)if(c[fe].command==="M"){f=c[fe].points[0]+oe,p=c[fe].points[1]+he;break}}v.push(f,p),_="l";break;case"M":f=y.shift(),p=y.shift(),R="M",v.push(f,p),_="L";break;case"h":f+=y.shift(),R="L",v.push(f,p);break;case"H":f=y.shift(),R="L",v.push(f,p);break;case"v":p+=y.shift(),R="L",v.push(f,p);break;case"V":p=y.shift(),R="L",v.push(f,p);break;case"C":v.push(y.shift(),y.shift(),y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"c":v.push(f+y.shift(),p+y.shift(),f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),R="C",v.push(f,p);break;case"S":B=f,O=p,k=c[c.length-1],k.command==="C"&&(B=f+(f-k.points[2]),O=p+(p-k.points[3])),v.push(B,O,y.shift(),y.shift()),f=y.shift(),p=y.shift(),R="C",v.push(f,p);break;case"s":B=f,O=p,k=c[c.length-1],k.command==="C"&&(B=f+(f-k.points[2]),O=p+(p-k.points[3])),v.push(B,O,f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),R="C",v.push(f,p);break;case"Q":v.push(y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"q":v.push(f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),R="Q",v.push(f,p);break;case"T":B=f,O=p,k=c[c.length-1],k.command==="Q"&&(B=f+(f-k.points[0]),O=p+(p-k.points[1])),f=y.shift(),p=y.shift(),R="Q",v.push(B,O,f,p);break;case"t":B=f,O=p,k=c[c.length-1],k.command==="Q"&&(B=f+(f-k.points[0]),O=p+(p-k.points[1])),f+=y.shift(),p+=y.shift(),R="Q",v.push(B,O,f,p);break;case"A":G=y.shift(),M=y.shift(),D=y.shift(),V=y.shift(),W=y.shift(),Y=f,X=p,f=y.shift(),p=y.shift(),R="A",v=this.convertEndpointToCenterParameterization(Y,X,f,p,V,W,G,M,D);break;case"a":G=y.shift(),M=y.shift(),D=y.shift(),V=y.shift(),W=y.shift(),Y=f,X=p,f+=y.shift(),p+=y.shift(),R="A",v=this.convertEndpointToCenterParameterization(Y,X,f,p,V,W,G,M,D);break}c.push({command:R||_,points:v,start:{x,y:b},pathLength:this.calcLength(x,b,R||_,v)})}(_==="z"||_==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(e,n,i,o){var l,c,h,f,p=vt;switch(i){case"L":return p.getLineLength(e,n,o[0],o[1]);case"C":return(0,Ti.getCubicArcLength)([e,o[0],o[2],o[4]],[n,o[1],o[3],o[5]],1);case"Q":return(0,Ti.getQuadraticArcLength)([e,o[0],o[2]],[n,o[1],o[3]],1);case"A":l=0;var m=o[4],C=o[5],w=o[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),c=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],m,0),C<0)for(f=m-_;f>w;f-=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;else for(f=m+_;f<w;f+=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;return h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],w,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),l}return 0}static convertEndpointToCenterParameterization(e,n,i,o,l,c,h,f,p){var m=p*(Math.PI/180),C=Math.cos(m)*(e-i)/2+Math.sin(m)*(n-o)/2,w=-1*Math.sin(m)*(e-i)/2+Math.cos(m)*(n-o)/2,_=C*C/(h*h)+w*w/(f*f);_>1&&(h*=Math.sqrt(_),f*=Math.sqrt(_));var y=Math.sqrt((h*h*(f*f)-h*h*(w*w)-f*f*(C*C))/(h*h*(w*w)+f*f*(C*C)));l===c&&(y*=-1),isNaN(y)&&(y=0);var E=y*h*w/f,P=y*-f*C/h,T=(e+i)/2+Math.cos(m)*E-Math.sin(m)*P,R=(n+o)/2+Math.sin(m)*E+Math.cos(m)*P,v=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},x=function(M,D){return(M[0]*D[0]+M[1]*D[1])/(v(M)*v(D))},b=function(M,D){return(M[0]*D[1]<M[1]*D[0]?-1:1)*Math.acos(x(M,D))},k=b([1,0],[(C-E)/h,(w-P)/f]),B=[(C-E)/h,(w-P)/f],O=[(-1*C-E)/h,(-1*w-P)/f],G=b(B,O);return x(B,O)<=-1&&(G=Math.PI),x(B,O)>=1&&(G=0),c===0&&G>0&&(G=G-2*Math.PI),c===1&&G<0&&(G=G+2*Math.PI),[T,R,h,f,k,G,m,c]}}Bi.Path=vt;vt.prototype.className="Path";vt.prototype._attrsAffectingSize=["data"];(0,fv._registerNode)(vt);dv.Factory.addGetterSetter(vt,"data");Object.defineProperty(Os,"__esModule",{value:!0});Os.Arrow=void 0;const ks=Ee,gv=Ha,Df=le,pv=we,w0=Bi;class Yn extends gv.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,i=this.points(),o=i,l=this.tension()!==0&&i.length>4;l&&(o=this.getTensionPoints());var c=this.pointerLength(),h=i.length,f,p;if(l){const w=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[h-2],i[h-1]],_=w0.Path.calcLength(o[o.length-4],o[o.length-3],"C",w),y=w0.Path.getPointOnQuadraticBezier(Math.min(1,1-c/_),w[0],w[1],w[2],w[3],w[4],w[5]);f=i[h-2]-y.x,p=i[h-1]-y.y}else f=i[h-2]-i[h-4],p=i[h-1]-i[h-3];var m=(Math.atan2(p,f)+n)%n,C=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[h-2],i[h-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),l?(f=(o[0]+o[2])/2-i[0],p=(o[1]+o[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-f)+n)%n),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Os.Arrow=Yn;Yn.prototype.className="Arrow";(0,pv._registerNode)(Yn);ks.Factory.addGetterSetter(Yn,"pointerLength",10,(0,Df.getNumberValidator)());ks.Factory.addGetterSetter(Yn,"pointerWidth",10,(0,Df.getNumberValidator)());ks.Factory.addGetterSetter(Yn,"pointerAtBeginning",!1);ks.Factory.addGetterSetter(Yn,"pointerAtEnding",!0);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Circle=void 0;const vv=Ee,mv=mt,yv=le,_v=we;class Ui extends mv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Rs.Circle=Ui;Ui.prototype._centroid=!0;Ui.prototype.className="Circle";Ui.prototype._attrsAffectingSize=["radius"];(0,_v._registerNode)(Ui);vv.Factory.addGetterSetter(Ui,"radius",0,(0,yv.getNumberValidator)());var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Ellipse=void 0;const Ac=Ee,Sv=mt,Gf=le,xv=we;class Cn extends Sv.Shape{_sceneFunc(e){var n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ms.Ellipse=Cn;Cn.prototype.className="Ellipse";Cn.prototype._centroid=!0;Cn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,xv._registerNode)(Cn);Ac.Factory.addComponentsGetterSetter(Cn,"radius",["x","y"]);Ac.Factory.addGetterSetter(Cn,"radiusX",0,(0,Gf.getNumberValidator)());Ac.Factory.addGetterSetter(Cn,"radiusY",0,(0,Gf.getNumberValidator)());var As={};Object.defineProperty(As,"__esModule",{value:!0});As.Image=void 0;const Ku=nt,Qn=Ee,wv=mt,Ev=we,Va=le;let $r=class $f extends wv.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),l=this.attrs.image;let c;if(l){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?c=[l,this.cropX(),this.cropY(),h,f,0,0,n,i]:c=[l,0,0,n,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?Ku.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),l&&(o&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){var n=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?Ku.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,i=null){var o=Ku.Util.createImageElement();o.onload=function(){var l=new $f({image:o});n(l)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}};As.Image=$r;$r.prototype.className="Image";(0,Ev._registerNode)($r);Qn.Factory.addGetterSetter($r,"cornerRadius",0,(0,Va.getNumberOrArrayOfNumbersValidator)(4));Qn.Factory.addGetterSetter($r,"image");Qn.Factory.addComponentsGetterSetter($r,"crop",["x","y","width","height"]);Qn.Factory.addGetterSetter($r,"cropX",0,(0,Va.getNumberValidator)());Qn.Factory.addGetterSetter($r,"cropY",0,(0,Va.getNumberValidator)());Qn.Factory.addGetterSetter($r,"cropWidth",0,(0,Va.getNumberValidator)());Qn.Factory.addGetterSetter($r,"cropHeight",0,(0,Va.getNumberValidator)());var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.Tag=Ii.Label=void 0;const Ns=Ee,Cv=mt,Pv=ji,Nc=le,jf=we;var zf=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],bv="Change.konva",Ov="none",gc="up",pc="right",vc="down",mc="left",Tv=zf.length;class Ic extends Pv.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,i,o=function(){n._sync()};for(i=0;i<Tv;i++)e.on(zf[i]+bv,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),i,o,l,c,h,f,p;if(e&&n){switch(i=e.width(),o=e.height(),l=n.pointerDirection(),c=n.pointerWidth(),p=n.pointerHeight(),h=0,f=0,l){case gc:h=i/2,f=-1*p;break;case pc:h=i+c,f=o/2;break;case vc:h=i/2,f=o+p;break;case mc:h=-1*c,f=o/2;break}n.setAttrs({x:-1*h,y:-1*f,width:i,height:o}),e.setAttrs({x:-1*h,y:-1*f})}}}Ii.Label=Ic;Ic.prototype.className="Label";(0,jf._registerNode)(Ic);class Jn extends Cv.Shape{_sceneFunc(e){var n=this.width(),i=this.height(),o=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),h=this.cornerRadius();let f=0,p=0,m=0,C=0;typeof h=="number"?f=p=m=C=Math.min(h,n/2,i/2):(f=Math.min(h[0]||0,n/2,i/2),p=Math.min(h[1]||0,n/2,i/2),C=Math.min(h[2]||0,n/2,i/2),m=Math.min(h[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(f,0),o===gc&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*c),e.lineTo((n+l)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),o===pc&&(e.lineTo(n,(i-c)/2),e.lineTo(n+l,i/2),e.lineTo(n,(i+c)/2)),e.lineTo(n,i-C),e.arc(n-C,i-C,C,0,Math.PI/2,!1),o===vc&&(e.lineTo((n+l)/2,i),e.lineTo(n/2,i+c),e.lineTo((n-l)/2,i)),e.lineTo(m,i),e.arc(m,i-m,m,Math.PI/2,Math.PI,!1),o===mc&&(e.lineTo(0,(i+c)/2),e.lineTo(-1*l,i/2),e.lineTo(0,(i-c)/2)),e.lineTo(0,f),e.arc(f,f,f,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,i=this.pointerWidth(),o=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),h=this.height();return l===gc?(n-=o,h+=o):l===vc?h+=o:l===mc?(e-=i*1.5,c+=i):l===pc&&(c+=i*1.5),{x:e,y:n,width:c,height:h}}}Ii.Tag=Jn;Jn.prototype.className="Tag";(0,jf._registerNode)(Jn);Ns.Factory.addGetterSetter(Jn,"pointerDirection",Ov);Ns.Factory.addGetterSetter(Jn,"pointerWidth",0,(0,Nc.getNumberValidator)());Ns.Factory.addGetterSetter(Jn,"pointerHeight",0,(0,Nc.getNumberValidator)());Ns.Factory.addGetterSetter(Jn,"cornerRadius",0,(0,Nc.getNumberOrArrayOfNumbersValidator)(4));var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.Rect=void 0;const kv=Ee,Rv=mt,Mv=we,Av=nt,Nv=le;let Is=class extends Rv.Shape{_sceneFunc(e){var n=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),n?Av.Util.drawRoundedRectPath(e,i,o,n):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};Wa.Rect=Is;Is.prototype.className="Rect";(0,Mv._registerNode)(Is);kv.Factory.addGetterSetter(Is,"cornerRadius",0,(0,Nv.getNumberOrArrayOfNumbersValidator)(4));var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.RegularPolygon=void 0;const Bf=Ee,Iv=mt,Uf=le,Fv=we;class Zn extends Iv.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var o=0;o<e;o++)i.push({x:n*Math.sin(o*2*Math.PI/e),y:-1*n*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();var n=e[0].x,i=e[0].y,o=e[0].x,l=e[0].y;return e.forEach(c=>{n=Math.min(n,c.x),i=Math.max(i,c.x),o=Math.min(o,c.y),l=Math.max(l,c.y)}),{x:n,y:o,width:i-n,height:l-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Fs.RegularPolygon=Zn;Zn.prototype.className="RegularPolygon";Zn.prototype._centroid=!0;Zn.prototype._attrsAffectingSize=["radius"];(0,Fv._registerNode)(Zn);Bf.Factory.addGetterSetter(Zn,"radius",0,(0,Uf.getNumberValidator)());Bf.Factory.addGetterSetter(Zn,"sides",0,(0,Uf.getNumberValidator)());var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.Ring=void 0;const Hf=Ee,Lv=mt,Vf=le,Dv=we;var E0=Math.PI*2;class ei extends Lv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,E0,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),E0,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ls.Ring=ei;ei.prototype.className="Ring";ei.prototype._centroid=!0;ei.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Dv._registerNode)(ei);Hf.Factory.addGetterSetter(ei,"innerRadius",0,(0,Vf.getNumberValidator)());Hf.Factory.addGetterSetter(ei,"outerRadius",0,(0,Vf.getNumberValidator)());var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Sprite=void 0;const ti=Ee,Gv=mt,$v=zi,Wf=le,jv=we;class jr extends Gv.Shape{constructor(e){super(e),this._updated=!0,this.anim=new $v.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+0],f=l[o+1],p=l[o+2],m=l[o+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,m),e.closePath(),e.fillStrokeShape(this)),C)if(c){var w=c[n],_=i*2;e.drawImage(C,h,f,p,m,w[_+0],w[_+1],p,m)}else e.drawImage(C,h,f,p,m,0,0,p,m)}_hitFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+2],f=l[o+3];if(e.beginPath(),c){var p=c[n],m=i*2;e.rect(p[m+0],p[m+1],h,f)}else e.rect(0,0,h,f);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),i=this.animations(),o=i[n],l=o.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}Ds.Sprite=jr;jr.prototype.className="Sprite";(0,jv._registerNode)(jr);ti.Factory.addGetterSetter(jr,"animation");ti.Factory.addGetterSetter(jr,"animations");ti.Factory.addGetterSetter(jr,"frameOffsets");ti.Factory.addGetterSetter(jr,"image");ti.Factory.addGetterSetter(jr,"frameIndex",0,(0,Wf.getNumberValidator)());ti.Factory.addGetterSetter(jr,"frameRate",17,(0,Wf.getNumberValidator)());ti.Factory.backCompat(jr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Star=void 0;const Fc=Ee,zv=mt,Lc=le,Bv=we;class Pn extends zv.Shape{_sceneFunc(e){var n=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var l=1;l<o*2;l++){var c=l%2===0?i:n,h=c*Math.sin(l*Math.PI/o),f=-1*c*Math.cos(l*Math.PI/o);e.lineTo(h,f)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Gs.Star=Pn;Pn.prototype.className="Star";Pn.prototype._centroid=!0;Pn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Bv._registerNode)(Pn);Fc.Factory.addGetterSetter(Pn,"numPoints",5,(0,Lc.getNumberValidator)());Fc.Factory.addGetterSetter(Pn,"innerRadius",0,(0,Lc.getNumberValidator)());Fc.Factory.addGetterSetter(Pn,"outerRadius",0,(0,Lc.getNumberValidator)());var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.Text=Xn.stringToArray=void 0;const yc=nt,Gt=Ee,Uv=mt,bn=le,Hv=we;function Xf(a){return Array.from(a)}Xn.stringToArray=Xf;var ki="auto",Vv="center",Kf="inherit",Ta="justify",Wv="Change.konva",Xv="2d",C0="-",qf="left",Kv="text",qv="Text",Yv="top",Qv="bottom",P0="middle",Yf="normal",Jv="px ",Zo=" ",Zv="right",b0="rtl",em="word",tm="char",O0="none",qu="…",Qf=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],rm=Qf.length;function nm(a){return a.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}var es;function Yu(){return es||(es=yc.Util.createCanvasElement().getContext(Xv),es)}function im(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function am(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function om(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}let at=class extends Uv.Shape{constructor(e){super(om(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<rm;n++)this.on(Qf[n]+Wv,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,i=n.length;if(this.text()){var o=this.padding(),l=this.fontSize(),c=this.lineHeight()*l,h=this.verticalAlign(),f=this.direction(),p=0,m=this.align(),C=this.getWidth(),w=this.letterSpacing(),_=this.fill(),y=this.textDecoration(),E=y.indexOf("underline")!==-1,P=y.indexOf("line-through")!==-1,T;f=f===Kf?e.direction:f;var R=0,R=c/2,v=0,x=0;for(f===b0&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",P0),e.setAttr("textAlign",qf),h===P0?p=(this.getHeight()-i*c-o*2)/2:h===Qv&&(p=this.getHeight()-i*c-o*2),e.translate(o,p+o),T=0;T<i;T++){var v=0,x=0,b=n[T],k=b.text,B=b.width,O=b.lastInParagraph,G,M,D;if(e.save(),m===Zv?v+=C-B-o*2:m===Vv&&(v+=(C-B-o*2)/2),E){e.save(),e.beginPath(),e.moveTo(v,R+x+Math.round(l/2)),G=k.split(" ").length-1,M=G===0,D=m===Ta&&!O?C-o*2:B,e.lineTo(v+Math.round(D),R+x+Math.round(l/2)),e.lineWidth=l/15;const he=this._getLinearGradient();e.strokeStyle=he||_,e.stroke(),e.restore()}if(P){e.save(),e.beginPath(),e.moveTo(v,R+x),G=k.split(" ").length-1,M=G===0,D=m===Ta&&O&&!M?C-o*2:B,e.lineTo(v+Math.round(D),R+x),e.lineWidth=l/15;const he=this._getLinearGradient();e.strokeStyle=he||_,e.stroke(),e.restore()}if(f!==b0&&(w!==0||m===Ta)){G=k.split(" ").length-1;for(var V=Xf(k),W=0;W<V.length;W++){var Y=V[W];Y===" "&&!O&&m===Ta&&(v+=(C-o*2-B)/G),this._partialTextX=v,this._partialTextY=R+x,this._partialText=Y,e.fillStrokeShape(this),v+=this.measureSize(Y).width+w}}else w!==0&&e.setAttr("letterSpacing",`${w}px`),this._partialTextX=v,this._partialTextY=R+x,this._partialText=k,e.fillStrokeShape(this);e.restore(),i>1&&(R+=c)}}}_hitFunc(e){var n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=yc.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Kv,n),this}getWidth(){var e=this.attrs.width===ki||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===ki||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return yc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=Yu(),i=this.fontSize(),o;return n.save(),n.font=this._getContextFont(),o=n.measureText(e),n.restore(),{width:o.width,height:i}}_getContextFont(){return this.fontStyle()+Zo+this.fontVariant()+Zo+(this.fontSize()+Jv)+nm(this.fontFamily())}_addTextLine(e){this.align()===Ta&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),i=e.length;return Yu().measureText(e).width+(i?n*(i-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),i=0,o=this.lineHeight()*n,l=this.attrs.width,c=this.attrs.height,h=l!==ki&&l!==void 0,f=c!==ki&&c!==void 0,p=this.padding(),m=l-p*2,C=c-p*2,w=0,_=this.wrap(),y=_!==O0,E=_!==tm&&y,P=this.ellipsis();this.textArr=[],Yu().font=this._getContextFont();for(var T=P?this._getTextWidth(qu):0,R=0,v=e.length;R<v;++R){var x=e[R],b=this._getTextWidth(x);if(h&&b>m)for(;x.length>0;){for(var k=0,B=x.length,O="",G=0;k<B;){var M=k+B>>>1,D=x.slice(0,M+1),V=this._getTextWidth(D)+T;V<=m?(k=M+1,O=D,G=V):B=M}if(O){if(E){var W,Y=x[O.length],X=Y===Zo||Y===C0;X&&G<=m?W=O.length:W=Math.max(O.lastIndexOf(Zo),O.lastIndexOf(C0))+1,W>0&&(k=W,O=O.slice(0,k),G=this._getTextWidth(O))}O=O.trimRight(),this._addTextLine(O),i=Math.max(i,G),w+=o;var oe=this._shouldHandleEllipsis(w);if(oe){this._tryToAddEllipsisToLastLine();break}if(x=x.slice(k),x=x.trimLeft(),x.length>0&&(b=this._getTextWidth(x),b<=m)){this._addTextLine(x),w+=o,i=Math.max(i,b);break}}else break}else this._addTextLine(x),w+=o,i=Math.max(i,b),this._shouldHandleEllipsis(w)&&R<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&w+o>C)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){var n=+this.fontSize(),i=this.lineHeight()*n,o=this.attrs.height,l=o!==ki&&o!==void 0,c=this.padding(),h=o-c*2,f=this.wrap(),p=f!==O0;return!p||l&&e+i>h}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==ki&&e!==void 0,i=this.padding(),o=e-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];if(!(!c||!l)){if(n){var h=this._getTextWidth(c.text+qu)<o;h||(c.text=c.text.slice(0,c.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+qu)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};Xn.Text=at;at.prototype._fillFunc=im;at.prototype._strokeFunc=am;at.prototype.className=qv;at.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Hv._registerNode)(at);Gt.Factory.overWriteSetter(at,"width",(0,bn.getNumberOrAutoValidator)());Gt.Factory.overWriteSetter(at,"height",(0,bn.getNumberOrAutoValidator)());Gt.Factory.addGetterSetter(at,"direction",Kf);Gt.Factory.addGetterSetter(at,"fontFamily","Arial");Gt.Factory.addGetterSetter(at,"fontSize",12,(0,bn.getNumberValidator)());Gt.Factory.addGetterSetter(at,"fontStyle",Yf);Gt.Factory.addGetterSetter(at,"fontVariant",Yf);Gt.Factory.addGetterSetter(at,"padding",0,(0,bn.getNumberValidator)());Gt.Factory.addGetterSetter(at,"align",qf);Gt.Factory.addGetterSetter(at,"verticalAlign",Yv);Gt.Factory.addGetterSetter(at,"lineHeight",1,(0,bn.getNumberValidator)());Gt.Factory.addGetterSetter(at,"wrap",em);Gt.Factory.addGetterSetter(at,"ellipsis",!1,(0,bn.getBooleanValidator)());Gt.Factory.addGetterSetter(at,"letterSpacing",0,(0,bn.getNumberValidator)());Gt.Factory.addGetterSetter(at,"text","",(0,bn.getStringValidator)());Gt.Factory.addGetterSetter(at,"textDecoration","");var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.TextPath=void 0;const Qu=nt,br=Ee,sm=mt,ka=Bi,Ju=Xn,Jf=le,lm=we;var um="",Zf="normal";function e1(a){a.fillText(this.partialText,0,0)}function t1(a){a.strokeText(this.partialText,0,0)}class yt extends sm.Shape{constructor(e){super(e),this.dummyCanvas=Qu.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ka.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:ka.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ka.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),i=this.fill(),o=this.fontSize(),l=this.glyphInfo;n==="underline"&&e.beginPath();for(var c=0;c<l.length;c++){e.save();var h=l[c].p0;e.translate(h.x,h.y),e.rotate(l[c].rotation),this.partialText=l[c].text,e.fillStrokeShape(this),n==="underline"&&(c===0&&e.moveTo(0,o/2+1),e.lineTo(o,o/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;e.moveTo(i.x,i.y)}for(var o=0;o<n.length;o++){var l=n[o].p1;e.lineTo(l.x,l.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Qu.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Ju.Text.prototype.setText.call(this,e)}_getContextFont(){return Ju.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),l=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let h=0;o==="center"&&(h=Math.max(0,this.pathLength/2-c/2)),o==="right"&&(h=Math.max(0,this.pathLength-c));const f=(0,Ju.stringToArray)(this.text());let p=h;for(var m=0;m<f.length;m++){const C=this._getPointAtLength(p);if(!C)return;let w=this._getTextSize(f[m]).width+i;if(f[m]===" "&&o==="justify"){const R=this.text().split(" ").length-1;w+=(this.pathLength-c)/R}const _=this._getPointAtLength(p+w);if(!_)return;const y=ka.Path.getLineLength(C.x,C.y,_.x,_.y);let E=0;if(l)try{E=l(f[m-1],f[m])*this.fontSize()}catch{E=0}C.x+=E,_.x+=E,this.textWidth+=E;const P=ka.Path.getPointOnLine(E+y/2,C.x,C.y,_.x,_.y),T=Math.atan2(_.y-C.y,_.x-C.x);this.glyphInfo.push({transposeX:P.x,transposeY:P.y,text:f[m],rotation:T,p0:C,p1:_}),p+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});for(var n=e[0]||0,i=e[0]||0,o=e[1]||0,l=e[1]||0,c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);var p=this.fontSize();return{x:n-p/2,y:o-p/2,width:i-n+p,height:l-o+p}}destroy(){return Qu.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}$s.TextPath=yt;yt.prototype._fillFunc=e1;yt.prototype._strokeFunc=t1;yt.prototype._fillFuncHit=e1;yt.prototype._strokeFuncHit=t1;yt.prototype.className="TextPath";yt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,lm._registerNode)(yt);br.Factory.addGetterSetter(yt,"data");br.Factory.addGetterSetter(yt,"fontFamily","Arial");br.Factory.addGetterSetter(yt,"fontSize",12,(0,Jf.getNumberValidator)());br.Factory.addGetterSetter(yt,"fontStyle",Zf);br.Factory.addGetterSetter(yt,"align","left");br.Factory.addGetterSetter(yt,"letterSpacing",0,(0,Jf.getNumberValidator)());br.Factory.addGetterSetter(yt,"textBaseline","middle");br.Factory.addGetterSetter(yt,"fontVariant",Zf);br.Factory.addGetterSetter(yt,"text",um);br.Factory.addGetterSetter(yt,"textDecoration",null);br.Factory.addGetterSetter(yt,"kerningFunc",null);var js={};Object.defineProperty(js,"__esModule",{value:!0});js.Transformer=void 0;const Ue=nt,$e=Ee,T0=et,cm=mt,dm=Wa,k0=ji,Cr=we,On=le,hm=we;var r1="tr-konva",fm=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${r1}`).join(" "),R0="nodesRect",gm=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],pm={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const vm="ontouchstart"in Cr.Konva._global;function mm(a,e,n){if(a==="rotater")return n;e+=Ue.Util.degToRad(pm[a]||0);var i=(Ue.Util.radToDeg(e)%360+360)%360;return Ue.Util._inRange(i,315+22.5,360)||Ue.Util._inRange(i,0,22.5)?"ns-resize":Ue.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":Ue.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":Ue.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":Ue.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":Ue.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":Ue.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":Ue.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(Ue.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var fs=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],M0=1e8;function ym(a){return{x:a.x+a.width/2*Math.cos(a.rotation)+a.height/2*Math.sin(-a.rotation),y:a.y+a.height/2*Math.cos(a.rotation)+a.width/2*Math.sin(a.rotation)}}function n1(a,e,n){const i=n.x+(a.x-n.x)*Math.cos(e)-(a.y-n.y)*Math.sin(e),o=n.y+(a.x-n.x)*Math.sin(e)+(a.y-n.y)*Math.cos(e);return{...a,rotation:a.rotation+e,x:i,y:o}}function _m(a,e){const n=ym(a);return n1(a,e,n)}function Sm(a,e,n){let i=e;for(let o=0;o<a.length;o++){const l=Cr.Konva.getAngle(a[o]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<n&&(i=l)}return i}let _c=0;class Re extends k0.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(fm,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Ue.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return r1+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(o=>o.isAncestorOf(this)?(Ue.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},c=o._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");o.on(c,l),o.on(gm.map(h=>h+`.${this._getEventNamespace()}`).join(" "),l),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(o)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const o=e.getAbsolutePosition(),l=o.x-n.x,c=o.y-n.y;this.nodes().forEach(h=>{if(h===e||h.isDragging())return;const f=h.getAbsolutePosition();h.setAbsolutePosition({x:f.x+l,y:f.y+c}),h.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R0),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R0,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){var o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(i),c=e.getAbsolutePosition(i),h=o.x*l.x-e.offsetX()*l.x,f=o.y*l.y-e.offsetY()*l.y;const p=(Cr.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:c.x+h*Math.cos(p)+f*Math.sin(-p),y:c.y+f*Math.cos(p)+h*Math.sin(p),width:o.width*l.x,height:o.height*l.y,rotation:p};return n1(m,-Cr.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-M0,y:-M0,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var C=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],w=p.getAbsoluteTransform();C.forEach(function(_){var y=w.point(_);n.push(y)})});const i=new Ue.Transform;i.rotate(-Cr.Konva.getAngle(this.rotation()));var o=1/0,l=1/0,c=-1/0,h=-1/0;n.forEach(function(p){var m=i.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),i.invert();const f=i.point({x:o,y:l});return{x:f.x,y:f.y,width:c-o,height:h-l,rotation:Cr.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),fs.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new dm.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:vm?10:"auto"}),i=this;n.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),n.on("dragstart",o=>{n.stopDrag(),o.cancelBubble=!0}),n.on("dragend",o=>{o.cancelBubble=!0}),n.on("mouseenter",()=>{var o=Cr.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=mm(e,o,l);n.getStage().content&&(n.getStage().content.style.cursor=c),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new cm.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,i){var o=i.getParent(),l=o.padding();n.beginPath(),n.rect(-l,-l,i.width()+l*2,i.height()+l*2),n.moveTo(i.width()/2,-l),o.rotateEnabled()&&o.rotateLineVisible()&&n.lineTo(i.width()/2,-o.rotateAnchorOffset()*Ue.Util._sign(i.height())-l),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(this.shouldOverdrawWholeArea()){var o=this.padding();n.beginPath(),n.rect(-o,-o,i.width()+o*2,i.height()+o*2),n.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,o=n.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var c=e.target.getAbsolutePosition(),h=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-c.x,y:h.y-c.y},_c++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:e.evt,target:f})})}_handleMouseMove(e){var n,i,o,l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const h=c.getPointerPosition();let f={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const p=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,e)),l.setAbsolutePosition(f);const m=l.getAbsolutePosition();if(!(p.x===m.x&&p.y===m.y)){if(this._movingAnchorName==="rotater"){var C=this._getNodeRect();n=l.x()-C.width/2,i=-l.y()+C.height/2;let W=Math.atan2(-i,n)+Math.PI/2;C.height<0&&(W-=Math.PI);var w=Cr.Konva.getAngle(this.rotation());const Y=w+W,X=Cr.Konva.getAngle(this.rotationSnapTolerance()),he=Sm(this.rotationSnaps(),Y,X)-C.rotation,fe=_m(C,he);this._fitNodesInto(fe,e);return}var _=this.shiftBehavior(),y;_==="inverted"?y=this.keepRatio()&&!e.shiftKey:_==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;var v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-left").x()>E.x?-1:1,T=this.findOne(".top-left").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-left").x(E.x-n),this.findOne(".top-left").y(E.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-right").x()<E.x?-1:1,T=this.findOne(".top-right").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-right").x(E.x+n),this.findOne(".top-right").y(E.y-i)}var R=l.position();this.findOne(".top-left").y(R.y),this.findOne(".bottom-right").x(R.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(l.y()-E.y,2));var P=E.x<l.x()?-1:1,T=l.y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,l.x(E.x-n),l.y(E.y+i)}R=l.position(),this.findOne(".top-left").x(R.x),this.findOne(".bottom-right").y(R.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(l.y()-E.y,2));var P=this.findOne(".bottom-right").x()<E.x?-1:1,T=this.findOne(".bottom-right").y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".bottom-right").x(E.x+n),this.findOne(".bottom-right").y(E.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||e.altKey;if(v){var x=this.findOne(".top-left"),b=this.findOne(".bottom-right"),k=x.x(),B=x.y(),O=this.getWidth()-b.x(),G=this.getHeight()-b.y();b.move({x:-k,y:-B}),x.move({x:O,y:G})}var M=this.findOne(".top-left").getAbsolutePosition();n=M.x,i=M.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),V=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:D,height:V,rotation:Cr.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();_c--,this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:e,target:i})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var i=this._getNodeRect();const o=1;if(Ue.Util._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(Ue.Util._inRange(e.height,-this.padding()*2-o,o)){this.update();return}var l=new Ue.Transform;if(l.rotate(Cr.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const w=l.point({x:-this.padding()*2,y:0});e.x+=w.x,e.y+=w.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const w=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const w=l.point({x:0,y:-this.padding()*2});e.x+=w.x,e.y+=w.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const w=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const w=this.boundBoxFunc()(i,e);w?e=w:Ue.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,h=new Ue.Transform;h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.width/c,i.height/c);const f=new Ue.Transform,p=e.width/c,m=e.height/c;this.flipEnabled()===!1?(f.translate(e.x,e.y),f.rotate(e.rotation),f.translate(e.width<0?e.width:0,e.height<0?e.height:0),f.scale(Math.abs(p),Math.abs(m))):(f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(p,m));const C=f.multiply(h.invert());this._nodes.forEach(w=>{var _;const y=w.getParent().getAbsoluteTransform(),E=w.getTransform().copy();E.translate(w.offsetX(),w.offsetY());const P=new Ue.Transform;P.multiply(y.copy().invert()).multiply(C).multiply(y).multiply(E);const T=P.decompose();w.setAttrs(T),(_=w.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(Ue.Util._getRotation(e.rotation)),this._nodes.forEach(w=>{this._fire("transform",{evt:n,target:w}),w._fire("transform",{evt:n,target:w})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(Ue.Util._getRotation(n.rotation));var i=n.width,o=n.height,l=this.enabledAnchors(),c=this.resizeEnabled(),h=this.padding(),f=this.anchorSize();const p=this.find("._anchor");p.forEach(C=>{C.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+h,offsetY:f/2+h,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+h,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-h,offsetY:f/2+h,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+h,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-h,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-h,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Ue.Util._sign(o)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(C=>{m(C)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),k0.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return T0.Node.prototype.toObject.call(this)}clone(e){var n=T0.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}js.Transformer=Re;Re.isTransforming=()=>_c>0;function xm(a){return a instanceof Array||Ue.Util.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(e){fs.indexOf(e)===-1&&Ue.Util.warn("Unknown anchor name: "+e+". Available names are: "+fs.join(", "))}),a||[]}Re.prototype.className="Transformer";(0,hm._registerNode)(Re);$e.Factory.addGetterSetter(Re,"enabledAnchors",fs,xm);$e.Factory.addGetterSetter(Re,"flipEnabled",!0,(0,On.getBooleanValidator)());$e.Factory.addGetterSetter(Re,"resizeEnabled",!0);$e.Factory.addGetterSetter(Re,"anchorSize",10,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"rotateEnabled",!0);$e.Factory.addGetterSetter(Re,"rotateLineVisible",!0);$e.Factory.addGetterSetter(Re,"rotationSnaps",[]);$e.Factory.addGetterSetter(Re,"rotateAnchorOffset",50,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"rotateAnchorCursor","crosshair");$e.Factory.addGetterSetter(Re,"rotationSnapTolerance",5,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"borderEnabled",!0);$e.Factory.addGetterSetter(Re,"anchorStroke","rgb(0, 161, 255)");$e.Factory.addGetterSetter(Re,"anchorStrokeWidth",1,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"anchorFill","white");$e.Factory.addGetterSetter(Re,"anchorCornerRadius",0,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"borderStroke","rgb(0, 161, 255)");$e.Factory.addGetterSetter(Re,"borderStrokeWidth",1,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"borderDash");$e.Factory.addGetterSetter(Re,"keepRatio",!0);$e.Factory.addGetterSetter(Re,"shiftBehavior","default");$e.Factory.addGetterSetter(Re,"centeredScaling",!1);$e.Factory.addGetterSetter(Re,"ignoreStroke",!1);$e.Factory.addGetterSetter(Re,"padding",0,(0,On.getNumberValidator)());$e.Factory.addGetterSetter(Re,"node");$e.Factory.addGetterSetter(Re,"nodes");$e.Factory.addGetterSetter(Re,"boundBoxFunc");$e.Factory.addGetterSetter(Re,"anchorDragBoundFunc");$e.Factory.addGetterSetter(Re,"anchorStyleFunc");$e.Factory.addGetterSetter(Re,"shouldOverdrawWholeArea",!1);$e.Factory.addGetterSetter(Re,"useSingleNodeRotation",!0);$e.Factory.backCompat(Re,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.Wedge=void 0;const Bs=Ee,wm=mt,Em=we,i1=le,Cm=we;class on extends wm.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Em.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}zs.Wedge=on;on.prototype.className="Wedge";on.prototype._centroid=!0;on.prototype._attrsAffectingSize=["radius"];(0,Cm._registerNode)(on);Bs.Factory.addGetterSetter(on,"radius",0,(0,i1.getNumberValidator)());Bs.Factory.addGetterSetter(on,"angle",0,(0,i1.getNumberValidator)());Bs.Factory.addGetterSetter(on,"clockwise",!1);Bs.Factory.backCompat(on,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Blur=void 0;const A0=Ee,Pm=et,bm=le;function N0(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Om=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Tm=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function km(a,e){var n=a.data,i=a.width,o=a.height,l,c,h,f,p,m,C,w,_,y,E,P,T,R,v,x,b,k,B,O,G,M,D,V,W=e+e+1,Y=i-1,X=o-1,oe=e+1,he=oe*(oe+1)/2,fe=new N0,Me=null,se=fe,Q=null,Se=null,Oe=Om[e],Ce=Tm[e];for(h=1;h<W;h++)se=se.next=new N0,h===oe&&(Me=se);for(se.next=fe,C=m=0,c=0;c<o;c++){for(x=b=k=B=w=_=y=E=0,P=oe*(O=n[m]),T=oe*(G=n[m+1]),R=oe*(M=n[m+2]),v=oe*(D=n[m+3]),w+=he*O,_+=he*G,y+=he*M,E+=he*D,se=fe,h=0;h<oe;h++)se.r=O,se.g=G,se.b=M,se.a=D,se=se.next;for(h=1;h<oe;h++)f=m+((Y<h?Y:h)<<2),w+=(se.r=O=n[f])*(V=oe-h),_+=(se.g=G=n[f+1])*V,y+=(se.b=M=n[f+2])*V,E+=(se.a=D=n[f+3])*V,x+=O,b+=G,k+=M,B+=D,se=se.next;for(Q=fe,Se=Me,l=0;l<i;l++)n[m+3]=D=E*Oe>>Ce,D!==0?(D=255/D,n[m]=(w*Oe>>Ce)*D,n[m+1]=(_*Oe>>Ce)*D,n[m+2]=(y*Oe>>Ce)*D):n[m]=n[m+1]=n[m+2]=0,w-=P,_-=T,y-=R,E-=v,P-=Q.r,T-=Q.g,R-=Q.b,v-=Q.a,f=C+((f=l+e+1)<Y?f:Y)<<2,x+=Q.r=n[f],b+=Q.g=n[f+1],k+=Q.b=n[f+2],B+=Q.a=n[f+3],w+=x,_+=b,y+=k,E+=B,Q=Q.next,P+=O=Se.r,T+=G=Se.g,R+=M=Se.b,v+=D=Se.a,x-=O,b-=G,k-=M,B-=D,Se=Se.next,m+=4;C+=i}for(l=0;l<i;l++){for(b=k=B=x=_=y=E=w=0,m=l<<2,P=oe*(O=n[m]),T=oe*(G=n[m+1]),R=oe*(M=n[m+2]),v=oe*(D=n[m+3]),w+=he*O,_+=he*G,y+=he*M,E+=he*D,se=fe,h=0;h<oe;h++)se.r=O,se.g=G,se.b=M,se.a=D,se=se.next;for(p=i,h=1;h<=e;h++)m=p+l<<2,w+=(se.r=O=n[m])*(V=oe-h),_+=(se.g=G=n[m+1])*V,y+=(se.b=M=n[m+2])*V,E+=(se.a=D=n[m+3])*V,x+=O,b+=G,k+=M,B+=D,se=se.next,h<X&&(p+=i);for(m=l,Q=fe,Se=Me,c=0;c<o;c++)f=m<<2,n[f+3]=D=E*Oe>>Ce,D>0?(D=255/D,n[f]=(w*Oe>>Ce)*D,n[f+1]=(_*Oe>>Ce)*D,n[f+2]=(y*Oe>>Ce)*D):n[f]=n[f+1]=n[f+2]=0,w-=P,_-=T,y-=R,E-=v,P-=Q.r,T-=Q.g,R-=Q.b,v-=Q.a,f=l+((f=c+oe)<X?f:X)*i<<2,w+=x+=Q.r=n[f],_+=b+=Q.g=n[f+1],y+=k+=Q.b=n[f+2],E+=B+=Q.a=n[f+3],Q=Q.next,P+=O=Se.r,T+=G=Se.g,R+=M=Se.b,v+=D=Se.a,x-=O,b-=G,k-=M,B-=D,Se=Se.next,m+=i}}const Rm=function(e){var n=Math.round(this.blurRadius());n>0&&km(e,n)};Us.Blur=Rm;A0.Factory.addGetterSetter(Pm.Node,"blurRadius",0,(0,bm.getNumberValidator)(),A0.Factory.afterSetFilter);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Brighten=void 0;const I0=Ee,Mm=et,Am=le,Nm=function(a){var e=this.brightness()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=4)n[o]+=e,n[o+1]+=e,n[o+2]+=e};Hs.Brighten=Nm;I0.Factory.addGetterSetter(Mm.Node,"brightness",0,(0,Am.getNumberValidator)(),I0.Factory.afterSetFilter);var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Contrast=void 0;const F0=Ee,Im=et,Fm=le,Lm=function(a){var e=Math.pow((this.contrast()+100)/100,2),n=a.data,i=n.length,o=150,l=150,c=150,h;for(h=0;h<i;h+=4)o=n[h],l=n[h+1],c=n[h+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,o=o<0?0:o>255?255:o,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,n[h]=o,n[h+1]=l,n[h+2]=c};Vs.Contrast=Lm;F0.Factory.addGetterSetter(Im.Node,"contrast",0,(0,Fm.getNumberValidator)(),F0.Factory.afterSetFilter);var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Emboss=void 0;const wn=Ee,Xs=et,Dm=nt,a1=le,Gm=function(a){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),o=this.embossBlend(),l=0,c=0,h=a.data,f=a.width,p=a.height,m=f*4,C=p;switch(i){case"top-left":l=-1,c=-1;break;case"top":l=-1,c=0;break;case"top-right":l=-1,c=1;break;case"right":l=0,c=1;break;case"bottom-right":l=1,c=1;break;case"bottom":l=1,c=0;break;case"bottom-left":l=1,c=-1;break;case"left":l=0,c=-1;break;default:Dm.Util.error("Unknown emboss direction: "+i)}do{var w=(C-1)*m,_=l;C+_<1&&(_=0),C+_>p&&(_=0);var y=(C-1+_)*f*4,E=f;do{var P=w+(E-1)*4,T=c;E+T<1&&(T=0),E+T>f&&(T=0);var R=y+(E-1+T)*4,v=h[P]-h[R],x=h[P+1]-h[R+1],b=h[P+2]-h[R+2],k=v,B=k>0?k:-k,O=x>0?x:-x,G=b>0?b:-b;if(O>B&&(k=x),G>B&&(k=b),k*=e,o){var M=h[P]+k,D=h[P+1]+k,V=h[P+2]+k;h[P]=M>255?255:M<0?0:M,h[P+1]=D>255?255:D<0?0:D,h[P+2]=V>255?255:V<0?0:V}else{var W=n-k;W<0?W=0:W>255&&(W=255),h[P]=h[P+1]=h[P+2]=W}}while(--E)}while(--C)};Ws.Emboss=Gm;wn.Factory.addGetterSetter(Xs.Node,"embossStrength",.5,(0,a1.getNumberValidator)(),wn.Factory.afterSetFilter);wn.Factory.addGetterSetter(Xs.Node,"embossWhiteLevel",.5,(0,a1.getNumberValidator)(),wn.Factory.afterSetFilter);wn.Factory.addGetterSetter(Xs.Node,"embossDirection","top-left",null,wn.Factory.afterSetFilter);wn.Factory.addGetterSetter(Xs.Node,"embossBlend",!1,null,wn.Factory.afterSetFilter);var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Enhance=void 0;const L0=Ee,$m=et,jm=le;function Zu(a,e,n,i,o){var l=n-e,c=o-i,h;return l===0?i+c/2:c===0?i:(h=(a-e)/l,h=c*h+i,h)}const zm=function(a){var e=a.data,n=e.length,i=e[0],o=i,l,c=e[1],h=c,f,p=e[2],m=p,C,w,_=this.enhance();if(_!==0){for(w=0;w<n;w+=4)l=e[w+0],l<i?i=l:l>o&&(o=l),f=e[w+1],f<c?c=f:f>h&&(h=f),C=e[w+2],C<p?p=C:C>m&&(m=C);o===i&&(o=255,i=0),h===c&&(h=255,c=0),m===p&&(m=255,p=0);var y,E,P,T,R,v,x,b,k;for(_>0?(E=o+_*(255-o),P=i-_*(i-0),R=h+_*(255-h),v=c-_*(c-0),b=m+_*(255-m),k=p-_*(p-0)):(y=(o+i)*.5,E=o+_*(o-y),P=i+_*(i-y),T=(h+c)*.5,R=h+_*(h-T),v=c+_*(c-T),x=(m+p)*.5,b=m+_*(m-x),k=p+_*(p-x)),w=0;w<n;w+=4)e[w+0]=Zu(e[w+0],i,o,P,E),e[w+1]=Zu(e[w+1],c,h,v,R),e[w+2]=Zu(e[w+2],p,m,k,b)}};Ks.Enhance=zm;L0.Factory.addGetterSetter($m.Node,"enhance",0,(0,jm.getNumberValidator)(),L0.Factory.afterSetFilter);var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Grayscale=void 0;const Bm=function(a){var e=a.data,n=e.length,i,o;for(i=0;i<n;i+=4)o=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o};qs.Grayscale=Bm;var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.HSL=void 0;const Fi=Ee,Dc=et,Gc=le;Fi.Factory.addGetterSetter(Dc.Node,"hue",0,(0,Gc.getNumberValidator)(),Fi.Factory.afterSetFilter);Fi.Factory.addGetterSetter(Dc.Node,"saturation",0,(0,Gc.getNumberValidator)(),Fi.Factory.afterSetFilter);Fi.Factory.addGetterSetter(Dc.Node,"luminance",0,(0,Gc.getNumberValidator)(),Fi.Factory.afterSetFilter);const Um=function(a){var e=a.data,n=e.length,i=1,o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,h,f=i*o*Math.cos(l*Math.PI/180),p=i*o*Math.sin(l*Math.PI/180),m=.299*i+.701*f+.167*p,C=.587*i-.587*f+.33*p,w=.114*i-.114*f-.497*p,_=.299*i-.299*f-.328*p,y=.587*i+.413*f+.035*p,E=.114*i-.114*f+.293*p,P=.299*i-.3*f+1.25*p,T=.587*i-.586*f-1.05*p,R=.114*i+.886*f-.2*p,v,x,b,k;for(h=0;h<n;h+=4)v=e[h+0],x=e[h+1],b=e[h+2],k=e[h+3],e[h+0]=m*v+C*x+w*b+c,e[h+1]=_*v+y*x+E*b+c,e[h+2]=P*v+T*x+R*b+c,e[h+3]=k};Ys.HSL=Um;var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.HSV=void 0;const Li=Ee,$c=et,jc=le,Hm=function(a){var e=a.data,n=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c,h=i*o*Math.cos(l*Math.PI/180),f=i*o*Math.sin(l*Math.PI/180),p=.299*i+.701*h+.167*f,m=.587*i-.587*h+.33*f,C=.114*i-.114*h-.497*f,w=.299*i-.299*h-.328*f,_=.587*i+.413*h+.035*f,y=.114*i-.114*h+.293*f,E=.299*i-.3*h+1.25*f,P=.587*i-.586*h-1.05*f,T=.114*i+.886*h-.2*f,R,v,x,b;for(c=0;c<n;c+=4)R=e[c+0],v=e[c+1],x=e[c+2],b=e[c+3],e[c+0]=p*R+m*v+C*x,e[c+1]=w*R+_*v+y*x,e[c+2]=E*R+P*v+T*x,e[c+3]=b};Qs.HSV=Hm;Li.Factory.addGetterSetter($c.Node,"hue",0,(0,jc.getNumberValidator)(),Li.Factory.afterSetFilter);Li.Factory.addGetterSetter($c.Node,"saturation",0,(0,jc.getNumberValidator)(),Li.Factory.afterSetFilter);Li.Factory.addGetterSetter($c.Node,"value",0,(0,jc.getNumberValidator)(),Li.Factory.afterSetFilter);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.Invert=void 0;const Vm=function(a){var e=a.data,n=e.length,i;for(i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};Js.Invert=Vm;var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Kaleidoscope=void 0;const gs=Ee,o1=et,D0=nt,s1=le;var Wm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w=0,_=0,y=0,E=0,P,T=Math.sqrt(h*h+f*f);m=l-h,C=c-f,P=Math.sqrt(m*m+C*C),T=P>T?P:T;var R=c,v=l,x,b,k=360/v*Math.PI/180,B,O;for(b=0;b<v;b+=1)for(B=Math.sin(b*k),O=Math.cos(b*k),x=0;x<R;x+=1)m=Math.floor(h+T*x/R*O),C=Math.floor(f+T*x/R*B),p=(C*l+m)*4,w=i[p+0],_=i[p+1],y=i[p+2],E=i[p+3],p=(b+x*l)*4,o[p+0]=w,o[p+1]=_,o[p+2]=y,o[p+3]=E},Xm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w,_,y=0,E=0,P=0,T=0,R,v=Math.sqrt(h*h+f*f);m=l-h,C=c-f,R=Math.sqrt(m*m+C*C),v=R>v?R:v;var x=c,b=l,k,B,O=n.polarRotation||0,G,M;for(m=0;m<l;m+=1)for(C=0;C<c;C+=1)w=m-h,_=C-f,k=Math.sqrt(w*w+_*_)*x/v,B=(Math.atan2(_,w)*180/Math.PI+360+O)%360,B=B*b/360,G=Math.floor(B),M=Math.floor(k),p=(M*l+G)*4,y=i[p+0],E=i[p+1],P=i[p+2],T=i[p+3],p=(C*l+m)*4,o[p+0]=y,o[p+1]=E,o[p+2]=P,o[p+3]=T};const Km=function(a){var e=a.width,n=a.height,i,o,l,c,h,f,p,m,C,w,_=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),E=Math.floor(e*(y%360)/360);if(!(_<1)){var P=D0.Util.createCanvasElement();P.width=e,P.height=n;var T=P.getContext("2d").getImageData(0,0,e,n);D0.Util.releaseCanvas(P),Wm(a,T,{polarCenterX:e/2,polarCenterY:n/2});for(var R=e/Math.pow(2,_);R<=8;)R=R*2,_-=1;R=Math.ceil(R);var v=R,x=0,b=v,k=1;for(E+R>e&&(x=v,b=0,k=-1),o=0;o<n;o+=1)for(i=x;i!==b;i+=k)l=Math.round(i+E)%e,C=(e*o+l)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+i)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;for(o=0;o<n;o+=1)for(v=Math.floor(R),c=0;c<_;c+=1){for(i=0;i<v+1;i+=1)C=(e*o+i)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+v*2-i-1)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;v*=2}Xm(T,a,{polarRotation:0})}};Zs.Kaleidoscope=Km;gs.Factory.addGetterSetter(o1.Node,"kaleidoscopePower",2,(0,s1.getNumberValidator)(),gs.Factory.afterSetFilter);gs.Factory.addGetterSetter(o1.Node,"kaleidoscopeAngle",0,(0,s1.getNumberValidator)(),gs.Factory.afterSetFilter);var el={};Object.defineProperty(el,"__esModule",{value:!0});el.Mask=void 0;const G0=Ee,qm=et,Ym=le;function ts(a,e,n){var i=(n*a.width+e)*4,o=[];return o.push(a.data[i++],a.data[i++],a.data[i++],a.data[i++]),o}function Ra(a,e){return Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2))}function Qm(a){for(var e=[0,0,0],n=0;n<a.length;n++)e[0]+=a[n][0],e[1]+=a[n][1],e[2]+=a[n][2];return e[0]/=a.length,e[1]/=a.length,e[2]/=a.length,e}function Jm(a,e){var n=ts(a,0,0),i=ts(a,a.width-1,0),o=ts(a,0,a.height-1),l=ts(a,a.width-1,a.height-1),c=e||10;if(Ra(n,i)<c&&Ra(i,l)<c&&Ra(l,o)<c&&Ra(o,n)<c){for(var h=Qm([i,n,l,o]),f=[],p=0;p<a.width*a.height;p++){var m=Ra(h,[a.data[p*4],a.data[p*4+1],a.data[p*4+2]]);f[p]=m<c?0:255}return f}}function Zm(a,e){for(var n=0;n<a.width*a.height;n++)a.data[4*n+3]=e[n]}function e3(a,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m===255*8?255:0}return c}function t3(a,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m>=255*4?255:0}return c}function r3(a,e,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m}return c}const n3=function(a){var e=this.threshold(),n=Jm(a,e);return n&&(n=e3(n,a.width,a.height),n=t3(n,a.width,a.height),n=r3(n,a.width,a.height),Zm(a,n)),a};el.Mask=n3;G0.Factory.addGetterSetter(qm.Node,"threshold",0,(0,Ym.getNumberValidator)(),G0.Factory.afterSetFilter);var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.Noise=void 0;const $0=Ee,i3=et,a3=le,o3=function(a){var e=this.noise()*255,n=a.data,i=n.length,o=e/2,l;for(l=0;l<i;l+=4)n[l+0]+=o-2*o*Math.random(),n[l+1]+=o-2*o*Math.random(),n[l+2]+=o-2*o*Math.random()};tl.Noise=o3;$0.Factory.addGetterSetter(i3.Node,"noise",.2,(0,a3.getNumberValidator)(),$0.Factory.afterSetFilter);var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.Pixelate=void 0;const j0=Ee,s3=nt,l3=et,u3=le,c3=function(a){var e=Math.ceil(this.pixelSize()),n=a.width,i=a.height,o,l,c,h,f,p,m,C=Math.ceil(n/e),w=Math.ceil(i/e),_,y,E,P,T,R,v,x=a.data;if(e<=0){s3.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<C;T+=1)for(R=0;R<w;R+=1){for(h=0,f=0,p=0,m=0,_=T*e,y=_+e,E=R*e,P=E+e,v=0,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,h+=x[c+0],f+=x[c+1],p+=x[c+2],m+=x[c+3],v+=1);for(h=h/v,f=f/v,p=p/v,m=m/v,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,x[c+0]=h,x[c+1]=f,x[c+2]=p,x[c+3]=m)}};rl.Pixelate=c3;j0.Factory.addGetterSetter(l3.Node,"pixelSize",8,(0,u3.getNumberValidator)(),j0.Factory.afterSetFilter);var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.Posterize=void 0;const z0=Ee,d3=et,h3=le,f3=function(a){var e=Math.round(this.levels()*254)+1,n=a.data,i=n.length,o=255/e,l;for(l=0;l<i;l+=1)n[l]=Math.floor(n[l]/o)*o};nl.Posterize=f3;z0.Factory.addGetterSetter(d3.Node,"levels",.5,(0,h3.getNumberValidator)(),z0.Factory.afterSetFilter);var il={};Object.defineProperty(il,"__esModule",{value:!0});il.RGB=void 0;const ps=Ee,zc=et,g3=le,p3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c,h;for(c=0;c<n;c+=4)h=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255,e[c]=h*i,e[c+1]=h*o,e[c+2]=h*l,e[c+3]=e[c+3]};il.RGB=p3;ps.Factory.addGetterSetter(zc.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});ps.Factory.addGetterSetter(zc.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});ps.Factory.addGetterSetter(zc.Node,"blue",0,g3.RGBComponent,ps.Factory.afterSetFilter);var al={};Object.defineProperty(al,"__esModule",{value:!0});al.RGBA=void 0;const Ga=Ee,ol=et,v3=le,m3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c=this.alpha(),h,f;for(h=0;h<n;h+=4)f=1-c,e[h]=i*c+e[h]*f,e[h+1]=o*c+e[h+1]*f,e[h+2]=l*c+e[h+2]*f};al.RGBA=m3;Ga.Factory.addGetterSetter(ol.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Ga.Factory.addGetterSetter(ol.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Ga.Factory.addGetterSetter(ol.Node,"blue",0,v3.RGBComponent,Ga.Factory.afterSetFilter);Ga.Factory.addGetterSetter(ol.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a});var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.Sepia=void 0;const y3=function(a){var e=a.data,n=e.length,i,o,l,c;for(i=0;i<n;i+=4)o=e[i+0],l=e[i+1],c=e[i+2],e[i+0]=Math.min(255,o*.393+l*.769+c*.189),e[i+1]=Math.min(255,o*.349+l*.686+c*.168),e[i+2]=Math.min(255,o*.272+l*.534+c*.131)};sl.Sepia=y3;var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.Solarize=void 0;const _3=function(a){var e=a.data,n=a.width,i=a.height,o=n*4,l=i;do{var c=(l-1)*o,h=n;do{var f=c+(h-1)*4,p=e[f],m=e[f+1],C=e[f+2];p>127&&(p=255-p),m>127&&(m=255-m),C>127&&(C=255-C),e[f]=p,e[f+1]=m,e[f+2]=C}while(--h)}while(--l)};ll.Solarize=_3;var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.Threshold=void 0;const B0=Ee,S3=et,x3=le,w3=function(a){var e=this.threshold()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=1)n[o]=n[o]<e?0:255};ul.Threshold=w3;B0.Factory.addGetterSetter(S3.Node,"threshold",.5,(0,x3.getNumberValidator)(),B0.Factory.afterSetFilter);Object.defineProperty(ys,"__esModule",{value:!0});ys.Konva=void 0;const U0=ds,E3=Cs,C3=Os,P3=Rs,b3=Ms,O3=As,H0=Ii,T3=Ha,k3=Bi,R3=Wa,M3=Fs,A3=Ls,N3=Ds,I3=Gs,F3=Xn,L3=$s,D3=js,G3=zs,$3=Us,j3=Hs,z3=Vs,B3=Ws,U3=Ks,H3=qs,V3=Ys,W3=Qs,X3=Js,K3=Zs,q3=el,Y3=tl,Q3=rl,J3=nl,Z3=il,e4=al,t4=sl,r4=ll,n4=ul;ys.Konva=U0.Konva.Util._assign(U0.Konva,{Arc:E3.Arc,Arrow:C3.Arrow,Circle:P3.Circle,Ellipse:b3.Ellipse,Image:O3.Image,Label:H0.Label,Tag:H0.Tag,Line:T3.Line,Path:k3.Path,Rect:R3.Rect,RegularPolygon:M3.RegularPolygon,Ring:A3.Ring,Sprite:N3.Sprite,Star:I3.Star,Text:F3.Text,TextPath:L3.TextPath,Transformer:D3.Transformer,Wedge:G3.Wedge,Filters:{Blur:$3.Blur,Brighten:j3.Brighten,Contrast:z3.Contrast,Emboss:B3.Emboss,Enhance:U3.Enhance,Grayscale:H3.Grayscale,HSL:V3.HSL,HSV:W3.HSV,Invert:X3.Invert,Kaleidoscope:K3.Kaleidoscope,Mask:q3.Mask,Noise:Y3.Noise,Pixelate:Q3.Pixelate,Posterize:J3.Posterize,RGB:Z3.RGB,RGBA:e4.RGBA,Sepia:t4.Sepia,Solarize:r4.Solarize,Threshold:n4.Threshold}});var i4=bf.exports;Object.defineProperty(i4,"__esModule",{value:!0});const a4=ys;bf.exports=a4.Konva;var Sc={exports:{}};(function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=ds;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const i=ds;a.exports=i.Konva})(Sc,Sc.exports);var o4=Sc.exports;const $a=vs(o4);var l1={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s4=function(e){var n={},i=I,o=ss,l=Object.assign;function c(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}function B(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case p:return"Portal";case w:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y:return(t.displayName||"Context")+".Consumer";case _:return(t._context.displayName||"Context")+".Provider";case E:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:B(t.type)||"Memo";case v:r=t._payload,t=t._init;try{return B(t(r))}catch{}}return null}function O(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(r);case 8:return r===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function G(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function M(t){if(G(t)!==t)throw Error(c(188))}function D(t){var r=t.alternate;if(!r){if(r=G(t),r===null)throw Error(c(188));return r!==t?null:t}for(var s=t,u=r;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return M(d),t;if(g===u)return M(d),r;g=g.sibling}throw Error(c(188))}if(s.return!==u.return)s=d,u=g;else{for(var S=!1,A=d.child;A;){if(A===s){S=!0,s=d,u=g;break}if(A===u){S=!0,u=d,s=g;break}A=A.sibling}if(!S){for(A=g.child;A;){if(A===s){S=!0,s=g,u=d;break}if(A===u){S=!0,u=g,s=d;break}A=A.sibling}if(!S)throw Error(c(189))}}if(s.alternate!==u)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?t:r}function V(t){return t=D(t),t!==null?W(t):null}function W(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=W(t);if(r!==null)return r;t=t.sibling}return null}function Y(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=Y(t);if(r!==null)return r}t=t.sibling}return null}var X=Array.isArray,oe=e.getPublicInstance,he=e.getRootHostContext,fe=e.getChildHostContext,Me=e.prepareForCommit,se=e.resetAfterCommit,Q=e.createInstance,Se=e.appendInitialChild,Oe=e.finalizeInitialChildren,Ce=e.prepareUpdate,Xe=e.shouldSetTextContent,Ne=e.createTextInstance,N=e.scheduleTimeout,H=e.cancelTimeout,te=e.noTimeout,ge=e.isPrimaryRenderer,de=e.supportsMutation,Ie=e.supportsPersistence,ke=e.supportsHydration,ot=e.getInstanceFromNode,Ae=e.preparePortalMount,Ct=e.getCurrentEventPriority,Ye=e.detachDeletedInstance,Fe=e.supportsMicrotasks,ut=e.scheduleMicrotask,kt=e.supportsTestSelectors,je=e.findFiberRoot,ze=e.getBoundingRect,dt=e.getTextContent,zt=e.isHiddenSubtree,sn=e.matchAccessibilityRole,$t=e.setFocusIfFocusable,Rn=e.setupIntersectionObserver,Ki=e.appendChild,qi=e.appendChildToContainer,Yi=e.commitTextUpdate,oi=e.commitMount,Qi=e.commitUpdate,nr=e.insertBefore,zr=e.insertInContainerBefore,Ji=e.removeChild,Zi=e.removeChildFromContainer,ln=e.resetTextContent,Mn=e.hideInstance,ea=e.hideTextInstance,ie=e.unhideInstance,ve=e.unhideTextInstance,ht=e.clearContainer,Rt=e.cloneInstance,Br=e.createContainerChildSet,si=e.appendChildToContainerChildSet,ta=e.finalizeContainerChildren,Ur=e.replaceContainerChildren,Qa=e.cloneHiddenInstance,Ja=e.cloneHiddenTextInstance,xl=e.canHydrateInstance,wl=e.canHydrateTextInstance,El=e.canHydrateSuspenseInstance,ra=e.isSuspenseInstancePending,na=e.isSuspenseInstanceFallback,Za=e.getSuspenseInstanceFallbackErrorDetails,ia=e.registerSuspenseInstanceRetry,li=e.getNextHydratableSibling,eo=e.getFirstHydratableChild,to=e.getFirstHydratableChildWithinContainer,Cl=e.getFirstHydratableChildWithinSuspenseInstance,Or=e.hydrateInstance,Pl=e.hydrateTextInstance,bl=e.hydrateSuspenseInstance,ro=e.getNextHydratableInstanceAfterSuspenseInstance,Ol=e.commitHydratedContainer,aa=e.commitHydratedSuspenseInstance,Tl=e.clearSuspenseBoundary,kl=e.clearSuspenseBoundaryFromContainer,oa=e.shouldDeleteUnhydratedTailInstances,no=e.didNotMatchHydratedContainerTextInstance,sa=e.didNotMatchHydratedTextInstance,la;function An(t){if(la===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);la=r&&r[1]||""}return`
`+la+t}var ui=!1;function ua(t,r){if(!t||ui)return"";ui=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(K){var u=K}Reflect.construct(t,[],r)}else{try{r.call()}catch(K){u=K}t.call(r.prototype)}else{try{throw Error()}catch(K){u=K}t()}}catch(K){if(K&&u&&typeof K.stack=="string"){for(var d=K.stack.split(`
`),g=u.stack.split(`
`),S=d.length-1,A=g.length-1;1<=S&&0<=A&&d[S]!==g[A];)A--;for(;1<=S&&0<=A;S--,A--)if(d[S]!==g[A]){if(S!==1||A!==1)do if(S--,A--,0>A||d[S]!==g[A]){var j=`
`+d[S].replace(" at new "," at ");return t.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",t.displayName)),j}while(1<=S&&0<=A);break}}}finally{ui=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?An(t):""}var Rl=Object.prototype.hasOwnProperty,ci=[],un=-1;function vr(t){return{current:t}}function He(t){0>un||(t.current=ci[un],ci[un]=null,un--)}function Ge(t,r){un++,ci[un]=t.current,t.current=r}var Tr={},ft=vr(Tr),Pt=vr(!1),qt=Tr;function Hr(t,r){var s=t.type.contextTypes;if(!s)return Tr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=r[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Mt(t){return t=t.childContextTypes,t!=null}function di(){He(Pt),He(ft)}function ca(t,r,s){if(ft.current!==Tr)throw Error(c(168));Ge(ft,r),Ge(Pt,s)}function io(t,r,s){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in r))throw Error(c(108,O(t)||"Unknown",d));return l({},s,u)}function Nn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,qt=ft.current,Ge(ft,t),Ge(Pt,Pt.current),!0}function ao(t,r,s){var u=t.stateNode;if(!u)throw Error(c(169));s?(t=io(t,r,qt),u.__reactInternalMemoizedMergedChildContext=t,He(Pt),He(ft),Ge(ft,t)):He(Pt),Ge(Pt,s)}var Bt=Math.clz32?Math.clz32:Al,Ml=Math.log,xd=Math.LN2;function Al(t){return t>>>=0,t===0?32:31-(Ml(t)/xd|0)|0}var hi=64,fi=4194304;function In(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fn(t,r){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,S=s&268435455;if(S!==0){var A=S&~d;A!==0?u=In(A):(g&=S,g!==0&&(u=In(g)))}else S=s&~d,S!==0?u=In(S):g!==0&&(u=In(g));if(u===0)return 0;if(r!==0&&r!==u&&!(r&d)&&(d=u&-u,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if(u&4&&(u|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)s=31-Bt(r),d=1<<s,u|=t[s],r&=~d;return u}function U(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q(t,r){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var S=31-Bt(g),A=1<<S,j=d[S];j===-1?(!(A&s)||A&u)&&(d[S]=U(A,r)):j<=r&&(t.expiredLanes|=A),g&=~A}}function ee(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function re(){var t=hi;return hi<<=1,!(hi&4194240)&&(hi=64),t}function ue(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function me(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Bt(r),t[r]=s}function gi(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-Bt(s),g=1<<d;r[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function Yt(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var u=31-Bt(s),d=1<<u;d&r|t[u]&r&&(t[u]|=r),s&=~d}}var Pe=0;function At(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ir=o.unstable_scheduleCallback,wd=o.unstable_cancelCallback,z1=o.unstable_shouldYield,B1=o.unstable_requestPaint,_t=o.unstable_now,Nl=o.unstable_ImmediatePriority,U1=o.unstable_UserBlockingPriority,Il=o.unstable_NormalPriority,H1=o.unstable_IdlePriority,oo=null,kr=null;function V1(t){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(oo,t,void 0,(t.current.flags&128)===128)}catch{}}function W1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var mr=typeof Object.is=="function"?Object.is:W1,Vr=null,so=!1,Fl=!1;function Ed(t){Vr===null?Vr=[t]:Vr.push(t)}function X1(t){so=!0,Ed(t)}function Rr(){if(!Fl&&Vr!==null){Fl=!0;var t=0,r=Pe;try{var s=Vr;for(Pe=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}Vr=null,so=!1}catch(d){throw Vr!==null&&(Vr=Vr.slice(t+1)),ir(Nl,Rr),d}finally{Pe=r,Fl=!1}}return null}var pi=[],vi=0,lo=null,uo=0,ar=[],or=0,Ln=null,Wr=1,Xr="";function Dn(t,r){pi[vi++]=uo,pi[vi++]=lo,lo=t,uo=r}function Cd(t,r,s){ar[or++]=Wr,ar[or++]=Xr,ar[or++]=Ln,Ln=t;var u=Wr;t=Xr;var d=32-Bt(u)-1;u&=~(1<<d),s+=1;var g=32-Bt(r)+d;if(30<g){var S=d-d%5;g=(u&(1<<S)-1).toString(32),u>>=S,d-=S,Wr=1<<32-Bt(r)+d|s<<d|u,Xr=g+t}else Wr=1<<g|s<<d|u,Xr=t}function Ll(t){t.return!==null&&(Dn(t,1),Cd(t,1,0))}function Dl(t){for(;t===lo;)lo=pi[--vi],pi[vi]=null,uo=pi[--vi],pi[vi]=null;for(;t===Ln;)Ln=ar[--or],ar[or]=null,Xr=ar[--or],ar[or]=null,Wr=ar[--or],ar[or]=null}var Qt=null,sr=null,Qe=!1,da=!1,yr=null;function Pd(t,r){var s=hr(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function bd(t,r){switch(t.tag){case 5:return r=xl(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,Qt=t,sr=eo(r),!0):!1;case 6:return r=wl(r,t.pendingProps),r!==null?(t.stateNode=r,Qt=t,sr=null,!0):!1;case 13:if(r=El(r),r!==null){var s=Ln!==null?{id:Wr,overflow:Xr}:null;return t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=hr(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,Qt=t,sr=null,!0}return!1;default:return!1}}function Gl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $l(t){if(Qe){var r=sr;if(r){var s=r;if(!bd(t,r)){if(Gl(t))throw Error(c(418));r=li(s);var u=Qt;r&&bd(t,r)?Pd(u,s):(t.flags=t.flags&-4097|2,Qe=!1,Qt=t)}}else{if(Gl(t))throw Error(c(418));t.flags=t.flags&-4097|2,Qe=!1,Qt=t}}}function Od(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function co(t){if(!ke||t!==Qt)return!1;if(!Qe)return Od(t),Qe=!0,!1;if(t.tag!==3&&(t.tag!==5||oa(t.type)&&!Xe(t.type,t.memoizedProps))){var r=sr;if(r){if(Gl(t))throw Td(),Error(c(418));for(;r;)Pd(t,r),r=li(r)}}if(Od(t),t.tag===13){if(!ke)throw Error(c(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));sr=ro(t)}else sr=Qt?li(t.stateNode):null;return!0}function Td(){for(var t=sr;t;)t=li(t)}function mi(){ke&&(sr=Qt=null,da=Qe=!1)}function jl(t){yr===null?yr=[t]:yr.push(t)}var K1=h.ReactCurrentBatchConfig;function ho(t,r){if(mr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),u=Object.keys(r);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!Rl.call(r,d)||!mr(t[d],r[d]))return!1}return!0}function q1(t){switch(t.tag){case 5:return An(t.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 2:case 15:return t=ua(t.type,!1),t;case 11:return t=ua(t.type.render,!1),t;case 1:return t=ua(t.type,!0),t;default:return""}}function _r(t,r){if(t&&t.defaultProps){r=l({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}var fo=vr(null),go=null,yi=null,zl=null;function Bl(){zl=yi=go=null}function kd(t,r,s){ge?(Ge(fo,r._currentValue),r._currentValue=s):(Ge(fo,r._currentValue2),r._currentValue2=s)}function Ul(t){var r=fo.current;He(fo),ge?t._currentValue=r:t._currentValue2=r}function Hl(t,r,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===s)break;t=t.return}}function _i(t,r){go=t,zl=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Ut=!0),t.firstContext=null)}function lr(t){var r=ge?t._currentValue:t._currentValue2;if(zl!==t)if(t={context:t,memoizedValue:r,next:null},yi===null){if(go===null)throw Error(c(308));yi=t,go.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return r}var Gn=null;function Vl(t){Gn===null?Gn=[t]:Gn.push(t)}function Rd(t,r,s,u){var d=r.interleaved;return d===null?(s.next=s,Vl(r)):(s.next=d.next,d.next=s),r.interleaved=s,Mr(t,u)}function Mr(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var cn=!1;function Wl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Md(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function dn(t,r,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,be&2){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,Mr(t,s)}return d=u.interleaved,d===null?(r.next=r,Vl(u)):(r.next=d.next,d.next=r),u.interleaved=r,Mr(t,s)}function po(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,Yt(t,s)}}function Ad(t,r){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=S:g=g.next=S,s=s.next}while(s!==null);g===null?d=g=r:g=g.next=r}else d=g=r;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function vo(t,r,s,u){var d=t.updateQueue;cn=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var j=A,K=j.next;j.next=null,S===null?g=K:S.next=K,S=j;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==S&&(A===null?ae.firstBaseUpdate=K:A.next=K,ae.lastBaseUpdate=j))}if(g!==null){var ye=d.baseState;S=0,ae=K=j=null,A=g;do{var J=A.lane,Ke=A.eventTime;if((u&J)===J){ae!==null&&(ae=ae.next={eventTime:Ke,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ve=t,Wt=A;switch(J=r,Ke=s,Wt.tag){case 1:if(Ve=Wt.payload,typeof Ve=="function"){ye=Ve.call(Ke,ye,J);break e}ye=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Wt.payload,J=typeof Ve=="function"?Ve.call(Ke,ye,J):Ve,J==null)break e;ye=l({},ye,J);break e;case 2:cn=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,J=d.effects,J===null?d.effects=[A]:J.push(A))}else Ke={eventTime:Ke,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(K=ae=Ke,j=ye):ae=ae.next=Ke,S|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;J=A,A=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(ae===null&&(j=ye),d.baseState=j,d.firstBaseUpdate=K,d.lastBaseUpdate=ae,r=d.shared.interleaved,r!==null){d=r;do S|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);jn|=S,t.lanes=S,t.memoizedState=ye}}function Nd(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(c(191,d));d.call(u)}}}var Id=new i.Component().refs;function Xl(t,r,s,u){r=t.memoizedState,s=s(u,r),s=s==null?r:l({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var mo={isMounted:function(t){return(t=t._reactInternals)?G(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var u=Lt(),d=gn(t),g=Kr(u,d);g.payload=r,s!=null&&(g.callback=s),r=dn(t,g,d),r!==null&&(dr(r,t,d,u),po(r,t,d))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var u=Lt(),d=gn(t),g=Kr(u,d);g.tag=1,g.payload=r,s!=null&&(g.callback=s),r=dn(t,g,d),r!==null&&(dr(r,t,d,u),po(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Lt(),u=gn(t),d=Kr(s,u);d.tag=2,r!=null&&(d.callback=r),r=dn(t,d,u),r!==null&&(dr(r,t,u,s),po(r,t,u))}};function Fd(t,r,s,u,d,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,S):r.prototype&&r.prototype.isPureReactComponent?!ho(s,u)||!ho(d,g):!0}function Ld(t,r,s){var u=!1,d=Tr,g=r.contextType;return typeof g=="object"&&g!==null?g=lr(g):(d=Mt(r)?qt:ft.current,u=r.contextTypes,g=(u=u!=null)?Hr(t,d):Tr),r=new r(s,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=mo,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function Dd(t,r,s,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,u),r.state!==t&&mo.enqueueReplaceState(r,r.state,null)}function Kl(t,r,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs=Id,Wl(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=lr(g):(g=Mt(r)?qt:ft.current,d.context=Hr(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Xl(t,r,g,s),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&mo.enqueueReplaceState(d,d.state,null),vo(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(c(309));var u=s.stateNode}if(!u)throw Error(c(147,t));var d=u,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(S){var A=d.refs;A===Id&&(A=d.refs={}),S===null?delete A[g]:A[g]=S},r._stringRef=g,r)}if(typeof t!="string")throw Error(c(284));if(!s._owner)throw Error(c(290,t))}return t}function yo(t,r){throw t=Object.prototype.toString.call(r),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Gd(t){var r=t._init;return r(t._payload)}function $d(t){function r($,F){if(t){var z=$.deletions;z===null?($.deletions=[F],$.flags|=16):z.push(F)}}function s($,F){if(!t)return null;for(;F!==null;)r($,F),F=F.sibling;return null}function u($,F){for($=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function d($,F){return $=vn($,F),$.index=0,$.sibling=null,$}function g($,F,z){return $.index=z,t?(z=$.alternate,z!==null?(z=z.index,z<F?($.flags|=2,F):z):($.flags|=2,F)):($.flags|=1048576,F)}function S($){return t&&$.alternate===null&&($.flags|=2),$}function A($,F,z,Z){return F===null||F.tag!==6?(F=Fu(z,$.mode,Z),F.return=$,F):(F=d(F,z),F.return=$,F)}function j($,F,z,Z){var ce=z.type;return ce===m?ae($,F,z.props.children,Z,z.key):F!==null&&(F.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===v&&Gd(ce)===F.type)?(Z=d(F,z.props),Z.ref=ha($,F,z),Z.return=$,Z):(Z=Ho(z.type,z.key,z.props,null,$.mode,Z),Z.ref=ha($,F,z),Z.return=$,Z)}function K($,F,z,Z){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=Lu(z,$.mode,Z),F.return=$,F):(F=d(F,z.children||[]),F.return=$,F)}function ae($,F,z,Z,ce){return F===null||F.tag!==7?(F=Hn(z,$.mode,Z,ce),F.return=$,F):(F=d(F,z),F.return=$,F)}function ye($,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Fu(""+F,$.mode,z),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case f:return z=Ho(F.type,F.key,F.props,null,$.mode,z),z.ref=ha($,null,F),z.return=$,z;case p:return F=Lu(F,$.mode,z),F.return=$,F;case v:var Z=F._init;return ye($,Z(F._payload),z)}if(X(F)||k(F))return F=Hn(F,$.mode,z,null),F.return=$,F;yo($,F)}return null}function J($,F,z,Z){var ce=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ce!==null?null:A($,F,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case f:return z.key===ce?j($,F,z,Z):null;case p:return z.key===ce?K($,F,z,Z):null;case v:return ce=z._init,J($,F,ce(z._payload),Z)}if(X(z)||k(z))return ce!==null?null:ae($,F,z,Z,null);yo($,z)}return null}function Ke($,F,z,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return $=$.get(z)||null,A(F,$,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case f:return $=$.get(Z.key===null?z:Z.key)||null,j(F,$,Z,ce);case p:return $=$.get(Z.key===null?z:Z.key)||null,K(F,$,Z,ce);case v:var xe=Z._init;return Ke($,F,z,xe(Z._payload),ce)}if(X(Z)||k(Z))return $=$.get(z)||null,ae(F,$,Z,ce,null);yo(F,Z)}return null}function Ve($,F,z,Z){for(var ce=null,xe=null,_e=F,Le=F=0,wt=null;_e!==null&&Le<z.length;Le++){_e.index>Le?(wt=_e,_e=null):wt=_e.sibling;var De=J($,_e,z[Le],Z);if(De===null){_e===null&&(_e=wt);break}t&&_e&&De.alternate===null&&r($,_e),F=g(De,F,Le),xe===null?ce=De:xe.sibling=De,xe=De,_e=wt}if(Le===z.length)return s($,_e),Qe&&Dn($,Le),ce;if(_e===null){for(;Le<z.length;Le++)_e=ye($,z[Le],Z),_e!==null&&(F=g(_e,F,Le),xe===null?ce=_e:xe.sibling=_e,xe=_e);return Qe&&Dn($,Le),ce}for(_e=u($,_e);Le<z.length;Le++)wt=Ke(_e,$,Le,z[Le],Z),wt!==null&&(t&&wt.alternate!==null&&_e.delete(wt.key===null?Le:wt.key),F=g(wt,F,Le),xe===null?ce=wt:xe.sibling=wt,xe=wt);return t&&_e.forEach(function(mn){return r($,mn)}),Qe&&Dn($,Le),ce}function Wt($,F,z,Z){var ce=k(z);if(typeof ce!="function")throw Error(c(150));if(z=ce.call(z),z==null)throw Error(c(151));for(var xe=ce=null,_e=F,Le=F=0,wt=null,De=z.next();_e!==null&&!De.done;Le++,De=z.next()){_e.index>Le?(wt=_e,_e=null):wt=_e.sibling;var mn=J($,_e,De.value,Z);if(mn===null){_e===null&&(_e=wt);break}t&&_e&&mn.alternate===null&&r($,_e),F=g(mn,F,Le),xe===null?ce=mn:xe.sibling=mn,xe=mn,_e=wt}if(De.done)return s($,_e),Qe&&Dn($,Le),ce;if(_e===null){for(;!De.done;Le++,De=z.next())De=ye($,De.value,Z),De!==null&&(F=g(De,F,Le),xe===null?ce=De:xe.sibling=De,xe=De);return Qe&&Dn($,Le),ce}for(_e=u($,_e);!De.done;Le++,De=z.next())De=Ke(_e,$,Le,De.value,Z),De!==null&&(t&&De.alternate!==null&&_e.delete(De.key===null?Le:De.key),F=g(De,F,Le),xe===null?ce=De:xe.sibling=De,xe=De);return t&&_e.forEach(function(Pg){return r($,Pg)}),Qe&&Dn($,Le),ce}function Qr($,F,z,Z){if(typeof z=="object"&&z!==null&&z.type===m&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case f:e:{for(var ce=z.key,xe=F;xe!==null;){if(xe.key===ce){if(ce=z.type,ce===m){if(xe.tag===7){s($,xe.sibling),F=d(xe,z.props.children),F.return=$,$=F;break e}}else if(xe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===v&&Gd(ce)===xe.type){s($,xe.sibling),F=d(xe,z.props),F.ref=ha($,xe,z),F.return=$,$=F;break e}s($,xe);break}else r($,xe);xe=xe.sibling}z.type===m?(F=Hn(z.props.children,$.mode,Z,z.key),F.return=$,$=F):(Z=Ho(z.type,z.key,z.props,null,$.mode,Z),Z.ref=ha($,F,z),Z.return=$,$=Z)}return S($);case p:e:{for(xe=z.key;F!==null;){if(F.key===xe)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){s($,F.sibling),F=d(F,z.children||[]),F.return=$,$=F;break e}else{s($,F);break}else r($,F);F=F.sibling}F=Lu(z,$.mode,Z),F.return=$,$=F}return S($);case v:return xe=z._init,Qr($,F,xe(z._payload),Z)}if(X(z))return Ve($,F,z,Z);if(k(z))return Wt($,F,z,Z);yo($,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(s($,F.sibling),F=d(F,z),F.return=$,$=F):(s($,F),F=Fu(z,$.mode,Z),F.return=$,$=F),S($)):s($,F)}return Qr}var Si=$d(!0),jd=$d(!1),fa={},ur=vr(fa),ga=vr(fa),xi=vr(fa);function Ar(t){if(t===fa)throw Error(c(174));return t}function ql(t,r){Ge(xi,r),Ge(ga,t),Ge(ur,fa),t=he(r),He(ur),Ge(ur,t)}function wi(){He(ur),He(ga),He(xi)}function zd(t){var r=Ar(xi.current),s=Ar(ur.current);r=fe(s,t.type,r),s!==r&&(Ge(ga,t),Ge(ur,r))}function Yl(t){ga.current===t&&(He(ur),He(ga))}var tt=vr(0);function _o(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||ra(s)||na(s)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ql=[];function Jl(){for(var t=0;t<Ql.length;t++){var r=Ql[t];ge?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}Ql.length=0}var So=h.ReactCurrentDispatcher,Zl=h.ReactCurrentBatchConfig,$n=0,rt=null,gt=null,St=null,xo=!1,pa=!1,va=0,Y1=0;function Nt(){throw Error(c(321))}function eu(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!mr(t[s],r[s]))return!1;return!0}function tu(t,r,s,u,d,g){if($n=g,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,So.current=t===null||t.memoizedState===null?eg:tg,t=s(u,d),pa){g=0;do{if(pa=!1,va=0,25<=g)throw Error(c(301));g+=1,St=gt=null,r.updateQueue=null,So.current=rg,t=s(u,d)}while(pa)}if(So.current=Co,r=gt!==null&&gt.next!==null,$n=0,St=gt=rt=null,xo=!1,r)throw Error(c(300));return t}function ru(){var t=va!==0;return va=0,t}function Nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?rt.memoizedState=St=t:St=St.next=t,St}function cr(){if(gt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var r=St===null?rt.memoizedState:St.next;if(r!==null)St=r,gt=t;else{if(t===null)throw Error(c(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},St===null?rt.memoizedState=St=t:St=St.next=t}return St}function ma(t,r){return typeof r=="function"?r(t):r}function nu(t){var r=cr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=gt,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var A=S=null,j=null,K=g;do{var ae=K.lane;if(($n&ae)===ae)j!==null&&(j=j.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),u=K.hasEagerState?K.eagerState:t(u,K.action);else{var ye={lane:ae,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};j===null?(A=j=ye,S=u):j=j.next=ye,rt.lanes|=ae,jn|=ae}K=K.next}while(K!==null&&K!==g);j===null?S=u:j.next=A,mr(u,r.memoizedState)||(Ut=!0),r.memoizedState=u,r.baseState=S,r.baseQueue=j,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,rt.lanes|=g,jn|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function iu(t){var r=cr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=r.memoizedState;if(d!==null){s.pending=null;var S=d=d.next;do g=t(g,S.action),S=S.next;while(S!==d);mr(g,r.memoizedState)||(Ut=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,u]}function Bd(){}function Ud(t,r){var s=rt,u=cr(),d=r(),g=!mr(u.memoizedState,d);if(g&&(u.memoizedState=d,Ut=!0),u=u.queue,au(Wd.bind(null,s,u,t),[t]),u.getSnapshot!==r||g||St!==null&&St.memoizedState.tag&1){if(s.flags|=2048,ya(9,Vd.bind(null,s,u,d,r),void 0,null),xt===null)throw Error(c(349));$n&30||Hd(s,r,d)}return d}function Hd(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Vd(t,r,s,u){r.value=s,r.getSnapshot=u,Xd(r)&&Kd(t)}function Wd(t,r,s){return s(function(){Xd(r)&&Kd(t)})}function Xd(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!mr(t,s)}catch{return!0}}function Kd(t){var r=Mr(t,1);r!==null&&dr(r,t,1,-1)}function qd(t){var r=Nr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},r.queue=t,t=t.dispatch=Z1.bind(null,rt,t),[r.memoizedState,t]}function ya(t,r,s,u){return t={tag:t,create:r,destroy:s,deps:u,next:null},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,r.lastEffect=t)),t}function Yd(){return cr().memoizedState}function wo(t,r,s,u){var d=Nr();rt.flags|=t,d.memoizedState=ya(1|r,s,void 0,u===void 0?null:u)}function Eo(t,r,s,u){var d=cr();u=u===void 0?null:u;var g=void 0;if(gt!==null){var S=gt.memoizedState;if(g=S.destroy,u!==null&&eu(u,S.deps)){d.memoizedState=ya(r,s,g,u);return}}rt.flags|=t,d.memoizedState=ya(1|r,s,g,u)}function Qd(t,r){return wo(8390656,8,t,r)}function au(t,r){return Eo(2048,8,t,r)}function Jd(t,r){return Eo(4,2,t,r)}function Zd(t,r){return Eo(4,4,t,r)}function eh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function th(t,r,s){return s=s!=null?s.concat([t]):null,Eo(4,4,eh.bind(null,r,t),s)}function ou(){}function rh(t,r){var s=cr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&eu(r,u[1])?u[0]:(s.memoizedState=[t,r],t)}function nh(t,r){var s=cr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&eu(r,u[1])?u[0]:(t=t(),s.memoizedState=[t,r],t)}function ih(t,r,s){return $n&21?(mr(s,r)||(s=re(),rt.lanes|=s,jn|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=s)}function Q1(t,r){var s=Pe;Pe=s!==0&&4>s?s:4,t(!0);var u=Zl.transition;Zl.transition={};try{t(!1),r()}finally{Pe=s,Zl.transition=u}}function ah(){return cr().memoizedState}function J1(t,r,s){var u=gn(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},oh(t))sh(r,s);else if(s=Rd(t,r,s,u),s!==null){var d=Lt();dr(s,t,u,d),lh(s,r,u)}}function Z1(t,r,s){var u=gn(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(oh(t))sh(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,A=g(S,s);if(d.hasEagerState=!0,d.eagerState=A,mr(A,S)){var j=r.interleaved;j===null?(d.next=d,Vl(r)):(d.next=j.next,j.next=d),r.interleaved=d;return}}catch{}finally{}s=Rd(t,r,d,u),s!==null&&(d=Lt(),dr(s,t,u,d),lh(s,r,u))}}function oh(t){var r=t.alternate;return t===rt||r!==null&&r===rt}function sh(t,r){pa=xo=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function lh(t,r,s){if(s&4194240){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,Yt(t,s)}}var Co={readContext:lr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},eg={readContext:lr,useCallback:function(t,r){return Nr().memoizedState=[t,r===void 0?null:r],t},useContext:lr,useEffect:Qd,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,wo(4194308,4,eh.bind(null,r,t),s)},useLayoutEffect:function(t,r){return wo(4194308,4,t,r)},useInsertionEffect:function(t,r){return wo(4,2,t,r)},useMemo:function(t,r){var s=Nr();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var u=Nr();return r=s!==void 0?s(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=J1.bind(null,rt,t),[u.memoizedState,t]},useRef:function(t){var r=Nr();return t={current:t},r.memoizedState=t},useState:qd,useDebugValue:ou,useDeferredValue:function(t){return Nr().memoizedState=t},useTransition:function(){var t=qd(!1),r=t[0];return t=Q1.bind(null,t[1]),Nr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var u=rt,d=Nr();if(Qe){if(s===void 0)throw Error(c(407));s=s()}else{if(s=r(),xt===null)throw Error(c(349));$n&30||Hd(u,r,s)}d.memoizedState=s;var g={value:s,getSnapshot:r};return d.queue=g,Qd(Wd.bind(null,u,g,t),[t]),u.flags|=2048,ya(9,Vd.bind(null,u,g,s,r),void 0,null),s},useId:function(){var t=Nr(),r=xt.identifierPrefix;if(Qe){var s=Xr,u=Wr;s=(u&~(1<<32-Bt(u)-1)).toString(32)+s,r=":"+r+"R"+s,s=va++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Y1++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},tg={readContext:lr,useCallback:rh,useContext:lr,useEffect:au,useImperativeHandle:th,useInsertionEffect:Jd,useLayoutEffect:Zd,useMemo:nh,useReducer:nu,useRef:Yd,useState:function(){return nu(ma)},useDebugValue:ou,useDeferredValue:function(t){var r=cr();return ih(r,gt.memoizedState,t)},useTransition:function(){var t=nu(ma)[0],r=cr().memoizedState;return[t,r]},useMutableSource:Bd,useSyncExternalStore:Ud,useId:ah,unstable_isNewReconciler:!1},rg={readContext:lr,useCallback:rh,useContext:lr,useEffect:au,useImperativeHandle:th,useInsertionEffect:Jd,useLayoutEffect:Zd,useMemo:nh,useReducer:iu,useRef:Yd,useState:function(){return iu(ma)},useDebugValue:ou,useDeferredValue:function(t){var r=cr();return gt===null?r.memoizedState=t:ih(r,gt.memoizedState,t)},useTransition:function(){var t=iu(ma)[0],r=cr().memoizedState;return[t,r]},useMutableSource:Bd,useSyncExternalStore:Ud,useId:ah,unstable_isNewReconciler:!1};function Ei(t,r){try{var s="",u=r;do s+=q1(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d,digest:null}}function su(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function lu(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function uh(t,r,s){s=Kr(-1,s),s.tag=3,s.payload={element:null};var u=r.value;return s.callback=function(){Go||(Go=!0,Tu=u),lu(t,r)},s}function ch(t,r,s){s=Kr(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=r.value;s.payload=function(){return u(d)},s.callback=function(){lu(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){lu(t,r),typeof u!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),s}function dh(t,r,s){var u=t.pingCache;if(u===null){u=t.pingCache=new ng;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(s)||(d.add(s),t=mg.bind(null,t,r,s),r.then(t,t))}function hh(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function fh(t,r,s,u,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Kr(-1,1),r.tag=2,dn(s,r,1))),s.lanes|=1),t)}var ig=h.ReactCurrentOwner,Ut=!1;function jt(t,r,s,u){r.child=t===null?jd(r,null,s,u):Si(r,t.child,s,u)}function gh(t,r,s,u,d){s=s.render;var g=r.ref;return _i(r,d),u=tu(t,r,s,u,g,d),s=ru(),t!==null&&!Ut?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,qr(t,r,d)):(Qe&&s&&Ll(r),r.flags|=1,jt(t,r,u,d),r.child)}function ph(t,r,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Iu(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=g,vh(t,r,g,u,d)):(t=Ho(s.type,null,u,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!(t.lanes&d)){var S=g.memoizedProps;if(s=s.compare,s=s!==null?s:ho,s(S,u)&&t.ref===r.ref)return qr(t,r,d)}return r.flags|=1,t=vn(g,u),t.ref=r.ref,t.return=r,r.child=t}function vh(t,r,s,u,d){if(t!==null){var g=t.memoizedProps;if(ho(g,u)&&t.ref===r.ref)if(Ut=!1,r.pendingProps=u=g,(t.lanes&d)!==0)t.flags&131072&&(Ut=!0);else return r.lanes=t.lanes,qr(t,r,d)}return uu(t,r,s,u,d)}function mh(t,r,s){var u=r.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Pi,Jt),Jt|=s;else{if(!(s&1073741824))return t=g!==null?g.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ge(Pi,Jt),Jt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,Ge(Pi,Jt),Jt|=u}else g!==null?(u=g.baseLanes|s,r.memoizedState=null):u=s,Ge(Pi,Jt),Jt|=u;return jt(t,r,d,s),r.child}function yh(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function uu(t,r,s,u,d){var g=Mt(s)?qt:ft.current;return g=Hr(r,g),_i(r,d),s=tu(t,r,s,u,g,d),u=ru(),t!==null&&!Ut?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,qr(t,r,d)):(Qe&&u&&Ll(r),r.flags|=1,jt(t,r,s,d),r.child)}function _h(t,r,s,u,d){if(Mt(s)){var g=!0;Nn(r)}else g=!1;if(_i(r,d),r.stateNode===null)bo(t,r),Ld(r,s,u),Kl(r,s,u,d),u=!0;else if(t===null){var S=r.stateNode,A=r.memoizedProps;S.props=A;var j=S.context,K=s.contextType;typeof K=="object"&&K!==null?K=lr(K):(K=Mt(s)?qt:ft.current,K=Hr(r,K));var ae=s.getDerivedStateFromProps,ye=typeof ae=="function"||typeof S.getSnapshotBeforeUpdate=="function";ye||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==u||j!==K)&&Dd(r,S,u,K),cn=!1;var J=r.memoizedState;S.state=J,vo(r,u,S,d),j=r.memoizedState,A!==u||J!==j||Pt.current||cn?(typeof ae=="function"&&(Xl(r,s,ae,u),j=r.memoizedState),(A=cn||Fd(r,s,A,u,J,j,K))?(ye||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=j),S.props=u,S.state=j,S.context=K,u=A):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{S=r.stateNode,Md(t,r),A=r.memoizedProps,K=r.type===r.elementType?A:_r(r.type,A),S.props=K,ye=r.pendingProps,J=S.context,j=s.contextType,typeof j=="object"&&j!==null?j=lr(j):(j=Mt(s)?qt:ft.current,j=Hr(r,j));var Ke=s.getDerivedStateFromProps;(ae=typeof Ke=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==ye||J!==j)&&Dd(r,S,u,j),cn=!1,J=r.memoizedState,S.state=J,vo(r,u,S,d);var Ve=r.memoizedState;A!==ye||J!==Ve||Pt.current||cn?(typeof Ke=="function"&&(Xl(r,s,Ke,u),Ve=r.memoizedState),(K=cn||Fd(r,s,K,u,J,Ve,j)||!1)?(ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(u,Ve,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(u,Ve,j)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&J===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&J===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Ve),S.props=u,S.state=Ve,S.context=j,u=K):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&J===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&J===t.memoizedState||(r.flags|=1024),u=!1)}return cu(t,r,s,u,g,d)}function cu(t,r,s,u,d,g){yh(t,r);var S=(r.flags&128)!==0;if(!u&&!S)return d&&ao(r,s,!1),qr(t,r,g);u=r.stateNode,ig.current=r;var A=S&&typeof s.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&S?(r.child=Si(r,t.child,null,g),r.child=Si(r,null,A,g)):jt(t,r,A,g),r.memoizedState=u.state,d&&ao(r,s,!0),r.child}function Sh(t){var r=t.stateNode;r.pendingContext?ca(t,r.pendingContext,r.pendingContext!==r.context):r.context&&ca(t,r.context,!1),ql(t,r.containerInfo)}function xh(t,r,s,u,d){return mi(),jl(d),r.flags|=256,jt(t,r,s,u),r.child}var du={dehydrated:null,treeContext:null,retryLane:0};function hu(t){return{baseLanes:t,cachePool:null,transitions:null}}function wh(t,r,s){var u=r.pendingProps,d=tt.current,g=!1,S=(r.flags&128)!==0,A;if((A=S)||(A=t!==null&&t.memoizedState===null?!1:(d&2)!==0),A?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Ge(tt,d&1),t===null)return $l(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?na(t)?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(S=u.children,t=u.fallback,g?(u=r.mode,g=r.child,S={mode:"hidden",children:S},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=S):g=Vo(S,u,0,null),t=Hn(t,u,s,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=hu(s),r.memoizedState=du,t):fu(r,S));if(d=t.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return ag(t,r,S,u,A,d,s);if(g){g=u.fallback,S=r.mode,d=t.child,A=d.sibling;var j={mode:"hidden",children:u.children};return!(S&1)&&r.child!==d?(u=r.child,u.childLanes=0,u.pendingProps=j,r.deletions=null):(u=vn(d,j),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=vn(A,g):(g=Hn(g,S,s,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=t.child.memoizedState,S=S===null?hu(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},g.memoizedState=S,g.childLanes=t.childLanes&~s,r.memoizedState=du,u}return g=t.child,t=g.sibling,u=vn(g,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=s),u.return=r,u.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=u,r.memoizedState=null,u}function fu(t,r){return r=Vo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Po(t,r,s,u){return u!==null&&jl(u),Si(r,t.child,null,s),t=fu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ag(t,r,s,u,d,g,S){if(s)return r.flags&256?(r.flags&=-257,u=su(Error(c(422))),Po(t,r,S,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=u.fallback,d=r.mode,u=Vo({mode:"visible",children:u.children},d,0,null),g=Hn(g,d,S,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,r.mode&1&&Si(r,t.child,null,S),r.child.memoizedState=hu(S),r.memoizedState=du,g);if(!(r.mode&1))return Po(t,r,S,null);if(na(d))return u=Za(d).digest,g=Error(c(419)),u=su(g,u,void 0),Po(t,r,S,u);if(s=(S&t.childLanes)!==0,Ut||s){if(u=xt,u!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|S)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Mr(t,d),dr(u,t,d,-1))}return Nu(),u=su(Error(c(421))),Po(t,r,S,u)}return ra(d)?(r.flags|=128,r.child=t.child,r=yg.bind(null,t),ia(d,r),null):(t=g.treeContext,ke&&(sr=Cl(d),Qt=r,Qe=!0,yr=null,da=!1,t!==null&&(ar[or++]=Wr,ar[or++]=Xr,ar[or++]=Ln,Wr=t.id,Xr=t.overflow,Ln=r)),r=fu(r,u.children),r.flags|=4096,r)}function Eh(t,r,s){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Hl(t.return,r,s)}function gu(t,r,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Ch(t,r,s){var u=r.pendingProps,d=u.revealOrder,g=u.tail;if(jt(t,r,u.children,s),u=tt.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Eh(t,s,r);else if(t.tag===19)Eh(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ge(tt,u),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(s=r.child,d=null;s!==null;)t=s.alternate,t!==null&&_o(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=r.child,r.child=null):(d=s.sibling,s.sibling=null),gu(r,!1,d,s,g);break;case"backwards":for(s=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&_o(t)===null){r.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}gu(r,!0,s,null,g);break;case"together":gu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function bo(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function qr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),jn|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(c(153));if(r.child!==null){for(t=r.child,s=vn(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=vn(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function og(t,r,s){switch(r.tag){case 3:Sh(r),mi();break;case 5:zd(r);break;case 1:Mt(r.type)&&Nn(r);break;case 4:ql(r,r.stateNode.containerInfo);break;case 10:kd(r,r.type._context,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ge(tt,tt.current&1),r.flags|=128,null):s&r.child.childLanes?wh(t,r,s):(Ge(tt,tt.current&1),t=qr(t,r,s),t!==null?t.sibling:null);Ge(tt,tt.current&1);break;case 19:if(u=(s&r.childLanes)!==0,t.flags&128){if(u)return Ch(t,r,s);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ge(tt,tt.current),u)break;return null;case 22:case 23:return r.lanes=0,mh(t,r,s)}return qr(t,r,s)}function Ir(t){t.flags|=4}function Ph(t,r){if(t!==null&&t.child===r.child)return!0;if(r.flags&16)return!1;for(t=r.child;t!==null;){if(t.flags&12854||t.subtreeFlags&12854)return!1;t=t.sibling}return!0}var _a,Sa,Oo,To;if(de)_a=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)Se(t,s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Sa=function(){},Oo=function(t,r,s,u,d){if(t=t.memoizedProps,t!==u){var g=r.stateNode,S=Ar(ur.current);s=Ce(g,s,t,u,d,S),(r.updateQueue=s)&&Ir(r)}},To=function(t,r,s,u){s!==u&&Ir(r)};else if(Ie){_a=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=Qa(g,d.type,d.memoizedProps,d)),Se(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=Ja(g,d.memoizedProps,d)),Se(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),_a(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var bh=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=Qa(g,d.type,d.memoizedProps,d)),si(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=Ja(g,d.memoizedProps,d)),si(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),bh(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Sa=function(t,r){var s=r.stateNode;if(!Ph(t,r)){t=s.containerInfo;var u=Br(t);bh(u,r,!1,!1),s.pendingChildren=u,Ir(r),ta(t,u)}},Oo=function(t,r,s,u,d){var g=t.stateNode,S=t.memoizedProps;if((t=Ph(t,r))&&S===u)r.stateNode=g;else{var A=r.stateNode,j=Ar(ur.current),K=null;S!==u&&(K=Ce(A,s,S,u,d,j)),t&&K===null?r.stateNode=g:(g=Rt(g,K,s,S,u,r,t,A),Oe(g,s,u,d,j)&&Ir(r),r.stateNode=g,t?Ir(r):_a(g,r,!1,!1))}},To=function(t,r,s,u){s!==u?(t=Ar(xi.current),s=Ar(ur.current),r.stateNode=Ne(u,t,s,r),Ir(r)):r.stateNode=t.stateNode}}else Sa=function(){},Oo=function(){},To=function(){};function xa(t,r){if(!Qe)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function It(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(r)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,r}function sg(t,r,s){var u=r.pendingProps;switch(Dl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(r),null;case 1:return Mt(r.type)&&di(),It(r),null;case 3:return s=r.stateNode,wi(),He(Pt),He(ft),Jl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(co(r)?Ir(r):t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,yr!==null&&(Mu(yr),yr=null))),Sa(t,r),It(r),null;case 5:Yl(r),s=Ar(xi.current);var d=r.type;if(t!==null&&r.stateNode!=null)Oo(t,r,d,u,s),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(c(166));return It(r),null}if(t=Ar(ur.current),co(r)){if(!ke)throw Error(c(175));t=Or(r.stateNode,r.type,r.memoizedProps,s,t,r,!da),r.updateQueue=t,t!==null&&Ir(r)}else{var g=Q(d,u,s,t,r);_a(g,r,!1,!1),r.stateNode=g,Oe(g,d,u,s,t)&&Ir(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return It(r),null;case 6:if(t&&r.stateNode!=null)To(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(c(166));if(t=Ar(xi.current),s=Ar(ur.current),co(r)){if(!ke)throw Error(c(176));if(t=r.stateNode,s=r.memoizedProps,(u=Pl(t,s,r,!da))&&(d=Qt,d!==null))switch(d.tag){case 3:no(d.stateNode.containerInfo,t,s,(d.mode&1)!==0);break;case 5:sa(d.type,d.memoizedProps,d.stateNode,t,s,(d.mode&1)!==0)}u&&Ir(r)}else r.stateNode=Ne(u,t,s,r)}return It(r),null;case 13:if(He(tt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&sr!==null&&r.mode&1&&!(r.flags&128))Td(),mi(),r.flags|=98560,d=!1;else if(d=co(r),u!==null&&u.dehydrated!==null){if(t===null){if(!d)throw Error(c(318));if(!ke)throw Error(c(344));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));bl(d,r)}else mi(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;It(r),d=!1}else yr!==null&&(Mu(yr),yr=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(s=u!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||tt.current&1?pt===0&&(pt=3):Nu())),r.updateQueue!==null&&(r.flags|=4),It(r),null);case 4:return wi(),Sa(t,r),t===null&&Ae(r.stateNode.containerInfo),It(r),null;case 10:return Ul(r.type._context),It(r),null;case 17:return Mt(r.type)&&di(),It(r),null;case 19:if(He(tt),d=r.memoizedState,d===null)return It(r),null;if(u=(r.flags&128)!==0,g=d.rendering,g===null)if(u)xa(d,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(g=_o(t),g!==null){for(r.flags|=128,xa(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=s,s=r.child;s!==null;)u=s,d=t,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,d=g.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),s=s.sibling;return Ge(tt,tt.current&1|2),r.child}t=t.sibling}d.tail!==null&&_t()>Ou&&(r.flags|=128,u=!0,xa(d,!1),r.lanes=4194304)}else{if(!u)if(t=_o(g),t!==null){if(r.flags|=128,u=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),xa(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Qe)return It(r),null}else 2*_t()-d.renderingStartTime>Ou&&s!==1073741824&&(r.flags|=128,u=!0,xa(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=_t(),r.sibling=null,t=tt.current,Ge(tt,u?t&1|2:t&1),r):(It(r),null);case 22:case 23:return Au(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?Jt&1073741824&&(It(r),de&&r.subtreeFlags&6&&(r.flags|=8192)):It(r),null;case 24:return null;case 25:return null}throw Error(c(156,r.tag))}function lg(t,r){switch(Dl(r),r.tag){case 1:return Mt(r.type)&&di(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return wi(),He(Pt),He(ft),Jl(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Yl(r),null;case 13:if(He(tt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(c(340));mi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return He(tt),null;case 4:return wi(),null;case 10:return Ul(r.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var ko=!1,Ft=!1,ug=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ci(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){Je(t,r,u)}else s.current=null}function pu(t,r,s){try{s()}catch(u){Je(t,r,u)}}var Oh=!1;function cg(t,r){for(Me(t.containerInfo),ne=r;ne!==null;)if(t=ne,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,ne=r;else for(;ne!==null;){t=ne;try{var s=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var u=s.memoizedProps,d=s.memoizedState,g=t.stateNode,S=g.getSnapshotBeforeUpdate(t.elementType===t.type?u:_r(t.type,u),d);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:de&&ht(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(A){Je(t,t.return,A)}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}return s=Oh,Oh=!1,s}function wa(t,r,s){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&pu(r,s,g)}d=d.next}while(d!==u)}}function Ro(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==r)}}function vu(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=oe(s);break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Th(t){var r=t.alternate;r!==null&&(t.alternate=null,Th(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ye(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kh(t){return t.tag===5||t.tag===3||t.tag===4}function Rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mu(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?zr(s,t,r):qi(s,t);else if(u!==4&&(t=t.child,t!==null))for(mu(t,r,s),t=t.sibling;t!==null;)mu(t,r,s),t=t.sibling}function yu(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?nr(s,t,r):Ki(s,t);else if(u!==4&&(t=t.child,t!==null))for(yu(t,r,s),t=t.sibling;t!==null;)yu(t,r,s),t=t.sibling}var bt=null,Sr=!1;function Fr(t,r,s){for(s=s.child;s!==null;)_u(t,r,s),s=s.sibling}function _u(t,r,s){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(oo,s)}catch{}switch(s.tag){case 5:Ft||Ci(s,r);case 6:if(de){var u=bt,d=Sr;bt=null,Fr(t,r,s),bt=u,Sr=d,bt!==null&&(Sr?Zi(bt,s.stateNode):Ji(bt,s.stateNode))}else Fr(t,r,s);break;case 18:de&&bt!==null&&(Sr?kl(bt,s.stateNode):Tl(bt,s.stateNode));break;case 4:de?(u=bt,d=Sr,bt=s.stateNode.containerInfo,Sr=!0,Fr(t,r,s),bt=u,Sr=d):(Ie&&(u=s.stateNode.containerInfo,d=Br(u),Ur(u,d)),Fr(t,r,s));break;case 0:case 11:case 14:case 15:if(!Ft&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,S=g.destroy;g=g.tag,S!==void 0&&(g&2||g&4)&&pu(s,r,S),d=d.next}while(d!==u)}Fr(t,r,s);break;case 1:if(!Ft&&(Ci(s,r),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){Je(s,r,A)}Fr(t,r,s);break;case 21:Fr(t,r,s);break;case 22:s.mode&1?(Ft=(u=Ft)||s.memoizedState!==null,Fr(t,r,s),Ft=u):Fr(t,r,s);break;default:Fr(t,r,s)}}function Mh(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ug),r.forEach(function(u){var d=_g.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function xr(t,r){var s=r.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,S=r;if(de){var A=S;e:for(;A!==null;){switch(A.tag){case 5:bt=A.stateNode,Sr=!1;break e;case 3:bt=A.stateNode.containerInfo,Sr=!0;break e;case 4:bt=A.stateNode.containerInfo,Sr=!0;break e}A=A.return}if(bt===null)throw Error(c(160));_u(g,S,d),bt=null,Sr=!1}else _u(g,S,d);var j=d.alternate;j!==null&&(j.return=null),d.return=null}catch(K){Je(d,r,K)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Ah(r,t),r=r.sibling}function Ah(t,r){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xr(r,t),Lr(t),u&4){try{wa(3,t,t.return),Ro(3,t)}catch(J){Je(t,t.return,J)}try{wa(5,t,t.return)}catch(J){Je(t,t.return,J)}}break;case 1:xr(r,t),Lr(t),u&512&&s!==null&&Ci(s,s.return);break;case 5:if(xr(r,t),Lr(t),u&512&&s!==null&&Ci(s,s.return),de){if(t.flags&32){var d=t.stateNode;try{ln(d)}catch(J){Je(t,t.return,J)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(s=s!==null?s.memoizedProps:g,u=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{Qi(d,r,u,s,g,t)}catch(J){Je(t,t.return,J)}}}break;case 6:if(xr(r,t),Lr(t),u&4&&de){if(t.stateNode===null)throw Error(c(162));d=t.stateNode,g=t.memoizedProps,s=s!==null?s.memoizedProps:g;try{Yi(d,s,g)}catch(J){Je(t,t.return,J)}}break;case 3:if(xr(r,t),Lr(t),u&4){if(de&&ke&&s!==null&&s.memoizedState.isDehydrated)try{Ol(r.containerInfo)}catch(J){Je(t,t.return,J)}if(Ie){d=r.containerInfo,g=r.pendingChildren;try{Ur(d,g)}catch(J){Je(t,t.return,J)}}}break;case 4:if(xr(r,t),Lr(t),u&4&&Ie){g=t.stateNode,d=g.containerInfo,g=g.pendingChildren;try{Ur(d,g)}catch(J){Je(t,t.return,J)}}break;case 13:xr(r,t),Lr(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(bu=_t())),u&4&&Mh(t);break;case 22:var S=s!==null&&s.memoizedState!==null;if(t.mode&1?(Ft=(s=Ft)||S,xr(r,t),Ft=s):xr(r,t),Lr(t),u&8192){if(s=t.memoizedState!==null,(t.stateNode.isHidden=s)&&!S&&t.mode&1)for(ne=t,u=t.child;u!==null;){for(r=ne=u;ne!==null;){S=ne;var A=S.child;switch(S.tag){case 0:case 11:case 14:case 15:wa(4,S,S.return);break;case 1:Ci(S,S.return);var j=S.stateNode;if(typeof j.componentWillUnmount=="function"){var K=S,ae=S.return;try{var ye=K;j.props=ye.memoizedProps,j.state=ye.memoizedState,j.componentWillUnmount()}catch(J){Je(K,ae,J)}}break;case 5:Ci(S,S.return);break;case 22:if(S.memoizedState!==null){Fh(r);continue}}A!==null?(A.return=S,ne=A):Fh(r)}u=u.sibling}if(de){e:if(u=null,de)for(r=t;;){if(r.tag===5){if(u===null){u=r;try{d=r.stateNode,s?Mn(d):ie(r.stateNode,r.memoizedProps)}catch(J){Je(t,t.return,J)}}}else if(r.tag===6){if(u===null)try{g=r.stateNode,s?ea(g):ve(g,r.memoizedProps)}catch(J){Je(t,t.return,J)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}}}break;case 19:xr(r,t),Lr(t),u&4&&Mh(t);break;case 21:break;default:xr(r,t),Lr(t)}}function Lr(t){var r=t.flags;if(r&2){try{if(de){e:{for(var s=t.return;s!==null;){if(kh(s)){var u=s;break e}s=s.return}throw Error(c(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(ln(d),u.flags&=-33);var g=Rh(t);yu(t,g,d);break;case 3:case 4:var S=u.stateNode.containerInfo,A=Rh(t);mu(t,A,S);break;default:throw Error(c(161))}}}catch(j){Je(t,t.return,j)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dg(t,r,s){ne=t,Nh(t)}function Nh(t,r,s){for(var u=(t.mode&1)!==0;ne!==null;){var d=ne,g=d.child;if(d.tag===22&&u){var S=d.memoizedState!==null||ko;if(!S){var A=d.alternate,j=A!==null&&A.memoizedState!==null||Ft;A=ko;var K=Ft;if(ko=S,(Ft=j)&&!K)for(ne=d;ne!==null;)S=ne,j=S.child,S.tag===22&&S.memoizedState!==null?Lh(d):j!==null?(j.return=S,ne=j):Lh(d);for(;g!==null;)ne=g,Nh(g),g=g.sibling;ne=d,ko=A,Ft=K}Ih(t)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ne=g):Ih(t)}}function Ih(t){for(;ne!==null;){var r=ne;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Ft||Ro(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ft)if(s===null)u.componentDidMount();else{var d=r.elementType===r.type?s.memoizedProps:_r(r.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Nd(r,g,u);break;case 3:var S=r.updateQueue;if(S!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=oe(r.child.stateNode);break;case 1:s=r.child.stateNode}Nd(r,S,s)}break;case 5:var A=r.stateNode;s===null&&r.flags&4&&oi(A,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(ke&&r.memoizedState===null){var j=r.alternate;if(j!==null){var K=j.memoizedState;if(K!==null){var ae=K.dehydrated;ae!==null&&aa(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Ft||r.flags&512&&vu(r)}catch(ye){Je(r,r.return,ye)}}if(r===t){ne=null;break}if(s=r.sibling,s!==null){s.return=r.return,ne=s;break}ne=r.return}}function Fh(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ne=s;break}ne=r.return}}function Lh(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Ro(4,r)}catch(j){Je(r,s,j)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var d=r.return;try{u.componentDidMount()}catch(j){Je(r,d,j)}}var g=r.return;try{vu(r)}catch(j){Je(r,g,j)}break;case 5:var S=r.return;try{vu(r)}catch(j){Je(r,S,j)}}}catch(j){Je(r,r.return,j)}if(r===t){ne=null;break}var A=r.sibling;if(A!==null){A.return=r.return,ne=A;break}ne=r.return}}var Mo=0,Ao=1,No=2,Io=3,Fo=4;if(typeof Symbol=="function"&&Symbol.for){var Ea=Symbol.for;Mo=Ea("selector.component"),Ao=Ea("selector.has_pseudo_class"),No=Ea("selector.role"),Io=Ea("selector.test_id"),Fo=Ea("selector.text")}function Su(t){var r=ot(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(c(364));return r}if(t=je(t),t===null)throw Error(c(362));return t.stateNode.current}function xu(t,r){switch(r.$$typeof){case Mo:if(t.type===r.value)return!0;break;case Ao:e:{r=r.value,t=[t,0];for(var s=0;s<t.length;){var u=t[s++],d=t[s++],g=r[d];if(u.tag!==5||!zt(u)){for(;g!=null&&xu(u,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(u=u.child;u!==null;)t.push(u,d),u=u.sibling}}r=!1}return r;case No:if(t.tag===5&&sn(t.stateNode,r.value))return!0;break;case Fo:if((t.tag===5||t.tag===6)&&(t=dt(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case Io:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function wu(t){switch(t.$$typeof){case Mo:return"<"+(B(t.value)||"Unknown")+">";case Ao:return":has("+(wu(t)||"")+")";case No:return'[role="'+t.value+'"]';case Fo:return'"'+t.value+'"';case Io:return'[data-testname="'+t.value+'"]';default:throw Error(c(365))}}function Dh(t,r){var s=[];t=[t,0];for(var u=0;u<t.length;){var d=t[u++],g=t[u++],S=r[g];if(d.tag!==5||!zt(d)){for(;S!=null&&xu(d,S);)g++,S=r[g];if(g===r.length)s.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return s}function Eu(t,r){if(!kt)throw Error(c(363));t=Su(t),t=Dh(t,r),r=[],t=Array.from(t);for(var s=0;s<t.length;){var u=t[s++];if(u.tag===5)zt(u)||r.push(u.stateNode);else for(u=u.child;u!==null;)t.push(u),u=u.sibling}return r}var hg=Math.ceil,Lo=h.ReactCurrentDispatcher,Cu=h.ReactCurrentOwner,st=h.ReactCurrentBatchConfig,be=0,xt=null,ct=null,Ot=0,Jt=0,Pi=vr(0),pt=0,Ca=null,jn=0,Do=0,Pu=0,Pa=null,Ht=null,bu=0,Ou=1/0,Yr=null;function bi(){Ou=_t()+500}var Go=!1,Tu=null,hn=null,$o=!1,fn=null,jo=0,ba=0,ku=null,zo=-1,Bo=0;function Lt(){return be&6?_t():zo!==-1?zo:zo=_t()}function gn(t){return t.mode&1?be&2&&Ot!==0?Ot&-Ot:K1.transition!==null?(Bo===0&&(Bo=re()),Bo):(t=Pe,t!==0?t:Ct()):1}function dr(t,r,s,u){if(50<ba)throw ba=0,ku=null,Error(c(185));me(t,s,u),(!(be&2)||t!==xt)&&(t===xt&&(!(be&2)&&(Do|=s),pt===4&&pn(t,Ot)),Vt(t,u),s===1&&be===0&&!(r.mode&1)&&(bi(),so&&Rr()))}function Vt(t,r){var s=t.callbackNode;q(t,r);var u=Fn(t,t===xt?Ot:0);if(u===0)s!==null&&wd(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(s!=null&&wd(s),r===1)t.tag===0?X1($h.bind(null,t)):Ed($h.bind(null,t)),Fe?ut(function(){!(be&6)&&Rr()}):ir(Nl,Rr),s=null;else{switch(At(u)){case 1:s=Nl;break;case 4:s=U1;break;case 16:s=Il;break;case 536870912:s=H1;break;default:s=Il}s=Kh(s,Gh.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Gh(t,r){if(zo=-1,Bo=0,be&6)throw Error(c(327));var s=t.callbackNode;if(Un()&&t.callbackNode!==s)return null;var u=Fn(t,t===xt?Ot:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=Uo(t,u);else{r=u;var d=be;be|=2;var g=Bh();(xt!==t||Ot!==r)&&(Yr=null,bi(),zn(t,r));do try{pg();break}catch(A){zh(t,A)}while(!0);Bl(),Lo.current=g,be=d,ct!==null?r=0:(xt=null,Ot=0,r=pt)}if(r!==0){if(r===2&&(d=ee(t),d!==0&&(u=d,r=Ru(t,d))),r===1)throw s=Ca,zn(t,0),pn(t,u),Vt(t,_t()),s;if(r===6)pn(t,u);else{if(d=t.current.alternate,!(u&30)&&!fg(d)&&(r=Uo(t,u),r===2&&(g=ee(t),g!==0&&(u=g,r=Ru(t,g))),r===1))throw s=Ca,zn(t,0),pn(t,u),Vt(t,_t()),s;switch(t.finishedWork=d,t.finishedLanes=u,r){case 0:case 1:throw Error(c(345));case 2:Bn(t,Ht,Yr);break;case 3:if(pn(t,u),(u&130023424)===u&&(r=bu+500-_t(),10<r)){if(Fn(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){Lt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=N(Bn.bind(null,t,Ht,Yr),r);break}Bn(t,Ht,Yr);break;case 4:if(pn(t,u),(u&4194240)===u)break;for(r=t.eventTimes,d=-1;0<u;){var S=31-Bt(u);g=1<<S,S=r[S],S>d&&(d=S),u&=~g}if(u=d,u=_t()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*hg(u/1960))-u,10<u){t.timeoutHandle=N(Bn.bind(null,t,Ht,Yr),u);break}Bn(t,Ht,Yr);break;case 5:Bn(t,Ht,Yr);break;default:throw Error(c(329))}}}return Vt(t,_t()),t.callbackNode===s?Gh.bind(null,t):null}function Ru(t,r){var s=Pa;return t.current.memoizedState.isDehydrated&&(zn(t,r).flags|=256),t=Uo(t,r),t!==2&&(r=Ht,Ht=s,r!==null&&Mu(r)),t}function Mu(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function fg(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!mr(g(),d))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function pn(t,r){for(r&=~Pu,r&=~Do,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-Bt(r),u=1<<s;t[s]=-1,r&=~u}}function $h(t){if(be&6)throw Error(c(327));Un();var r=Fn(t,0);if(!(r&1))return Vt(t,_t()),null;var s=Uo(t,r);if(t.tag!==0&&s===2){var u=ee(t);u!==0&&(r=u,s=Ru(t,u))}if(s===1)throw s=Ca,zn(t,0),pn(t,r),Vt(t,_t()),s;if(s===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Bn(t,Ht,Yr),Vt(t,_t()),null}function jh(t){fn!==null&&fn.tag===0&&!(be&6)&&Un();var r=be;be|=1;var s=st.transition,u=Pe;try{if(st.transition=null,Pe=1,t)return t()}finally{Pe=u,st.transition=s,be=r,!(be&6)&&Rr()}}function Au(){Jt=Pi.current,He(Pi)}function zn(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==te&&(t.timeoutHandle=te,H(s)),ct!==null)for(s=ct.return;s!==null;){var u=s;switch(Dl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&di();break;case 3:wi(),He(Pt),He(ft),Jl();break;case 5:Yl(u);break;case 4:wi();break;case 13:He(tt);break;case 19:He(tt);break;case 10:Ul(u.type._context);break;case 22:case 23:Au()}s=s.return}if(xt=t,ct=t=vn(t.current,null),Ot=Jt=r,pt=0,Ca=null,Pu=Do=jn=0,Ht=Pa=null,Gn!==null){for(r=0;r<Gn.length;r++)if(s=Gn[r],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var S=g.next;g.next=d,u.next=S}s.pending=u}Gn=null}return t}function zh(t,r){do{var s=ct;try{if(Bl(),So.current=Co,xo){for(var u=rt.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}xo=!1}if($n=0,St=gt=rt=null,pa=!1,va=0,Cu.current=null,s===null||s.return===null){pt=1,Ca=r,ct=null;break}e:{var g=t,S=s.return,A=s,j=r;if(r=Ot,A.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=j,ae=A,ye=ae.tag;if(!(ae.mode&1)&&(ye===0||ye===11||ye===15)){var J=ae.alternate;J?(ae.updateQueue=J.updateQueue,ae.memoizedState=J.memoizedState,ae.lanes=J.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Ke=hh(S);if(Ke!==null){Ke.flags&=-257,fh(Ke,S,A,g,r),Ke.mode&1&&dh(g,K,r),r=Ke,j=K;var Ve=r.updateQueue;if(Ve===null){var Wt=new Set;Wt.add(j),r.updateQueue=Wt}else Ve.add(j);break e}else{if(!(r&1)){dh(g,K,r),Nu();break e}j=Error(c(426))}}else if(Qe&&A.mode&1){var Qr=hh(S);if(Qr!==null){!(Qr.flags&65536)&&(Qr.flags|=256),fh(Qr,S,A,g,r),jl(Ei(j,A));break e}}g=j=Ei(j,A),pt!==4&&(pt=2),Pa===null?Pa=[g]:Pa.push(g),g=S;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var $=uh(g,j,r);Ad(g,$);break e;case 1:A=j;var F=g.type,z=g.stateNode;if(!(g.flags&128)&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(hn===null||!hn.has(z)))){g.flags|=65536,r&=-r,g.lanes|=r;var Z=ch(g,A,r);Ad(g,Z);break e}}g=g.return}while(g!==null)}Hh(s)}catch(ce){r=ce,ct===s&&s!==null&&(ct=s=s.return);continue}break}while(!0)}function Bh(){var t=Lo.current;return Lo.current=Co,t===null?Co:t}function Nu(){(pt===0||pt===3||pt===2)&&(pt=4),xt===null||!(jn&268435455)&&!(Do&268435455)||pn(xt,Ot)}function Uo(t,r){var s=be;be|=2;var u=Bh();(xt!==t||Ot!==r)&&(Yr=null,zn(t,r));do try{gg();break}catch(d){zh(t,d)}while(!0);if(Bl(),be=s,Lo.current=u,ct!==null)throw Error(c(261));return xt=null,Ot=0,pt}function gg(){for(;ct!==null;)Uh(ct)}function pg(){for(;ct!==null&&!z1();)Uh(ct)}function Uh(t){var r=Xh(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,r===null?Hh(t):ct=r,Cu.current=null}function Hh(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=lg(s,r),s!==null){s.flags&=32767,ct=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(s=sg(s,r,Jt),s!==null){ct=s;return}if(r=r.sibling,r!==null){ct=r;return}ct=r=t}while(r!==null);pt===0&&(pt=5)}function Bn(t,r,s){var u=Pe,d=st.transition;try{st.transition=null,Pe=1,vg(t,r,s,u)}finally{st.transition=d,Pe=u}return null}function vg(t,r,s,u){do Un();while(fn!==null);if(be&6)throw Error(c(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(gi(t,g),t===xt&&(ct=xt=null,Ot=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||$o||($o=!0,Kh(Il,function(){return Un(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=st.transition,st.transition=null;var S=Pe;Pe=1;var A=be;be|=4,Cu.current=null,cg(t,s),Ah(s,t),se(t.containerInfo),t.current=s,dg(s),B1(),be=A,Pe=S,st.transition=g}else t.current=s;if($o&&($o=!1,fn=t,jo=d),g=t.pendingLanes,g===0&&(hn=null),V1(s.stateNode),Vt(t,_t()),r!==null)for(u=t.onRecoverableError,s=0;s<r.length;s++)d=r[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Go)throw Go=!1,t=Tu,Tu=null,t;return jo&1&&t.tag!==0&&Un(),g=t.pendingLanes,g&1?t===ku?ba++:(ba=0,ku=t):ba=0,Rr(),null}function Un(){if(fn!==null){var t=At(jo),r=st.transition,s=Pe;try{if(st.transition=null,Pe=16>t?16:t,fn===null)var u=!1;else{if(t=fn,fn=null,jo=0,be&6)throw Error(c(331));var d=be;for(be|=4,ne=t.current;ne!==null;){var g=ne,S=g.child;if(ne.flags&16){var A=g.deletions;if(A!==null){for(var j=0;j<A.length;j++){var K=A[j];for(ne=K;ne!==null;){var ae=ne;switch(ae.tag){case 0:case 11:case 15:wa(8,ae,g)}var ye=ae.child;if(ye!==null)ye.return=ae,ne=ye;else for(;ne!==null;){ae=ne;var J=ae.sibling,Ke=ae.return;if(Th(ae),ae===K){ne=null;break}if(J!==null){J.return=Ke,ne=J;break}ne=Ke}}}var Ve=g.alternate;if(Ve!==null){var Wt=Ve.child;if(Wt!==null){Ve.child=null;do{var Qr=Wt.sibling;Wt.sibling=null,Wt=Qr}while(Wt!==null)}}ne=g}}if(g.subtreeFlags&2064&&S!==null)S.return=g,ne=S;else e:for(;ne!==null;){if(g=ne,g.flags&2048)switch(g.tag){case 0:case 11:case 15:wa(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,ne=$;break e}ne=g.return}}var F=t.current;for(ne=F;ne!==null;){S=ne;var z=S.child;if(S.subtreeFlags&2064&&z!==null)z.return=S,ne=z;else e:for(S=F;ne!==null;){if(A=ne,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Ro(9,A)}}catch(ce){Je(A,A.return,ce)}if(A===S){ne=null;break e}var Z=A.sibling;if(Z!==null){Z.return=A.return,ne=Z;break e}ne=A.return}}if(be=d,Rr(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(oo,t)}catch{}u=!0}return u}finally{Pe=s,st.transition=r}}return!1}function Vh(t,r,s){r=Ei(s,r),r=uh(t,r,1),t=dn(t,r,1),r=Lt(),t!==null&&(me(t,1,r),Vt(t,r))}function Je(t,r,s){if(t.tag===3)Vh(t,t,s);else for(;r!==null;){if(r.tag===3){Vh(r,t,s);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(hn===null||!hn.has(u))){t=Ei(s,t),t=ch(r,t,1),r=dn(r,t,1),t=Lt(),r!==null&&(me(r,1,t),Vt(r,t));break}}r=r.return}}function mg(t,r,s){var u=t.pingCache;u!==null&&u.delete(r),r=Lt(),t.pingedLanes|=t.suspendedLanes&s,xt===t&&(Ot&s)===s&&(pt===4||pt===3&&(Ot&130023424)===Ot&&500>_t()-bu?zn(t,0):Pu|=s),Vt(t,r)}function Wh(t,r){r===0&&(t.mode&1?(r=fi,fi<<=1,!(fi&130023424)&&(fi=4194304)):r=1);var s=Lt();t=Mr(t,r),t!==null&&(me(t,r,s),Vt(t,s))}function yg(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Wh(t,s)}function _g(t,r){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(c(314))}u!==null&&u.delete(r),Wh(t,s)}var Xh;Xh=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Pt.current)Ut=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Ut=!1,og(t,r,s);Ut=!!(t.flags&131072)}else Ut=!1,Qe&&r.flags&1048576&&Cd(r,uo,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;bo(t,r),t=r.pendingProps;var d=Hr(r,ft.current);_i(r,s),d=tu(null,r,u,t,d,s);var g=ru();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Mt(u)?(g=!0,Nn(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Wl(r),d.updater=mo,r.stateNode=d,d._reactInternals=r,Kl(r,u,t,s),r=cu(null,r,u,!0,g,s)):(r.tag=0,Qe&&g&&Ll(r),jt(null,r,d,s),r=r.child),r;case 16:u=r.elementType;e:{switch(bo(t,r),t=r.pendingProps,d=u._init,u=d(u._payload),r.type=u,d=r.tag=xg(u),t=_r(u,t),d){case 0:r=uu(null,r,u,t,s);break e;case 1:r=_h(null,r,u,t,s);break e;case 11:r=gh(null,r,u,t,s);break e;case 14:r=ph(null,r,u,_r(u.type,t),s);break e}throw Error(c(306,u,""))}return r;case 0:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:_r(u,d),uu(t,r,u,d,s);case 1:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:_r(u,d),_h(t,r,u,d,s);case 3:e:{if(Sh(r),t===null)throw Error(c(387));u=r.pendingProps,g=r.memoizedState,d=g.element,Md(t,r),vo(r,u,null,s);var S=r.memoizedState;if(u=S.element,ke&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=Ei(Error(c(423)),r),r=xh(t,r,u,s,d);break e}else if(u!==d){d=Ei(Error(c(424)),r),r=xh(t,r,u,s,d);break e}else for(ke&&(sr=to(r.stateNode.containerInfo),Qt=r,Qe=!0,yr=null,da=!1),s=jd(r,null,u,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(mi(),u===d){r=qr(t,r,s);break e}jt(t,r,u,s)}r=r.child}return r;case 5:return zd(r),t===null&&$l(r),u=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,S=d.children,Xe(u,d)?S=null:g!==null&&Xe(u,g)&&(r.flags|=32),yh(t,r),jt(t,r,S,s),r.child;case 6:return t===null&&$l(r),null;case 13:return wh(t,r,s);case 4:return ql(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Si(r,null,u,s):jt(t,r,u,s),r.child;case 11:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:_r(u,d),gh(t,r,u,d,s);case 7:return jt(t,r,r.pendingProps,s),r.child;case 8:return jt(t,r,r.pendingProps.children,s),r.child;case 12:return jt(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(u=r.type._context,d=r.pendingProps,g=r.memoizedProps,S=d.value,kd(r,u,S),g!==null)if(mr(g.value,S)){if(g.children===d.children&&!Pt.current){r=qr(t,r,s);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var A=g.dependencies;if(A!==null){S=g.child;for(var j=A.firstContext;j!==null;){if(j.context===u){if(g.tag===1){j=Kr(-1,s&-s),j.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var ae=K.pending;ae===null?j.next=j:(j.next=ae.next,ae.next=j),K.pending=j}}g.lanes|=s,j=g.alternate,j!==null&&(j.lanes|=s),Hl(g.return,s,r),A.lanes|=s;break}j=j.next}}else if(g.tag===10)S=g.type===r.type?null:g.child;else if(g.tag===18){if(S=g.return,S===null)throw Error(c(341));S.lanes|=s,A=S.alternate,A!==null&&(A.lanes|=s),Hl(S,s,r),S=g.sibling}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}jt(t,r,d.children,s),r=r.child}return r;case 9:return d=r.type,u=r.pendingProps.children,_i(r,s),d=lr(d),u=u(d),r.flags|=1,jt(t,r,u,s),r.child;case 14:return u=r.type,d=_r(u,r.pendingProps),d=_r(u.type,d),ph(t,r,u,d,s);case 15:return vh(t,r,r.type,r.pendingProps,s);case 17:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:_r(u,d),bo(t,r),r.tag=1,Mt(u)?(t=!0,Nn(r)):t=!1,_i(r,s),Ld(r,u,d),Kl(r,u,d,s),cu(null,r,u,!0,t,s);case 19:return Ch(t,r,s);case 22:return mh(t,r,s)}throw Error(c(156,r.tag))};function Kh(t,r){return ir(t,r)}function Sg(t,r,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,r,s,u){return new Sg(t,r,s,u)}function Iu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xg(t){if(typeof t=="function")return Iu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E)return 11;if(t===R)return 14}return 2}function vn(t,r){var s=t.alternate;return s===null?(s=hr(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ho(t,r,s,u,d,g){var S=2;if(u=t,typeof t=="function")Iu(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case m:return Hn(s.children,d,g,r);case C:S=8,d|=8;break;case w:return t=hr(12,s,r,d|2),t.elementType=w,t.lanes=g,t;case P:return t=hr(13,s,r,d),t.elementType=P,t.lanes=g,t;case T:return t=hr(19,s,r,d),t.elementType=T,t.lanes=g,t;case x:return Vo(s,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:S=10;break e;case y:S=9;break e;case E:S=11;break e;case R:S=14;break e;case v:S=16,u=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return r=hr(S,s,r,d),r.elementType=t,r.type=u,r.lanes=g,r}function Hn(t,r,s,u){return t=hr(7,t,u,r),t.lanes=s,t}function Vo(t,r,s,u){return t=hr(22,t,u,r),t.elementType=x,t.lanes=s,t.stateNode={isHidden:!1},t}function Fu(t,r,s){return t=hr(6,t,null,r),t.lanes=s,t}function Lu(t,r,s){return r=hr(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function wg(t,r,s,u,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=te,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ue(0),this.expirationTimes=ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ue(0),this.identifierPrefix=u,this.onRecoverableError=d,ke&&(this.mutableSourceEagerHydrationData=null)}function qh(t,r,s,u,d,g,S,A,j){return t=new wg(t,r,s,A,j),r===1?(r=1,g===!0&&(r|=8)):r=0,g=hr(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wl(g),t}function Yh(t){if(!t)return Tr;t=t._reactInternals;e:{if(G(t)!==t||t.tag!==1)throw Error(c(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Mt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(c(171))}if(t.tag===1){var s=t.type;if(Mt(s))return io(t,s,r)}return r}function Qh(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=V(r),t===null?null:t.stateNode}function Jh(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Wo(t,r){Jh(t,r),(t=t.alternate)&&Jh(t,r)}function Eg(t){return t=V(t),t===null?null:t.stateNode}function Cg(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Mr(t,134217728);if(r!==null){var s=Lt();dr(r,t,134217728,s)}Wo(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Mr(t,1);if(r!==null){var s=Lt();dr(r,t,1,s)}Wo(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=gn(t),s=Mr(t,r);if(s!==null){var u=Lt();dr(s,t,r,u)}Wo(t,r)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=In(r.pendingLanes);s!==0&&(Yt(r,s|1),Vt(r,_t()),!(be&6)&&(bi(),Rr()))}break;case 13:jh(function(){var u=Mr(t,1);if(u!==null){var d=Lt();dr(u,t,1,d)}}),Wo(t,1)}},n.batchedUpdates=function(t,r){var s=be;be|=1;try{return t(r)}finally{be=s,be===0&&(bi(),so&&Rr())}},n.createComponentSelector=function(t){return{$$typeof:Mo,value:t}},n.createContainer=function(t,r,s,u,d,g,S){return qh(t,r,!1,null,s,u,d,g,S)},n.createHasPseudoClassSelector=function(t){return{$$typeof:Ao,value:t}},n.createHydrationContainer=function(t,r,s,u,d,g,S,A,j){return t=qh(s,u,!0,t,d,g,S,A,j),t.context=Yh(null),s=t.current,u=Lt(),d=gn(s),g=Kr(u,d),g.callback=r??null,dn(s,g,d),t.current.lanes=d,me(t,d,u),Vt(t,u),t},n.createPortal=function(t,r,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:u==null?null:""+u,children:t,containerInfo:r,implementation:s}},n.createRoleSelector=function(t){return{$$typeof:No,value:t}},n.createTestNameSelector=function(t){return{$$typeof:Io,value:t}},n.createTextSelector=function(t){return{$$typeof:Fo,value:t}},n.deferredUpdates=function(t){var r=Pe,s=st.transition;try{return st.transition=null,Pe=16,t()}finally{Pe=r,st.transition=s}},n.discreteUpdates=function(t,r,s,u,d){var g=Pe,S=st.transition;try{return st.transition=null,Pe=1,t(r,s,u,d)}finally{Pe=g,st.transition=S,be===0&&bi()}},n.findAllNodes=Eu,n.findBoundingRects=function(t,r){if(!kt)throw Error(c(363));r=Eu(t,r),t=[];for(var s=0;s<r.length;s++)t.push(ze(r[s]));for(r=t.length-1;0<r;r--){s=t[r];for(var u=s.x,d=u+s.width,g=s.y,S=g+s.height,A=r-1;0<=A;A--)if(r!==A){var j=t[A],K=j.x,ae=K+j.width,ye=j.y,J=ye+j.height;if(u>=K&&g>=ye&&d<=ae&&S<=J){t.splice(r,1);break}else if(u!==K||s.width!==j.width||J<g||ye>S){if(!(g!==ye||s.height!==j.height||ae<u||K>d)){K>u&&(j.width+=K-u,j.x=u),ae<d&&(j.width=d-K),t.splice(r,1);break}}else{ye>g&&(j.height+=ye-g,j.y=g),J<S&&(j.height=S-ye),t.splice(r,1);break}}}return t},n.findHostInstance=Qh,n.findHostInstanceWithNoPortals=function(t){return t=D(t),t=t!==null?Y(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return Qh(t)},n.flushControlled=function(t){var r=be;be|=1;var s=st.transition,u=Pe;try{st.transition=null,Pe=1,t()}finally{Pe=u,st.transition=s,be=r,be===0&&(bi(),Rr())}},n.flushPassiveEffects=Un,n.flushSync=jh,n.focusWithin=function(t,r){if(!kt)throw Error(c(363));for(t=Su(t),r=Dh(t,r),r=Array.from(r),t=0;t<r.length;){var s=r[t++];if(!zt(s)){if(s.tag===5&&$t(s.stateNode))return!0;for(s=s.child;s!==null;)r.push(s),s=s.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Pe},n.getFindAllNodesFailureDescription=function(t,r){if(!kt)throw Error(c(363));var s=0,u=[];t=[Su(t),0];for(var d=0;d<t.length;){var g=t[d++],S=t[d++],A=r[S];if((g.tag!==5||!zt(g))&&(xu(g,A)&&(u.push(wu(A)),S++,S>s&&(s=S)),S<r.length))for(g=g.child;g!==null;)t.push(g,S),g=g.sibling}if(s<r.length){for(t=[];s<r.length;s++)t.push(wu(r[s]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return oe(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:Eg,findFiberByHostInstance:t.findFiberByHostInstance||Cg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{oo=r.inject(t),kr=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,s,u){if(!kt)throw Error(c(363));t=Eu(t,r);var d=Rn(t,s,u).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var s=r._getVersion;s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s)},n.runWithPriority=function(t,r){var s=Pe;try{return Pe=t,r()}finally{Pe=s}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,s,u){var d=r.current,g=Lt(),S=gn(d);return s=Yh(s),r.context===null?r.context=s:r.pendingContext=s,r=Kr(g,S),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=dn(d,r,S),t!==null&&(dr(t,d,S,g),po(t,d,S)),S},n};l1.exports=s4;var l4=l1.exports;const u4=vs(l4);var u1={exports:{}},ri={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ri.ConcurrentRoot=1;ri.ContinuousEventPriority=4;ri.DefaultEventPriority=16;ri.DiscreteEventPriority=1;ri.IdleEventPriority=536870912;ri.LegacyRoot=0;u1.exports=ri;var c1=u1.exports;const V0={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let W0=!1,X0=!1;const Bc=".react-konva-event",c4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,d4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,h4={};function cl(a,e,n=h4){if(!W0&&"zIndex"in e&&(console.warn(d4),W0=!0),!X0&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(c4),X0=!0)}for(var l in n)if(!V0[l]){var c=l.slice(0,2)==="on",h=n[l]!==e[l];if(c&&h){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),a.off(f,n[l])}var p=!e.hasOwnProperty(l);p&&a.setAttr(l,void 0)}var m=e._useStrictMode,C={},w=!1;const _={};for(var l in e)if(!V0[l]){var c=l.slice(0,2)==="on",y=n[l]!==e[l];if(c&&y){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e[l]&&(_[f]=e[l])}!c&&(e[l]!==n[l]||m&&e[l]!==a.getAttr(l))&&(w=!0,C[l]=e[l])}w&&(a.setAttrs(C),Tn(a));for(var f in _)a.on(f+Bc,_[f])}function Tn(a){if(!we.Konva.autoDrawEnabled){var e=a.getLayer()||a.getStage();e&&e.batchDraw()}}const d1={},f4={};$a.Node.prototype._applyProps=cl;function g4(a,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}a.add(e),Tn(a)}function p4(a,e,n){let i=$a[a];i||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=$a.Group);const o={},l={};for(var c in e){var h=c.slice(0,2)==="on";h?l[c]=e[c]:o[c]=e[c]}const f=new i(o);return cl(f,l),f}function v4(a,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function m4(a,e,n){return!1}function y4(a){return a}function _4(){return null}function S4(){return null}function x4(a,e,n,i){return f4}function w4(){}function E4(a){}function C4(a,e){return!1}function P4(){return d1}function b4(){return d1}const O4=setTimeout,T4=clearTimeout,k4=-1;function R4(a,e){return!1}const M4=!1,A4=!0,N4=!0;function I4(a,e){e.parent===a?e.moveToTop():a.add(e),Tn(a)}function F4(a,e){e.parent===a?e.moveToTop():a.add(e),Tn(a)}function h1(a,e,n){e._remove(),a.add(e),e.setZIndex(n.getZIndex()),Tn(a)}function L4(a,e,n){h1(a,e,n)}function D4(a,e){e.destroy(),e.off(Bc),Tn(a)}function G4(a,e){e.destroy(),e.off(Bc),Tn(a)}function $4(a,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function j4(a,e,n){}function z4(a,e,n,i,o){cl(a,o,i)}function B4(a){a.hide(),Tn(a)}function U4(a){}function H4(a,e){(e.visible==null||e.visible)&&a.show()}function V4(a,e){}function W4(a){}function X4(){}const K4=()=>c1.DefaultEventPriority,q4=Object.freeze(Object.defineProperty({__proto__:null,appendChild:I4,appendChildToContainer:F4,appendInitialChild:g4,cancelTimeout:T4,clearContainer:W4,commitMount:j4,commitTextUpdate:$4,commitUpdate:z4,createInstance:p4,createTextInstance:v4,detachDeletedInstance:X4,finalizeInitialChildren:m4,getChildHostContext:b4,getCurrentEventPriority:K4,getPublicInstance:y4,getRootHostContext:P4,hideInstance:B4,hideTextInstance:U4,idlePriority:ss.unstable_IdlePriority,insertBefore:h1,insertInContainerBefore:L4,isPrimaryRenderer:M4,noTimeout:k4,now:ss.unstable_now,prepareForCommit:_4,preparePortalMount:S4,prepareUpdate:x4,removeChild:D4,removeChildFromContainer:G4,resetAfterCommit:w4,resetTextContent:E4,run:ss.unstable_runWithPriority,scheduleTimeout:O4,shouldDeprioritizeSubtree:C4,shouldSetTextContent:R4,supportsMutation:N4,unhideInstance:H4,unhideTextInstance:V4,warnsIfNotActing:A4},Symbol.toStringTag,{value:"Module"}));var Y4=Object.defineProperty,Q4=Object.defineProperties,J4=Object.getOwnPropertyDescriptors,K0=Object.getOwnPropertySymbols,Z4=Object.prototype.hasOwnProperty,e5=Object.prototype.propertyIsEnumerable,q0=(a,e,n)=>e in a?Y4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Y0=(a,e)=>{for(var n in e||(e={}))Z4.call(e,n)&&q0(a,n,e[n]);if(K0)for(var n of K0(e))e5.call(e,n)&&q0(a,n,e[n]);return a},t5=(a,e)=>Q4(a,J4(e));function f1(a,e,n){if(!a)return;if(n(a)===!0)return a;let i=e?a.return:a.child;for(;i;){const o=f1(i,e,n);if(o)return o;i=e?null:i.sibling}}function g1(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const Uc=g1(I.createContext(null));class p1 extends I.Component{render(){return I.createElement(Uc.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Q0,ReactCurrentDispatcher:J0}=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r5(){const a=I.useContext(Uc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=I.useId();return I.useMemo(()=>{for(const i of[Q0?.current,a,a?.alternate]){if(!i)continue;const o=f1(i,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(o)return o}},[a,e])}function n5(){var a,e;const n=r5(),[i]=I.useState(()=>new Map);i.clear();let o=n;for(;o;){const l=(a=o.type)==null?void 0:a._context;l&&l!==Uc&&!i.has(l)&&i.set(l,(e=J0?.current)==null?void 0:e.readContext(g1(l))),o=o.return}return i}function i5(){const a=n5();return I.useMemo(()=>Array.from(a.keys()).reduce((e,n)=>i=>I.createElement(e,null,I.createElement(n.Provider,t5(Y0({},i),{value:a.get(n)}))),e=>I.createElement(p1,Y0({},e))),[a])}function a5(a){const e=Be.useRef({});return Be.useLayoutEffect(()=>{e.current=a}),Be.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const o5=a=>{const e=Be.useRef(),n=Be.useRef(),i=Be.useRef(),o=a5(a),l=i5(),c=h=>{const{forwardedRef:f}=a;f&&(typeof f=="function"?f(h):f.current=h)};return Be.useLayoutEffect(()=>(n.current=new $a.Stage({width:a.width,height:a.height,container:e.current}),c(n.current),i.current=Fa.createContainer(n.current,c1.LegacyRoot,!1,null),Fa.updateContainer(Be.createElement(l,{},a.children),i.current),()=>{$a.isBrowser&&(c(null),Fa.updateContainer(null,i.current,null),n.current.destroy())}),[]),Be.useLayoutEffect(()=>{c(n.current),cl(n.current,a,o),Fa.updateContainer(Be.createElement(l,{},a.children),i.current,null)}),Be.createElement("div",{ref:e,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},s5="Layer",l5="Rect",u5="Image",c5="Text",Fa=u4(q4);Fa.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Be.version,rendererPackageName:"react-konva"});const d5=Be.forwardRef((a,e)=>Be.createElement(p1,{},Be.createElement(o5,{...a,forwardedRef:e}))),h5=({imageSrc:a,objectBoxes:e,labelColors:n})=>{const[i,o]=I.useState({width:0,height:0}),[l,c]=I.useState({width:450,height:450}),[h,f]=I.useState(new window.Image),[p,m]=I.useState(1),[C,w]=I.useState({x:0,y:0}),_=y=>{y.evt.preventDefault();const P=y.target.getStage().getPointerPosition(),T=y.evt.deltaY>0?p/1.1:p*1.1;m(T);const R={x:P.x-(P.x-C.x)*(T/p),y:P.y-(P.y-C.y)*(T/p)};w(R)};return I.useEffect(()=>{const y=new window.Image;y.src=a,f(y),y.onload=()=>{y.width/y.height,l.width/l.height;let E=y.width,P=y.height;m(1),w({x:0,y:0}),o({width:E,height:P})}},[a]),L.jsx("div",{children:L.jsx(d5,{width:l.width,height:l.height,onWheel:_,draggable:!0,children:L.jsxs(s5,{children:[L.jsx(u5,{image:h,width:i.width,height:i.height,x:C.x,y:C.y,scaleX:p,scaleY:p}),e.map((y,E)=>L.jsxs(Be.Fragment,{children:[L.jsx(l5,{x:y.x*p+C.x,y:y.y*p+C.y,width:y.width*p,height:y.height*p,fill:"rgba(0,0,0,0)",stroke:n[y.label],strokeWidth:2}),L.jsx(c5,{text:y.label,x:y.x*p+C.x,y:y.y*p+C.y,fontSize:12,fill:n[y.label]})]},E))]})})})},f5=h5;var Hc={},dl={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});function g5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var p5=function a(e,n){g5(this,a),this.data=e,this.text=n.text||e,this.options=n};Kt.default=p5;Object.defineProperty(dl,"__esModule",{value:!0});dl.CODE39=void 0;var v5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),m5=Kt,y5=_5(m5);function _5(a){return a&&a.__esModule?a:{default:a}}function S5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function x5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function w5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var E5=function(a){w5(e,a);function e(n,i){return S5(this,e),n=n.toUpperCase(),i.mod43&&(n+=b5(O5(n))),x5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return v5(e,[{key:"encode",value:function(){for(var i=ec("*"),o=0;o<this.data.length;o++)i+=ec(this.data[o])+"0";return i+=ec("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(y5.default),v1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],C5=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function ec(a){return P5(m1(a))}function P5(a){return C5[a].toString(2)}function b5(a){return v1[a]}function m1(a){return v1.indexOf(a)}function O5(a){for(var e=0,n=0;n<a.length;n++)e+=m1(a[n]);return e=e%43,e}dl.CODE39=E5;var Gr={},Vc={},Hi={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});var Ma;function tc(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var y1=qe.SET_A=0,_1=qe.SET_B=1,S1=qe.SET_C=2;qe.SHIFT=98;var T5=qe.START_A=103,k5=qe.START_B=104,R5=qe.START_C=105;qe.MODULO=103;qe.STOP=106;qe.FNC1=207;qe.SET_BY_CODE=(Ma={},tc(Ma,T5,y1),tc(Ma,k5,_1),tc(Ma,R5,S1),Ma);qe.SWAP={101:y1,100:_1,99:S1};qe.A_START_CHAR="Ð";qe.B_START_CHAR="Ñ";qe.C_START_CHAR="Ò";qe.A_CHARS="[\0-_È-Ï]";qe.B_CHARS="[ -È-Ï]";qe.C_CHARS="(Ï*[0-9]{2}Ï*)";qe.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Hi,"__esModule",{value:!0});var M5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),A5=Kt,N5=I5(A5),er=qe;function I5(a){return a&&a.__esModule?a:{default:a}}function F5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function L5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function D5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var G5=function(a){D5(e,a);function e(n,i){F5(this,e);var o=L5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return M5(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=er.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(er.FNC1);var c=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+c.result+e.getBar((c.checksum+o)%er.MODULO)+e.getBar(er.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return er.BARS[i]?er.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===er.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===er.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var c=void 0,h=void 0;if(i[0]>=200){h=i.shift()-105;var f=er.SWAP[h];f!==void 0?c=e.next(i,o+1,f):((l===er.SET_A||l===er.SET_B)&&h===er.SHIFT&&(i[0]=l===er.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),c=e.next(i,o+1,l))}else h=e.correctIndex(i,l),c=e.next(i,o+1,l);var p=e.getBar(h),m=h*o;return{result:p+c.result,checksum:m+c.checksum}}}]),e}(N5.default);Hi.default=G5;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});var Sn=qe,x1=function(e){return e.match(new RegExp("^"+Sn.A_CHARS+"*"))[0].length},w1=function(e){return e.match(new RegExp("^"+Sn.B_CHARS+"*"))[0].length},E1=function(e){return e.match(new RegExp("^"+Sn.C_CHARS+"*"))[0]};function Xc(a,e){var n=e?Sn.A_CHARS:Sn.B_CHARS,i=a.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"Ì"+C1(a.substring(i[1].length));var o=a.match(new RegExp("^"+n+"+"))[0];return o.length===a.length?a:o+String.fromCharCode(e?205:206)+Xc(a.substring(o.length),!e)}function C1(a){var e=E1(a),n=e.length;if(n===a.length)return a;a=a.substring(n);var i=x1(a)>=w1(a);return e+String.fromCharCode(i?206:205)+Xc(a,i)}Wc.default=function(a){var e=void 0,n=E1(a).length;if(n>=2)e=Sn.C_START_CHAR+C1(a);else{var i=x1(a)>w1(a);e=(i?Sn.A_START_CHAR:Sn.B_START_CHAR)+Xc(a,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return"Ë"+l})};Object.defineProperty(Vc,"__esModule",{value:!0});var $5=Hi,j5=P1($5),z5=Wc,B5=P1(z5);function P1(a){return a&&a.__esModule?a:{default:a}}function U5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function rc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function H5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var V5=function(a){H5(e,a);function e(n,i){if(U5(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=rc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,B5.default)(n),i));else var o=rc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return rc(o)}return e}(j5.default);Vc.default=V5;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});var W5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),X5=Hi,K5=q5(X5),Z0=qe;function q5(a){return a&&a.__esModule?a:{default:a}}function Y5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Q5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function J5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Z5=function(a){J5(e,a);function e(n,i){return Y5(this,e),Q5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Z0.A_START_CHAR+n,i))}return W5(e,[{key:"valid",value:function(){return new RegExp("^"+Z0.A_CHARS+"+$").test(this.data)}}]),e}(K5.default);Kc.default=Z5;var qc={};Object.defineProperty(qc,"__esModule",{value:!0});var e6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),t6=Hi,r6=n6(t6),ef=qe;function n6(a){return a&&a.__esModule?a:{default:a}}function i6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function a6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function o6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var s6=function(a){o6(e,a);function e(n,i){return i6(this,e),a6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ef.B_START_CHAR+n,i))}return e6(e,[{key:"valid",value:function(){return new RegExp("^"+ef.B_CHARS+"+$").test(this.data)}}]),e}(r6.default);qc.default=s6;var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});var l6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),u6=Hi,c6=d6(u6),tf=qe;function d6(a){return a&&a.__esModule?a:{default:a}}function h6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function f6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function g6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var p6=function(a){g6(e,a);function e(n,i){return h6(this,e),f6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,tf.C_START_CHAR+n,i))}return l6(e,[{key:"valid",value:function(){return new RegExp("^"+tf.C_CHARS+"+$").test(this.data)}}]),e}(c6.default);Yc.default=p6;Object.defineProperty(Gr,"__esModule",{value:!0});Gr.CODE128C=Gr.CODE128B=Gr.CODE128A=Gr.CODE128=void 0;var v6=Vc,m6=hl(v6),y6=Kc,_6=hl(y6),S6=qc,x6=hl(S6),w6=Yc,E6=hl(w6);function hl(a){return a&&a.__esModule?a:{default:a}}Gr.CODE128=m6.default;Gr.CODE128A=_6.default;Gr.CODE128B=x6.default;Gr.CODE128C=E6.default;var Xt={},Qc={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.SIDE_BIN="101";pr.MIDDLE_BIN="01010";pr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};pr.EAN2_STRUCTURE=["LL","LG","GL","GG"];pr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];pr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var fl={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});var C6=pr,P6=function(e,n,i){var o=e.split("").map(function(c,h){return C6.BINARIES[n[h]]}).map(function(c,h){return c?c[e[h]]:""});if(i){var l=e.length-1;o=o.map(function(c,h){return h<l?c+i:c})}return o.join("")};ni.default=P6;Object.defineProperty(fl,"__esModule",{value:!0});var b6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Ri=pr,O6=ni,rf=b1(O6),T6=Kt,k6=b1(T6);function b1(a){return a&&a.__esModule?a:{default:a}}function R6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function M6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function A6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var N6=function(a){A6(e,a);function e(n,i){R6(this,e);var o=M6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return b6(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,rf.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,rf.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:Ri.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:Ri.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:Ri.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[Ri.SIDE_BIN,this.leftEncode(),Ri.MIDDLE_BIN,this.rightEncode(),Ri.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(k6.default);fl.default=N6;Object.defineProperty(Qc,"__esModule",{value:!0});var I6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Aa=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},F6=pr,L6=fl,D6=G6(L6);function G6(a){return a&&a.__esModule?a:{default:a}}function $6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function j6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function z6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var nf=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},B6=function(a){z6(e,a);function e(n,i){$6(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=nf(n));var o=j6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return I6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===nf(this.data)}},{key:"leftText",value:function(){return Aa(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=F6.EAN13_STRUCTURE[this.data[0]];return Aa(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return Aa(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return Aa(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=Aa(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(D6.default);Qc.default=B6;var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});var U6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),rs=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},H6=fl,V6=W6(H6);function W6(a){return a&&a.__esModule?a:{default:a}}function X6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function K6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function q6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var af=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},Y6=function(a){q6(e,a);function e(n,i){return X6(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=af(n)),K6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return U6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===af(this.data)}},{key:"leftText",value:function(){return rs(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return rs(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return rs(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return rs(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(V6.default);Jc.default=Y6;var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});var Q6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),J6=pr,Z6=ni,e8=O1(Z6),t8=Kt,r8=O1(t8);function O1(a){return a&&a.__esModule?a:{default:a}}function n8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function a8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var o8=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},s8=function(a){a8(e,a);function e(n,i){return n8(this,e),i8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return Q6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=J6.EAN5_STRUCTURE[o8(this.data)];return{data:"1011"+(0,e8.default)(this.data,i,"01"),text:this.text}}}]),e}(r8.default);Zc.default=s8;var ed={};Object.defineProperty(ed,"__esModule",{value:!0});var l8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),u8=pr,c8=ni,d8=T1(c8),h8=Kt,f8=T1(h8);function T1(a){return a&&a.__esModule?a:{default:a}}function g8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function p8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function v8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var m8=function(a){v8(e,a);function e(n,i){return g8(this,e),p8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return l8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=u8.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,d8.default)(this.data,i,"01"),text:this.text}}}]),e}(f8.default);ed.default=m8;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});var y8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();Xa.checksum=xc;var _8=ni,Mi=k1(_8),S8=Kt,x8=k1(S8);function k1(a){return a&&a.__esModule?a:{default:a}}function w8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function E8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function C8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var P8=function(a){C8(e,a);function e(n,i){w8(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=xc(n));var o=E8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return y8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==xc(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,Mi.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,Mi.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,Mi.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,Mi.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,Mi.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,Mi.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(x8.default);function xc(a){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(a[n]);for(n=0;n<11;n+=2)e+=parseInt(a[n])*3;return(10-e%10)%10}Xa.default=P8;var td={};Object.defineProperty(td,"__esModule",{value:!0});var b8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),O8=ni,T8=R1(O8),k8=Kt,R8=R1(k8),M8=Xa;function R1(a){return a&&a.__esModule?a:{default:a}}function A8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function nc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function N8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var I8=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],F8=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],L8=function(a){N8(e,a);function e(n,i){A8(this,e);var o=nc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=of(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=of(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return nc(o);else return nc(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return b8(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=F8[parseInt(o)][parseInt(i)];return(0,T8.default)(this.middleDigits,l)}}]),e}(R8.default);function of(a,e){for(var n=parseInt(a[a.length-1]),i=I8[n],o="",l=0,c=0;c<i.length;c++){var h=i[c];h==="X"?o+=a[l++]:o+=h}return o=""+e+o,""+o+(0,M8.checksum)(o)}td.default=L8;Object.defineProperty(Xt,"__esModule",{value:!0});Xt.UPCE=Xt.UPC=Xt.EAN2=Xt.EAN5=Xt.EAN8=Xt.EAN13=void 0;var D8=Qc,G8=Vi(D8),$8=Jc,j8=Vi($8),z8=Zc,B8=Vi(z8),U8=ed,H8=Vi(U8),V8=Xa,W8=Vi(V8),X8=td,K8=Vi(X8);function Vi(a){return a&&a.__esModule?a:{default:a}}Xt.EAN13=G8.default;Xt.EAN8=j8.default;Xt.EAN5=B8.default;Xt.EAN2=H8.default;Xt.UPC=W8.default;Xt.UPCE=K8.default;var Di={},gl={},Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.START_BIN="1010";Ka.END_BIN="11101";Ka.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(gl,"__esModule",{value:!0});var q8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ns=Ka,Y8=Kt,Q8=J8(Y8);function J8(a){return a&&a.__esModule?a:{default:a}}function Z8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function ey(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ty(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var ry=function(a){ty(e,a);function e(){return Z8(this,e),ey(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return q8(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:ns.START_BIN+o+ns.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=ns.BINARIES[i[1]];return ns.BINARIES[i[0]].split("").map(function(l,c){return(l==="1"?"111":"1")+(o[c]==="1"?"000":"0")}).join("")}}]),e}(Q8.default);gl.default=ry;var rd={};Object.defineProperty(rd,"__esModule",{value:!0});var ny=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),iy=gl,ay=oy(iy);function oy(a){return a&&a.__esModule?a:{default:a}}function sy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function ly(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function uy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var sf=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},cy=function(a){uy(e,a);function e(n,i){return sy(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=sf(n)),ly(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return ny(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===sf(this.data)}}]),e}(ay.default);rd.default=cy;Object.defineProperty(Di,"__esModule",{value:!0});Di.ITF14=Di.ITF=void 0;var dy=gl,hy=M1(dy),fy=rd,gy=M1(fy);function M1(a){return a&&a.__esModule?a:{default:a}}Di.ITF=hy.default;Di.ITF14=gy.default;var gr={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});var py=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),vy=Kt,my=yy(vy);function yy(a){return a&&a.__esModule?a:{default:a}}function _y(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Sy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function xy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var wy=function(a){xy(e,a);function e(n,i){return _y(this,e),Sy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return py(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),c=l.toString(2);c=Ey(c,4-c.length);for(var h=0;h<c.length;h++)i+=c[h]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(my.default);function Ey(a,e){for(var n=0;n<e;n++)a="0"+a;return a}ii.default=wy;var nd={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.mod10=Cy;ai.mod11=Py;function Cy(a){for(var e=0,n=0;n<a.length;n++){var i=parseInt(a[n]);(n+a.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function Py(a){for(var e=0,n=[2,3,4,5,6,7],i=0;i<a.length;i++){var o=parseInt(a[a.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(nd,"__esModule",{value:!0});var by=ii,Oy=ky(by),Ty=ai;function ky(a){return a&&a.__esModule?a:{default:a}}function Ry(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function My(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Ay(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Ny=function(a){Ay(e,a);function e(n,i){return Ry(this,e),My(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Ty.mod10)(n),i))}return e}(Oy.default);nd.default=Ny;var id={};Object.defineProperty(id,"__esModule",{value:!0});var Iy=ii,Fy=Dy(Iy),Ly=ai;function Dy(a){return a&&a.__esModule?a:{default:a}}function Gy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function $y(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function jy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var zy=function(a){jy(e,a);function e(n,i){return Gy(this,e),$y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Ly.mod11)(n),i))}return e}(Fy.default);id.default=zy;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});var By=ii,Uy=Hy(By),lf=ai;function Hy(a){return a&&a.__esModule?a:{default:a}}function Vy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Wy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Xy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Ky=function(a){Xy(e,a);function e(n,i){return Vy(this,e),n+=(0,lf.mod10)(n),n+=(0,lf.mod10)(n),Wy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(Uy.default);ad.default=Ky;var od={};Object.defineProperty(od,"__esModule",{value:!0});var qy=ii,Yy=Qy(qy),uf=ai;function Qy(a){return a&&a.__esModule?a:{default:a}}function Jy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Zy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function e_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var t_=function(a){e_(e,a);function e(n,i){return Jy(this,e),n+=(0,uf.mod11)(n),n+=(0,uf.mod10)(n),Zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(Yy.default);od.default=t_;Object.defineProperty(gr,"__esModule",{value:!0});gr.MSI1110=gr.MSI1010=gr.MSI11=gr.MSI10=gr.MSI=void 0;var r_=ii,n_=qa(r_),i_=nd,a_=qa(i_),o_=id,s_=qa(o_),l_=ad,u_=qa(l_),c_=od,d_=qa(c_);function qa(a){return a&&a.__esModule?a:{default:a}}gr.MSI=n_.default;gr.MSI10=a_.default;gr.MSI11=s_.default;gr.MSI1010=u_.default;gr.MSI1110=d_.default;var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.pharmacode=void 0;var h_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),f_=Kt,g_=p_(f_);function p_(a){return a&&a.__esModule?a:{default:a}}function v_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function m_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function y_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var __=function(a){y_(e,a);function e(n,i){v_(this,e);var o=m_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return h_(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(g_.default);pl.pharmacode=__;var vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.codabar=void 0;var S_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),x_=Kt,w_=E_(x_);function E_(a){return a&&a.__esModule?a:{default:a}}function C_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function P_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function b_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var O_=function(a){b_(e,a);function e(n,i){C_(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=P_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return S_(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(w_.default);vl.codabar=O_;var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.GenericBarcode=void 0;var T_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),k_=Kt,R_=M_(k_);function M_(a){return a&&a.__esModule?a:{default:a}}function A_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function N_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function I_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var F_=function(a){I_(e,a);function e(n,i){return A_(this,e),N_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return T_(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(R_.default);ml.GenericBarcode=F_;Object.defineProperty(Hc,"__esModule",{value:!0});var L_=dl,is=Gr,Ai=Xt,cf=Di,Na=gr,D_=pl,G_=vl,$_=ml;Hc.default={CODE39:L_.CODE39,CODE128:is.CODE128,CODE128A:is.CODE128A,CODE128B:is.CODE128B,CODE128C:is.CODE128C,EAN13:Ai.EAN13,EAN8:Ai.EAN8,EAN5:Ai.EAN5,EAN2:Ai.EAN2,UPC:Ai.UPC,UPCE:Ai.UPCE,ITF14:cf.ITF14,ITF:cf.ITF,MSI:Na.MSI,MSI10:Na.MSI10,MSI11:Na.MSI11,MSI1010:Na.MSI1010,MSI1110:Na.MSI1110,pharmacode:D_.pharmacode,codabar:G_.codabar,GenericBarcode:$_.GenericBarcode};var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});var j_=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a};Wi.default=function(a,e){return j_({},a,e)};var sd={};Object.defineProperty(sd,"__esModule",{value:!0});sd.default=z_;function z_(a){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(a),e}var ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.default=B_;function B_(a){return a.marginTop=a.marginTop||a.margin,a.marginBottom=a.marginBottom||a.margin,a.marginRight=a.marginRight||a.margin,a.marginLeft=a.marginLeft||a.margin,a}var ud={},cd={},yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.default=U_;function U_(a){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof a[n]=="string"&&(a[n]=parseInt(a[n],10)));return typeof a.displayValue=="string"&&(a.displayValue=a.displayValue!="false"),a}var _l={};Object.defineProperty(_l,"__esModule",{value:!0});var H_={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};_l.default=H_;Object.defineProperty(cd,"__esModule",{value:!0});var V_=yl,W_=A1(V_),X_=_l,df=A1(X_);function A1(a){return a&&a.__esModule?a:{default:a}}function K_(a){var e={};for(var n in df.default)df.default.hasOwnProperty(n)&&(a.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=a.getAttribute("jsbarcode-"+n.toLowerCase())),a.hasAttribute("data-"+n.toLowerCase())&&(e[n]=a.getAttribute("data-"+n.toLowerCase())));return e.value=a.getAttribute("jsbarcode-value")||a.getAttribute("data-value"),e=(0,W_.default)(e),e}cd.default=K_;var dd={},hd={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.getTotalWidthOfEncodings=rr.calculateEncodingAttributes=rr.getBarcodePadding=rr.getEncodingHeight=rr.getMaximumHeightOfEncodings=void 0;var q_=Wi,Y_=Q_(q_);function Q_(a){return a&&a.__esModule?a:{default:a}}function N1(a,e){return e.height+(e.displayValue&&a.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function I1(a,e,n){if(n.displayValue&&e<a){if(n.textAlign=="center")return Math.floor((a-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(a-e)}return 0}function J_(a,e,n){for(var i=0;i<a.length;i++){var o=a[i],l=(0,Y_.default)(e,o.options),c;l.displayValue?c=t9(o.text,l,n):c=0;var h=o.data.length*l.width;o.width=Math.ceil(Math.max(c,h)),o.height=N1(o,l),o.barcodePadding=I1(c,h,l)}}function Z_(a){for(var e=0,n=0;n<a.length;n++)e+=a[n].width;return e}function e9(a){for(var e=0,n=0;n<a.length;n++)a[n].height>e&&(e=a[n].height);return e}function t9(a,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(a);if(!o)return 0;var l=o.width;return l}rr.getMaximumHeightOfEncodings=e9;rr.getEncodingHeight=N1;rr.getBarcodePadding=I1;rr.calculateEncodingAttributes=J_;rr.getTotalWidthOfEncodings=Z_;Object.defineProperty(hd,"__esModule",{value:!0});var r9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),n9=Wi,i9=a9(n9),ic=rr;function a9(a){return a&&a.__esModule?a:{default:a}}function o9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var s9=function(){function a(e,n,i){o9(this,a),this.canvas=e,this.encodings=n,this.options=i}return r9(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,i9.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,ic.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,ic.getTotalWidthOfEncodings)(this.encodings),o=(0,ic.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,c;n.textPosition=="top"?c=n.marginTop+n.fontSize+n.textMargin:c=n.marginTop,o.fillStyle=n.lineColor;for(var h=0;h<l.length;h++){var f=h*n.width+i.barcodePadding;l[h]==="1"?o.fillRect(f,c,n.width,n.height):l[h]&&o.fillRect(f,c,n.width,n.height*l[h])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var c,h;n.textPosition=="top"?h=n.marginTop+n.fontSize-n.textMargin:h=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(c=0,o.textAlign="left"):n.textAlign=="right"?(c=i.width-1,o.textAlign="right"):(c=i.width/2,o.textAlign="center"),o.fillText(i.text,c,h)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),a}();hd.default=s9;var fd={};Object.defineProperty(fd,"__esModule",{value:!0});var l9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),u9=Wi,c9=d9(u9),ac=rr;function d9(a){return a&&a.__esModule?a:{default:a}}function h9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var as="http://www.w3.org/2000/svg",f9=function(){function a(e,n,i){h9(this,a),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return l9(a,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,c9.default)(this.options,o.options),c=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(c,l),this.drawSvgBarcode(c,l,o),this.drawSVGText(c,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,ac.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,ac.getTotalWidthOfEncodings)(this.encodings),i=(0,ac.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,c;i.textPosition=="top"?c=i.fontSize+i.textMargin:c=0;for(var h=0,f=0,p=0;p<l.length;p++)f=p*i.width+o.barcodePadding,l[p]==="1"?h++:h>0&&(this.drawRect(f-i.width*h,c,i.width*h,i.height,n),h=0);h>0&&this.drawRect(f-i.width*(h-1),c,i.width*h,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(as,"text");if(i.displayValue){var c,h;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?h=i.fontSize-i.textMargin:h=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(c=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(c=o.width-1,l.setAttribute("text-anchor","end")):(c=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",c),l.setAttribute("y",h),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",as),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(as,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,c){var h=this.document.createElementNS(as,"rect");return h.setAttribute("x",n),h.setAttribute("y",i),h.setAttribute("width",o),h.setAttribute("height",l),c.appendChild(h),h}}]),a}();fd.default=f9;var gd={};Object.defineProperty(gd,"__esModule",{value:!0});var g9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function p9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var v9=function(){function a(e,n,i){p9(this,a),this.object=e,this.encodings=n,this.options=i}return g9(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a}();gd.default=v9;Object.defineProperty(dd,"__esModule",{value:!0});var m9=hd,y9=pd(m9),_9=fd,S9=pd(_9),x9=gd,w9=pd(x9);function pd(a){return a&&a.__esModule?a:{default:a}}dd.default={CanvasRenderer:y9.default,SVGRenderer:S9.default,ObjectRenderer:w9.default};var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});function vd(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function md(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function yd(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var E9=function(a){yd(e,a);function e(n,i){vd(this,e);var o=md(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),C9=function(a){yd(e,a);function e(){vd(this,e);var n=md(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),P9=function(a){yd(e,a);function e(){vd(this,e);var n=md(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);Xi.InvalidInputException=E9;Xi.InvalidElementException=C9;Xi.NoElementException=P9;Object.defineProperty(ud,"__esModule",{value:!0});var b9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},O9=cd,wc=F1(O9),T9=dd,La=F1(T9),k9=Xi;function F1(a){return a&&a.__esModule?a:{default:a}}function _d(a){if(typeof a=="string")return R9(a);if(Array.isArray(a)){for(var e=[],n=0;n<a.length;n++)e.push(_d(a[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return M9(a);if(a&&a.nodeName&&a.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,wc.default)(a),renderer:La.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,wc.default)(a),renderer:La.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:La.default.CanvasRenderer};if(a&&(typeof a>"u"?"undefined":b9(a))==="object"&&!a.nodeName)return{element:a,renderer:La.default.ObjectRenderer};throw new k9.InvalidElementException}}function R9(a){var e=document.querySelectorAll(a);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(_d(e[i]));return n}}function M9(a){var e=document.createElement("canvas");return{element:e,options:(0,wc.default)(a),renderer:La.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",e.toDataURL())}}}ud.default=_d;var Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});var A9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function N9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var I9=function(){function a(e){N9(this,a),this.api=e}return A9(a,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),a}();Sd.default=I9;var F9=Hc,Wn=kn(F9),L9=Wi,Ya=kn(L9),D9=sd,L1=kn(D9),G9=ld,hf=kn(G9),$9=ud,j9=kn($9),z9=yl,B9=kn(z9),U9=Sd,H9=kn(U9),D1=Xi,V9=_l,G1=kn(V9);function kn(a){return a&&a.__esModule?a:{default:a}}var tn=function(){},Sl=function(e,n,i){var o=new tn;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,j9.default)(e),o._encodings=[],o._options=G1.default,o._errorHandler=new H9.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=j1()),o.options(i)[i.format](n,i).render()),o};Sl.getModule=function(a){return Wn.default[a]};for(var ff in Wn.default)Wn.default.hasOwnProperty(ff)&&W9(Wn.default,ff);function W9(a,e){tn.prototype[e]=tn.prototype[e.toUpperCase()]=tn.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,Ya.default)(o._options,i);l=(0,B9.default)(l);var c=a[e],h=$1(n,c,l);return o._encodings.push(h),o})}}function $1(a,e,n){a=""+a;var i=new e(a,n);if(!i.valid())throw new D1.InvalidInputException(i.constructor.name,a);var o=i.encode();o=(0,L1.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,Ya.default)(n,o[l].options);return o}function j1(){return Wn.default.CODE128?"CODE128":Object.keys(Wn.default)[0]}tn.prototype.options=function(a){return this._options=(0,Ya.default)(this._options,a),this};tn.prototype.blank=function(a){var e=new Array(a+1).join("0");return this._encodings.push({data:e}),this};tn.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var a;for(var e in this._renderProperties){a=this._renderProperties[e];var n=(0,Ya.default)(this._options,a.options);n.format=="auto"&&(n.format=j1()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Wn.default[n.format.toUpperCase()],l=$1(i,o,n);Ec(a,l,n)})}}};tn.prototype.render=function(){if(!this._renderProperties)throw new D1.NoElementException;if(Array.isArray(this._renderProperties))for(var a=0;a<this._renderProperties.length;a++)Ec(this._renderProperties[a],this._encodings,this._options);else Ec(this._renderProperties,this._encodings,this._options);return this};tn.prototype._defaults=G1.default;function Ec(a,e,n){e=(0,L1.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,Ya.default)(n,e[i].options),(0,hf.default)(e[i].options);(0,hf.default)(n);var o=a.renderer,l=new o(a.element,e,n);l.render(),a.afterRender&&a.afterRender()}typeof window<"u"&&(window.JsBarcode=Sl);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(a,e){var n=[];return jQuery(this).each(function(){n.push(this)}),Sl(n,a,e)});var X9=Sl;const K9=vs(X9);var q9={VITE_BASE_PATH:"/mbw_audit",BASE_URL:"/assets/mbw_audit/mbw_audit/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Ni=Kg.apiUrl;function Y9(){const[a,e]=I.useState("checkbox"),[n,i]=I.useState([]),[o,l]=I.useState(""),[c]=Xo(),[h]=Xo(),[f]=Xo(),[p]=Xo(),[m,C]=I.useState(!1),[w,_]=I.useState(!1),[y,E]=I.useState({}),[P,T]=I.useState(!1),[R,v]=I.useState({}),[x,b]=I.useState(!1),[k,B]=I.useState({}),[O,G]=I.useState([]),[M,D]=I.useState(""),[V,W]=I.useState([]),[Y,X]=I.useState({}),[oe,he]=I.useState(!1),[fe,Me]=I.useState({}),[se,Q]=I.useState(!1),[Se,Oe]=I.useState([]),[Ce,Xe]=I.useState(null),[Ne,N]=I.useState([]),[H,te]=I.useState(!1),[ge,de]=I.useState(!1),[Ie,ke]=I.useState(!1),[ot,Ae]=I.useState([]),[Ct,Ye]=I.useState(""),[Fe,ut]=I.useState([]),[kt,je]=I.useState(!1),[ze,dt]=I.useState(!1),[zt,sn]=I.useState(""),[$t,Rn]=I.useState([]),[Ki,qi]=I.useState([]),[Yi,oi]=I.useState([]),[Qi,nr]=I.useState(""),[zr,Ji]=I.useState([]),[Zi,ln]=I.useState(!1);let Mn={};const[ea,ie]=I.useState([]),ve={action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",multiple:!1,beforeUpload:async U=>{const q=new FileReader;return q.onload=ee=>{const re=ee.target.result,ue=Wg(re,{type:"buffer"}),me=ue.SheetNames[0],gi=ue.Sheets[me],Yt=Xg.sheet_to_json(gi,{header:1});let Pe=[];if(Yt.length>=2)for(let At=1;At<Yt.length;At++){let ir={product_code:Yt[At][0],barcode:Yt[At][1]?Yt[At][1]:"",product_name:Yt[At][2],product_description:Yt[At][3],url_images:JSON.parse(Yt[At][4])};Pe.push(ir)}console.log(Pe),ie(Pe)},q.readAsArrayBuffer(U),!1}},ht={onRemove:U=>{},beforeUpload:async U=>{const q=new FormData,ee={file:U,is_private:"0",folder:"Home"};for(const[ue,me]of Object.entries(ee))q.append(ue,me);const re=await Dt.post("/api/method/upload_file",q);return re.message?(W(ue=>[...ue,re.message]),Ze.success("Tải ảnh thành công")):Ze.error("Tải ảnh thất bại"),!1}},Rt={onRemove:U=>{},beforeUpload:async U=>{const q=new FormData,ee={file:U,is_private:"0",folder:"Home"};for(const[ue,me]of Object.entries(ee))q.append(ue,me);const re=await Dt.post("/api/method/upload_file",q);return re.message?(Oe(ue=>[...ue,re.message]),Ze.success("Tải ảnh thành công")):Ze.error("Tải ảnh thất bại"),!1}},Br={action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",beforeUpload:async U=>{const q=new FormData,ee={file:U,is_private:"0",folder:"Home"};for(const[ue,me]of Object.entries(ee))q.append(ue,me);const re=await Dt.post("/api/method/upload_file",q);if(re.message){let ue=[],me={uid:"-1",name:re.message.file_name,status:"done",url:re.message.file_url};ue.push(me),oi(ue),Ae(gi=>[...gi,re.message]),Ze.success("Tải ảnh thành công")}else Ze.error("Tải ảnh thất bại");return!1}},si=[{title:"Mã Sản phẩm",dataIndex:"product_code",render:U=>L.jsx("a",{children:U})},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Hành động",key:"action",render:(U,q)=>L.jsxs(zg,{size:"middle",children:[L.jsx("a",{children:L.jsx(lc,{onClick:()=>Tl(q)})}),L.jsx("a",{children:L.jsx(Du,{onClick:()=>la(q)})})]})}],ta={onChange:(U,q)=>{N(q),q.length>0?te(!0):te(!1)}},Ur=async()=>{try{let U='/api/resource/VGM_Category?fields=["*"]';if(o!=null&&o!=""){let ee=`[["category_name", "like", "%${o}%"]]`;U+=`&filters=${ee}`}const q=await Dt.get(U);if(q&&q.data){let ee=q.data.map((re,ue)=>({...re,key:re.name,hidden:!0,selected:ue===0}));i(ee),ee.length>0&&B(ee[0])}}catch{}finally{}};I.useEffect(()=>{Ur()},[]),I.useEffect(()=>{Ur()},[o]);const Qa=U=>{l(U.target.value)},Ja=(U,q)=>{i(ee=>ee.map(re=>re.key===q.key?{...re,hidden:!1}:re))},xl=(U,q)=>{i(ee=>ee.map(re=>re.key===q.key?{...re,hidden:!0}:re))},wl=U=>{let q={item:U,title:"Xóa "+U.category_name,contentConfirm:"Bạn có chắc muốn xóa "+U.category_name+" ra khỏi hệ thống không?",contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};E(q),T(!0)},El=async()=>{if(y!=null&&y.item!=null){let U=[];U=[y.item.name];let q=Ni+".api.deleteListByDoctype",ee={doctype:"VGM_Category",items:JSON.stringify(U)},re=await Dt.post(q,ee);re!=null&&re.message!=null&&re.message.status=="success"?(Ze.success("Xóa thành công"),Ur(),ra()):Ze.error("Xóa thất bại, Danh mục này đang được sử dụng")}},ra=()=>{T(!1),E({})},na=U=>{h.setFieldsValue({name_item:U.category_name,des:U.category_description}),v(U),b(!0)},Za=async()=>{let U=h.getFieldsValue();if(R!=null&&R.name!=null){let q=`/api/resource/VGM_Category/${R.name}`,ee={category_name:U.name_item,category_description:U.des},re=await Dt.put(q,ee);re!=null&&re.data!=null?(Ze.success("Sửa thành công"),Ur(),ia()):Ze.error("Sửa thất bại")}},ia=()=>{v({}),b(!1)},li=()=>{_(!0)},eo=async()=>{let U=c.getFieldsValue(),q={doc:JSON.stringify({doctype:"VGM_Category",category_name:U.name_item,category_description:U.des}),action:"Save"},ee=await Dt.post("/api/method/frappe.desk.form.save.savedocs",q);ee!=null&&ee.docs!=null&&ee.docs.length>0?(c.resetFields(),Ze.success("Thêm mới thành công"),Ur(),_(!1)):Ze.error("Thêm mới thất bại")},to=()=>{_(!1)},Cl=U=>{B(U),i(q=>q.map(ee=>ee.key===U.key?{...ee,selected:!0}:{...ee,selected:!1}))};I.useEffect(()=>{Or()},[k]),I.useEffect(()=>{Ce!=null&&Ce!=""&&oa(Ce)},[Ce]),I.useEffect(()=>{Or()},[M]);const Or=async()=>{let U="";M!=null&&M!=""?U=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${k.name}"],["product_name","like","%${M}%"]]`:U=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${k.name}"]]`;let q=await Dt.get(U);if(q&&q.data){let ee=q.data.map(re=>({...re,key:re.name,category_name:k.category_name}));G(ee)}},Pl=U=>{D(U.target.value)},bl=()=>{f.resetFields(),Pt([]);let U=document.getElementById("barcode");U&&(U.innerHTML=""),k!=null&&k.name!=null&&C(!0)},ro=async()=>{let U=f.getFieldsValue(),q=[];for(let me=0;me<V.length;me++)q.push(V[me].file_url);let ee="/api/resource/VGM_Product",re={barcode:U.barcode_product,product_code:U.product_code,product_name:U.product_name,product_description:U.product_description,category:k.name,images:JSON.stringify(q)},ue=await Dt.post(ee,re);if(ue!=null&&ue.data!=null){Ze.success("Thêm mới thành công"),f.resetFields();let me=document.getElementById("barcode");me.innerHTML="",W([]),Or(),aa()}else Ze.error("Thêm mới thất bại")},Ol=U=>{oa(U.target.value)},aa=()=>{C(!1)},Tl=U=>{Me(U),Q(!0),p.setFieldsValue({product_code:U.product_code,barcode_product:U.barcode,product_name:U.product_name,product_description:U.product_description}),Xe(U.barcode);let q=JSON.parse(U.images),ee=[];for(let re=0;re<q.length;re++){let ue={uid:re,url:q[re],url_base:q[re]};ee.push(ue)}Hr(ee)},kl=U=>{oa(U.target.value)},oa=U=>{K9("#barcode",U,{width:4,height:40,displayValue:!0,font:"Arial",text:U,textMargin:10,fontSize:13,background:"#F5F7FA"})},no=async()=>{let U=[];for(let me=0;me<qt.length;me++)qt[me].url_base!=null&&qt[me].url_base!=""&&U.push(qt[me].url_base);if(Se!=null)for(let me=0;me<Se.length;me++)U.push(Se[me].file_url);let q=p.getFieldsValue(),ee=`/api/resource/VGM_Product/${fe.name}`,re={barcode:q.barcode_product,product_code:q.product_code,product_name:q.product_name,product_description:q.product_description,category:k.name,images:JSON.stringify(U)},ue=await Dt.put(ee,re);if(ue!=null&&ue.data!=null){Ze.success("Sửa thành công"),p.resetFields();let me=document.getElementById("barcode");me.innerHTML="",Oe([]),Or(),sa()}else Ze.error("Sửa thất bại")},sa=()=>{Q(!1)},la=U=>{let q={item:U,title:`Xóa ${U.product_name}`,contentConfirm:`Bạn có chắc muốn xóa ${U.product_name} ra khỏi hệ thống không?`,contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};X(q),he(!0)},An=async()=>{let U=[];U=[Y.item.name];let q=Ni+".api.deleteListByDoctype",ee={doctype:"VGM_Product",items:JSON.stringify(U)},re=await Dt.post(q,ee);re!=null&&re.message!=null&&re.message.status=="success"?(Ze.success("Xóa thành công"),X({}),Or(),ui()):Ze.error("Xóa thất bại , Sản phẩm đang được sử dụng")},ui=()=>{he(!1)},ua=()=>{de(!0)},Rl=async()=>{let U=Ni+".api.deleteListByDoctype",q=[];for(let ue=0;ue<Ne.length;ue++)q.push(Ne[ue].name);let ee={doctype:"VGM_Product",items:JSON.stringify(q)},re=await Dt.post(U,ee);re!=null&&re.message!=null&&re.message.status=="success"?(Ze.success("Xóa thành công"),N([]),te(!1),Or(),ci()):Ze.error("Xóa thất bại")},ci=()=>{de(!1)},un=()=>{ke(!0)},vr=async()=>{let U=Ni+".api.checkImageProductExist",q={collection_name:k.name,linkimages:ot.length>0?ot[ot.length-1].file_url:""},ee=await Dt.post(U,q),re=[];for(let ue=0;ue<O.length;ue++)re.push({key:O[ue].name,product_code:O[ue].product_code,product_name:O[ue].product_name,product_count:0});if(ee!=null&&ee.message!=null){nr("data:image/png;base64,"+ee.message.results.verbose[0].base64_image);let ue=[];re.forEach(me=>{ee.message.results.count[me.product_name]!=null&&(me.product_count=ee.message.results.count[me.product_name]);let Pe=ee.message.results.verbose[0].locates.filter(function(At){return At.label===me.product_name}).map(function(At){let ir=At.bbox;return{x:ir[0],y:ir[1],width:ir[2]-ir[0],height:ir[3]-ir[1],label:At.label}});ue=ue.concat(Pe)}),Ji(ue)}Ye(ot.length>0?q9.VITE_BASE_URL+ot[ot.length-1].file_url:""),ut(re),je(!0),Ge()},He=()=>{const U="0123456789ABCDEF";let q="#";for(let ee=0;ee<6;ee++)q+=U[Math.floor(Math.random()*16)];return q};zr.forEach(U=>{Mn[U.label]||(Mn[U.label]=He())});const Ge=()=>{oi([]),ke(!1)},Tr=()=>{je(!1)},[ft,Pt]=I.useState([]),[qt,Hr]=I.useState([]),Mt=({fileList:U})=>{Pt(U)},di=({fileList:U})=>{Hr(U)},ca=async U=>{let q=U.url;q||(q=await new Promise(ue=>{const me=new FileReader;me.readAsDataURL(U.originFileObj),me.onload=()=>ue(me.result)}));const ee=new Image;ee.src=q,window.open(q)?.document.write(ee.outerHTML)},io=()=>{dt(!0)},Nn=()=>{dt(!1)},ao=U=>{sn(U.target.value)},Bt=()=>{ln(!1)};I.useEffect(()=>{},[zt]);const Ml=$t.length>0,Al={productFromERPSelected:$t,onChange:(U,q)=>{Rn(q)}};I.useEffect(()=>{hi()},[]);const hi=async()=>{let q=await Dt.get("/api/method/mbw_dms.api.selling.product.list_product"),ee=[];q!=null&&q.result!=null&&q.result.data!=null&&(ee=q.result.data.map(re=>({...re,key:re.name}))),qi(ee)},fi=async()=>{let U=[];for(let ue=0;ue<$t.length;ue++){let me={product_code:$t[ue].item_code,barcode:$t[ue].item_code,product_name:$t[ue].item_name,product_description:$t[ue].description,url_images:$t[ue].image!=null&&$t[ue].image!=""?[$t[ue].image]:[]};U.push(me)}let q={listproduct:JSON.stringify(U),category:k.name},ee=Ni+".api.import_product",re=await Dt.post(ee,q);re!=null&&re.message!=null&&re.message.status=="success"?(Ze.success("Thêm mới thành công"),Rn([]),Or(),Nn()):Ze.error("Thêm mới thất bại")},In=()=>{ln(!0)},Fn=async()=>{let U={listproduct:JSON.stringify(ea),category:k.name},q=Ni+".api.import_product",ee=await Dt.post(q,U);ee!=null&&ee.message!=null&&ee.message.status=="success"?(Ze.success("Thêm mới thành công"),Or(),ln(!1)):Ze.error("Thêm mới thất bại")};return L.jsxs(L.Fragment,{children:[L.jsx($g,{title:"Sản phẩm",buttons:[H&&{label:"Xóa",type:"primary",icon:L.jsx(Du,{}),size:"20px",className:"flex items-center mr-2",danger:!0,action:ua},{label:"Nhập file",icon:L.jsx(Vg,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:In},{label:"Thêm sản phẩm từ ERP",icon:L.jsx(i0,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:io},{label:"Kiểm tra sản phẩm",type:"primary",icon:L.jsx(lp,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:un},{label:"Thêm mới",type:"primary",icon:L.jsx(i0,{className:"text-xl"}),size:"20px",className:"flex items-center",action:bl}]}),L.jsxs(vf,{gutter:16,children:[L.jsx(oc,{span:18,push:6,children:L.jsxs("div",{className:"bg-white rounded-xl",children:[L.jsx(Tt,{className:"w-[320px] border-none p-4",children:L.jsx(wr,{value:M,onChange:Pl,placeholder:"Tìm kiếm sản phẩm",prefix:L.jsx(Gu,{})})}),L.jsx("div",{className:"pt-3",children:L.jsx(n0,{rowSelection:{type:a,...ta},columns:si,dataSource:O})})]})}),L.jsx(oc,{span:6,pull:18,children:L.jsxs("div",{className:"bg-white rounded-xl p-4",children:[L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("div",{children:L.jsx("p",{className:"text-base leading-5 font-medium text-[#212B36]",children:"Danh mục"})}),L.jsx("div",{className:"cursor-pointer",onClick:li,children:L.jsx($u,{})})]}),L.jsx("div",{className:"py-3",children:L.jsx(Tt,{className:"w-full border-none",name:"filter_category",children:L.jsx(wr,{onChange:Qa,value:o,placeholder:"Tìm kiếm danh mục",prefix:L.jsx(Gu,{})})})}),L.jsx(cc,{style:{maxHeight:"calc(100vh - 500px)",overflow:"auto",paddingRight:"10px"},header:!1,footer:!1,bordered:!1,dataSource:n,renderItem:U=>L.jsx(cc.Item,{onMouseEnter:q=>Ja(q,U),onMouseLeave:q=>xl(q,U),onClick:()=>Cl(U),children:L.jsxs("div",{className:"item_category",children:[L.jsxs("span",{className:`${U.selected?"selected":""}`,children:[L.jsx(ip.Text,{})," ",U.category_name]}),L.jsxs("span",{style:{display:U.hidden?"none":"block"},children:[L.jsx("a",{children:L.jsx("span",{style:{marginRight:"10px"},children:L.jsx(lc,{onClick:()=>na(U)},"edit")})}),L.jsx("a",{children:L.jsx("span",{onClick:()=>wl(U),children:L.jsx(Du,{},"delete")})})]})]})})})]})})]}),L.jsxs(Er,{title:"Kiểm tra ảnh sản phẩm",open:Ie,width:777,afterClose:Ge,onOk:vr,onCancel:Ge,footer:[L.jsx(Zt,{onClick:Ge,children:"Hủy"},"back"),L.jsx(Zt,{type:"primary",onClick:vr,children:"Kiểm tra"},"submit")],children:[L.jsx("p",{className:"text-[#637381] font-normal text-sm",children:"Chọn ảnh sản phẩm bất kì để kiểm tra nhận diện sản phẩm"}),L.jsxs(uc,{...Br,fileList:Yi,children:[L.jsx("p",{className:"ant-upload-drag-icon",children:L.jsx($u,{})}),L.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn ảnh để tải lên"})]})]}),L.jsxs(Er,{title:"Kiểm tra ảnh sản phẩm",open:kt,width:920,onCancel:Tr,footer:null,children:[L.jsxs("div",{style:{marginBottom:"20px",display:"flex"},children:[L.jsx("img",{src:Ct,style:{width:"450px",height:"450px",marginRight:"20px"}}),L.jsx(f5,{imageSrc:Qi,objectBoxes:zr,labelColors:Mn})]}),L.jsxs("div",{children:[L.jsx("div",{children:"Kết quả kiểm tra hình ảnh:"}),L.jsx(jg,{dataSource:Fe,columns:[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"},{title:"Số lượng",dataIndex:"product_count",key:"product_count"}],pagination:!1})]})]}),L.jsxs(Er,{width:990,title:"Thêm sản phẩm từ ERP",open:ze,onCancel:Nn,footer:!1,children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx(Tt,{className:"w-[320px] border-none pt-4",children:L.jsx(wr,{value:zt,onChange:ao,placeholder:"Tìm kiếm sản phẩm",prefix:L.jsx(Gu,{})})}),L.jsxs("div",{children:[L.jsx("span",{style:{marginRight:8},children:Ml?`Đã chọn ${$t.length} danh mục`:""}),L.jsx(Zt,{type:"primary",onClick:fi,children:"Thêm"})]})]}),L.jsx("div",{className:"pt-4",children:L.jsx(n0,{rowSelection:Al,columns:[{title:"Mã sản phẩm",dataIndex:"item_code",key:"item_code"},{title:"Tên sản phẩm",dataIndex:"item_name",key:"item_name"},{title:"Danh mục",dataIndex:"item_group",key:"item_group"}],dataSource:Ki})})]}),L.jsx(Er,{title:"Thêm mới sản phẩm",open:m,onOk:ro,onCancel:aa,width:1e3,footer:[L.jsx(Zt,{onClick:aa,children:"Hủy"},"back"),L.jsx(Zt,{type:"primary",onClick:ro,children:"Lưu"},"submit")],children:L.jsx("div",{className:"pt-4",children:L.jsxs(Ko,{layout:"vertical",form:f,children:[L.jsx(Tt,{label:"Mã sản phẩm",name:"product_code",required:!0,children:L.jsx(wr,{})}),L.jsx(Tt,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:L.jsx(wr,{onChange:U=>Ol(U)})}),L.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:L.jsx("svg",{id:"barcode"})}),L.jsx(Tt,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:L.jsx(wr,{})}),L.jsx(Tt,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:L.jsx(Ia,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),L.jsx(Tt,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:L.jsx(u0,{...ht,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",fileList:ft,onChange:Mt,onPreview:ca,children:ft.length<5&&"+ Upload"})})]})})}),L.jsx(Er,{title:"Sửa sản phẩm",open:se,onOk:no,onCancel:sa,width:1e3,footer:[L.jsx(Zt,{onClick:sa,children:"Hủy"},"back"),L.jsx(Zt,{type:"primary",onClick:no,children:"Lưu"},"submit")],children:L.jsx("div",{className:"pt-4",children:L.jsxs(Ko,{layout:"vertical",form:p,children:[L.jsx(Tt,{label:"Mã sản phẩm",name:"product_code",required:!0,children:L.jsx(wr,{})}),L.jsx(Tt,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:L.jsx(wr,{onChange:U=>kl(U)})}),L.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:L.jsx("svg",{id:"barcode"})}),L.jsx(Tt,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:L.jsx(wr,{})}),L.jsx(Tt,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:L.jsx(Ia,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),L.jsx(Tt,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:L.jsx(u0,{...Rt,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",fileList:qt,onChange:di,onPreview:ca,children:"+ Upload"})})]})})}),L.jsxs(Er,{title:Y.title,open:oe,onOk:An,onCancel:ui,okText:"Xác nhận",cancelText:"Hủy",children:[L.jsx("div",{children:Y.contentConfirm}),L.jsx("div",{children:Y.contentRemind})]}),L.jsxs(Er,{title:`Xóa ${Ne.length} sản phẩm?`,open:ge,onOk:Rl,onCancel:ci,okText:"Xác nhận",cancelText:"Hủy",children:[L.jsxs("div",{children:["Bạn có chắc muốn xóa ",Ne.length," sản phẩm ra khỏi hệ thống không?"]}),L.jsx("div",{children:"Khi thực hiện hành động này, sẽ không thể hoàn tác."})]}),L.jsx(Er,{title:"Thêm mới danh mục",open:w,onOk:eo,onCancel:to,width:600,footer:[L.jsx(Zt,{onClick:to,children:"Hủy"},"back"),L.jsx(Zt,{type:"primary",onClick:eo,children:"Lưu"},"submit")],children:L.jsx("div",{className:"pt-4",children:L.jsxs(Ko,{layout:"vertical",form:c,children:[L.jsx(Tt,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:L.jsx(wr,{})}),L.jsx(Tt,{className:"pt-3",label:"Mô tả",name:"des",children:L.jsx(Ia,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})})]})})}),L.jsx(Er,{title:"Sửa danh mục",open:x,onOk:Za,onCancel:ia,width:600,footer:[L.jsx(Zt,{onClick:ia,children:"Hủy"},"back"),L.jsx(Zt,{type:"primary",onClick:Za,children:"Lưu"},"submit")],children:L.jsx("div",{className:"pt-4",children:L.jsxs(Ko,{layout:"vertical",form:h,children:[L.jsx(Tt,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:L.jsx(wr,{value:R.category_name})}),L.jsx(Tt,{className:"pt-3",label:"Mô tả",name:"des",children:L.jsx(Ia,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5},value:R.category_description})})]})})}),L.jsxs(Er,{title:y.title,open:P,onOk:El,onCancel:ra,okText:"Xác nhận",cancelText:"Hủy",children:[L.jsx("div",{children:y.contentConfirm}),L.jsx("div",{children:y.contentRemind})]}),L.jsxs(Er,{title:"Nhập dữ liệu từ tệp excel",open:Zi,width:777,onOk:Fn,onCancel:Bt,footer:[L.jsx(Zt,{onClick:Bt,children:"Hủy"},"back"),L.jsx(Zt,{type:"primary",onClick:Fn,children:"Lưu lại"},"submit")],children:[L.jsxs("p",{className:"text-[#637381] font-normal text-sm",children:["Chọn file excel có định dạng .xlsx để thực hiện nhập dữ liệu. Tải dữ liệu mẫu ",L.jsx("a",{target:"_blank",href:"/mbw_audit/data_sample/campaign_sample.xlsx",children:"tại đây"})]}),L.jsxs(uc,{...ve,children:[L.jsx("p",{className:"ant-upload-drag-icon",children:L.jsx($u,{})}),L.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn tệp để tải lên"})]})]})]})}function n7(){return L.jsxs(L.Fragment,{children:[L.jsx(Bg,{children:L.jsx("title",{children:"Sản phẩm"})}),L.jsx(Y9,{})]})}export{n7 as default};
