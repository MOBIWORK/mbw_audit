import{a5 as C,at as J,k as K,au as O,as as Q,_ as F,aC as oe,ae as V,aj as Y,an as re,aD as le,aE as ie,a9 as se,r as _,h as Z,g as ce,m as de,u as R,aF as ue,e as me,aG as ge,a7 as pe,aH as he,am as W,a6 as U,aI as fe,j as a,R as q,y as M,F as B,z as D,G as ve,T as xe,a1 as Ce,W as X,a2 as be,aB as ye,H as $e}from"./main-pW1tMfgi.js";import{U as Ie}from"./index-hB0z-7np.js";var ee=C.forwardRef(function(n,e){var t,o=n.prefixCls,r=n.forceRender,g=n.className,h=n.style,c=n.children,l=n.isActive,d=n.role,v=C.useState(l||r),i=J(v,2),s=i[0],p=i[1];return C.useEffect(function(){(r||l)&&p(!0)},[r,l]),s?C.createElement("div",{ref:e,className:K("".concat(o,"-content"),(t={},O(t,"".concat(o,"-content-active"),l),O(t,"".concat(o,"-content-inactive"),!l),t),g),style:h,role:d},C.createElement("div",{className:"".concat(o,"-content-box")},c)):null});ee.displayName="PanelContent";var Se=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ne=C.forwardRef(function(n,e){var t,o,r=n.showArrow,g=r===void 0?!0:r,h=n.headerClass,c=n.isActive,l=n.onItemClick,d=n.forceRender,v=n.className,i=n.prefixCls,s=n.collapsible,p=n.accordion,k=n.panelKey,x=n.extra,u=n.header,y=n.expandIcon,$=n.openMotion,S=n.destroyInactivePanel,f=n.children,w=Q(n,Se),b=s==="disabled",P=s==="header",j=s==="icon",N=x!=null&&typeof x!="boolean",m=function(){l?.(k)},I=function(T){(T.key==="Enter"||T.keyCode===V.ENTER||T.which===V.ENTER)&&m()},E=typeof y=="function"?y(n):C.createElement("i",{className:"arrow"});E&&(E=C.createElement("div",{className:"".concat(i,"-expand-icon"),onClick:["header","icon"].includes(s)?m:void 0},E));var L=K((t={},O(t,"".concat(i,"-item"),!0),O(t,"".concat(i,"-item-active"),c),O(t,"".concat(i,"-item-disabled"),b),t),v),z=K(h,(o={},O(o,"".concat(i,"-header"),!0),O(o,"".concat(i,"-header-collapsible-only"),P),O(o,"".concat(i,"-icon-collapsible-only"),j),o)),H={className:z,"aria-expanded":c,"aria-disabled":b,onKeyDown:I};return!P&&!j&&(H.onClick=m,H.role=p?"tab":"button",H.tabIndex=b?-1:0),C.createElement("div",F({},w,{ref:e,className:L}),C.createElement("div",H,g&&E,C.createElement("span",{className:"".concat(i,"-header-text"),onClick:s==="header"?m:void 0},u),N&&C.createElement("div",{className:"".concat(i,"-extra")},x)),C.createElement(oe,F({visible:c,leavedClassName:"".concat(i,"-content-hidden")},$,{forceRender:d,removeOnLeave:S}),function(A,T){var ae=A.className,te=A.style;return C.createElement(ee,{ref:T,prefixCls:i,className:ae,style:te,isActive:c,forceRender:d,role:p?"tabpanel":void 0},f)}))}),je=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],_e=function(e,t){var o=t.prefixCls,r=t.accordion,g=t.collapsible,h=t.destroyInactivePanel,c=t.onItemClick,l=t.activeKey,d=t.openMotion,v=t.expandIcon;return e.map(function(i,s){var p=i.children,k=i.label,x=i.key,u=i.collapsible,y=i.onItemClick,$=i.destroyInactivePanel,S=Q(i,je),f=String(x??s),w=u??g,b=$??h,P=function(m){w!=="disabled"&&(c(m),y?.(m))},j=!1;return r?j=l[0]===f:j=l.indexOf(f)>-1,C.createElement(ne,F({},S,{prefixCls:o,key:f,panelKey:f,isActive:j,accordion:r,openMotion:d,expandIcon:v,header:k,collapsible:w,onItemClick:P,destroyInactivePanel:b}),p)})},Pe=function(e,t,o){if(!e)return null;var r=o.prefixCls,g=o.accordion,h=o.collapsible,c=o.destroyInactivePanel,l=o.onItemClick,d=o.activeKey,v=o.openMotion,i=o.expandIcon,s=e.key||String(t),p=e.props,k=p.header,x=p.headerClass,u=p.destroyInactivePanel,y=p.collapsible,$=p.onItemClick,S=!1;g?S=d[0]===s:S=d.indexOf(s)>-1;var f=y??h,w=function(j){f!=="disabled"&&(l(j),$?.(j))},b={key:s,panelKey:s,header:k,headerClass:x,isActive:S,prefixCls:r,destroyInactivePanel:u??c,openMotion:v,accordion:g,children:e.props.children,onItemClick:w,expandIcon:i,collapsible:f};return typeof e.type=="string"?e:(Object.keys(b).forEach(function(P){typeof b[P]>"u"&&delete b[P]}),C.cloneElement(e,b))};function Ne(n,e,t){return Array.isArray(n)?_e(n,t):Y(e).map(function(o,r){return Pe(o,r,t)})}function we(n){var e=n;if(!Array.isArray(e)){var t=ie(e);e=t==="number"||t==="string"?[e]:[]}return e.map(function(o){return String(o)})}var ke=C.forwardRef(function(n,e){var t=n.prefixCls,o=t===void 0?"rc-collapse":t,r=n.destroyInactivePanel,g=r===void 0?!1:r,h=n.style,c=n.accordion,l=n.className,d=n.children,v=n.collapsible,i=n.openMotion,s=n.expandIcon,p=n.activeKey,k=n.defaultActiveKey,x=n.onChange,u=n.items,y=K(o,l),$=re([],{value:p,onChange:function(N){return x?.(N)},defaultValue:k,postState:we}),S=J($,2),f=S[0],w=S[1],b=function(N){return w(function(){if(c)return f[0]===N?[]:[N];var m=f.indexOf(N),I=m>-1;return I?f.filter(function(E){return E!==N}):[].concat(se(f),[N])})};le(!d,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var P=Ne(u,d,{prefixCls:o,accordion:c,openMotion:i,expandIcon:s,collapsible:v,destroyInactivePanel:g,onItemClick:b,activeKey:f});return C.createElement("div",{ref:e,className:y,style:h,role:c?"tablist":void 0},P)});const G=Object.assign(ke,{Panel:ne});G.Panel;const Ee=_.forwardRef((n,e)=>{const{getPrefixCls:t}=_.useContext(Z),{prefixCls:o,className:r,showArrow:g=!0}=n,h=t("collapse",o),c=K({[`${h}-no-arrow`]:!g},r);return _.createElement(G.Panel,Object.assign({ref:e},n,{prefixCls:h,className:c}))}),Re=Ee,Ae=n=>{const{componentCls:e,contentBg:t,padding:o,headerBg:r,headerPadding:g,collapseHeaderPaddingSM:h,collapseHeaderPaddingLG:c,collapsePanelBorderRadius:l,lineWidth:d,lineType:v,colorBorder:i,colorText:s,colorTextHeading:p,colorTextDisabled:k,fontSizeLG:x,lineHeight:u,lineHeightLG:y,marginSM:$,paddingSM:S,paddingLG:f,paddingXS:w,motionDurationSlow:b,fontSizeIcon:P,contentPadding:j,fontHeight:N,fontHeightLG:m}=n,I=`${R(d)} ${v} ${i}`;return{[e]:Object.assign(Object.assign({},me(n)),{backgroundColor:r,border:I,borderBottom:0,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:I,"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${R(l)} ${R(l)}`}},[`> ${e}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:g,color:p,lineHeight:u,cursor:"pointer",transition:`all ${b}, visibility 0s`,[`> ${e}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${e}-expand-icon`]:{height:N,display:"flex",alignItems:"center",paddingInlineEnd:$},[`${e}-arrow`]:Object.assign(Object.assign({},ge()),{fontSize:P,svg:{transition:`transform ${b}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}},[`${e}-icon-collapsible-only`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:s,backgroundColor:t,borderTop:I,[`& > ${e}-content-box`]:{padding:j},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:h,paddingInlineStart:w,[`> ${e}-expand-icon`]:{marginInlineStart:n.calc(S).sub(w).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:S}}},"&-large":{[`> ${e}-item`]:{fontSize:x,lineHeight:y,[`> ${e}-header`]:{padding:c,paddingInlineStart:o,[`> ${e}-expand-icon`]:{height:m,marginInlineStart:n.calc(f).sub(o).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:f}}},[`${e}-item:last-child`]:{[`> ${e}-content`]:{borderRadius:`0 0 ${R(l)} ${R(l)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:k,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:$}}}}})}},Oe=n=>{const{componentCls:e}=n,t=`> ${e}-item > ${e}-header ${e}-arrow svg`;return{[`${e}-rtl`]:{[t]:{transform:"rotate(180deg)"}}}},Te=n=>{const{componentCls:e,headerBg:t,paddingXXS:o,colorBorder:r}=n;return{[`${e}-borderless`]:{backgroundColor:t,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${r}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{paddingTop:o}}}},Me=n=>{const{componentCls:e,paddingSM:t}=n;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:t}}}}}},Be=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer}),Ke=ce("Collapse",n=>{const e=de(n,{collapseHeaderPaddingSM:`${R(n.paddingXS)} ${R(n.paddingSM)}`,collapseHeaderPaddingLG:`${R(n.padding)} ${R(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[Ae(e),Te(e),Me(e),Oe(e),ue(e)]},Be),He=_.forwardRef((n,e)=>{const{getPrefixCls:t,direction:o,collapse:r}=_.useContext(Z),{prefixCls:g,className:h,rootClassName:c,style:l,bordered:d=!0,ghost:v,size:i,expandIconPosition:s="start",children:p,expandIcon:k}=n,x=pe(m=>{var I;return(I=i??m)!==null&&I!==void 0?I:"middle"}),u=t("collapse",g),y=t(),[$,S,f]=Ke(u),w=_.useMemo(()=>s==="left"?"start":s==="right"?"end":s,[s]),b=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const I=k?k(m):_.createElement(fe,{rotate:m.isActive?90:void 0});return U(I,()=>({className:K(I.props.className,`${u}-arrow`)}))},P=K(`${u}-icon-position-${w}`,{[`${u}-borderless`]:!d,[`${u}-rtl`]:o==="rtl",[`${u}-ghost`]:!!v,[`${u}-${x}`]:x!=="middle"},r?.className,h,c,S,f),j=Object.assign(Object.assign({},he(y)),{motionAppear:!1,leavedClassName:`${u}-content-hidden`}),N=_.useMemo(()=>p?Y(p).map((m,I)=>{var E,L;if(!((E=m.props)===null||E===void 0)&&E.disabled){const z=(L=m.key)!==null&&L!==void 0?L:String(I),{disabled:H,collapsible:A}=m.props,T=Object.assign(Object.assign({},W(m.props,["disabled"])),{key:z,collapsible:A??(H?"disabled":void 0)});return U(m,T)}return m}):null,[p]);return $(_.createElement(G,Object.assign({ref:e,openMotion:j},W(n,["rootClassName"]),{expandIcon:b,prefixCls:u,className:P,style:Object.assign(Object.assign({},r?.style),l)}),N))}),De=Object.assign(He,{Panel:Re});var Le={VITE_BASE_PATH:"/mbw_audit",BASE_URL:"/assets/mbw_audit/mbw_audit/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function qe({form:n,recordData:e}){const[t,o]=_.useState([]);return _.useEffect(()=>{if(e){let r=[];n.setFieldsValue({store:e.campaign_code,campaign_name:e.campaign_name,date_check_in:e.date_check_in,date_check_out:e.date_check_out,employee_code:e.employee_code,quatity:e.quantity_cate});let g={uid:-1,name:"image.png",status:"done",url:Le.VITE_BASE_URL+e.images};r.push(g),o(r)}},[e]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"p-4 pt-6 pb-[58px]",children:[a.jsxs(q,{children:[a.jsx(M,{span:12,children:a.jsx(B,{label:"Cửa hàng",name:"store",required:!0,children:a.jsx(D,{})})}),a.jsx(M,{span:12,children:a.jsx(B,{label:"Chiến dịch",name:"campaign_name",required:!0,children:a.jsx(D,{})})})]}),a.jsxs(q,{className:"pt-2",children:[a.jsx(M,{span:12,children:a.jsx(B,{label:"Thời gian vào",name:"date_check_in",required:!0,children:a.jsx(D,{})})}),a.jsx(M,{span:12,children:a.jsx(B,{label:"Thời gian ra",name:"date_check_out",required:!0,children:a.jsx(D,{})})})]}),a.jsxs(q,{className:"pt-2",children:[a.jsx(M,{span:12,children:a.jsx(B,{label:"Nhân viên thực hiện",name:"employee_code",required:!0,children:a.jsx(D,{})})}),a.jsx(M,{span:12,children:a.jsx(B,{label:"Số lượng danh mục sản phẩm",name:"quatity",required:!0,children:a.jsx(D,{})})})]}),a.jsx(q,{className:"pt-2",children:a.jsx(M,{span:12,children:a.jsx(B,{label:"Hình ảnh",name:"image",required:!0,children:a.jsx(Ie,{listType:"picture-card",fileList:t})})})})]})})}function ze(n){console.log(n.recordData),_.useState(!1);const[e,t]=_.useState([]);e.length>0;const o={};n.recordData?.detail.forEach(l=>{const d=l.category,v=parseInt(l.sum_product);o[d]=(o[d]||0)+v});const r=n.recordData?.category_names.map((l,d)=>{const v=Object.keys(l)[0];return{key:d.toString(),stt:(d+1).toString(),categoryName:Object.values(l)[0],number_product:o[v]||0}}),g=[{title:"STT",dataIndex:"stt"},{title:"Tên sản phẩm",dataIndex:"name_product"},{title:"Số lượng sản phẩm máy chấm",dataIndex:"sum_product"}],h=[{title:"STT",dataIndex:"stt"},{title:"Danh mục sản phẩm",dataIndex:"categoryName"},{title:"Số lượng sản phẩm",dataIndex:"number_product"}],c=n.recordData?.category_names.map((l,d)=>{const v=Object.keys(l)[0];return(n.recordData?.detail.filter(s=>s.category===v)).map((s,p)=>({key:`${d}-${p}`,stt:`${d+1}`,name_product:s.product_name,sum_product:s.sum_product.toString(),image:s.images,creation:s.creation}))});return a.jsx(a.Fragment,{children:a.jsx(ve,{columns:h,expandable:{expandedRowRender:(l,d)=>a.jsx(xe,{columns:g,dataSource:c[d],pagination:!1}),rowExpandable:l=>c[l.key].length>0},dataSource:r})})}function Fe(){const[n,e]=_.useState(null),t=Ce(),o=c=>{console.log(c)},[r]=X.useForm(),g=[{key:"1",label:a.jsx("span",{style:{fontWeight:700},children:"Thông tin chung"}),children:a.jsx(qe,{form:r,recordData:n})},{key:"2",label:a.jsx("span",{style:{fontWeight:700},children:"Sản phẩm"}),children:a.jsx(ze,{recordData:n})}];_.useEffect(()=>{const c=localStorage.getItem("recordData");c&&e(JSON.parse(c)),localStorage.removeItem("recordData")},[]);const h=()=>n?`${n.retail_code} - ${n.campaign_name}`:"Tiêu đề";return a.jsxs(a.Fragment,{children:[a.jsx(be,{title:h(),icon:a.jsx("p",{onClick:()=>t("/"),className:"mr-2 cursor-pointer",children:a.jsx(ye,{})})}),a.jsx("div",{className:"bg-white  rounded-xl",children:a.jsx(X,{layout:"vertical",form:r,children:a.jsx(De,{items:g,defaultActiveKey:["1","2"],onChange:o,className:"custom-collapse"})})})]})}function We(){return a.jsxs(a.Fragment,{children:[a.jsx($e,{children:a.jsx("title",{children:"BÁO CÁO"})}),a.jsx(Fe,{})]})}export{We as default};
