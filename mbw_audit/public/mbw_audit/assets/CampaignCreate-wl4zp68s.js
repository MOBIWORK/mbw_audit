import{r as a,A as On,_ as _n,j as i,aF as Vt,f as qe,F as ve,I as Re,D as Yt,b as An,y as Pn,R as H,aE as Te,T as xe,a as Ve,Y as ut,aG as Wt,Z as dt,S as ht,$ as ft,a0 as Ln,X as _t,aH as Ut,u as zn,a1 as Gt,H as Fn,aI as $n,aJ as Bn,a2 as at,c as qn}from"./main-OOOJO3_S.js";var Kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};const Xn=Kn;var Hn=function(t,n){return a.createElement(On,_n({},t,{ref:n,icon:Xn}))};const Vn=a.forwardRef(Hn),Yn=[{label:"Hoạt động",value:"Open"},{label:"Đóng",value:"Close"}];function Wn({form:e,onCampaignStatusChange:t}){const[n,r]=a.useState("Open"),o=s=>{r(s),t(s)};return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"p-4 pt-6 pb-[58px]",children:[i.jsxs(Vt,{children:[i.jsx(qe,{span:8,children:i.jsx(ve,{label:"Tên chiến dịch",name:"campaign_name",required:!0,children:i.jsx(Re,{})})}),i.jsx(qe,{span:8,children:i.jsx(ve,{label:"Thời gian bắt đầu",name:"campaign_start",required:!0,children:i.jsx(Yt,{showTime:!0})})}),i.jsx(qe,{span:8,children:i.jsx(ve,{label:"Thời gian kết thúc",name:"campaign_end",required:!0,children:i.jsx(Yt,{showTime:!0})})})]}),i.jsxs(Vt,{className:"pt-2",children:[i.jsx(qe,{span:8,children:i.jsx(ve,{label:"Trạng thái",name:"campaign_status",children:i.jsx(An,{defaultValue:"Open",options:Yn,onChange:o})})}),i.jsx(qe,{span:8,children:i.jsx(ve,{label:"Mô tả",name:"campaign_description",children:i.jsx(Pn,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})})})]})]})})}function Un(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const xt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Oe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function At(e){return"nodeType"in e}function W(e){var t,n;return e?Oe(e)?e:At(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Pt(e){const{Document:t}=W(e);return e instanceof t}function Ge(e){return Oe(e)?!1:e instanceof W(e).HTMLElement}function cn(e){return e instanceof W(e).SVGElement}function _e(e){return e?Oe(e)?e.document:At(e)?Pt(e)?e:Ge(e)||cn(e)?e.ownerDocument:document:document:document}const ie=xt?a.useLayoutEffect:a.useEffect;function Lt(e){const t=a.useRef(e);return ie(()=>{t.current=e}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Gn(){const e=a.useRef(null),t=a.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=a.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ye(e,t){t===void 0&&(t=[e]);const n=a.useRef(e);return ie(()=>{n.current!==e&&(n.current=e)},t),n}function Je(e,t){const n=a.useRef();return a.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function gt(e){const t=Lt(e),n=a.useRef(null),r=a.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function It(e){const t=a.useRef();return a.useEffect(()=>{t.current=e},[e]),t.current}let Dt={};function Qe(e,t){return a.useMemo(()=>{if(t)return t;const n=Dt[e]==null?0:Dt[e]+1;return Dt[e]=n,e+"-"+n},[e,t])}function ln(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,c)=>{const l=Object.entries(c);for(const[u,d]of l){const h=s[u];h!=null&&(s[u]=h+e*d)}return s},{...t})}}const Me=ln(1),pt=ln(-1);function Jn(e){return"clientX"in e&&"clientY"in e}function zt(e){if(!e)return!1;const{KeyboardEvent:t}=W(e.target);return t&&e instanceof t}function Qn(e){if(!e)return!1;const{TouchEvent:t}=W(e.target);return t&&e instanceof t}function Nt(e){if(Qn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Jn(e)?{x:e.clientX,y:e.clientY}:null}const We=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[We.Translate.toString(e),We.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Jt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Zn(e){return e.matches(Jt)?e:e.querySelector(Jt)}const er={display:"none"};function tr(e){let{id:t,value:n}=e;return H.createElement("div",{id:t,style:er},n)}function nr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return H.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function rr(){const[e,t]=a.useState("");return{announce:a.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const un=a.createContext(null);function or(e){const t=a.useContext(un);a.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function sr(){const[e]=a.useState(()=>new Set),t=a.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[a.useCallback(r=>{let{type:o,event:s}=r;e.forEach(c=>{var l;return(l=c[o])==null?void 0:l.call(c,s)})},[e]),t]}const ar={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ir={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function cr(e){let{announcements:t=ir,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=ar}=e;const{announce:s,announcement:c}=rr(),l=Qe("DndLiveRegion"),[u,d]=a.useState(!1);if(a.useEffect(()=>{d(!0)},[]),or(a.useMemo(()=>({onDragStart(f){let{active:x}=f;s(t.onDragStart({active:x}))},onDragMove(f){let{active:x,over:m}=f;t.onDragMove&&s(t.onDragMove({active:x,over:m}))},onDragOver(f){let{active:x,over:m}=f;s(t.onDragOver({active:x,over:m}))},onDragEnd(f){let{active:x,over:m}=f;s(t.onDragEnd({active:x,over:m}))},onDragCancel(f){let{active:x,over:m}=f;s(t.onDragCancel({active:x,over:m}))}}),[s,t])),!u)return null;const h=H.createElement(H.Fragment,null,H.createElement(tr,{id:r,value:o.draggable}),H.createElement(nr,{id:l,announcement:c}));return n?Te.createPortal(h,n):h}var B;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function mt(){}const ce=Object.freeze({x:0,y:0});function lr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ur(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function dr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),c=o-r,l=s-n;if(r<o&&n<s){const u=t.width*t.height,d=e.width*e.height,h=c*l,f=h/(u+d-h);return Number(f.toFixed(4))}return 0}const hr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:c}=s,l=n.get(c);if(l){const u=dr(l,t);u>0&&o.push({id:c,data:{droppableContainer:s,value:u}})}}return o.sort(lr)};function fr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function dn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ce}function gr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((c,l)=>({...c,top:c.top+e*l.y,bottom:c.bottom+e*l.y,left:c.left+e*l.x,right:c.right+e*l.x}),{...n})}}const pr=gr(1);function mr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function vr(e,t,n){const r=mr(t);if(!r)return e;const{scaleX:o,scaleY:s,x:c,y:l}=r,u=e.left-c-(1-o)*parseFloat(n),d=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:h,height:f,top:d,right:u+h,bottom:d+f,left:u}}const xr={ignoreTransform:!1};function Ae(e,t){t===void 0&&(t=xr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=W(e).getComputedStyle(e);d&&(n=vr(n,d,h))}const{top:r,left:o,width:s,height:c,bottom:l,right:u}=n;return{top:r,left:o,width:s,height:c,bottom:l,right:u}}function Qt(e){return Ae(e,{ignoreTransform:!0})}function br(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function yr(e,t){return t===void 0&&(t=W(e).getComputedStyle(e)),t.position==="fixed"}function Sr(e,t){t===void 0&&(t=W(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Ft(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Pt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Ge(o)||cn(o)||n.includes(o))return n;const s=W(e).getComputedStyle(o);return o!==e&&Sr(o,s)&&n.push(o),yr(o,s)?n:r(o.parentNode)}return e?r(e):n}function hn(e){const[t]=Ft(e,1);return t??null}function Et(e){return!xt||!e?null:Oe(e)?e:At(e)?Pt(e)||e===_e(e).scrollingElement?window:Ge(e)?e:null:null}function fn(e){return Oe(e)?e.scrollX:e.scrollLeft}function gn(e){return Oe(e)?e.scrollY:e.scrollTop}function Tt(e){return{x:fn(e),y:gn(e)}}var q;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(q||(q={}));function pn(e){return!xt||!e?!1:e===document.scrollingElement}function mn(e){const t={x:0,y:0},n=pn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,c=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:c,isRight:l,maxScroll:r,minScroll:t}}const wr={x:.2,y:.2};function Cr(e,t,n,r,o){let{top:s,left:c,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=wr);const{isTop:d,isBottom:h,isLeft:f,isRight:x}=mn(e),m={x:0,y:0},C={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!d&&s<=t.top+g.height?(m.y=q.Backward,C.y=r*Math.abs((t.top+g.height-s)/g.height)):!h&&u>=t.bottom-g.height&&(m.y=q.Forward,C.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!x&&l>=t.right-g.width?(m.x=q.Forward,C.x=r*Math.abs((t.right-g.width-l)/g.width)):!f&&c<=t.left+g.width&&(m.x=q.Backward,C.x=r*Math.abs((t.left+g.width-c)/g.width)),{direction:m,speed:C}}function Dr(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:c}=window;return{top:0,left:0,right:s,bottom:c,width:s,height:c}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function vn(e){return e.reduce((t,n)=>Me(t,Tt(n)),ce)}function Er(e){return e.reduce((t,n)=>t+fn(n),0)}function Rr(e){return e.reduce((t,n)=>t+gn(n),0)}function jr(e,t){if(t===void 0&&(t=Ae),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);hn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const kr=[["x",["left","right"],Er],["y",["top","bottom"],Rr]];class $t{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ft(n),o=vn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,c,l]of kr)for(const u of c)Object.defineProperty(this,u,{get:()=>{const d=l(r),h=o[s]-d;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ke{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Ir(e){const{EventTarget:t}=W(e);return e instanceof t?e:_e(e)}function Rt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ee||(ee={}));function Zt(e){e.preventDefault()}function Nr(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(A||(A={}));const xn={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter]},Tr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case A.Right:return{...n,x:n.x+25};case A.Left:return{...n,x:n.x-25};case A.Down:return{...n,y:n.y+25};case A.Up:return{...n,y:n.y-25}}};class bn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ke(_e(n)),this.windowListeners=new Ke(W(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&jr(r),n(ce)}handleKeyDown(t){if(zt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=xn,coordinateGetter:c=Tr,scrollBehavior:l="smooth"}=o,{code:u}=t;if(s.end.includes(u)){this.handleEnd(t);return}if(s.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:ce;this.referenceCoordinates||(this.referenceCoordinates=h);const f=c(t,{active:n,context:r.current,currentCoordinates:h});if(f){const x=pt(f,h),m={x:0,y:0},{scrollableAncestors:C}=r.current;for(const g of C){const y=t.code,{isTop:D,isRight:I,isLeft:w,isBottom:R,maxScroll:T,minScroll:M}=mn(g),j=Dr(g),p={x:Math.min(y===A.Right?j.right-j.width/2:j.right,Math.max(y===A.Right?j.left:j.left+j.width/2,f.x)),y:Math.min(y===A.Down?j.bottom-j.height/2:j.bottom,Math.max(y===A.Down?j.top:j.top+j.height/2,f.y))},S=y===A.Right&&!I||y===A.Left&&!w,E=y===A.Down&&!R||y===A.Up&&!D;if(S&&p.x!==f.x){const v=g.scrollLeft+x.x,F=y===A.Right&&v<=T.x||y===A.Left&&v>=M.x;if(F&&!x.y){g.scrollTo({left:v,behavior:l});return}F?m.x=g.scrollLeft-v:m.x=y===A.Right?g.scrollLeft-T.x:g.scrollLeft-M.x,m.x&&g.scrollBy({left:-m.x,behavior:l});break}else if(E&&p.y!==f.y){const v=g.scrollTop+x.y,F=y===A.Down&&v<=T.y||y===A.Up&&v>=M.y;if(F&&!x.x){g.scrollTo({top:v,behavior:l});return}F?m.y=g.scrollTop-v:m.y=y===A.Down?g.scrollTop-T.y:g.scrollTop-M.y,m.y&&g.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,Me(pt(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}bn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=xn,onActivation:o}=t,{active:s}=n;const{code:c}=e.nativeEvent;if(r.start.includes(c)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function en(e){return!!(e&&"distance"in e)}function tn(e){return!!(e&&"delay"in e)}class Bt{constructor(t,n,r){var o;r===void 0&&(r=Ir(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:c}=s;this.props=t,this.events=n,this.document=_e(c),this.documentListeners=new Ke(this.document),this.listeners=new Ke(r),this.windowListeners=new Ke(W(c)),this.initialCoordinates=(o=Nt(s))!=null?o:ce,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.DragStart,Zt),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),this.windowListeners.add(ee.ContextMenu,Zt),this.documentListeners.add(ee.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(en(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ee.Click,Nr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ee.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:c,options:{activationConstraint:l}}=s;if(!o)return;const u=(n=Nt(t))!=null?n:ce,d=pt(o,u);if(!r&&l){if(en(l)){if(l.tolerance!=null&&Rt(d,l.tolerance))return this.handleCancel();if(Rt(d,l.distance))return this.handleStart()}return tn(l)&&Rt(d,l.tolerance)?this.handleCancel():void 0}t.cancelable&&t.preventDefault(),c(u)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===A.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Mr={move:{name:"pointermove"},end:{name:"pointerup"}};class yn extends Bt{constructor(t){const{event:n}=t,r=_e(n.target);super(t,Mr,r)}}yn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Or={move:{name:"mousemove"},end:{name:"mouseup"}};var Mt;(function(e){e[e.RightClick=2]="RightClick"})(Mt||(Mt={}));class _r extends Bt{constructor(t){super(t,Or,_e(t.event.target))}}_r.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Mt.RightClick?!1:(r?.({event:n}),!0)}}];const jt={move:{name:"touchmove"},end:{name:"touchend"}};class Ar extends Bt{constructor(t){super(t,jt)}static setup(){return window.addEventListener(jt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(jt.move.name,t)};function t(){}}}Ar.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var Xe;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xe||(Xe={}));var vt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(vt||(vt={}));function Pr(e){let{acceleration:t,activator:n=Xe.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:c=5,order:l=vt.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:h,delta:f,threshold:x}=e;const m=zr({delta:f,disabled:!s}),[C,g]=Gn(),y=a.useRef({x:0,y:0}),D=a.useRef({x:0,y:0}),I=a.useMemo(()=>{switch(n){case Xe.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Xe.DraggableRect:return o}},[n,o,u]),w=a.useRef(null),R=a.useCallback(()=>{const M=w.current;if(!M)return;const j=y.current.x*D.current.x,p=y.current.y*D.current.y;M.scrollBy(j,p)},[]),T=a.useMemo(()=>l===vt.TreeOrder?[...d].reverse():d,[l,d]);a.useEffect(()=>{if(!s||!d.length||!I){g();return}for(const M of T){if(r?.(M)===!1)continue;const j=d.indexOf(M),p=h[j];if(!p)continue;const{direction:S,speed:E}=Cr(M,p,I,t,x);for(const v of["x","y"])m[v][S[v]]||(E[v]=0,S[v]=0);if(E.x>0||E.y>0){g(),w.current=M,C(R,c),y.current=E,D.current=S;return}}y.current={x:0,y:0},D.current={x:0,y:0},g()},[t,R,r,g,s,c,JSON.stringify(I),JSON.stringify(m),C,d,T,h,JSON.stringify(x)])}const Lr={x:{[q.Backward]:!1,[q.Forward]:!1},y:{[q.Backward]:!1,[q.Forward]:!1}};function zr(e){let{delta:t,disabled:n}=e;const r=It(t);return Je(o=>{if(n||!r||!o)return Lr;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[q.Backward]:o.x[q.Backward]||s.x===-1,[q.Forward]:o.x[q.Forward]||s.x===1},y:{[q.Backward]:o.y[q.Backward]||s.y===-1,[q.Forward]:o.y[q.Forward]||s.y===1}}},[n,t,r])}function Fr(e,t){const n=t!==null?e.get(t):void 0,r=n?n.node.current:null;return Je(o=>{var s;return t===null?null:(s=r??o)!=null?s:null},[r,t])}function $r(e,t){return a.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,r)}));return[...n,...s]},[]),[e,t])}var Ue;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ue||(Ue={}));var Ot;(function(e){e.Optimized="optimized"})(Ot||(Ot={}));const nn=new Map;function Br(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,c]=a.useState(null),{frequency:l,measure:u,strategy:d}=o,h=a.useRef(e),f=y(),x=Ye(f),m=a.useCallback(function(D){D===void 0&&(D=[]),!x.current&&c(I=>I===null?D:I.concat(D.filter(w=>!I.includes(w))))},[x]),C=a.useRef(null),g=Je(D=>{if(f&&!n)return nn;if(!D||D===nn||h.current!==e||s!=null){const I=new Map;for(let w of e){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){I.set(w.id,w.rect.current);continue}const R=w.node.current,T=R?new $t(u(R),R):null;w.rect.current=T,T&&I.set(w.id,T)}return I}return D},[e,s,n,f,u]);return a.useEffect(()=>{h.current=e},[e]),a.useEffect(()=>{f||m()},[n,f]),a.useEffect(()=>{s&&s.length>0&&c(null)},[JSON.stringify(s)]),a.useEffect(()=>{f||typeof l!="number"||C.current!==null||(C.current=setTimeout(()=>{m(),C.current=null},l))},[l,f,m,...r]),{droppableRects:g,measureDroppableContainers:m,measuringScheduled:s!=null};function y(){switch(d){case Ue.Always:return!1;case Ue.BeforeDragging:return n;default:return!n}}}function Sn(e,t){return Je(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function qr(e,t){return Sn(e,t)}function Kr(e){let{callback:t,disabled:n}=e;const r=Lt(t),o=a.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return a.useEffect(()=>()=>o?.disconnect(),[o]),o}function bt(e){let{callback:t,disabled:n}=e;const r=Lt(t),o=a.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return a.useEffect(()=>()=>o?.disconnect(),[o]),o}function Xr(e){return new $t(Ae(e),e)}function rn(e,t,n){t===void 0&&(t=Xr);const[r,o]=a.useReducer(l,null),s=Kr({callback(u){if(e)for(const d of u){const{type:h,target:f}=d;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),c=bt({callback:o});return ie(()=>{o(),e?(c?.observe(e),s?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),s?.disconnect())},[e]),r;function l(u){if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h}}function Hr(e){const t=Sn(e);return dn(e,t)}const on=[];function Vr(e){const t=a.useRef(e),n=Je(r=>e?r&&r!==on&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ft(e):on,[e]);return a.useEffect(()=>{t.current=e},[e]),n}function Yr(e){const[t,n]=a.useState(null),r=a.useRef(e),o=a.useCallback(s=>{const c=Et(s.target);c&&n(l=>l?(l.set(c,Tt(c)),new Map(l)):null)},[]);return a.useEffect(()=>{const s=r.current;if(e!==s){c(s);const l=e.map(u=>{const d=Et(u);return d?(d.addEventListener("scroll",o,{passive:!0}),[d,Tt(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{c(e),c(s)};function c(l){l.forEach(u=>{const d=Et(u);d?.removeEventListener("scroll",o)})}},[o,e]),a.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,c)=>Me(s,c),ce):vn(e):ce,[e,t])}function sn(e,t){t===void 0&&(t=[]);const n=a.useRef(null);return a.useEffect(()=>{n.current=null},t),a.useEffect(()=>{const r=e!==ce;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?pt(e,n.current):ce}function Wr(e){a.useEffect(()=>{if(!xt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ur(e,t){return a.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=c=>{s(c,t)},n},{}),[e,t])}function wn(e){return a.useMemo(()=>e?br(e):null,[e])}const kt=[];function Gr(e,t){t===void 0&&(t=Ae);const[n]=e,r=wn(n?W(n):null),[o,s]=a.useReducer(l,kt),c=bt({callback:s});return e.length>0&&o===kt&&s(),ie(()=>{e.length?e.forEach(u=>c?.observe(u)):(c?.disconnect(),s())},[e]),o;function l(){return e.length?e.map(u=>pn(u)?r:new $t(t(u),u)):kt}}function Jr(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ge(t)?t:e}function Qr(e){let{measure:t}=e;const[n,r]=a.useState(null),o=a.useCallback(d=>{for(const{target:h}of d)if(Ge(h)){r(f=>{const x=t(h);return f?{...f,width:x.width,height:x.height}:x});break}},[t]),s=bt({callback:o}),c=a.useCallback(d=>{const h=Jr(d);s?.disconnect(),h&&s?.observe(h),r(h?t(h):null)},[t,s]),[l,u]=gt(c);return a.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Zr=[{sensor:yn,options:{}},{sensor:bn,options:{}}],eo={current:{}},lt={draggable:{measure:Qt},droppable:{measure:Qt,strategy:Ue.WhileDragging,frequency:Ot.Optimized},dragOverlay:{measure:Ae}};class He extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const to={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new He,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:lt,measureDroppableContainers:mt,windowRect:null,measuringScheduled:!1},no={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mt,draggableNodes:new Map,over:null,measureDroppableContainers:mt},yt=a.createContext(no),Cn=a.createContext(to);function ro(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new He}}}function oo(e,t){switch(t.type){case B.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case B.DragEnd:case B.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new He(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case B.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const c=new He(e.droppable.containers);return c.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:c}}}case B.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new He(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function so(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=a.useContext(yt),s=It(r),c=It(n?.id);return a.useEffect(()=>{if(!t&&!r&&s&&c!=null){if(!zt(s)||document.activeElement===s.target)return;const l=o.get(c);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[u.current,d.current]){if(!h)continue;const f=Zn(h);if(f){f.focus();break}}})}},[r,t,o,c,s]),null}function ao(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function io(e){return a.useMemo(()=>({draggable:{...lt.draggable,...e?.draggable},droppable:{...lt.droppable,...e?.droppable},dragOverlay:{...lt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function co(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=a.useRef(!1),{x:c,y:l}=typeof o=="boolean"?{x:o,y:o}:o;ie(()=>{if(!c&&!l||!t){s.current=!1;return}if(s.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const h=n(d),f=dn(h,r);if(c||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const x=hn(d);x&&x.scrollBy({top:f.y,left:f.x})}},[t,c,l,r,n])}const Dn=a.createContext({...ce,scaleX:1,scaleY:1});var Ce;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ce||(Ce={}));const lo=a.memo(function(t){var n,r,o,s;let{id:c,accessibility:l,autoScroll:u=!0,children:d,sensors:h=Zr,collisionDetection:f=hr,measuring:x,modifiers:m,...C}=t;const g=a.useReducer(oo,void 0,ro),[y,D]=g,[I,w]=sr(),[R,T]=a.useState(Ce.Uninitialized),M=R===Ce.Initialized,{draggable:{active:j,nodes:p,translate:S},droppable:{containers:E}}=y,v=j?p.get(j):null,F=a.useRef({initial:null,translated:null}),L=a.useMemo(()=>{var X;return j!=null?{id:j,data:(X=v?.data)!=null?X:eo,rect:F}:null},[j,v]),$=a.useRef(null),[he,De]=a.useState(null),[K,fe]=a.useState(null),te=Ye(C,Object.values(C)),ge=Qe("DndDescribedBy",c),pe=a.useMemo(()=>E.getEnabled(),[E]),P=io(x),{droppableRects:V,measureDroppableContainers:ne,measuringScheduled:Ee}=Br(pe,{dragging:M,dependencies:[S.x,S.y],config:P.droppable}),Y=Fr(p,j),je=a.useMemo(()=>K?Nt(K):null,[K]),le=Mn(),re=qr(Y,P.draggable.measure);co({activeNode:j?p.get(j):null,config:le.layoutShiftCompensation,initialRect:re,measure:P.draggable.measure});const _=rn(Y,P.draggable.measure,re),be=rn(Y?Y.parentElement:null),U=a.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:p,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=E.getNodeFor((n=U.current.over)==null?void 0:n.id),oe=Qr({measure:P.dragOverlay.measure}),ye=(r=oe.nodeRef.current)!=null?r:Y,Se=M?(o=oe.rect)!=null?o:_:null,Ze=!!(oe.nodeRef.current&&oe.rect),et=Hr(Ze?null:_),Pe=wn(ye?W(ye):null),ue=Vr(M?me??Y:null),ke=Gr(ue),Ie=ao(m,{transform:{x:S.x-et.x,y:S.y-et.y,scaleX:1,scaleY:1},activatorEvent:K,active:L,activeNodeRect:_,containerNodeRect:be,draggingNodeRect:Se,over:U.current.over,overlayNodeRect:oe.rect,scrollableAncestors:ue,scrollableAncestorRects:ke,windowRect:Pe}),tt=je?Me(je,S):null,nt=Yr(ue),St=sn(nt),wt=sn(nt,[_]),b=Me(Ie,St),N=Se?pr(Se,Ie):null,k=L&&N?f({active:L,collisionRect:N,droppableRects:V,droppableContainers:pe,pointerCoordinates:tt}):null,O=ur(k,"id"),[z,Q]=a.useState(null),Le=Ze?Ie:Me(Ie,wt),rt=fr(Le,(s=z?.rect)!=null?s:null,_),Kt=a.useCallback((X,G)=>{let{sensor:J,options:we}=G;if($.current==null)return;const Z=p.get($.current);if(!Z)return;const se=X.nativeEvent,de=new J({active:$.current,activeNode:Z,event:se,options:we,context:U,onStart(ae){const ze=$.current;if(ze==null)return;const Fe=p.get(ze);if(!Fe)return;const{onDragStart:ot}=te.current,st={active:{id:ze,data:Fe.data,rect:F}};Te.unstable_batchedUpdates(()=>{ot?.(st),T(Ce.Initializing),D({type:B.DragStart,initialCoordinates:ae,active:ze}),I({type:"onDragStart",event:st})})},onMove(ae){D({type:B.DragMove,coordinates:ae})},onEnd:Ne(B.DragEnd),onCancel:Ne(B.DragCancel)});Te.unstable_batchedUpdates(()=>{De(de),fe(X.nativeEvent)});function Ne(ae){return async function(){const{active:Fe,collisions:ot,over:st,scrollAdjustedTranslate:Ht}=U.current;let $e=null;if(Fe&&Ht){const{cancelDrop:Be}=te.current;$e={activatorEvent:se,active:Fe,collisions:ot,delta:Ht,over:st},ae===B.DragEnd&&typeof Be=="function"&&await Promise.resolve(Be($e))&&(ae=B.DragCancel)}$.current=null,Te.unstable_batchedUpdates(()=>{D({type:ae}),T(Ce.Uninitialized),Q(null),De(null),fe(null);const Be=ae===B.DragEnd?"onDragEnd":"onDragCancel";if($e){const Ct=te.current[Be];Ct?.($e),I({type:Be,event:$e})}})}}},[p]),In=a.useCallback((X,G)=>(J,we)=>{const Z=J.nativeEvent,se=p.get(we);if($.current!==null||!se||Z.dndKit||Z.defaultPrevented)return;const de={active:se};X(J,G.options,de)===!0&&(Z.dndKit={capturedBy:G.sensor},$.current=we,Kt(J,G))},[p,Kt]),Xt=$r(h,In);Wr(h),ie(()=>{_&&R===Ce.Initializing&&T(Ce.Initialized)},[_,R]),a.useEffect(()=>{const{onDragMove:X}=te.current,{active:G,activatorEvent:J,collisions:we,over:Z}=U.current;if(!G||!J)return;const se={active:G,activatorEvent:J,collisions:we,delta:{x:b.x,y:b.y},over:Z};Te.unstable_batchedUpdates(()=>{X?.(se),I({type:"onDragMove",event:se})})},[b.x,b.y]),a.useEffect(()=>{const{active:X,activatorEvent:G,collisions:J,droppableContainers:we,scrollAdjustedTranslate:Z}=U.current;if(!X||$.current==null||!G||!Z)return;const{onDragOver:se}=te.current,de=we.get(O),Ne=de&&de.rect.current?{id:de.id,rect:de.rect.current,data:de.data,disabled:de.disabled}:null,ae={active:X,activatorEvent:G,collisions:J,delta:{x:Z.x,y:Z.y},over:Ne};Te.unstable_batchedUpdates(()=>{Q(Ne),se?.(ae),I({type:"onDragOver",event:ae})})},[O]),ie(()=>{U.current={activatorEvent:K,active:L,activeNode:Y,collisionRect:N,collisions:k,droppableRects:V,draggableNodes:p,draggingNode:ye,draggingNodeRect:Se,droppableContainers:E,over:z,scrollableAncestors:ue,scrollAdjustedTranslate:b},F.current={initial:Se,translated:N}},[L,Y,k,N,p,ye,Se,V,E,z,ue,b]),Pr({...le,delta:S,draggingRect:N,pointerCoordinates:tt,scrollableAncestors:ue,scrollableAncestorRects:ke});const Nn=a.useMemo(()=>({active:L,activeNode:Y,activeNodeRect:_,activatorEvent:K,collisions:k,containerNodeRect:be,dragOverlay:oe,draggableNodes:p,droppableContainers:E,droppableRects:V,over:z,measureDroppableContainers:ne,scrollableAncestors:ue,scrollableAncestorRects:ke,measuringConfiguration:P,measuringScheduled:Ee,windowRect:Pe}),[L,Y,_,K,k,be,oe,p,E,V,z,ne,ue,ke,P,Ee,Pe]),Tn=a.useMemo(()=>({activatorEvent:K,activators:Xt,active:L,activeNodeRect:_,ariaDescribedById:{draggable:ge},dispatch:D,draggableNodes:p,over:z,measureDroppableContainers:ne}),[K,Xt,L,_,D,ge,p,z,ne]);return H.createElement(un.Provider,{value:w},H.createElement(yt.Provider,{value:Tn},H.createElement(Cn.Provider,{value:Nn},H.createElement(Dn.Provider,{value:rt},d)),H.createElement(so,{disabled:l?.restoreFocus===!1})),H.createElement(cr,{...l,hiddenTextDescribedById:ge}));function Mn(){const X=he?.autoScrollEnabled===!1,G=typeof u=="object"?u.enabled===!1:u===!1,J=M&&!X&&!G;return typeof u=="object"?{...u,enabled:J}:{enabled:J}}}),uo=a.createContext(null),an="button",ho="Droppable";function fo(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Qe(ho),{activators:c,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:h,draggableNodes:f,over:x}=a.useContext(yt),{role:m=an,roleDescription:C="draggable",tabIndex:g=0}=o??{},y=u?.id===t,D=a.useContext(y?Dn:uo),[I,w]=gt(),[R,T]=gt(),M=Ur(c,t),j=Ye(n);ie(()=>(f.set(t,{id:t,key:s,node:I,activatorNode:R,data:j}),()=>{const S=f.get(t);S&&S.key===s&&f.delete(t)}),[f,t]);const p=a.useMemo(()=>({role:m,tabIndex:g,"aria-disabled":r,"aria-pressed":y&&m===an?!0:void 0,"aria-roledescription":C,"aria-describedby":h.draggable}),[r,m,g,y,C,h.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:p,isDragging:y,listeners:r?void 0:M,node:I,over:x,setNodeRef:w,setActivatorNodeRef:T,transform:D}}function go(){return a.useContext(Cn)}const po="Droppable",mo={timeout:25};function vo(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Qe(po),{active:c,dispatch:l,over:u,measureDroppableContainers:d}=a.useContext(yt),h=a.useRef({disabled:n}),f=a.useRef(!1),x=a.useRef(null),m=a.useRef(null),{disabled:C,updateMeasurementsFor:g,timeout:y}={...mo,...o},D=Ye(g??r),I=a.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(D.current)?D.current:[D.current]),m.current=null},y)},[y]),w=bt({callback:I,disabled:C||!c}),R=a.useCallback((p,S)=>{w&&(S&&(w.unobserve(S),f.current=!1),p&&w.observe(p))},[w]),[T,M]=gt(R),j=Ye(t);return a.useEffect(()=>{!w||!T.current||(w.disconnect(),f.current=!1,w.observe(T.current))},[T,w]),ie(()=>(l({type:B.RegisterDroppable,element:{id:r,key:s,disabled:n,node:T,rect:x,data:j}}),()=>l({type:B.UnregisterDroppable,key:s,id:r})),[r]),a.useEffect(()=>{n!==h.current.disabled&&(l({type:B.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,l]),{active:c,rect:x,isOver:u?.id===r,node:T,over:u,setNodeRef:M}}const xo=e=>{let{transform:t}=e;return{...t,x:0}};function qt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function bo(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function it(e){return e!==null&&e>=0}function yo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function So(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const En=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=qt(t,r,n),c=t[o],l=s[o];return!l||!c?null:{x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height}},ct={scaleX:1,scaleY:1},wo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:c}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(o===n){const d=s[c];return d?{x:0,y:n<c?d.top+d.height-(l.top+l.height):d.top-l.top,...ct}:null}const u=Co(s,o,n);return o>n&&o<=c?{x:0,y:-l.height-u,...ct}:o<n&&o>=c?{x:0,y:l.height+u,...ct}:{x:0,y:0,...ct}};function Co(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Rn="Sortable",jn=H.createContext({activeIndex:-1,containerId:Rn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:En,disabled:{draggable:!1,droppable:!1}});function Do(e){let{children:t,id:n,items:r,strategy:o=En,disabled:s=!1}=e;const{active:c,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:h}=go(),f=Qe(Rn,n),x=l.rect!==null,m=a.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),C=c!=null,g=c?m.indexOf(c.id):-1,y=d?m.indexOf(d.id):-1,D=a.useRef(m),I=!yo(m,D.current),w=y!==-1&&g===-1||I,R=So(s);ie(()=>{I&&C&&h(m)},[I,m,C,h]),a.useEffect(()=>{D.current=m},[m]);const T=a.useMemo(()=>({activeIndex:g,containerId:f,disabled:R,disableTransforms:w,items:m,overIndex:y,useDragOverlay:x,sortedRects:bo(m,u),strategy:o}),[g,f,R.draggable,R.droppable,w,m,y,u,x,o]);return H.createElement(jn.Provider,{value:T},t)}const Eo=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return qt(n,r,o).indexOf(t)},Ro=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:c,previousItems:l,previousContainerId:u,transition:d}=e;return!d||!r||l!==s&&o===c?!1:n?!0:c!==o&&t===u},jo={duration:200,easing:"ease"},kn="transform",ko=We.Transition.toString({property:kn,duration:0,easing:"linear"}),Io={roleDescription:"sortable"};function No(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,c]=a.useState(null),l=a.useRef(n);return ie(()=>{if(!t&&n!==l.current&&r.current){const u=o.current;if(u){const d=Ae(r.current,{ignoreTransform:!0}),h={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(h.x||h.y)&&c(h)}}n!==l.current&&(l.current=n)},[t,n,r,o]),a.useEffect(()=>{s&&c(null)},[s]),s}function To(e){let{animateLayoutChanges:t=Ro,attributes:n,disabled:r,data:o,getNewIndex:s=Eo,id:c,strategy:l,resizeObserverConfig:u,transition:d=jo}=e;const{items:h,containerId:f,activeIndex:x,disabled:m,disableTransforms:C,sortedRects:g,overIndex:y,useDragOverlay:D,strategy:I}=a.useContext(jn),w=Mo(r,m),R=h.indexOf(c),T=a.useMemo(()=>({sortable:{containerId:f,index:R,items:h},...o}),[f,o,R,h]),M=a.useMemo(()=>h.slice(h.indexOf(c)),[h,c]),{rect:j,node:p,isOver:S,setNodeRef:E}=vo({id:c,data:T,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...u}}),{active:v,activatorEvent:F,activeNodeRect:L,attributes:$,setNodeRef:he,listeners:De,isDragging:K,over:fe,setActivatorNodeRef:te,transform:ge}=fo({id:c,data:T,attributes:{...Io,...n},disabled:w.draggable}),pe=Un(E,he),P=!!v,V=P&&!C&&it(x)&&it(y),ne=!D&&K,Ee=ne&&V?ge:null,je=V?Ee??(l??I)({rects:g,activeNodeRect:L,activeIndex:x,overIndex:y,index:R}):null,le=it(x)&&it(y)?s({id:c,items:h,activeIndex:x,overIndex:y}):R,re=v?.id,_=a.useRef({activeId:re,items:h,newIndex:le,containerId:f}),be=h!==_.current.items,U=t({active:v,containerId:f,isDragging:K,isSorting:P,id:c,index:R,items:h,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:d,wasDragging:_.current.activeId!=null}),me=No({disabled:!U,index:R,node:p,rect:j});return a.useEffect(()=>{P&&_.current.newIndex!==le&&(_.current.newIndex=le),f!==_.current.containerId&&(_.current.containerId=f),h!==_.current.items&&(_.current.items=h)},[P,le,f,h]),a.useEffect(()=>{if(re===_.current.activeId)return;if(re&&!_.current.activeId){_.current.activeId=re;return}const ye=setTimeout(()=>{_.current.activeId=re},50);return()=>clearTimeout(ye)},[re]),{active:v,activeIndex:x,attributes:$,data:T,rect:j,index:R,newIndex:le,items:h,isOver:S,isSorting:P,isDragging:K,listeners:De,node:p,overIndex:y,over:fe,setNodeRef:pe,setActivatorNodeRef:te,setDroppableNodeRef:E,setDraggableNodeRef:he,transform:me??je,transition:oe()};function oe(){if(me||be&&_.current.newIndex===R)return ko;if(!(ne&&!zt(F)||!d)&&(P||U))return We.Transition.toString({...d,property:kn})}}function Mo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}A.Down,A.Right,A.Up,A.Left;function Oo({columnsTable:e,datasTable:t,keyPros:n,onDragRowEvent:r}){const o=e,[s,c]=a.useState([]);a.useEffect(()=>{t.forEach(d=>{d.key=`${d[n]}`}),c(t)},[t]);const l=({children:d,...h})=>{const{attributes:f,listeners:x,setNodeRef:m,setActivatorNodeRef:C,transform:g,transition:y,isDragging:D}=To({id:h["data-row-key"]}),I={...h.style,transform:We.Transform.toString(g&&{...g,scaleY:1}),transition:y,...D?{position:"relative",zIndex:9999}:{}};return i.jsx("tr",{...h,ref:m,style:I,...f,children:H.Children.map(d,w=>w.key==="sort"?H.cloneElement(w,{children:i.jsx(Vn,{ref:C,style:{touchAction:"none",cursor:"move"},...x})}):w)})},u=({active:d,over:h})=>{d.id!==h?.id&&c(f=>{const x=f.findIndex(g=>g.key===d.id),m=f.findIndex(g=>g.key===h?.id);let C=qt(f,x,m);for(let g=0;g<C.length;g++)C[g].key=`${g+1}`,C[g][n]=`${g+1}`;return r(C),C})};return i.jsx(lo,{modifiers:[xo],onDragEnd:u,children:i.jsx(Do,{items:s.map(d=>d.key),strategy:wo,children:i.jsx(xe,{components:{body:{row:l}},rowKey:"key",columns:o,dataSource:s})})})}function _o({onChangeCategory:e,onChangeCheckExistProduct:t,onChangeCheckSequenceProduct:n,onChangeSequenceProducts:r}){const[o,s]=a.useState(!1),[c,l]=a.useState(!1),[u,d]=a.useState([]),[h,f]=a.useState([]),[x,m]=a.useState([]),[C,g]=a.useState([]),[y,D]=a.useState([]),[I,w]=a.useState([]),[R,T]=a.useState(""),[M,j]=a.useState(""),[p,S]=a.useState([]),[E,v]=a.useState([]),[F,L]=a.useState(!0),[$,he]=a.useState(!1),[De,K]=a.useState([]);a.useState({}),a.useEffect(()=>{fe()},[]),a.useEffect(()=>{fe()},[R]);const fe=async()=>{let b='/api/resource/VGM_Category?fields=["*"]';R!=null&&R!=""&&(b+=`&filters=[["category_name", "like", "%${R}%"]]`);const N=await Ve.get(b);if(N&&N.data){let k=N.data.map(O=>({...O,key:O.name}));for(let O=0;O<k.length;O++){let z=`/api/resource/VGM_Product?fields=["name","product_code","product_name"]&&filters=[["category","=","${k[O].name}"]]`,Q=await Ve.get(z);if(Q!=null&&Q.data!=null){k[O].product_num=Q.data.length;let Le=Q.data.map(rt=>({...rt,key:rt.name}));k[O].products=Le}else k[O].product_num=0,k[O].products=[]}m(k)}},te=b=>{T(b.target.value)},ge=b=>{const N=b.target.value.toLowerCase();j(N);const k=[...y];if(N===""){g(y);return}else{const O=k.filter(z=>z.product_name.toLowerCase().includes(N));g(O)}},pe=(b,N)=>{console.log(b),d(b)},P=(b,N)=>{console.log(b),console.log(y);const k=y.map((O,z)=>{const Q=b.indexOf(O.name),Le=Q!==-1?Q+1:null;return{...O,sequence_product:Le}});g(k),f(b)},V={selectedRowKeys:u,onChange:pe},ne={selectedProductRowKeys:h,onChange:P},Ee=()=>{let b=[],N=[];for(let k=0;k<u.length;k++){let O=x.filter(z=>z.name===u[k]);if(O!=null&&O.length>0){O[0].stt=b.length+1;let z={...O[0]};z.products=z.products.map(Q=>({...Q,cate_name:z.category_name,product_num:"1"})),N=N.concat(z.products),b.push(z)}}v(N),S(b),e(b),U()},Y=()=>{const b=C.filter(k=>h.includes(k.name));console.log(b);let N=b.map(k=>k.name);r(N),w(b),me()},je=u.length>0,le=h.length>0,re=()=>{s(!0)},_=()=>{l(!0);const b=[];p.forEach(N=>{b.push(...N.products.map(k=>({...k,cate_name:N.category_name})))}),g(b),D(b)},be=()=>{s(!1)},U=()=>{s(!1)},me=()=>{l(!1)},oe=b=>{const N=p.filter(O=>O.name!==b.name),k=E.filter(O=>O.cate_name!==b.category_name);v(k),S(N),e(N)},ye=b=>{L(b.target.checked),t(b.target.checked)},Se=b=>{he(b.target.checked),n(b.target.checked)},Ze=(b,N)=>{const k=[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"}];return i.jsx(i.Fragment,{children:i.jsx("div",{style:{margin:5},children:i.jsx(Ln,{columns:k,dataSource:b.products,pagination:!1})})})},et=[{title:"STT",dataIndex:"stt",key:"stt"},{title:"Danh mục sản phẩm",dataIndex:"category_name",key:"category_name"},{title:"Số lượng sản phẩm",dataIndex:"product_num",key:"product_num"},{title:"",key:"",render:b=>i.jsx("a",{children:i.jsx(_t,{onClick:()=>oe(b)})})}],Pe=[{title:"Mã sản phẩm",dataIndex:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Danh mục",dataIndex:"cate_name"},{title:"Số lượng ít nhất",dataIndex:"product_num",render:(b,N,k)=>i.jsx(Re,{style:{width:"120px"},defaultValue:b,onChange:O=>ke(k,parseInt(O.target.value))})}],ue=[{key:"sort"},{title:"STT",dataIndex:"sequence_product"},{title:"Mã sản phẩm",dataIndex:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Danh mục",dataIndex:"cate_name"}],ke=(b,N)=>{const k=[...E];k[b].product_num=N,v(k),e(p)},Ie=(b,N)=>{console.log(b,N)},tt=b=>{let N=b.map(k=>k.name);K(N),r(N)},nt=[{key:"1",label:i.jsxs(Ut,{checked:F,onChange:ye,children:[" ",i.jsx("span",{style:{fontWeight:700,fontSize:"15px"},children:" 1. Tiêu chí tồn tại sản phẩm"})," "]}),children:i.jsx("div",{children:i.jsx(xe,{columns:Pe,dataSource:E})})},{key:"2",label:i.jsxs(Ut,{checked:$,onChange:Se,children:[" ",i.jsx("span",{style:{fontWeight:700,fontSize:"15px"},children:" 2. Tiêu chí sắp xếp sản phẩm"})," "]}),children:i.jsxs("div",{children:[i.jsxs("div",{onClick:_,className:"flex justify-center h-9 cursor-pointer items-center ml-4 mt-4 mb-4 border-solid border-[1px] border-indigo-600 rounded-xl w-[160px] ",children:[i.jsx("p",{className:"mr-2",children:i.jsx(ut,{})}),i.jsx("p",{className:"text-sm font-bold text-[#1877F2]",children:"Chọn sản phẩm"})]}),i.jsx("div",{className:"ml-4 mb-4 mr-4 mt-4",style:{fontSize:"17px",fontStyle:"italic",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"left",color:"rgba(99, 115, 129, 1)"},children:i.jsx("span",{children:"Di chuyển (kéo, thả) các sản phẩm để sắp xếp thứ tự sản phẩm"})}),i.jsx(Oo,{columnsTable:ue,datasTable:I,keyPros:"sequence_product",onDragRowEvent:tt})]})}],St=[{key:"1",label:i.jsx("span",{style:{fontWeight:700,fontSize:"15px"},children:"  Thiết lập tiêu chí chấm điểm trưng bày sản phẩm"}),children:i.jsx(Wt,{items:nt,defaultActiveKey:["1","2"],className:"custom-collapse"})}],wt=b=>{};return i.jsxs("div",{className:"pt-4",children:[i.jsx("p",{className:"ml-4 font-semibold text-sm text-[#212B36]",children:"Danh sách sản phẩm"}),i.jsxs("div",{onClick:re,className:"flex justify-center h-9 cursor-pointer items-center ml-4 border-solid border-[1px] border-indigo-600 rounded-xl w-[160px]",children:[i.jsx("p",{className:"mr-2",children:i.jsx(ut,{})}),i.jsx("p",{className:"text-sm font-bold text-[#1877F2]",children:"Chọn danh mục"})]}),i.jsxs("div",{className:"pt-6 ml-4",children:[i.jsx(xe,{columns:et,expandable:{expandedRowRender:Ze,defaultExpandedRowKeys:["0"]},dataSource:p}),i.jsx(Wt,{items:St,defaultActiveKey:["1","2"],onChange:wt,className:"custom-collapse"})]}),i.jsxs(dt,{width:990,title:"Chọn danh mục sản phẩm",open:o,onOk:be,onCancel:U,footer:!1,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ve,{className:"w-[320px] border-none pt-4",children:i.jsx(Re,{value:R,onChange:te,placeholder:"Tìm kiếm danh mục sản phẩm",prefix:i.jsx(ht,{})})}),i.jsxs("div",{children:[i.jsx("span",{style:{marginRight:8},children:je?`Đã chọn ${u.length} danh mục`:""}),i.jsx(ft,{type:"primary",onClick:Ee,children:"Thêm"})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx(xe,{rowSelection:V,columns:[{title:"Danh mục sản phẩm",dataIndex:"category_name",key:"category_name"},{title:"Số lượng sản phẩm",dataIndex:"product_num",key:"product_num"}],dataSource:x})})]}),i.jsxs(dt,{width:990,title:"Sắp xếp sản phẩm",open:c,onOk:be,onCancel:me,footer:!1,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ve,{className:"w-[320px] border-none pt-4",children:i.jsx(Re,{value:M,onChange:ge,placeholder:"Tìm kiếm sản phẩm",prefix:i.jsx(ht,{})})}),i.jsxs("div",{children:[i.jsx("span",{style:{marginRight:8},children:le?`Đã chọn ${h.length} sản phẩm`:""}),i.jsx(ft,{type:"primary",onClick:Y,children:"Thêm"})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx(xe,{rowSelection:ne,columns:[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"},{title:"Danh mục",dataIndex:"cate_name",key:"cate_name"},{title:"Chọn thứ tự",dataIndex:"sequence_product",dataIndex:"sequence_product",render:(b,N,k)=>i.jsx(Re,{style:{width:"120px"},defaultValue:b,value:b,onChange:O=>Ie(k,parseInt(O.target.value))})}],dataSource:C})})]})]})}function Ao({onChangeCustomer:e}){const[t,n]=a.useState(!1),[r,o]=a.useState([]),[s,c]=a.useState([]),[l,u]=a.useState([]),[d,h]=a.useState([]),[f,x]=a.useState(""),m=[{title:"ID",dataIndex:"customer_code",key:"customer_code"},{title:"Tên khách hàng",key:"customer_name",dataIndex:"customer_name"},{title:"Nhóm khách hàng",dataIndex:"customer_group",key:"customer_group"},{title:"Địa chỉ",key:"customer_primary_address",dataIndex:"customer_primary_address"},{title:"",key:"action",render:(p,S)=>i.jsx("a",{children:i.jsx(_t,{onClick:()=>T(S)})})}];a.useEffect(()=>{C()},[]),a.useEffect(()=>{let p=l;f!=null&&f!=""&&(p=l.filter(S=>S.customer_name.toLowerCase().includes(f.toLowerCase()))),c(p)},[f]);const C=async()=>{let S=await Ve.get("/api/method/mbw_dms.api.selling.customer.list_customer"),E=[];S!=null&&S.message=="ok"&&(E=S.result.data.map(v=>({...v,key:v.name}))),c(E),u(E)},g=()=>{n(!0)},y=()=>{n(!1)},D=()=>{n(!1)},I=p=>{x(p.target.value)},w=p=>{o(p)},R=()=>{let p=[];for(let S=0;S<r.length;S++){let E=s.filter(v=>v.name==r[S]);E!=null&&E.length>0&&p.push(E[0])}h(p),e(p),D()},T=p=>{const S=d.filter(E=>E.name!==p.name);h(S),e(S)},M={selectedRowKeys:r,onChange:w},j=r.length>0;return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"pt-4",children:[i.jsx("p",{className:"ml-4 font-semibold text-sm text-[#212B36]",children:"Danh sách khách hàng"}),i.jsxs("div",{onClick:g,className:"flex justify-center h-9 cursor-pointer items-center ml-4 border-solid border-[1px] border-indigo-600 rounded-xl w-[160px]",children:[i.jsx("p",{className:"mr-2",children:i.jsx(ut,{})}),i.jsx("p",{className:"text-sm font-bold text-[#1877F2]",children:"Chọn khách hàng"})]}),i.jsx("div",{className:"pt-6 ml-4",children:i.jsx(xe,{columns:m,dataSource:d})}),i.jsxs(dt,{width:990,title:"Chọn khách hàng",open:t,onOk:y,onCancel:D,footer:!1,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ve,{className:"w-[320px] border-none pt-4",children:i.jsx(Re,{value:f,onChange:I,placeholder:"Tìm kiếm tên khách hàng",prefix:i.jsx(ht,{})})}),i.jsxs("div",{children:[i.jsx("span",{style:{marginRight:8},children:j?`Đã chọn ${r.length} khách hàng`:""}),i.jsx(ft,{type:"primary",onClick:R,children:"Thêm"})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx(xe,{rowSelection:M,columns:[{title:"ID",dataIndex:"customer_code",key:"customer_code"},{title:"Tên khách hàng",key:"customer_name",dataIndex:"customer_name"},{title:"Nhóm khách hàng",dataIndex:"customer_group",key:"customer_group"},{title:"Địa chỉ",key:"customer_primary_address",dataIndex:"customer_primary_address"}],dataSource:s})})]})]})})}const Po=[{title:"Mã nhân viên",dataIndex:"name",key:"name"},{title:"Tên nhân viên",dataIndex:"employee_name",key:"employee_name"},{title:"Email",dataIndex:"email",key:"email"}];function Lo({onChangeEmployees:e}){const[t,n]=a.useState(!1),[r,o]=a.useState([]),[s,c]=a.useState([]),[l,u]=a.useState([]),[d,h]=a.useState(""),[f,x]=a.useState([]),m=[{title:"Mã nhân viên",dataIndex:"name",key:"name"},{title:"Tên nhân viên",dataIndex:"employee_name",key:"employee_name"},{title:"Email",dataIndex:"email",key:"email"},{title:"",key:"",render:p=>i.jsx("a",{children:i.jsx(_t,{onClick:()=>T(p)})})}];a.useEffect(()=>{C()},[]),a.useEffect(()=>{let p=l;d!=null&&d!=""&&(p=l.filter(S=>S.employee_name.toLowerCase().includes(d.toLowerCase()))),c(p)},[d]);const C=async()=>{let S=await Ve.get("/api/method/mbw_service_v2.api.ess.employee.get_list_employee"),E=[];S!=null&&S.result!=null&&S.result.data!=null&&(E=S.result.data.map(v=>({...v,key:v.name}))),c(E),u(E)},g=()=>{n(!0)},y=()=>{n(!1)},D=()=>{n(!1)},I=p=>{o(p)},w=p=>{h(p.target.value)},R=()=>{let p=[];for(let S=0;S<r.length;S++){let E=s.filter(v=>v.name==r[S]);E!=null&&E.length>0&&p.push(E[0])}x(p),e(p),D()},T=p=>{const S=f.filter(E=>E.name!==p.name);x(S),e(S)},M={selectedRowKeys:r,onChange:I},j=r.length>0;return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"pt-4",children:[i.jsx("p",{className:"ml-4 font-semibold text-sm text-[#212B36]",children:"Danh sách nhân viên"}),i.jsxs("div",{onClick:g,className:"flex justify-center h-9 cursor-pointer items-center ml-4 border-solid border-[1px] border-indigo-600 rounded-xl w-[160px]",children:[i.jsx("p",{className:"mr-2",children:i.jsx(ut,{})}),i.jsx("p",{className:"text-sm font-bold text-[#1877F2]",children:"Chọn nhân viên"})]}),i.jsx("div",{className:"pt-6 ml-4",children:i.jsx(xe,{columns:m,dataSource:f})}),i.jsxs(dt,{width:990,title:"Chọn nhân viên",open:t,onOk:y,onCancel:D,footer:!1,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ve,{className:"w-[320px] border-none pt-4",children:i.jsx(Re,{value:d,onChange:w,placeholder:"Tìm kiếm tên nhân viên",prefix:i.jsx(ht,{})})}),i.jsxs("div",{children:[i.jsx("span",{style:{marginRight:8},children:j?`Đã chọn ${r.length} nhân viên`:""}),i.jsx(ft,{type:"primary",onClick:R,children:"Thêm"})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx(xe,{rowSelection:M,columns:Po,dataSource:s})})]})]})})}function zo(){const e=zn(),[t]=Gt.useForm(),[n,r]=a.useState("Open"),[o,s]=a.useState([]),[c,l]=a.useState([]),[u,d]=a.useState([]),[h,f]=a.useState({}),[x,m]=a.useState(!0),[C,g]=a.useState(!1),[y,D]=a.useState([]),I=async()=>{try{let v=t.getFieldsValue(),F=w(v.campaign_start),L=w(v.campaign_end);if(F>=L){at.error("Thời gian bắt đầu phải nhỏ hơn Thời gian kết thúc");return}let $={},he=Object.getOwnPropertyNames(h);if(x){let P={};he.forEach(V=>{let ne=h[V];P[V]=ne.min_product}),$.min_product=P}C&&($.sequence_product=y);let De=o.map(P=>P.name),K=c.map(P=>P.name),fe=u.map(P=>P.name),te="/api/resource/VGM_Campaign",ge={campaign_name:v.campaign_name,campaign_description:v.campaign_description,start_date:F,end_date:L,campaign_status:n,categories:JSON.stringify(De),employees:JSON.stringify(K),retails:JSON.stringify(fe),setting_score_audit:$},pe=await Ve.post(te,ge);pe!=null&&pe.data!=null?(at.success("Thêm mới thành công"),e("/campaign")):at.error("Thêm mới thất bại")}catch{at.error("Không thể thêm mới. Vui lòng kiểm tra lại thông tin thời gian, sản phẩm, nhân viên, khách hàng")}},w=v=>new Date(v).toISOString().slice(0,19).replace("T"," "),R=v=>{r(v)},T=v=>{s(v);let F={};for(let L=0;L<v.length;L++)v[L].products.forEach($=>{F[$.key]={min_product:parseInt($.product_num)}});f(F)},M=v=>{l(v)},j=v=>{d(v)},p=v=>{m(v)},S=v=>{g(v)},E=v=>{D(v)};return i.jsxs(i.Fragment,{children:[i.jsx(Fn,{title:"Thêm mới chiến dịch",icon:i.jsx("p",{onClick:()=>e("/campaign"),className:"mr-2 cursor-pointer",children:i.jsx($n,{})}),buttons:[{label:"Thêm mới",type:"primary",size:"20px",className:"flex items-center",action:I}]}),i.jsx("div",{className:"bg-white pt-4 rounded-xl",children:i.jsx(Gt,{layout:"vertical",form:t,children:i.jsx(Bn,{defaultActiveKey:"1",items:[{label:i.jsx("p",{className:"px-4 mb-0",children:" Thông tin chung"}),key:"1",children:i.jsx(Wn,{form:t,onCampaignStatusChange:R})},{label:i.jsx("p",{className:"px-4 mb-0",children:"Sản phẩm"}),key:"2",children:i.jsx(_o,{onChangeCategory:T,onChangeCheckExistProduct:p,onChangeCheckSequenceProduct:S,onChangeSequenceProducts:E})},{label:i.jsx("p",{className:"px-4 mb-0",children:"Nhân viên bán hàng"}),key:"3",children:i.jsx(Lo,{onChangeEmployees:M})},{label:i.jsx("p",{className:"px-4 mb-0",children:"Khách hàng"}),key:"4",children:i.jsx(Ao,{onChangeCustomer:j})}],indicatorSize:v=>v-18})})})]})}function $o(){return i.jsxs(i.Fragment,{children:[i.jsx(qn,{children:i.jsx("title",{children:" Campaign Create"})}),i.jsx(zo,{})]})}export{$o as default};
