import{R as C,a7 as J,c as K,a8 as O,a9 as Z,t as q,aa as oe,K as V,B as Q,M as re,ab as le,ac as ie,_ as se,r as P,C as Y,g as ce,m as de,f as R,ad as ue,h as me,ae as ge,i as pe,af as he,L as W,d as X,ag as fe,j as o,a4 as F,e as H,F as L,I as D,T as ve,Z as xe,u as Ce,$ as U,H as be,a5 as ye,b as $e}from"./main--zpZemKR.js";import{U as Ie}from"./index-wPcwFrPl.js";import"./Dragger-I0oY7b3Q.js";var ee=C.forwardRef(function(n,e){var a,t=n.prefixCls,r=n.forceRender,p=n.className,h=n.style,c=n.children,l=n.isActive,d=n.role,v=C.useState(l||r),i=J(v,2),s=i[0],u=i[1];return C.useEffect(function(){(r||l)&&u(!0)},[r,l]),s?C.createElement("div",{ref:e,className:K("".concat(t,"-content"),(a={},O(a,"".concat(t,"-content-active"),l),O(a,"".concat(t,"-content-inactive"),!l),a),p),style:h,role:d},C.createElement("div",{className:"".concat(t,"-content-box")},c)):null});ee.displayName="PanelContent";var Se=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ne=C.forwardRef(function(n,e){var a,t,r=n.showArrow,p=r===void 0?!0:r,h=n.headerClass,c=n.isActive,l=n.onItemClick,d=n.forceRender,v=n.className,i=n.prefixCls,s=n.collapsible,u=n.accordion,k=n.panelKey,x=n.extra,m=n.header,y=n.expandIcon,$=n.openMotion,S=n.destroyInactivePanel,f=n.children,w=Z(n,Se),b=s==="disabled",N=s==="header",j=s==="icon",_=x!=null&&typeof x!="boolean",g=function(){l?.(k)},I=function(M){(M.key==="Enter"||M.keyCode===V.ENTER||M.which===V.ENTER)&&g()},E=typeof y=="function"?y(n):C.createElement("i",{className:"arrow"});E&&(E=C.createElement("div",{className:"".concat(i,"-expand-icon"),onClick:["header","icon"].includes(s)?g:void 0},E));var B=K((a={},O(a,"".concat(i,"-item"),!0),O(a,"".concat(i,"-item-active"),c),O(a,"".concat(i,"-item-disabled"),b),a),v),z=K(h,(t={},O(t,"".concat(i,"-header"),!0),O(t,"".concat(i,"-header-collapsible-only"),N),O(t,"".concat(i,"-icon-collapsible-only"),j),t)),T={className:z,"aria-expanded":c,"aria-disabled":b,onKeyDown:I};return!N&&!j&&(T.onClick=g,T.role=u?"tab":"button",T.tabIndex=b?-1:0),C.createElement("div",q({},w,{ref:e,className:B}),C.createElement("div",T,p&&E,C.createElement("span",{className:"".concat(i,"-header-text"),onClick:s==="header"?g:void 0},m),_&&C.createElement("div",{className:"".concat(i,"-extra")},x)),C.createElement(oe,q({visible:c,leavedClassName:"".concat(i,"-content-hidden")},$,{forceRender:d,removeOnLeave:S}),function(A,M){var ae=A.className,te=A.style;return C.createElement(ee,{ref:M,prefixCls:i,className:ae,style:te,isActive:c,forceRender:d,role:u?"tabpanel":void 0},f)}))}),je=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],Pe=function(e,a){var t=a.prefixCls,r=a.accordion,p=a.collapsible,h=a.destroyInactivePanel,c=a.onItemClick,l=a.activeKey,d=a.openMotion,v=a.expandIcon;return e.map(function(i,s){var u=i.children,k=i.label,x=i.key,m=i.collapsible,y=i.onItemClick,$=i.destroyInactivePanel,S=Z(i,je),f=String(x??s),w=m??p,b=$??h,N=function(g){w!=="disabled"&&(c(g),y?.(g))},j=!1;return r?j=l[0]===f:j=l.indexOf(f)>-1,C.createElement(ne,q({},S,{prefixCls:t,key:f,panelKey:f,isActive:j,accordion:r,openMotion:d,expandIcon:v,header:k,collapsible:w,onItemClick:N,destroyInactivePanel:b}),u)})},Ne=function(e,a,t){if(!e)return null;var r=t.prefixCls,p=t.accordion,h=t.collapsible,c=t.destroyInactivePanel,l=t.onItemClick,d=t.activeKey,v=t.openMotion,i=t.expandIcon,s=e.key||String(a),u=e.props,k=u.header,x=u.headerClass,m=u.destroyInactivePanel,y=u.collapsible,$=u.onItemClick,S=!1;p?S=d[0]===s:S=d.indexOf(s)>-1;var f=y??h,w=function(j){f!=="disabled"&&(l(j),$?.(j))},b={key:s,panelKey:s,header:k,headerClass:x,isActive:S,prefixCls:r,destroyInactivePanel:m??c,openMotion:v,accordion:p,children:e.props.children,onItemClick:w,expandIcon:i,collapsible:f};return typeof e.type=="string"?e:(Object.keys(b).forEach(function(N){typeof b[N]>"u"&&delete b[N]}),C.cloneElement(e,b))};function _e(n,e,a){return Array.isArray(n)?Pe(n,a):Q(e).map(function(t,r){return Ne(t,r,a)})}function we(n){var e=n;if(!Array.isArray(e)){var a=ie(e);e=a==="number"||a==="string"?[e]:[]}return e.map(function(t){return String(t)})}var ke=C.forwardRef(function(n,e){var a=n.prefixCls,t=a===void 0?"rc-collapse":a,r=n.destroyInactivePanel,p=r===void 0?!1:r,h=n.style,c=n.accordion,l=n.className,d=n.children,v=n.collapsible,i=n.openMotion,s=n.expandIcon,u=n.activeKey,k=n.defaultActiveKey,x=n.onChange,m=n.items,y=K(t,l),$=re([],{value:u,onChange:function(_){return x?.(_)},defaultValue:k,postState:we}),S=J($,2),f=S[0],w=S[1],b=function(_){return w(function(){if(c)return f[0]===_?[]:[_];var g=f.indexOf(_),I=g>-1;return I?f.filter(function(E){return E!==_}):[].concat(se(f),[_])})};le(!d,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var N=_e(m,d,{prefixCls:t,accordion:c,openMotion:i,expandIcon:s,collapsible:v,destroyInactivePanel:p,onItemClick:b,activeKey:f});return C.createElement("div",{ref:e,className:y,style:h,role:c?"tablist":void 0},N)});const G=Object.assign(ke,{Panel:ne});G.Panel;const Ee=P.forwardRef((n,e)=>{const{getPrefixCls:a}=P.useContext(Y),{prefixCls:t,className:r,showArrow:p=!0}=n,h=a("collapse",t),c=K({[`${h}-no-arrow`]:!p},r);return P.createElement(G.Panel,Object.assign({ref:e},n,{prefixCls:h,className:c}))}),Re=Ee,Ae=n=>{const{componentCls:e,contentBg:a,padding:t,headerBg:r,headerPadding:p,collapseHeaderPaddingSM:h,collapseHeaderPaddingLG:c,collapsePanelBorderRadius:l,lineWidth:d,lineType:v,colorBorder:i,colorText:s,colorTextHeading:u,colorTextDisabled:k,fontSizeLG:x,lineHeight:m,lineHeightLG:y,marginSM:$,paddingSM:S,paddingLG:f,paddingXS:w,motionDurationSlow:b,fontSizeIcon:N,contentPadding:j,fontHeight:_,fontHeightLG:g}=n,I=`${R(d)} ${v} ${i}`;return{[e]:Object.assign(Object.assign({},me(n)),{backgroundColor:r,border:I,borderBottom:0,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:I,"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${R(l)} ${R(l)}`}},[`> ${e}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:p,color:u,lineHeight:m,cursor:"pointer",transition:`all ${b}, visibility 0s`,[`> ${e}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${e}-expand-icon`]:{height:_,display:"flex",alignItems:"center",paddingInlineEnd:$},[`${e}-arrow`]:Object.assign(Object.assign({},ge()),{fontSize:N,svg:{transition:`transform ${b}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}},[`${e}-icon-collapsible-only`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:s,backgroundColor:a,borderTop:I,[`& > ${e}-content-box`]:{padding:j},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:h,paddingInlineStart:w,[`> ${e}-expand-icon`]:{marginInlineStart:n.calc(S).sub(w).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:S}}},"&-large":{[`> ${e}-item`]:{fontSize:x,lineHeight:y,[`> ${e}-header`]:{padding:c,paddingInlineStart:t,[`> ${e}-expand-icon`]:{height:g,marginInlineStart:n.calc(f).sub(t).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:f}}},[`${e}-item:last-child`]:{[`> ${e}-content`]:{borderRadius:`0 0 ${R(l)} ${R(l)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:k,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:$}}}}})}},Oe=n=>{const{componentCls:e}=n,a=`> ${e}-item > ${e}-header ${e}-arrow svg`;return{[`${e}-rtl`]:{[a]:{transform:"rotate(180deg)"}}}},Me=n=>{const{componentCls:e,headerBg:a,paddingXXS:t,colorBorder:r}=n;return{[`${e}-borderless`]:{backgroundColor:a,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${r}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{paddingTop:t}}}},Ke=n=>{const{componentCls:e,paddingSM:a}=n;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:a}}}}}},Te=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer}),Be=ce("Collapse",n=>{const e=de(n,{collapseHeaderPaddingSM:`${R(n.paddingXS)} ${R(n.paddingSM)}`,collapseHeaderPaddingLG:`${R(n.padding)} ${R(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[Ae(e),Me(e),Ke(e),Oe(e),ue(e)]},Te),He=P.forwardRef((n,e)=>{const{getPrefixCls:a,direction:t,collapse:r}=P.useContext(Y),{prefixCls:p,className:h,rootClassName:c,style:l,bordered:d=!0,ghost:v,size:i,expandIconPosition:s="start",children:u,expandIcon:k}=n,x=pe(g=>{var I;return(I=i??g)!==null&&I!==void 0?I:"middle"}),m=a("collapse",p),y=a(),[$,S,f]=Be(m),w=P.useMemo(()=>s==="left"?"start":s==="right"?"end":s,[s]),b=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const I=k?k(g):P.createElement(fe,{rotate:g.isActive?90:void 0});return X(I,()=>({className:K(I.props.className,`${m}-arrow`)}))},N=K(`${m}-icon-position-${w}`,{[`${m}-borderless`]:!d,[`${m}-rtl`]:t==="rtl",[`${m}-ghost`]:!!v,[`${m}-${x}`]:x!=="middle"},r?.className,h,c,S,f),j=Object.assign(Object.assign({},he(y)),{motionAppear:!1,leavedClassName:`${m}-content-hidden`}),_=P.useMemo(()=>u?Q(u).map((g,I)=>{var E,B;if(!((E=g.props)===null||E===void 0)&&E.disabled){const z=(B=g.key)!==null&&B!==void 0?B:String(I),{disabled:T,collapsible:A}=g.props,M=Object.assign(Object.assign({},W(g.props,["disabled"])),{key:z,collapsible:A??(T?"disabled":void 0)});return X(g,M)}return g}):null,[u]);return $(P.createElement(G,Object.assign({ref:e,openMotion:j},W(n,["rootClassName"]),{expandIcon:b,prefixCls:m,className:N,style:Object.assign(Object.assign({},r?.style),l)}),_))}),Le=Object.assign(He,{Panel:Re});function De({form:n,recordData:e}){const[a,t]=P.useState([]);return P.useEffect(()=>{if(e){let r=[];n.setFieldsValue({store:e.retail_code,campaign_name:e.campaign_name,date_check_in:e.date_check_in,date_check_out:e.date_check_out,employee_code:e.employee_name,quatity:e.quantity_cate});let p={uid:-1,name:"image.png",status:"done",url:e.images};r.push(p),t(r)}},[e]),o.jsx(o.Fragment,{children:o.jsxs("div",{className:"p-4 pt-6 pb-[58px]",children:[o.jsxs(F,{children:[o.jsx(H,{span:12,children:o.jsx(L,{label:"Khách hàng",name:"store",required:!0,children:o.jsx(D,{})})}),o.jsx(H,{span:12,children:o.jsx(L,{label:"Chiến dịch",name:"campaign_name",required:!0,children:o.jsx(D,{})})})]}),o.jsxs(F,{className:"pt-2",children:[o.jsx(H,{span:12,children:o.jsx(L,{label:"Nhân viên thực hiện",name:"employee_code",required:!0,children:o.jsx(D,{})})}),o.jsx(H,{span:12,children:o.jsx(L,{label:"Số lượng danh mục sản phẩm",name:"quatity",required:!0,children:o.jsx(D,{})})})]}),o.jsx(F,{className:"pt-2",children:o.jsx(H,{span:12,children:o.jsx(L,{label:"Hình ảnh",name:"image",required:!0,children:o.jsx(Ie,{listType:"picture-card",fileList:a})})})})]})})}function ze(n){P.useState(!1);const[e,a]=P.useState([]);e.length>0;const t={};n.recordData?.detail.forEach(l=>{const d=l.category,v=parseInt(l.sum_product);t[d]=(t[d]||0)+v});const r=n.recordData?.category_names.map((l,d)=>{const v=Object.keys(l)[0];return{key:d.toString(),stt:(d+1).toString(),categoryName:Object.values(l)[0],number_product:t[v]||0}}),p=[{title:"STT",dataIndex:"stt"},{title:"Tên sản phẩm",dataIndex:"name_product"},{title:"Số lượng sản phẩm máy chấm",dataIndex:"sum_product"}],h=[{title:"STT",dataIndex:"stt"},{title:"Danh mục sản phẩm",dataIndex:"categoryName"},{title:"Số lượng sản phẩm",dataIndex:"number_product"}],c=n.recordData?.category_names.map((l,d)=>{const v=Object.keys(l)[0];return(n.recordData?.detail.filter(s=>s.category===v)).map((s,u)=>({key:`${d}-${u}`,stt:`${(u+1).toString().padStart(2,"0")}`,name_product:s.product_name,sum_product:s.sum_product.toString(),image:s.images,creation:s.creation}))});return o.jsx(o.Fragment,{children:o.jsx(ve,{columns:h,expandable:{expandedRowRender:(l,d)=>o.jsx(xe,{columns:p,dataSource:c[d],pagination:!1}),rowExpandable:l=>c[l.key].length>0},dataSource:r})})}function Fe(){const[n,e]=P.useState(null),a=Ce(),t=c=>{},[r]=U.useForm(),p=[{key:"1",label:o.jsx("span",{style:{fontWeight:700},children:"Thông tin chung"}),children:o.jsx(De,{form:r,recordData:n})},{key:"2",label:o.jsx("span",{style:{fontWeight:700},children:"Sản phẩm"}),children:o.jsx(ze,{recordData:n})}];P.useEffect(()=>{const c=localStorage.getItem("recordData");c&&e(JSON.parse(c)),localStorage.removeItem("recordData")},[]);const h=()=>n?`${n.retail_code} - ${n.campaign_name}`:"Tiêu đề";return o.jsxs(o.Fragment,{children:[o.jsx(be,{title:h(),icon:o.jsx("p",{onClick:()=>a("/"),className:"mr-2 cursor-pointer",children:o.jsx(ye,{})})}),o.jsx("div",{className:"bg-white  rounded-xl",children:o.jsx(U,{layout:"vertical",form:r,children:o.jsx(Le,{items:p,defaultActiveKey:["1","2"],onChange:t,className:"custom-collapse"})})})]})}function We(){return o.jsxs(o.Fragment,{children:[o.jsx($e,{children:o.jsx("title",{children:"BÁO CÁO"})}),o.jsx(Fe,{})]})}export{We as default};
