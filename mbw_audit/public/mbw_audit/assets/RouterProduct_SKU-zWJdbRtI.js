import{R as He,r as N,i as Xa,c as En,k as xf,C as pc,l as wf,m as bg,n as Ot,o as Og,p as Tg,q as kg,P as Rg,t as o0,v as Mg,w as s0,a as Ef,x as Ng,y as Ag,K as vs,e as Ac,_ as Fc,z as ws,B as Cf,E as Fg,G as za,I as Pf,J as bf,L as hs,M as vc,N as Ig,O as Of,Q as Lg,U as l0,V as Dg,W as Gg,f as u0,X as fs,j as G,Y as Zo,A as Bt,H as $g,Z as Wu,h as Ft,$ as Pr,a0 as Xu,T as c0,a1 as Ku,a2 as br,a3 as Xt,a4 as jg,F as es,s as ve,d as zg}from"./main-iKPneAyp.js";import{E as mc,I as Bg,D as yc,L as Ug,a as Hg,V as d0,r as Vg,u as Wg,p as Xg}from"./xlsx-xmXpk0iU.js";import"./progress-99z1QLjO.js";const Ic=He.createContext({});Ic.Consumer;var Tf=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Kg=a=>{var{prefixCls:e,className:n,avatar:i,title:o,description:l}=a,c=Tf(a,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:h}=N.useContext(Xa),f=h("list",e),p=En(`${f}-item-meta`,n),m=He.createElement("div",{className:`${f}-item-meta-content`},o&&He.createElement("h4",{className:`${f}-item-meta-title`},o),l&&He.createElement("div",{className:`${f}-item-meta-description`},l));return He.createElement("div",Object.assign({},c,{className:p}),i&&He.createElement("div",{className:`${f}-item-meta-avatar`},i),(o||l)&&m)},qg=(a,e)=>{var{prefixCls:n,children:i,actions:o,extra:l,className:c,colStyle:h}=a,f=Tf(a,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:p,itemLayout:m}=N.useContext(Ic),{getPrefixCls:C}=N.useContext(Xa),w=()=>{let k;return N.Children.forEach(i,v=>{typeof v=="string"&&(k=!0)}),k&&N.Children.count(i)>1},_=()=>m==="vertical"?!!l:!w(),y=C("list",n),E=o&&o.length>0&&He.createElement("ul",{className:`${y}-item-action`,key:"actions"},o.map((k,v)=>He.createElement("li",{key:`${y}-item-action-${v}`},k,v!==o.length-1&&He.createElement("em",{className:`${y}-item-action-split`})))),P=p?"div":"li",T=He.createElement(P,Object.assign({},f,p?{}:{ref:e},{className:En(`${y}-item`,{[`${y}-item-no-flex`]:!_()},c)}),m==="vertical"&&l?[He.createElement("div",{className:`${y}-item-main`,key:"content"},i,E),He.createElement("div",{className:`${y}-item-extra`,key:"extra"},l)]:[i,E,xf(l,{key:"extra"})]);return p?He.createElement(pc,{ref:e,flex:1,style:h},T):T},kf=N.forwardRef(qg);kf.Meta=Kg;const Yg=kf,Qg=a=>{const{listBorderedCls:e,componentCls:n,paddingLG:i,margin:o,itemPaddingSM:l,itemPaddingLG:c,marginLG:h,borderRadiusLG:f}=a;return{[`${e}`]:{border:`${Ot(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderRadius:f,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${Ot(o)} ${Ot(h)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},Jg=a=>{const{componentCls:e,screenSM:n,screenMD:i,marginLG:o,marginSM:l,margin:c}=a;return{[`@media screen and (max-width:${i}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:l}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:a.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${Ot(c)}`}}}}}},Zg=a=>{const{componentCls:e,antCls:n,controlHeight:i,minHeight:o,paddingSM:l,marginLG:c,padding:h,itemPadding:f,colorPrimary:p,itemPaddingSM:m,itemPaddingLG:C,paddingXS:w,margin:_,colorText:y,colorTextDescription:E,motionDurationSlow:P,lineWidth:T,headerBg:k,footerBg:v,emptyTextPadding:x,metaMarginBottom:b,avatarMarginRight:R,titleMarginBottom:B,descriptionFontSize:O}=a,$={};return["start","center","end"].forEach(M=>{$[`&-align-${M}`]={textAlign:M}}),{[`${e}`]:Object.assign(Object.assign({},Og(a)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:k},[`${e}-footer`]:{background:v},[`${e}-header, ${e}-footer`]:{paddingBlock:l},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:c},$),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:f,color:y,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:R},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:y},[`${e}-item-meta-title`]:{margin:`0 0 ${Ot(a.marginXXS)} 0`,color:y,fontSize:a.fontSize,lineHeight:a.lineHeight,"> a":{color:y,transition:`all ${P}`,"&:hover":{color:p}}},[`${e}-item-meta-description`]:{color:E,fontSize:O,lineHeight:a.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:a.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Ot(w)}`,color:E,fontSize:a.fontSize,lineHeight:a.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:T,height:a.calc(a.fontHeight).sub(a.calc(a.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:a.colorSplit}}},[`${e}-empty`]:{padding:`${Ot(h)} 0`,color:E,fontSize:a.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:x,color:a.colorTextDisabled,fontSize:a.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:_,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:c},[`${e}-item-meta`]:{marginBlockEnd:b,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:B,color:y,fontSize:a.fontSizeLG,lineHeight:a.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:h,marginInlineStart:"auto","> li":{padding:`0 ${Ot(h)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${Ot(a.lineWidth)} ${a.lineType} ${a.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${Ot(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${Ot(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${Ot(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:C},[`${e}-sm ${e}-item`]:{padding:m},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},e2=a=>({contentWidth:220,itemPadding:`${Ot(a.paddingContentVertical)} 0`,itemPaddingSM:`${Ot(a.paddingContentVerticalSM)} ${Ot(a.paddingContentHorizontal)}`,itemPaddingLG:`${Ot(a.paddingContentVerticalLG)} ${Ot(a.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:a.padding,metaMarginBottom:a.padding,avatarMarginRight:a.padding,titleMarginBottom:a.paddingSM,descriptionFontSize:a.fontSize}),t2=wf("List",a=>{const e=bg(a,{listBorderedCls:`${a.componentCls}-bordered`,minHeight:a.controlHeightLG});return[Zg(e),Qg(e),Jg(e)]},e2);var r2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function _c(a){var e,{pagination:n=!1,prefixCls:i,bordered:o=!1,split:l=!0,className:c,rootClassName:h,style:f,children:p,itemLayout:m,loadMore:C,grid:w,dataSource:_=[],size:y,header:E,footer:P,loading:T=!1,rowKey:k,renderItem:v,locale:x}=a,b=r2(a,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const R=n&&typeof n=="object"?n:{},[B,O]=N.useState(R.defaultCurrent||1),[$,M]=N.useState(R.defaultPageSize||10),{getPrefixCls:D,renderEmpty:X,direction:W,list:Z}=N.useContext(Xa),K={current:1,total:0},se=$e=>(ze,pt)=>{var Dt;O(ze),M(pt),n&&n[$e]&&((Dt=n?.[$e])===null||Dt===void 0||Dt.call(n,ze,pt))},de=se("onChange"),me=se("onShowSizeChange"),Te=($e,ze)=>{if(!v)return null;let pt;return typeof k=="function"?pt=k($e):k?pt=$e[k]:pt=$e.key,pt||(pt=`list-item-${ze}`),N.createElement(N.Fragment,{key:pt},v($e,ze))},le=()=>!!(C||n||P),J=D("list",i),[he,ke,we]=t2(J);let qe=T;typeof qe=="boolean"&&(qe={spinning:qe});const Ae=qe&&qe.spinning,F=Tg(y);let V="";switch(F){case"large":V="lg";break;case"small":V="sm";break}const re=En(J,{[`${J}-vertical`]:m==="vertical",[`${J}-${V}`]:V,[`${J}-split`]:l,[`${J}-bordered`]:o,[`${J}-loading`]:Ae,[`${J}-grid`]:!!w,[`${J}-something-after-last-item`]:le(),[`${J}-rtl`]:W==="rtl"},Z?.className,c,h,ke,we),ge=kg(K,{total:_.length,current:B,pageSize:$},n||{}),pe=Math.ceil(ge.total/ge.pageSize);ge.current>pe&&(ge.current=pe);const Le=n?N.createElement("div",{className:En(`${J}-pagination`,`${J}-pagination-align-${(e=ge?.align)!==null&&e!==void 0?e:"end"}`)},N.createElement(Rg,Object.assign({},ge,{onChange:de,onShowSizeChange:me}))):null;let Me=o0(_);n&&_.length>(ge.current-1)*ge.pageSize&&(Me=o0(_).splice((ge.current-1)*ge.pageSize,ge.pageSize));const It=Object.keys(w||{}).some($e=>["xs","sm","md","lg","xl","xxl"].includes($e)),Fe=Mg(It),Tt=N.useMemo(()=>{for(let $e=0;$e<s0.length;$e+=1){const ze=s0[$e];if(Fe[ze])return ze}},[Fe]),Ye=N.useMemo(()=>{if(!w)return;const $e=Tt&&w[Tt]?w[Tt]:w.column;if($e)return{width:`${100/$e}%`,maxWidth:`${100/$e}%`}},[w?.column,Tt]);let Ie=Ae&&N.createElement("div",{style:{minHeight:53}});if(Me.length>0){const $e=Me.map((ze,pt)=>Te(ze,pt));Ie=w?N.createElement(Ef,{gutter:w.gutter},N.Children.map($e,ze=>N.createElement("div",{key:ze?.key,style:Ye},ze))):N.createElement("ul",{className:`${J}-items`},$e)}else!p&&!Ae&&(Ie=N.createElement("div",{className:`${J}-empty-text`},x&&x.emptyText||X?.("List")||N.createElement(Ng,{componentName:"List"})));const lt=ge.position||"bottom",Lt=N.useMemo(()=>({grid:w,itemLayout:m}),[JSON.stringify(w),m]);return he(N.createElement(Ic.Provider,{value:Lt},N.createElement("div",Object.assign({style:Object.assign(Object.assign({},Z?.style),f),className:re},b),(lt==="top"||lt==="both")&&Le,E&&N.createElement("div",{className:`${J}-header`},E),N.createElement(Ag,Object.assign({},qe),Ie,p),P&&N.createElement("div",{className:`${J}-footer`},P),C||(lt==="bottom"||lt==="both")&&Le)))}_c.Item=Yg;var n2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const i2={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},a2=N.forwardRef((a,e)=>{const n=p=>{const{keyCode:m}=p;m===vs.ENTER&&p.preventDefault()},i=p=>{const{keyCode:m}=p,{onClick:C}=a;m===vs.ENTER&&C&&C()},{style:o,noStyle:l,disabled:c}=a,h=n2(a,["style","noStyle","disabled"]);let f={};return l||(f=Object.assign({},i2)),c&&(f.pointerEvents="none"),f=Object.assign(Object.assign({},f),o),N.createElement("div",Object.assign({role:"button",tabIndex:0,ref:e},h,{onKeyDown:n,onKeyUp:i,style:f}))}),h0=a2;var o2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const s2=o2;var l2=function(e,n){return N.createElement(Ac,Fc({},e,{ref:n,icon:s2}))};const u2=N.forwardRef(l2);var c2=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<a.rangeCount;i++)n.push(a.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return a.removeAllRanges(),function(){a.type==="Caret"&&a.removeAllRanges(),a.rangeCount||n.forEach(function(o){a.addRange(o)}),e&&e.focus()}},d2=c2,f0={"text/plain":"Text","text/html":"Url",default:"Text"},h2="Copy to clipboard: #{key}, Enter";function f2(a){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,e)}function g2(a,e){var n,i,o,l,c,h,f=!1;e||(e={}),n=e.debug||!1;try{o=d2(),l=document.createRange(),c=document.getSelection(),h=document.createElement("span"),h.textContent=a,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(m){if(m.stopPropagation(),e.format)if(m.preventDefault(),typeof m.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=f0[e.format]||f0.default;window.clipboardData.setData(C,a)}else m.clipboardData.clearData(),m.clipboardData.setData(e.format,a);e.onCopy&&(m.preventDefault(),e.onCopy(m.clipboardData))}),document.body.appendChild(h),l.selectNodeContents(h),c.addRange(l);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");f=!0}catch(m){n&&console.error("unable to copy using execCommand: ",m),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",a),e.onCopy&&e.onCopy(window.clipboardData),f=!0}catch(C){n&&console.error("unable to copy using clipboardData: ",C),n&&console.error("falling back to prompt"),i=f2("message"in e?e.message:h2),window.prompt(i,a)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(l):c.removeAllRanges()),h&&document.body.removeChild(h),o()}return f}var p2=g2;const v2=ws(p2);var m2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const y2=m2;var _2=function(e,n){return N.createElement(Ac,Fc({},e,{ref:n,icon:y2}))};const S2=N.forwardRef(_2),x2=(a,e,n,i)=>{const{titleMarginBottom:o,fontWeightStrong:l}=i;return{marginBottom:o,color:n,fontWeight:l,fontSize:a,lineHeight:e}},w2=a=>{const e=[1,2,3,4,5],n={};return e.forEach(i=>{n[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=x2(a[`fontSizeHeading${i}`],a[`lineHeightHeading${i}`],a.colorTextHeading,a)}),n},E2=a=>{const{componentCls:e}=a;return{"a&, a":Object.assign(Object.assign({},Cf(a)),{textDecoration:a.linkDecoration,"&:active, &:hover":{textDecoration:a.linkHoverDecoration},[`&[disabled], &${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:a.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},C2=a=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Fg[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:a.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),P2=a=>{const{componentCls:e,paddingSM:n}=a,i=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:a.calc(a.paddingSM).mul(-1).equal(),marginTop:a.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${Ot(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:a.calc(a.marginXS).add(2).equal(),insetBlockEnd:a.marginXS,color:a.colorTextDescription,fontWeight:"normal",fontSize:a.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},b2=a=>({[`${a.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:a.colorSuccess}},[`${a.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),O2=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),T2=a=>{const{componentCls:e,titleMarginTop:n}=a;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:a.colorText,wordBreak:"break-word",lineHeight:a.lineHeight,[`&${e}-secondary`]:{color:a.colorTextDescription},[`&${e}-success`]:{color:a.colorSuccess},[`&${e}-warning`]:{color:a.colorWarning},[`&${e}-danger`]:{color:a.colorError,"a&:active, a&:focus":{color:a.colorErrorActive},"a&:hover":{color:a.colorErrorHover}},[`&${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},w2(a)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),C2(a)),E2(a)),{[`
        ${e}-expand,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Cf(a)),{marginInlineStart:a.marginXXS})}),P2(a)),b2(a)),O2()),{"&-rtl":{direction:"rtl"}})}},k2=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Rf=wf("Typography",a=>[T2(a)],k2),R2=a=>{const{prefixCls:e,"aria-label":n,className:i,style:o,direction:l,maxLength:c,autoSize:h=!0,value:f,onSave:p,onCancel:m,onEnd:C,component:w,enterIcon:_=N.createElement(S2,null)}=a,y=N.useRef(null),E=N.useRef(!1),P=N.useRef(),[T,k]=N.useState(f);N.useEffect(()=>{k(f)},[f]),N.useEffect(()=>{if(y.current&&y.current.resizableTextArea){const{textArea:K}=y.current.resizableTextArea;K.focus();const{length:se}=K.value;K.setSelectionRange(se,se)}},[]);const v=K=>{let{target:se}=K;k(se.value.replace(/[\n\r]/g,""))},x=()=>{E.current=!0},b=()=>{E.current=!1},R=K=>{let{keyCode:se}=K;E.current||(P.current=se)},B=()=>{p(T.trim())},O=K=>{let{keyCode:se,ctrlKey:de,altKey:me,metaKey:Te,shiftKey:le}=K;P.current===se&&!E.current&&!de&&!me&&!Te&&!le&&(se===vs.ENTER?(B(),C?.()):se===vs.ESC&&m())},$=()=>{B()},M=w?`${e}-${w}`:"",[D,X,W]=Rf(e),Z=En(e,`${e}-edit-content`,{[`${e}-rtl`]:l==="rtl"},i,M,X,W);return D(N.createElement("div",{className:Z,style:o},N.createElement(za,{ref:y,maxLength:c,value:T,onChange:v,onKeyDown:R,onKeyUp:O,onCompositionStart:x,onCompositionEnd:b,onBlur:$,"aria-label":n,rows:1,autoSize:h}),_!==null?xf(_,{className:`${e}-edit-content-confirm`}):null))},M2=R2;function qu(a,e){return N.useMemo(()=>{const n=!!a;return[n,Object.assign(Object.assign({},e),n&&typeof a=="object"?a:null)]},[a])}const N2=(a,e)=>{const n=N.useRef(!1);N.useEffect(()=>{n.current?a():n.current=!0},e)};var A2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const F2=N.forwardRef((a,e)=>{const{prefixCls:n,component:i="article",className:o,rootClassName:l,setContentRef:c,children:h,direction:f,style:p}=a,m=A2(a,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:C,direction:w,typography:_}=N.useContext(Xa),y=f??w;let E=e;c&&(E=Pf(e,c));const P=C("typography",n),[T,k,v]=Rf(P),x=En(P,_?.className,{[`${P}-rtl`]:y==="rtl"},o,l,k,v),b=Object.assign(Object.assign({},_?.style),p);return T(N.createElement(i,Object.assign({className:x,style:b,ref:E},m),h))}),Mf=F2;function Nf(a){const e=typeof a;return e==="string"||e==="number"}function I2(a){let e=0;return a.forEach(n=>{Nf(n)?e+=String(n).length:e+=1}),e}function Yu(a,e){let n=0;const i=[];for(let o=0;o<a.length;o+=1){if(n===e)return i;const l=a[o],h=Nf(l)?String(l).length:1,f=n+h;if(f>e){const p=e-n;return i.push(String(l).slice(0,p)),i}i.push(l),n=f}return a}const L2=0,ts=1,g0=2,Qu=3,Ju=4,D2=a=>{let{enabledMeasure:e,children:n,text:i,width:o,fontSize:l,rows:c,onEllipsis:h}=a;const[[f,p,m],C]=N.useState([0,0,0]),[w,_]=N.useState(0),[y,E]=N.useState(L2),[P,T]=N.useState(0),k=N.useRef(null),v=N.useRef(null),x=N.useMemo(()=>bf(i),[i]),b=N.useMemo(()=>I2(x),[x]),R=N.useMemo(()=>!e||y!==Qu?w&&y!==Ju&&e?n(Yu(x,w),w<b):n(x,!1):n(Yu(x,p),p<b),[e,y,n,x,p,b]);hs(()=>{e&&o&&l&&b&&(E(ts),C([0,Math.ceil(b/2),b]))},[e,o,l,i,b,c]),hs(()=>{var M;y===ts&&T(((M=k.current)===null||M===void 0?void 0:M.offsetHeight)||0)},[y]),hs(()=>{var M,D;if(P){if(y===ts){const X=((M=v.current)===null||M===void 0?void 0:M.offsetHeight)||0,W=c*P;X<=W?(E(Ju),h(!1)):E(g0)}else if(y===g0)if(f!==m){const X=((D=v.current)===null||D===void 0?void 0:D.offsetHeight)||0,W=c*P;let Z=f,K=m;f===m-1?K=f:X<=W?Z=p:K=p;const se=Math.ceil((Z+K)/2);C([Z,se,K])}else E(Qu),_(p),h(!0)}},[y,f,m,c,P]);const B={width:o,whiteSpace:"normal",margin:0,padding:0},O=(M,D,X)=>N.createElement("span",{"aria-hidden":!0,ref:D,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(l/2)*2},X)},M),$=(M,D)=>{const X=Yu(x,M);return O(n(X,!0),D,B)};return N.createElement(N.Fragment,null,R,e&&y!==Qu&&y!==Ju&&N.createElement(N.Fragment,null,O("lg",k,{wordBreak:"keep-all",whiteSpace:"nowrap"}),y===ts?O(n(x,!1),v,B):$(p,v)))},G2=D2,$2=a=>{let{enabledEllipsis:e,isEllipsis:n,children:i,tooltipProps:o}=a;return!o?.title||!e?i:N.createElement(vc,Object.assign({open:n?void 0:!1},o),i)},j2=$2;var z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function B2(a,e){let{mark:n,code:i,underline:o,delete:l,strong:c,keyboard:h,italic:f}=a,p=e;function m(C,w){w&&(p=N.createElement(C,{},p))}return m("strong",c),m("u",o),m("del",l),m("code",i),m("mark",n),m("kbd",h),m("i",f),p}function rs(a,e,n){return a===!0||a===void 0?e:a||n&&e}function p0(a){return a===!1?[!1,!1]:Array.isArray(a)?a:[a]}const U2="...",H2=N.forwardRef((a,e)=>{var n,i,o;const{prefixCls:l,className:c,style:h,type:f,disabled:p,children:m,ellipsis:C,editable:w,copyable:_,component:y,title:E}=a,P=z2(a,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:T,direction:k}=N.useContext(Xa),[v]=Ig("Text"),x=N.useRef(null),b=N.useRef(null),R=T("typography",l),B=Of(P,["mark","code","delete","underline","strong","keyboard","italic"]),[O,$]=qu(w),[M,D]=Lg(!1,{value:$.editing}),{triggerType:X=["icon"]}=$,W=ae=>{var _e;ae&&((_e=$.onStart)===null||_e===void 0||_e.call($)),D(ae)};N2(()=>{var ae;M||(ae=b.current)===null||ae===void 0||ae.focus()},[M]);const Z=ae=>{ae?.preventDefault(),W(!0)},K=ae=>{var _e;(_e=$.onChange)===null||_e===void 0||_e.call($,ae),W(!1)},se=()=>{var ae;(ae=$.onCancel)===null||ae===void 0||ae.call($),W(!1)},[de,me]=qu(_),[Te,le]=N.useState(!1),J=N.useRef(null),he={};me.format&&(he.format=me.format);const ke=()=>{J.current&&clearTimeout(J.current)},we=ae=>{var _e;ae?.preventDefault(),ae?.stopPropagation(),v2(me.text||String(m)||"",he),le(!0),ke(),J.current=setTimeout(()=>{le(!1)},3e3),(_e=me.onCopy)===null||_e===void 0||_e.call(me,ae)};N.useEffect(()=>ke,[]);const[qe,Ae]=N.useState(!1),[F,V]=N.useState(!1),[re,ge]=N.useState(!1),[pe,Le]=N.useState(!1),[Me,It]=N.useState(!1),[Fe,Tt]=N.useState(!0),[Ye,Ie]=qu(C,{expandable:!1}),lt=Ye&&!re,{rows:Lt=1}=Ie,$e=N.useMemo(()=>!lt||Ie.suffix!==void 0||Ie.onEllipsis||Ie.expandable||O||de,[lt,Ie,O,de]);hs(()=>{Ye&&!$e&&(Ae(l0("webkitLineClamp")),V(l0("textOverflow")))},[$e,Ye]);const ze=N.useMemo(()=>$e?!1:Lt===1?F:qe,[$e,F,qe]),pt=lt&&(ze?Me:pe),Dt=lt&&Lt===1&&ze,an=lt&&Lt>1&&ze,on=ae=>{var _e;ge(!0),(_e=Ie.onExpand)===null||_e===void 0||_e.call(Ie,ae)},[Nn,ta]=N.useState(0),[An,ra]=N.useState(0),li=(ae,_e)=>{let{offsetWidth:mt}=ae;var kt;ta(mt),ra(parseInt((kt=window.getComputedStyle)===null||kt===void 0?void 0:kt.call(window,_e).fontSize,10)||0)},na=ae=>{var _e;Le(ae),pe!==ae&&((_e=Ie.onEllipsis)===null||_e===void 0||_e.call(Ie,ae))};N.useEffect(()=>{const ae=x.current;if(Ye&&ze&&ae){const _e=an?ae.offsetHeight<ae.scrollHeight:ae.offsetWidth<ae.scrollWidth;Me!==_e&&It(_e)}},[Ye,ze,m,an,Fe,Nn]),N.useEffect(()=>{const ae=x.current;if(typeof IntersectionObserver>"u"||!ae||!ze||!lt)return;const _e=new IntersectionObserver(()=>{Tt(!!ae.offsetParent)});return _e.observe(ae),()=>{_e.disconnect()}},[ze,lt]);let rr={};Ie.tooltip===!0?rr={title:(n=$.text)!==null&&n!==void 0?n:m}:N.isValidElement(Ie.tooltip)?rr={title:Ie.tooltip}:typeof Ie.tooltip=="object"?rr=Object.assign({title:(i=$.text)!==null&&i!==void 0?i:m},Ie.tooltip):rr={title:Ie.tooltip};const Ht=N.useMemo(()=>{const ae=_e=>["string","number"].includes(typeof _e);if(!(!Ye||ze)){if(ae($.text))return $.text;if(ae(m))return m;if(ae(E))return E;if(ae(rr.title))return rr.title}},[Ye,ze,E,rr.title,pt]);if(M)return N.createElement(M2,{value:(o=$.text)!==null&&o!==void 0?o:typeof m=="string"?m:"",onSave:K,onCancel:se,onEnd:$.onEnd,prefixCls:R,className:c,style:h,direction:k,component:y,maxLength:$.maxLength,autoSize:$.autoSize,enterIcon:$.enterIcon});const sn=()=>{const{expandable:ae,symbol:_e}=Ie;if(!ae)return null;let mt;return _e?mt=_e:mt=v?.expand,N.createElement("a",{key:"expand",className:`${R}-expand`,onClick:on,"aria-label":v?.expand},mt)},ia=()=>{if(!O)return;const{icon:ae,tooltip:_e}=$,mt=bf(_e)[0]||v?.edit,kt=typeof mt=="string"?mt:"";return X.includes("icon")?N.createElement(vc,{key:"edit",title:_e===!1?"":mt},N.createElement(h0,{ref:b,className:`${R}-edit`,onClick:Z,"aria-label":kt},ae||N.createElement(mc,{role:"button"}))):null},ui=()=>{if(!de)return null;const{tooltips:ae,icon:_e}=me,mt=p0(ae),kt=p0(_e),nr=Te?rs(mt[1],v?.copied):rs(mt[0],v?.copy),ci=Te?v?.copied:v?.copy,Vt=typeof nr=="string"?nr:ci;return N.createElement(vc,{key:"copy",title:nr},N.createElement(h0,{className:En(`${R}-copy`,{[`${R}-copy-success`]:Te,[`${R}-copy-icon-only`]:m==null}),onClick:we,"aria-label":Vt},Te?rs(kt[1],N.createElement(Gg,null),!0):rs(kt[0],N.createElement(u2,null),!0)))},aa=ae=>[ae&&sn(),ia(),ui()],oa=ae=>[ae&&N.createElement("span",{"aria-hidden":!0,key:"ellipsis"},U2),Ie.suffix,aa(ae)];return N.createElement(Dg,{onResize:li,disabled:!lt},ae=>N.createElement(j2,{tooltipProps:rr,enabledEllipsis:lt,isEllipsis:pt},N.createElement(Mf,Object.assign({className:En({[`${R}-${f}`]:f,[`${R}-disabled`]:p,[`${R}-ellipsis`]:Ye,[`${R}-single-line`]:lt&&Lt===1,[`${R}-ellipsis-single-line`]:Dt,[`${R}-ellipsis-multiple-line`]:an},c),prefixCls:l,style:Object.assign(Object.assign({},h),{WebkitLineClamp:an?Lt:void 0}),component:y,ref:Pf(ae,x,e),direction:k,onClick:X.includes("text")?Z:void 0,"aria-label":Ht?.toString(),title:E},B),N.createElement(G2,{enabledMeasure:lt&&!ze,text:m,rows:Lt,width:Nn,fontSize:An,onEllipsis:na},(_e,mt)=>{let kt=_e;return _e.length&&mt&&Ht&&(kt=N.createElement("span",{key:"show-content","aria-hidden":!0},kt)),B2(a,N.createElement(N.Fragment,null,kt,oa(mt)))}))))}),Es=H2;var V2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const W2=N.forwardRef((a,e)=>{var{ellipsis:n,rel:i}=a,o=V2(a,["ellipsis","rel"]);const l=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete l.navigate,N.createElement(Es,Object.assign({},l,{ref:e,ellipsis:!!n,component:"a"}))}),X2=W2,K2=N.forwardRef((a,e)=>N.createElement(Es,Object.assign({ref:e},a,{component:"div"}))),q2=K2;var Y2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Q2=(a,e)=>{var{ellipsis:n}=a,i=Y2(a,["ellipsis"]);const o=N.useMemo(()=>n&&typeof n=="object"?Of(n,["expandable","rows"]):n,[n]);return N.createElement(Es,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},J2=N.forwardRef(Q2);var Z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const ep=[1,2,3,4,5],tp=N.forwardRef((a,e)=>{const{level:n=1}=a,i=Z2(a,["level"]);let o;return ep.includes(n)?o=`h${n}`:o="h1",N.createElement(Es,Object.assign({ref:e},i,{component:o}))}),rp=tp,Ka=Mf;Ka.Text=J2;Ka.Link=X2;Ka.Title=rp;Ka.Paragraph=q2;const np=Ka,Lc=Bg;Lc.Dragger=yc;Lc.LIST_IGNORE=Ug;const v0=Lc;var ip={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M644.7 669.2a7.92 7.92 0 00-6.5-3.3H594c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.8-5.3 0-12.7-6.5-12.7h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-22.9-31.9zM688 306v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 458H208V148h560v296c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h312c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm402.6-320.8l-192-66.7c-.9-.3-1.7-.4-2.6-.4s-1.8.1-2.6.4l-192 66.7a7.96 7.96 0 00-5.4 7.5v251.1c0 2.5 1.1 4.8 3.1 6.3l192 150.2c1.4 1.1 3.2 1.7 4.9 1.7s3.5-.6 4.9-1.7l192-150.2c1.9-1.5 3.1-3.8 3.1-6.3V538.7c0-3.4-2.2-6.4-5.4-7.5zM826 763.7L688 871.6 550 763.7V577l138-48 138 48v186.7z"}}]},name:"file-protect",theme:"outlined"};const ap=ip;var op=function(e,n){return N.createElement(Ac,Fc({},e,{ref:n,icon:ap}))};const sp=N.forwardRef(op);var Af={exports:{}},Cs={},ms={},Pe={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof u0<"u"?u0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.5",isBrowser:n(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle(o){return a.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var o;return(o=a.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(o){a.glob.Konva=o}};const i=o=>{a.Konva[o.prototype.getClassName()]=o};a._registerNode=i,a.Konva._injectGlobal(a.Konva)})(Pe);var st={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const e=Pe;class n{constructor(x=[1,0,0,1,0,0]){this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]}point(x){var b=this.m;return{x:b[0]*x.x+b[2]*x.y+b[4],y:b[1]*x.x+b[3]*x.y+b[5]}}translate(x,b){return this.m[4]+=this.m[0]*x+this.m[2]*b,this.m[5]+=this.m[1]*x+this.m[3]*b,this}scale(x,b){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=b,this.m[3]*=b,this}rotate(x){var b=Math.cos(x),R=Math.sin(x),B=this.m[0]*b+this.m[2]*R,O=this.m[1]*b+this.m[3]*R,$=this.m[0]*-R+this.m[2]*b,M=this.m[1]*-R+this.m[3]*b;return this.m[0]=B,this.m[1]=O,this.m[2]=$,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(x,b){var R=this.m[0]+this.m[2]*b,B=this.m[1]+this.m[3]*b,O=this.m[2]+this.m[0]*x,$=this.m[3]+this.m[1]*x;return this.m[0]=R,this.m[1]=B,this.m[2]=O,this.m[3]=$,this}multiply(x){var b=this.m[0]*x.m[0]+this.m[2]*x.m[1],R=this.m[1]*x.m[0]+this.m[3]*x.m[1],B=this.m[0]*x.m[2]+this.m[2]*x.m[3],O=this.m[1]*x.m[2]+this.m[3]*x.m[3],$=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],M=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=b,this.m[1]=R,this.m[2]=B,this.m[3]=O,this.m[4]=$,this.m[5]=M,this}invert(){var x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*x,R=-this.m[1]*x,B=-this.m[2]*x,O=this.m[0]*x,$=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=R,this.m[2]=B,this.m[3]=O,this.m[4]=$,this.m[5]=M,this}getMatrix(){return this.m}decompose(){var x=this.m[0],b=this.m[1],R=this.m[2],B=this.m[3],O=this.m[4],$=this.m[5],M=x*B-b*R;let D={x:O,y:$,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||b!=0){var X=Math.sqrt(x*x+b*b);D.rotation=b>0?Math.acos(x/X):-Math.acos(x/X),D.scaleX=X,D.scaleY=M/X,D.skewX=(x*R+b*B)/M,D.skewY=0}else if(R!=0||B!=0){var W=Math.sqrt(R*R+B*B);D.rotation=Math.PI/2-(B>0?Math.acos(-R/W):-Math.acos(R/W)),D.scaleX=M/W,D.scaleY=W,D.skewX=0,D.skewY=(x*R+b*B)/M}return D.rotation=a.Util._getRotation(D.rotation),D}}a.Transform=n;var i="[object Array]",o="[object Number]",l="[object String]",c="[object Boolean]",h=Math.PI/180,f=180/Math.PI,p="#",m="",C="0",w="Konva warning: ",_="Konva error: ",y="rgb(",E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};a.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===i},_isNumber(v){return Object.prototype.toString.call(v)===o&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===l},_isBoolean(v){return Object.prototype.toString.call(v)===c},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;var x=v[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){T.push(v),T.length===1&&k(function(){const x=T;T=[],x.forEach(function(b){b()})})},createCanvasElement(){var v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,x){var b=a.Util.createImageElement();b.onload=function(){x(b)},b.src=v},_rgbToHex(v,x,b){return((1<<24)+(v<<16)+(x<<8)+b).toString(16).slice(1)},_hexToRgb(v){v=v.replace(p,m);var x=parseInt(v,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor(){for(var v=(Math.random()*16777215<<0).toString(16);v.length<6;)v=C+v;return p+v},getRGB(v){var x;return v in E?(x=E[v],{r:x[0],g:x[1],b:x[2]}):v[0]===p?this._hexToRgb(v.substring(1)):v.substr(0,4)===y?(x=P.exec(v.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",a.Util._namedColorToRBA(v)||a.Util._hex3ColorToRGBA(v)||a.Util._hex4ColorToRGBA(v)||a.Util._hex6ColorToRGBA(v)||a.Util._hex8ColorToRGBA(v)||a.Util._rgbColorToRGBA(v)||a.Util._rgbaColorToRGBA(v)||a.Util._hslColorToRGBA(v)},_namedColorToRBA(v){var x=E[v.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];var x=v.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];var x=v.split(/ *, */).map((b,R)=>b.slice(-1)==="%"?R===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[x,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),R=Number(b[0])/360,B=Number(b[1])/100,O=Number(b[2])/100;let $,M,D;if(B===0)return D=O*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};O<.5?$=O*(1+B):$=O+B-O*B;const X=2*O-$,W=[0,0,0];for(let Z=0;Z<3;Z++)M=R+1/3*-(Z-1),M<0&&M++,M>1&&M--,6*M<1?D=X+($-X)*6*M:2*M<1?D=$:3*M<2?D=X+($-X)*(2/3-M)*6:D=X,W[Z]=D*255;return{r:Math.round(W[0]),g:Math.round(W[1]),b:Math.round(W[2]),a:1}}},haveIntersection(v,x){return!(x.x>v.x+v.width||x.x+x.width<v.x||x.y>v.y+v.height||x.y+x.height<v.y)},cloneObject(v){var x={};for(var b in v)this._isPlainObject(v[b])?x[b]=this.cloneObject(v[b]):this._isArray(v[b])?x[b]=this.cloneArray(v[b]):x[b]=v[b];return x},cloneArray(v){return v.slice(0)},degToRad(v){return v*h},radToDeg(v){return v*f},_degToRad(v){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(v)},_radToDeg(v){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(v)},_getRotation(v){return e.Konva.angleDeg?a.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(_+v)},error(v){console.error(_+v)},warn(v){e.Konva.showWarnings&&console.warn(w+v)},each(v,x){for(var b in v)x(b,v[b])},_inRange(v,x,b){return x<=v&&v<b},_getProjectionToSegment(v,x,b,R,B,O){var $,M,D,X=(v-b)*(v-b)+(x-R)*(x-R);if(X==0)$=v,M=x,D=(B-b)*(B-b)+(O-R)*(O-R);else{var W=((B-v)*(b-v)+(O-x)*(R-x))/X;W<0?($=v,M=x,D=(v-B)*(v-B)+(x-O)*(x-O)):W>1?($=b,M=R,D=(b-B)*(b-B)+(R-O)*(R-O)):($=v+W*(b-v),M=x+W*(R-x),D=($-B)*($-B)+(M-O)*(M-O))}return[$,M,D]},_getProjectionToLine(v,x,b){var R=a.Util.cloneObject(v),B=Number.MAX_VALUE;return x.forEach(function(O,$){if(!(!b&&$===x.length-1)){var M=x[($+1)%x.length],D=a.Util._getProjectionToSegment(O.x,O.y,M.x,M.y,v.x,v.y),X=D[0],W=D[1],Z=D[2];Z<B&&(R.x=X,R.y=W,B=Z)}}),R},_prepareArrayForTween(v,x,b){var R,B=[],O=[];if(v.length>x.length){var $=x;x=v,v=$}for(R=0;R<v.length;R+=2)B.push({x:v[R],y:v[R+1]});for(R=0;R<x.length;R+=2)O.push({x:x[R],y:x[R+1]});var M=[];return O.forEach(function(D){var X=a.Util._getProjectionToLine(D,B,b);M.push(X.x),M.push(X.y)}),M},_prepareToStringify(v){var x;v.visitedByCircularReferenceRemoval=!0;for(var b in v)if(v.hasOwnProperty(b)&&v[b]&&typeof v[b]=="object"){if(x=Object.getOwnPropertyDescriptor(v,b),v[b].visitedByCircularReferenceRemoval||a.Util._isElement(v[b]))if(x.configurable)delete v[b];else return null;else if(a.Util._prepareToStringify(v[b])===null)if(x.configurable)delete v[b];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,x){for(var b in x)v[b]=x[b];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){e.Konva.releaseCanvasOnDestroy&&v.forEach(x=>{x.width=0,x.height=0})},drawRoundedRectPath(v,x,b,R){let B=0,O=0,$=0,M=0;typeof R=="number"?B=O=$=M=Math.min(R,x/2,b/2):(B=Math.min(R[0]||0,x/2,b/2),O=Math.min(R[1]||0,x/2,b/2),M=Math.min(R[2]||0,x/2,b/2),$=Math.min(R[3]||0,x/2,b/2)),v.moveTo(B,0),v.lineTo(x-O,0),v.arc(x-O,O,O,Math.PI*3/2,0,!1),v.lineTo(x,b-M),v.arc(x-M,b-M,M,0,Math.PI/2,!1),v.lineTo($,b),v.arc($,b-$,$,Math.PI/2,Math.PI,!1),v.lineTo(0,B),v.arc(B,B,B,Math.PI,Math.PI*3/2,!1)}}})(st);var rt={},be={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.getComponentValidator=ue.getBooleanValidator=ue.getNumberArrayValidator=ue.getFunctionValidator=ue.getStringOrGradientValidator=ue.getStringValidator=ue.getNumberOrAutoValidator=ue.getNumberOrArrayOfNumbersValidator=ue.getNumberValidator=ue.alphaComponent=ue.RGBComponent=void 0;const en=Pe,ut=st;function tn(a){return ut.Util._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||ut.Util._isBoolean(a)?a:Object.prototype.toString.call(a)}function lp(a){return a>255?255:a<0?0:Math.round(a)}ue.RGBComponent=lp;function up(a){return a>1?1:a<1e-4?1e-4:a}ue.alphaComponent=up;function cp(){if(en.Konva.isUnminified)return function(a,e){return ut.Util._isNumber(a)||ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),a}}ue.getNumberValidator=cp;function dp(a){if(en.Konva.isUnminified)return function(e,n){let i=ut.Util._isNumber(e),o=ut.Util._isArray(e)&&e.length==a;return!i&&!o&&ut.Util.warn(tn(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+a+")"),e}}ue.getNumberOrArrayOfNumbersValidator=dp;function hp(){if(en.Konva.isUnminified)return function(a,e){var n=ut.Util._isNumber(a),i=a==="auto";return n||i||ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),a}}ue.getNumberOrAutoValidator=hp;function fp(){if(en.Konva.isUnminified)return function(a,e){return ut.Util._isString(a)||ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),a}}ue.getStringValidator=fp;function gp(){if(en.Konva.isUnminified)return function(a,e){const n=ut.Util._isString(a),i=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return n||i||ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),a}}ue.getStringOrGradientValidator=gp;function pp(){if(en.Konva.isUnminified)return function(a,e){return ut.Util._isFunction(a)||ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),a}}ue.getFunctionValidator=pp;function vp(){if(en.Konva.isUnminified)return function(a,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&a instanceof n||(ut.Util._isArray(a)?a.forEach(function(i){ut.Util._isNumber(i)||ut.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),a}}ue.getNumberArrayValidator=vp;function mp(){if(en.Konva.isUnminified)return function(a,e){var n=a===!0||a===!1;return n||ut.Util.warn(tn(a)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),a}}ue.getBooleanValidator=mp;function yp(a){if(en.Konva.isUnminified)return function(e,n){return e==null||ut.Util.isObject(e)||ut.Util.warn(tn(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+a),e}}ue.getComponentValidator=yp;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const e=st,n=ue;var i="get",o="set";a.Factory={addGetterSetter(l,c,h,f,p){a.Factory.addGetter(l,c,h),a.Factory.addSetter(l,c,f,p),a.Factory.addOverloadedGetterSetter(l,c)},addGetter(l,c,h){var f=i+e.Util._capitalize(c);l.prototype[f]=l.prototype[f]||function(){var p=this.attrs[c];return p===void 0?h:p}},addSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]||a.Factory.overWriteSetter(l,c,h,f)},overWriteSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]=function(m){return h&&m!==void 0&&m!==null&&(m=h.call(this,m,c)),this._setAttr(c,m),f&&f.call(this),this}},addComponentsGetterSetter(l,c,h,f,p){var m=h.length,C=e.Util._capitalize,w=i+C(c),_=o+C(c),y,E;l.prototype[w]=function(){var T={};for(y=0;y<m;y++)E=h[y],T[E]=this.getAttr(c+C(E));return T};var P=(0,n.getComponentValidator)(h);l.prototype[_]=function(T){var k=this.attrs[c],v;f&&(T=f.call(this,T)),P&&P.call(this,T,c);for(v in T)T.hasOwnProperty(v)&&this._setAttr(c+C(v),T[v]);return T||h.forEach(x=>{this._setAttr(c+C(x),void 0)}),this._fireChangeEvent(c,k,T),p&&p.call(this),this},a.Factory.addOverloadedGetterSetter(l,c)},addOverloadedGetterSetter(l,c){var h=e.Util._capitalize(c),f=o+h,p=i+h;l.prototype[c]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(l,c,h,f){e.Util.error("Adding deprecated "+c);var p=i+e.Util._capitalize(c),m=c+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[p]=function(){e.Util.error(m);var C=this.attrs[c];return C===void 0?h:C},a.Factory.addSetter(l,c,f,function(){e.Util.error(m)}),a.Factory.addOverloadedGetterSetter(l,c)},backCompat(l,c){e.Util.each(c,function(h,f){var p=l.prototype[f],m=i+e.Util._capitalize(h),C=o+e.Util._capitalize(h);function w(){p.apply(this,arguments),e.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}l.prototype[h]=w,l.prototype[m]=w,l.prototype[C]=w})},afterSetFilter(){this._filterUpToDate=!1}}})(be);var Tr={},Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.HitContext=Jr.SceneContext=Jr.Context=void 0;const Ff=st,_p=Pe;function Sp(a){var e=[],n=a.length,i=Ff.Util,o,l;for(o=0;o<n;o++)l=a[o],i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),e.push(l);return e}var m0=",",xp="(",wp=")",Ep="([",Cp="])",Pp=";",bp="()",Op="=",y0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Tp=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const kp=100;class Ps{constructor(e){this.canvas=e,_p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var i=this.traceArr,o=i.length,l="",c,h,f,p;for(c=0;c<o;c++)h=i[c],f=h.method,f?(p=h.args,l+=f,e?l+=bp:Ff.Util._isArray(p[0])?l+=Ep+p.join(m0)+Cp:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),l+=xp+p.join(m0)+wp)):(l+=h.property,e||(l+=Op+h.val)),l+=Pp;return l}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,i;n.push(e),i=n.length,i>=kp&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,o,l,c){this._context.arc(e,n,i,o,l,c)}arcTo(e,n,i,o,l){this._context.arcTo(e,n,i,o,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,o,l,c){this._context.bezierCurveTo(e,n,i,o,l,c)}clearRect(e,n,i,o){this._context.clearRect(e,n,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,o){return this._context.createLinearGradient(e,n,i,o)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,o,l,c){return this._context.createRadialGradient(e,n,i,o,l,c)}drawImage(e,n,i,o,l,c,h,f,p){var m=arguments,C=this._context;m.length===3?C.drawImage(e,n,i):m.length===5?C.drawImage(e,n,i,o,l):m.length===9&&C.drawImage(e,n,i,o,l,c,h,f,p)}ellipse(e,n,i,o,l,c,h,f){this._context.ellipse(e,n,i,o,l,c,h,f)}isPointInPath(e,n,i,o){return i?this._context.isPointInPath(i,e,n,o):this._context.isPointInPath(e,n,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,o){this._context.fillRect(e,n,i,o)}strokeRect(e,n,i,o){this._context.strokeRect(e,n,i,o)}fillText(e,n,i,o){o?this._context.fillText(e,n,i,o):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,o){return this._context.getImageData(e,n,i,o)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,o){this._context.rect(e,n,i,o)}roundRect(e,n,i,o,l){this._context.roundRect(e,n,i,o,l)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,o){this._context.quadraticCurveTo(e,n,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,o,l,c){this._context.setTransform(e,n,i,o,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,o){this._context.strokeText(e,n,i,o)}transform(e,n,i,o,l,c){this._context.transform(e,n,i,o,l,c)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=y0.length,i=this.setAttr,o,l,c=function(h){var f=e[h],p;e[h]=function(){return l=Sp(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:h,args:l}),p}};for(o=0;o<n;o++)c(y0[o]);e.setAttr=function(){i.apply(e,arguments);var h=arguments[0],f=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:h,val:f})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}Jr.Context=Ps;Tp.forEach(function(a){Object.defineProperty(Ps.prototype,a,{get(){return this._context[a]},set(e){this._context[a]=e}})});class Rp extends Ps{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):o?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,i.x,i.y);if(o){for(var c=0;c<o.length;c+=2)l.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,o,l=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",c=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,h=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=f.x*p,C=f.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(m),Math.abs(C))),this.setAttr("shadowOffsetX",h.x*m),this.setAttr("shadowOffsetY",h.y*C)}}Jr.SceneContext=Rp;class Mp extends Ps{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const l=e.getStrokeScaleEnabled();if(!l){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),l||this.restore()}}}Jr.HitContext=Mp;Object.defineProperty(Tr,"__esModule",{value:!0});Tr.HitCanvas=Tr.SceneCanvas=Tr.Canvas=void 0;const ys=st,If=Jr,Lf=Pe,Np=be,Ap=ue;var ns;function Fp(){if(ns)return ns;var a=ys.Util.createCanvasElement(),e=a.getContext("2d");return ns=function(){var n=Lf.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i}(),ys.Util.releaseCanvas(a),ns}class bs{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},i=n.pixelRatio||Lf.Konva.pixelRatio||Fp();this.pixelRatio=i,this._canvas=ys.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(o){return ys.Util.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Tr.Canvas=bs;Np.Factory.addGetterSetter(bs,"pixelRatio",void 0,(0,Ap.getNumberValidator)());class Ip extends bs{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new If.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Tr.SceneCanvas=Ip;class Lp extends bs{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new If.HitContext(this),this.setSize(e.width,e.height)}}Tr.HitCanvas=Lp;var Os={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const e=Pe,n=st;a.DD={get isDragging(){var i=!1;return a.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){var i;return a.DD._dragElements.forEach(o=>{i=o.node}),i},_dragElements:new Map,_drag(i){const o=[];a.DD._dragElements.forEach((l,c)=>{const{node:h}=l,f=h.getStage();f.setPointersPositions(i),l.pointerId===void 0&&(l.pointerId=n.Util._getFirstPointerId(i));const p=f._changedPointerPositions.find(w=>w.id===l.pointerId);if(p){if(l.dragStatus!=="dragging"){var m=h.dragDistance(),C=Math.max(Math.abs(p.x-l.startPointerPos.x),Math.abs(p.y-l.startPointerPos.y));if(C<m||(h.startDrag({evt:i}),!h.isDragging()))return}h._setDragPosition(i,l),o.push(h)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:i},!0)})},_endDragBefore(i){const o=[];a.DD._dragElements.forEach(l=>{const{node:c}=l,h=c.getStage();if(i&&h.setPointersPositions(i),!h._changedPointerPositions.find(m=>m.id===l.pointerId))return;(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(a.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,l.dragStatus="stopped");const p=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;p&&o.indexOf(p)===-1&&o.push(p)}),o.forEach(l=>{l.draw()})},_endDragAfter(i){a.DD._dragElements.forEach((o,l)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:i},!0),o.dragStatus!=="dragging"&&a.DD._dragElements.delete(l)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1))})(Os);Object.defineProperty(rt,"__esModule",{value:!0});rt.Node=void 0;const Re=st,qa=be,Fa=Tr,Sn=Pe,mr=Os,gt=ue;var gs="absoluteOpacity",is="allEventListeners",Qr="absoluteTransform",_0="absoluteScale",Xn="canvas",Dp="Change",Gp="children",$p="konva",Sc="listening",S0="mouseenter",x0="mouseleave",w0="set",E0="Shape",ps=" ",C0="stage",xn="transform",jp="Stage",xc="visible",zp=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ps);let Bp=1;class ye{constructor(e){this._id=Bp++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===xn||e===Qr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var i=this._cache.get(e),o=e===xn||e===Qr,l=i===void 0||o&&i.dirty===!0;return l&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const o=n.map(l=>l+"Change.konva").join(ps);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(Xn)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Qr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Xn)){const{scene:e,filter:n,hit:i}=this._cache.get(Xn);Re.Util.releaseCanvas(e,n,i),this._cache.delete(Xn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var o=Math.ceil(n.width||i.width),l=Math.ceil(n.height||i.height),c=n.pixelRatio,h=n.x===void 0?Math.floor(i.x):n.x,f=n.y===void 0?Math.floor(i.y):n.y,p=n.offset||0,m=n.drawBorder||!1,C=n.hitCanvasPixelRatio||1;if(!o||!l){Re.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const w=Math.abs(Math.round(i.x)-h)>.5?1:0,_=Math.abs(Math.round(i.y)-f)>.5?1:0;o+=p*2+w,l+=p*2+_,h-=p,f-=p;var y=new Fa.SceneCanvas({pixelRatio:c,width:o,height:l}),E=new Fa.SceneCanvas({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),P=new Fa.HitCanvas({pixelRatio:C,width:o,height:l}),T=y.getContext(),k=P.getContext();return P.isCache=!0,y.isCache=!0,this._cache.delete(Xn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,E.getContext()._context.imageSmoothingEnabled=!1),T.save(),k.save(),T.translate(-h,-f),k.translate(-h,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(gs),this._clearSelfAndDescendantCache(_0),this.drawScene(y,this),this.drawHit(P,this),this._isUnderCache=!1,T.restore(),k.restore(),m&&(T.save(),T.beginPath(),T.rect(0,0,o,l),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),this._cache.set(Xn,{scene:y,filter:E,hit:P,x:h,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(Xn)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,l=1/0,c=-1/0,h=-1/0,f=this.getAbsoluteTransform(n);return i.forEach(function(p){var m=f.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),{x:o,y:l,width:c-o,height:h-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),i=n.scene,o=n.filter,l=o.getContext(),c,h,f,p;if(e){if(!this._filterUpToDate){var m=i.pixelRatio;o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(c=e.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/m,i.getHeight()/m),h=l.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<c;f++){if(p=e[f],typeof p!="function"){Re.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,h),l.putImageData(h,0,0)}}catch(C){Re.Util.error("Unable to apply filter. "+C.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return i}on(e,n){if(this._cache&&this._cache.delete(is),arguments.length===3)return this._delegate.apply(this,arguments);var i=e.split(ps),o=i.length,l,c,h,f,p;for(l=0;l<o;l++)c=i[l],h=c.split("."),f=h[0],p=h[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:n});return this}off(e,n){var i=(e||"").split(ps),o=i.length,l,c,h,f,p,m;if(this._cache&&this._cache.delete(is),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<o;l++)if(h=i[l],f=h.split("."),p=f[0],m=f[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(c in this.eventListeners)this._off(c,m,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){var o=this;this.on(e,function(l){for(var c=l.target.findAncestors(n,!0,o),h=0;h<c.length;h++)l=Re.Util.cloneObject(l),l.currentTarget=c[h],i.call(c[h],l)})}remove(){return this.isDragging()&&this.stopDrag(),mr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Qr),this._clearSelfAndDescendantCache(gs),this._clearSelfAndDescendantCache(_0),this._clearSelfAndDescendantCache(C0),this._clearSelfAndDescendantCache(xc),this._clearSelfAndDescendantCache(Sc)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Re.Util._capitalize(e);return Re.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,i;if(!e)return this;for(n in e)n!==Gp&&(i=w0+Re.Util._capitalize(n),Re.Util._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Sc,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(xc,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),o=!1;mr.DD._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(o=!0)});var l=!n&&!Sn.Konva.hitOnDragEnabled&&(o||Sn.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,i=0,o,l,c,h;function f(m){for(o=[],l=m.length,c=0;c<l;c++)h=m[c],i++,h.nodeType!==E0&&(o=o.concat(h.getChildren().slice())),h._id===n._id&&(c=l);o.length>0&&o[0].getDepth()<=e&&f(o)}const p=this.getStage();return n.nodeType!==jp&&p&&f(p.getChildren()),i}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(xn),this._clearSelfAndDescendantCache(Qr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),l=new Re.Transform,c=this.offset();return l.m=o.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...o}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(xn);var l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(xn),this._clearSelfAndDescendantCache(Qr),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,i=e.y,o=this.x(),l=this.y();return n!==void 0&&(o+=n),i!==void 0&&(l+=i),this.setPosition({x:o,y:l}),this}_eachAncestorReverse(e,n){var i=[],o=this.getParent(),l,c;if(!(n&&n._id===this._id)){for(i.unshift(this);o&&(!n||o._id!==n._id);)i.unshift(o),o=o.parent;for(l=i.length,c=0;c<l;c++)e(i[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Re.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Re.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Re.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Re.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Re.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Re.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(gs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,i,o,l,c;const h={attrs:{},className:this.getClassName()};for(n in e)i=e[n],c=Re.Util.isObject(i)&&!Re.Util._isPlainObject(i)&&!Re.Util._isArray(i),!c&&(o=typeof this[n]=="function"&&this[n],delete e[n],l=o?o.call(this):null,e[n]=i,l!==i&&(h.attrs[n]=i));return Re.Util._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){var o=[];n&&this._isMatch(e)&&o.push(this);for(var l=this.parent;l;){if(l===i)return o;l._isMatch(e)&&o.push(l),l=l.parent}return o}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),i=n.length,o,l;for(o=0;o<i;o++)if(l=n[o],Re.Util.isValidSelector(l)||(Re.Util.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Re.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Re.Util.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(C0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Qr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Re.Transform,this._eachAncestorReverse(function(o){var l=o.transformsEnabled();l==="all"?n.multiply(o.getTransform()):l==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),n;n=this._cache.get(Qr)||new Re.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,h=this.attrs.offsetY||0;n.translate(o-c,l-h)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(xn,this._getTransform)}_getTransform(){var e,n,i=this._cache.get(xn)||new Re.Transform;i.reset();var o=this.x(),l=this.y(),c=Sn.Konva.getAngle(this.rotation()),h=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,C=this.attrs.offsetX||0,w=this.attrs.offsetY||0;return(o!==0||l!==0)&&i.translate(o,l),c!==0&&i.rotate(c),(p!==0||m!==0)&&i.skew(p,m),(h!==1||f!==1)&&i.scale(h,f),(C!==0||w!==0)&&i.translate(-1*C,-1*w),i.dirty=!1,i}clone(e){var n=Re.Util.cloneObject(this.attrs),i,o,l,c,h;for(i in e)n[i]=e[i];var f=new this.constructor(n);for(i in this.eventListeners)for(o=this.eventListeners[i],l=o.length,c=0;c<l;c++)h=o[c],h.name.indexOf($p)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(h));return f}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(n.x),l=e.y!==void 0?e.y:Math.floor(n.y),c=e.pixelRatio||1,h=new Fa.SceneCanvas({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:c}),f=h.getContext();const p=new Fa.SceneCanvas({width:h.width/h.pixelRatio+Math.abs(o),height:h.height/h.pixelRatio+Math.abs(l),pixelRatio:h.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||l)&&f.translate(-1*o,-1*l),this.drawScene(h,void 0,p),f.restore(),h}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,Re.Util._urlToImage(this.toDataURL(e),function(l){n(l),o?.(l)})}catch(o){i(o)}})}toBlob(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,this.toCanvas(e).toBlob(l=>{n(l),o?.(l)},e?.mimeType,e?.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Sn.Konva.dragDistance}_off(e,n,i){var o=this.eventListeners[e],l,c,h;for(l=0;l<o.length;l++)if(c=o[l].name,h=o[l].handler,(c!=="konva"||n==="konva")&&(!n||c===n)&&(!i||i===h)){if(o.splice(l,1),o.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,n,i){this._fire(e+Dp,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){var n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){var i=this[w0+Re.Util._capitalize(e)];return Re.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Sn.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var i=this.attrs[e];i===n&&!Re.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){var o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,n,i){n&&this.nodeType===E0&&(n.target=this);var o=(e===S0||e===x0)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!o){this._fire(e,n);var l=(e===S0||e===x0)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i,o;const l=(n=this._cache.get(is))!==null&&n!==void 0?n:{};let c=l?.[e];if(c===void 0){c=[];let h=Object.getPrototypeOf(this);for(;h;){const f=(o=(i=h.eventListeners)===null||i===void 0?void 0:i[e])!==null&&o!==void 0?o:[];c.push(...f),h=Object.getPrototypeOf(h)}l[e]=c,this._cache.set(is,l)}return c}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(var o=0;o<i.length;o++)i[o].handler.call(this,n);const l=this.eventListeners[e];if(l)for(var o=0;o<l.length;o++)l[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(i){var l=i._getPointerById(n)||i._changedPointerPositions[0]||o;mr.DD._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-o.x,y:l.y-o.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){mr.DD._dragElements.has(this._id)||this._createDragElement(e);const i=mr.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(i){var o={x:i.x-n.offset.x,y:i.y-n.offset.y},l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,o,e);c?o=c:Re.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const n=mr.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),mr.DD._endDragBefore(e),mr.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=mr.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,i=!n||Sn.Konva.dragButtons.indexOf(e.evt.button)>=0;if(i&&!this.isDragging()){var o=!1;mr.DD._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(o=!0)}),o||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=mr.DD._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",o=n&&n.dragStatus==="ready";i?this.stopDrag():o&&mr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Re.Util.haveIntersection(i,this.getClientRect())}static create(e,n){return Re.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var i=ye.prototype.getClassName.call(e),o=e.children,l,c,h;n&&(e.attrs.container=n),Sn.Konva[i]||(Re.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const f=Sn.Konva[i];if(l=new f(e.attrs),o)for(c=o.length,h=0;h<c;h++)l.add(ye._createNode(o[h]));return l}}rt.Node=ye;ye.prototype.nodeType="Node";ye.prototype._attrsAffectingSize=[];ye.prototype.eventListeners={};ye.prototype.on.call(ye.prototype,zp,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(xn),this._clearSelfAndDescendantCache(Qr)});ye.prototype.on.call(ye.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(xc)});ye.prototype.on.call(ye.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Sc)});ye.prototype.on.call(ye.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(gs)});const Ke=qa.Factory.addGetterSetter;Ke(ye,"zIndex");Ke(ye,"absolutePosition");Ke(ye,"position");Ke(ye,"x",0,(0,gt.getNumberValidator)());Ke(ye,"y",0,(0,gt.getNumberValidator)());Ke(ye,"globalCompositeOperation","source-over",(0,gt.getStringValidator)());Ke(ye,"opacity",1,(0,gt.getNumberValidator)());Ke(ye,"name","",(0,gt.getStringValidator)());Ke(ye,"id","",(0,gt.getStringValidator)());Ke(ye,"rotation",0,(0,gt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(ye,"scale",["x","y"]);Ke(ye,"scaleX",1,(0,gt.getNumberValidator)());Ke(ye,"scaleY",1,(0,gt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(ye,"skew",["x","y"]);Ke(ye,"skewX",0,(0,gt.getNumberValidator)());Ke(ye,"skewY",0,(0,gt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(ye,"offset",["x","y"]);Ke(ye,"offsetX",0,(0,gt.getNumberValidator)());Ke(ye,"offsetY",0,(0,gt.getNumberValidator)());Ke(ye,"dragDistance",null,(0,gt.getNumberValidator)());Ke(ye,"width",0,(0,gt.getNumberValidator)());Ke(ye,"height",0,(0,gt.getNumberValidator)());Ke(ye,"listening",!0,(0,gt.getBooleanValidator)());Ke(ye,"preventDefault",!0,(0,gt.getBooleanValidator)());Ke(ye,"filters",null,function(a){return this._filterUpToDate=!1,a});Ke(ye,"visible",!0,(0,gt.getBooleanValidator)());Ke(ye,"transformsEnabled","all",(0,gt.getStringValidator)());Ke(ye,"size");Ke(ye,"dragBoundFunc");Ke(ye,"draggable",!1,(0,gt.getBooleanValidator)());qa.Factory.backCompat(ye,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Container=void 0;const Vi=be,Zu=rt,Ts=ue;class Qn extends Zu.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(o){e(o)&&i.push(o)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var i=[];return this._descendants(o=>{const l=o._isMatch(e);return l&&i.push(o),!!(l&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const o of i){if(n=e(o),n)return!0;if(o.hasChildren()&&(n=o._descendants(e),n))return!0}return!1}toObject(){var e=Zu.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=Zu.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){var o=this.getLayer(),l=e||o&&o.getCanvas(),c=l&&l.getContext(),h=this._getCanvasCache(),f=h&&h.scene,p=l&&l.isCache;if(!this.isVisible()&&!p)return this;if(f){c.save();var m=this.getAbsoluteTransform(n).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),o=e||i&&i.hitCanvas,l=o&&o.getContext(),c=this._getCanvasCache(),h=c&&c.hit;if(h){l.save();var f=this.getAbsoluteTransform(n).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",o,n);return this}_drawChildren(e,n,i,o){var l,c=n&&n.getContext(),h=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),m=typeof h=="number"&&typeof f=="number"||p;const C=i===this;if(m){c.save();var w=this.getAbsoluteTransform(i),_=w.getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),c.beginPath();let T;if(p)T=p.call(this,c,this);else{var y=this.clipX(),E=this.clipY();c.rect(y||0,E||0,h,f)}c.clip.apply(c,T),_=w.copy().invert().getMatrix(),c.transform(_[0],_[1],_[2],_[3],_[4],_[5])}var P=!C&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";P&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(T){T[e](n,i,o)}),P&&c.restore(),m&&c.restore()}getClientRect(e={}){var n,i=e.skipTransform,o=e.relativeTo,l,c,h,f,p={x:1/0,y:1/0,width:0,height:0},m=this;(n=this.children)===null||n===void 0||n.forEach(function(E){if(E.visible()){var P=E.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(l===void 0?(l=P.x,c=P.y,h=P.x+P.width,f=P.y+P.height):(l=Math.min(l,P.x),c=Math.min(c,P.y),h=Math.max(h,P.x+P.width),f=Math.max(f,P.y+P.height)))}});for(var C=this.find("Shape"),w=!1,_=0;_<C.length;_++){var y=C[_];if(y._isVisible(this)){w=!0;break}}return w&&l!==void 0?p={x:l,y:c,width:h-l,height:f-c}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,o)}}Yn.Container=Qn;Vi.Factory.addComponentsGetterSetter(Qn,"clip",["x","y","width","height"]);Vi.Factory.addGetterSetter(Qn,"clipX",void 0,(0,Ts.getNumberValidator)());Vi.Factory.addGetterSetter(Qn,"clipY",void 0,(0,Ts.getNumberValidator)());Vi.Factory.addGetterSetter(Qn,"clipWidth",void 0,(0,Ts.getNumberValidator)());Vi.Factory.addGetterSetter(Qn,"clipHeight",void 0,(0,Ts.getNumberValidator)());Vi.Factory.addGetterSetter(Qn,"clipFunc");var Df={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.releaseCapture=sr.setPointerCapture=sr.hasPointerCapture=sr.createEvent=sr.getCapturedShape=void 0;const Up=Pe,Ha=new Map,Gf=Up.Konva._global.PointerEvent!==void 0;function Hp(a){return Ha.get(a)}sr.getCapturedShape=Hp;function Dc(a){return{evt:a,pointerId:a.pointerId}}sr.createEvent=Dc;function Vp(a,e){return Ha.get(a)===e}sr.hasPointerCapture=Vp;function Wp(a,e){$f(a),e.getStage()&&(Ha.set(a,e),Gf&&e._fire("gotpointercapture",Dc(new PointerEvent("gotpointercapture"))))}sr.setPointerCapture=Wp;function $f(a,e){const n=Ha.get(a);if(!n)return;const i=n.getStage();i&&i.content,Ha.delete(a),Gf&&n._fire("lostpointercapture",Dc(new PointerEvent("lostpointercapture")))}sr.releaseCapture=$f;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const e=st,n=be,i=Yn,o=Pe,l=Tr,c=Os,h=Pe,f=sr;var p="Stage",m="string",C="px",w="mouseout",_="mouseleave",y="mouseover",E="mouseenter",P="mousemove",T="mousedown",k="mouseup",v="pointermove",x="pointerdown",b="pointerup",R="pointercancel",B="lostpointercapture",O="pointerout",$="pointerleave",M="pointerover",D="pointerenter",X="contextmenu",W="touchstart",Z="touchend",K="touchmove",se="touchcancel",de="wheel",me=5,Te=[[E,"_pointerenter"],[T,"_pointerdown"],[P,"_pointermove"],[k,"_pointerup"],[_,"_pointerleave"],[W,"_pointerdown"],[K,"_pointermove"],[Z,"_pointerup"],[se,"_pointercancel"],[y,"_pointerover"],[de,"_wheel"],[X,"_contextmenu"],[x,"_pointerdown"],[v,"_pointermove"],[b,"_pointerup"],[R,"_pointercancel"],[B,"_lostpointercapture"]];const le={mouse:{[O]:w,[$]:_,[M]:y,[D]:E,[v]:P,[x]:T,[b]:k,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O]:"touchout",[$]:"touchleave",[M]:"touchover",[D]:"touchenter",[v]:K,[x]:W,[b]:Z,[R]:se,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O]:O,[$]:$,[M]:M,[D]:D,[v]:v,[x]:x,[b]:b,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},J=Ae=>Ae.indexOf("pointer")>=0?"pointer":Ae.indexOf("touch")>=0?"touch":"mouse",he=Ae=>{const F=J(Ae);if(F==="pointer")return o.Konva.pointerEventsEnabled&&le.pointer;if(F==="touch")return le.touch;if(F==="mouse")return le.mouse};function ke(Ae={}){return(Ae.clipFunc||Ae.clipWidth||Ae.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ae}const we="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class qe extends i.Container{constructor(F){super(ke(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ke(this.attrs)}),this._checkVisibility()}_validateAdd(F){const V=F.getType()==="Layer",re=F.getType()==="FastLayer";V||re||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===m){if(F.charAt(0)==="."){var V=F.slice(1);F=document.getElementsByClassName(V)[0]}else{var re;F.charAt(0)!=="#"?re=F:re=F.slice(1),F=document.getElementById(re)}if(!F)throw"Can not find container in document with id "+re}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var F=this.children,V=F.length,re;for(re=0;re<V;re++)F[re].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,F)}destroy(){super.destroy();var F=this.content;F&&e.Util._isInDocument(F)&&this.container().removeChild(F);var V=a.stages.indexOf(this);return V>-1&&a.stages.splice(V,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(e.Util.warn(we),null)}_getPointerById(F){return this._pointerPositions.find(V=>V.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();var V=new l.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),re=V.getContext()._context,ge=this.children;return(F.x||F.y)&&re.translate(-1*F.x,-1*F.y),ge.forEach(function(pe){if(pe.isVisible()){var Le=pe._toKonvaCanvas(F);re.drawImage(Le._canvas,F.x,F.y,Le.getWidth()/Le.getPixelRatio(),Le.getHeight()/Le.getPixelRatio())}}),V}getIntersection(F){if(!F)return null;var V=this.children,re=V.length,ge=re-1,pe;for(pe=ge;pe>=0;pe--){const Le=V[pe].getIntersection(F);if(Le)return Le}return null}_resizeDOM(){var F=this.width(),V=this.height();this.content&&(this.content.style.width=F+C,this.content.style.height=V+C),this.bufferCanvas.setSize(F,V),this.bufferHitCanvas.setSize(F,V),this.children.forEach(re=>{re.setSize({width:F,height:V}),re.draw()})}add(F,...V){if(arguments.length>1){for(var re=0;re<arguments.length;re++)this.add(arguments[re]);return this}super.add(F);var ge=this.children.length;return ge>me&&e.Util.warn("The stage has "+ge+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),o.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return f.hasPointerCapture(F,this)}setPointerCapture(F){f.setPointerCapture(F,this)}releaseCapture(F){f.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&Te.forEach(([F,V])=>{this.content.addEventListener(F,re=>{this[V](re)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const V=he(F.type);V&&this._fire(V.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const V=he(F.type);V&&this._fire(V.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let V=this[F+"targetShape"];return V&&!V.getStage()&&(V=null),V}_pointerleave(F){const V=he(F.type),re=J(F.type);if(V){this.setPointersPositions(F);var ge=this._getTargetShape(re),pe=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;ge&&pe?(ge._fireAndBubble(V.pointerout,{evt:F}),ge._fireAndBubble(V.pointerleave,{evt:F}),this._fire(V.pointerleave,{evt:F,target:this,currentTarget:this}),this[re+"targetShape"]=null):pe&&(this._fire(V.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(V.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(F){const V=he(F.type),re=J(F.type);if(V){this.setPointersPositions(F);var ge=!1;this._changedPointerPositions.forEach(pe=>{var Le=this.getIntersection(pe);if(c.DD.justDragged=!1,o.Konva["_"+re+"ListenClick"]=!0,!Le||!Le.isListening())return;o.Konva.capturePointerEventsEnabled&&Le.setPointerCapture(pe.id),this[re+"ClickStartShape"]=Le,Le._fireAndBubble(V.pointerdown,{evt:F,pointerId:pe.id}),ge=!0;const Me=F.type.indexOf("touch")>=0;Le.preventDefault()&&F.cancelable&&Me&&F.preventDefault()}),ge||this._fire(V.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(F){const V=he(F.type),re=J(F.type);if(!V)return;o.Konva.isDragging()&&c.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F);var ge=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;if(!ge)return;var pe={};let Le=!1;var Me=this._getTargetShape(re);this._changedPointerPositions.forEach(It=>{const Fe=f.getCapturedShape(It.id)||this.getIntersection(It),Tt=It.id,Ye={evt:F,pointerId:Tt};var Ie=Me!==Fe;if(Ie&&Me&&(Me._fireAndBubble(V.pointerout,{...Ye},Fe),Me._fireAndBubble(V.pointerleave,{...Ye},Fe)),Fe){if(pe[Fe._id])return;pe[Fe._id]=!0}Fe&&Fe.isListening()?(Le=!0,Ie&&(Fe._fireAndBubble(V.pointerover,{...Ye},Me),Fe._fireAndBubble(V.pointerenter,{...Ye},Me),this[re+"targetShape"]=Fe),Fe._fireAndBubble(V.pointermove,{...Ye})):Me&&(this._fire(V.pointerover,{evt:F,target:this,currentTarget:this,pointerId:Tt}),this[re+"targetShape"]=null)}),Le||this._fire(V.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const V=he(F.type),re=J(F.type);if(!V)return;this.setPointersPositions(F);const ge=this[re+"ClickStartShape"],pe=this[re+"ClickEndShape"];var Le={};let Me=!1;this._changedPointerPositions.forEach(It=>{const Fe=f.getCapturedShape(It.id)||this.getIntersection(It);if(Fe){if(Fe.releaseCapture(It.id),Le[Fe._id])return;Le[Fe._id]=!0}const Tt=It.id,Ye={evt:F,pointerId:Tt};let Ie=!1;o.Konva["_"+re+"InDblClickWindow"]?(Ie=!0,clearTimeout(this[re+"DblTimeout"])):c.DD.justDragged||(o.Konva["_"+re+"InDblClickWindow"]=!0,clearTimeout(this[re+"DblTimeout"])),this[re+"DblTimeout"]=setTimeout(function(){o.Konva["_"+re+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),Fe&&Fe.isListening()?(Me=!0,this[re+"ClickEndShape"]=Fe,Fe._fireAndBubble(V.pointerup,{...Ye}),o.Konva["_"+re+"ListenClick"]&&ge&&ge===Fe&&(Fe._fireAndBubble(V.pointerclick,{...Ye}),Ie&&pe&&pe===Fe&&Fe._fireAndBubble(V.pointerdblclick,{...Ye}))):(this[re+"ClickEndShape"]=null,o.Konva["_"+re+"ListenClick"]&&this._fire(V.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:Tt}),Ie&&this._fire(V.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:Tt}))}),Me||this._fire(V.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+re+"ListenClick"]=!1,F.cancelable&&re!=="touch"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);var V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(X,{evt:F}):this._fire(X,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);var V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(de,{evt:F}):this._fire(de,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const V=f.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());V&&V._fireAndBubble(b,f.createEvent(F)),f.releaseCapture(F.pointerId)}_lostpointercapture(F){f.releaseCapture(F.pointerId)}setPointersPositions(F){var V=this._getContentPosition(),re=null,ge=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,pe=>{this._pointerPositions.push({id:pe.identifier,x:(pe.clientX-V.left)/V.scaleX,y:(pe.clientY-V.top)/V.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,pe=>{this._changedPointerPositions.push({id:pe.identifier,x:(pe.clientX-V.left)/V.scaleX,y:(pe.clientY-V.top)/V.scaleY})})):(re=(F.clientX-V.left)/V.scaleX,ge=(F.clientY-V.top)/V.scaleY,this.pointerPos={x:re,y:ge},this._pointerPositions=[{x:re,y:ge,id:e.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:re,y:ge,id:e.Util._getFirstPointerId(F)}])}_setPointerPosition(F){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!o.Konva.isBrowser){var F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}a.Stage=qe,qe.prototype.nodeType=p,(0,h._registerNode)(qe),n.Factory.addGetterSetter(qe,"container")})(Df);var Ya={},xt={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const e=Pe,n=st,i=be,o=rt,l=ue,c=Pe,h=sr;var f="hasShadow",p="shadowRGBA",m="patternImage",C="linearGradient",w="radialGradient";let _;function y(){return _||(_=n.Util.createCanvasElement().getContext("2d"),_)}a.shapes={};function E($){const M=this.attrs.fillRule;M?$.fill(M):$.fill()}function P($){$.stroke()}function T($){$.fill()}function k($){$.stroke()}function v(){this._clearCache(f)}function x(){this._clearCache(p)}function b(){this._clearCache(m)}function R(){this._clearCache(C)}function B(){this._clearCache(w)}class O extends o.Node{constructor(M){super(M);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in a.shapes)););this.colorKey=D,a.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(m,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var M=y();const D=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const X=new n.Transform;X.translate(this.fillPatternX(),this.fillPatternY()),X.rotate(e.Konva.getAngle(this.fillPatternRotation())),X.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),X.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const W=X.getMatrix(),Z=typeof DOMMatrix>"u"?{a:W[0],b:W[1],c:W[2],d:W[3],e:W[4],f:W[5]}:new DOMMatrix(W);D.setTransform(Z)}return D}}_getLinearGradient(){return this._getCache(C,this.__getLinearGradient)}__getLinearGradient(){var M=this.fillLinearGradientColorStops();if(M){for(var D=y(),X=this.fillLinearGradientStartPoint(),W=this.fillLinearGradientEndPoint(),Z=D.createLinearGradient(X.x,X.y,W.x,W.y),K=0;K<M.length;K+=2)Z.addColorStop(M[K],M[K+1]);return Z}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){var M=this.fillRadialGradientColorStops();if(M){for(var D=y(),X=this.fillRadialGradientStartPoint(),W=this.fillRadialGradientEndPoint(),Z=D.createRadialGradient(X.x,X.y,this.fillRadialGradientStartRadius(),W.x,W.y,this.fillRadialGradientEndRadius()),K=0;K<M.length;K+=2)Z.addColorStop(M[K],M[K+1]);return Z}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){var D=this.getStage();if(!D)return!1;const X=D.bufferHitCanvas;return X.getContext().clear(),this.drawHit(X,void 0,!0),X.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const W=M||this.hasFill(),Z=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(W&&Z&&K)return!0;const se=this.hasShadow(),de=this.shadowForStrokeEnabled();return!!(W&&Z&&se&&de)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){const D=M.skipTransform,X=M.relativeTo,W=this.getSelfRect(),K=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,se=W.width+K,de=W.height+K,me=!M.skipShadow&&this.hasShadow(),Te=me?this.shadowOffsetX():0,le=me?this.shadowOffsetY():0,J=se+Math.abs(Te),he=de+Math.abs(le),ke=me&&this.shadowBlur()||0,we=J+ke*2,qe=he+ke*2,Ae={width:we,height:qe,x:-(K/2+ke)+Math.min(Te,0)+W.x,y:-(K/2+ke)+Math.min(le,0)+W.y};return D?Ae:this._transformedRect(Ae,X)}drawScene(M,D,X){var W=this.getLayer(),Z=M||W.getCanvas(),K=Z.getContext(),se=this._getCanvasCache(),de=this.getSceneFunc(),me=this.hasShadow(),Te,le,J=Z.isCache,he=D===this;if(!this.isVisible()&&!he)return this;if(se){K.save();var ke=this.getAbsoluteTransform(D).getMatrix();return K.transform(ke[0],ke[1],ke[2],ke[3],ke[4],ke[5]),this._drawCachedSceneCanvas(K),K.restore(),this}if(!de)return this;if(K.save(),this._useBufferCanvas()&&!J){Te=this.getStage();const Ae=X||Te.bufferCanvas;le=Ae.getContext(),le.clear(),le.save(),le._applyLineJoin(this);var we=this.getAbsoluteTransform(D).getMatrix();le.transform(we[0],we[1],we[2],we[3],we[4],we[5]),de.call(this,le,this),le.restore();var qe=Ae.pixelRatio;me&&K._applyShadow(this),K._applyOpacity(this),K._applyGlobalCompositeOperation(this),K.drawImage(Ae._canvas,0,0,Ae.width/qe,Ae.height/qe)}else{if(K._applyLineJoin(this),!he){var we=this.getAbsoluteTransform(D).getMatrix();K.transform(we[0],we[1],we[2],we[3],we[4],we[5]),K._applyOpacity(this),K._applyGlobalCompositeOperation(this)}me&&K._applyShadow(this),de.call(this,K,this)}return K.restore(),this}drawHit(M,D,X=!1){if(!this.shouldDrawHit(D,X))return this;var W=this.getLayer(),Z=M||W.hitCanvas,K=Z&&Z.getContext(),se=this.hitFunc()||this.sceneFunc(),de=this._getCanvasCache(),me=de&&de.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),me){K.save();var Te=this.getAbsoluteTransform(D).getMatrix();return K.transform(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5]),this._drawCachedHitCanvas(K),K.restore(),this}if(!se)return this;if(K.save(),K._applyLineJoin(this),!(this===D)){var J=this.getAbsoluteTransform(D).getMatrix();K.transform(J[0],J[1],J[2],J[3],J[4],J[5])}return se.call(this,K,this),K.restore(),this}drawHitFromCache(M=0){var D=this._getCanvasCache(),X=this._getCachedSceneCanvas(),W=D.hit,Z=W.getContext(),K=W.getWidth(),se=W.getHeight(),de,me,Te,le,J,he;Z.clear(),Z.drawImage(X._canvas,0,0,K,se);try{for(de=Z.getImageData(0,0,K,se),me=de.data,Te=me.length,le=n.Util._hexToRgb(this.colorKey),J=0;J<Te;J+=4)he=me[J+3],he>M?(me[J]=le.r,me[J+1]=le.g,me[J+2]=le.b,me[J+3]=255):me[J+3]=0;Z.putImageData(de,0,0)}catch(ke){n.Util.error("Unable to draw hit graph from cached scene canvas. "+ke.message)}return this}hasPointerCapture(M){return h.hasPointerCapture(M,this)}setPointerCapture(M){h.setPointerCapture(M,this)}releaseCapture(M){h.releaseCapture(M,this)}}a.Shape=O,O.prototype._fillFunc=E,O.prototype._strokeFunc=P,O.prototype._fillFuncHit=T,O.prototype._strokeFuncHit=k,O.prototype._centroid=!1,O.prototype.nodeType="Shape",(0,c._registerNode)(O),O.prototype.eventListeners={},O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",B),i.Factory.addGetterSetter(O,"stroke",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"strokeWidth",2,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(O,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(O,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"lineJoin"),i.Factory.addGetterSetter(O,"lineCap"),i.Factory.addGetterSetter(O,"sceneFunc"),i.Factory.addGetterSetter(O,"hitFunc"),i.Factory.addGetterSetter(O,"dash"),i.Factory.addGetterSetter(O,"dashOffset",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowColor",void 0,(0,l.getStringValidator)()),i.Factory.addGetterSetter(O,"shadowBlur",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOpacity",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(O,"shadowOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternImage"),i.Factory.addGetterSetter(O,"fill",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"fillPatternX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(O,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(O,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(O,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(O,"fillEnabled",!0),i.Factory.addGetterSetter(O,"strokeEnabled",!0),i.Factory.addGetterSetter(O,"shadowEnabled",!0),i.Factory.addGetterSetter(O,"dashEnabled",!0),i.Factory.addGetterSetter(O,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(O,"fillPriority","color"),i.Factory.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternScaleX",1,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternScaleY",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(O,"fillPatternRotation",0),i.Factory.addGetterSetter(O,"fillRule",void 0,(0,l.getStringValidator)()),i.Factory.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(xt);Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Layer=void 0;const Yr=st,ec=Yn,Fi=rt,Gc=be,P0=Tr,Xp=ue,Kp=xt,qp=Pe;var Yp="#",Qp="beforeDraw",Jp="draw",jf=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Zp=jf.length;let Wi=class extends ec.Container{constructor(e){super(e),this.canvas=new P0.SceneCanvas,this.hitCanvas=new P0.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Fi.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=Fi.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Fi.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Fi.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Fi.Node.prototype.remove.call(this),e&&e.parentNode&&Yr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Yr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Fi.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Yr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Yr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Yr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let o=0;o<Zp;o++){const l=jf[o],c=this._getIntersection({x:e.x+l.x*n,y:e.y+l.y*n}),h=c.shape;if(h)return h;if(i=!!c.antialiased,!c.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,o=i[3];if(o===255){const l=Yr.Util._rgbToHex(i[0],i[1],i[2]),c=Kp.shapes[Yp+l];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,n){var i=this.getLayer(),o=e||i&&i.getCanvas();return this._fire(Qp,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),ec.Container.prototype.drawScene.call(this,o,n),this._fire(Jp,{node:this}),this}drawHit(e,n){var i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),ec.Container.prototype.drawHit.call(this,o,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Yr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Yr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Yr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ya.Layer=Wi;Wi.prototype.nodeType="Layer";(0,qp._registerNode)(Wi);Gc.Factory.addGetterSetter(Wi,"imageSmoothingEnabled",!0);Gc.Factory.addGetterSetter(Wi,"clearBeforeDraw",!0);Gc.Factory.addGetterSetter(Wi,"hitGraphEnabled",!0,(0,Xp.getBooleanValidator)());var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.FastLayer=void 0;const ev=st,tv=Ya,rv=Pe;class $c extends tv.Layer{constructor(e){super(e),this.listening(!1),ev.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ks.FastLayer=$c;$c.prototype.nodeType="FastLayer";(0,rv._registerNode)($c);var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.Group=void 0;const nv=st,iv=Yn,av=Pe;class jc extends iv.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&nv.Util.throw("You may only add groups and shapes to groups.")}}Xi.Group=jc;jc.prototype.nodeType="Group";(0,av._registerNode)(jc);var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Animation=void 0;const tc=Pe,b0=st,rc=function(){return tc.glob.performance&&tc.glob.performance.now?function(){return tc.glob.performance.now()}:function(){return new Date().getTime()}}();class Dr{constructor(e,n){this.id=Dr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:rc(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let o=0;o<i;o++)if(n[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Dr.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=rc(),Dr._addAnimation(this),this}stop(){return Dr._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===n){this.animations.splice(l,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const o=n[i],l=o.layers,c=o.func;o._updateFrameObject(rc());const h=l.length;let f;if(c?f=c.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<h;p++){const m=l[p];m._id!==void 0&&(e[m._id]=m)}}for(let i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=Dr;e.animations.length?(e._runFrames(),b0.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,b0.Util.requestAnimFrame(this._animationLoop))}}Ki.Animation=Dr;Dr.animations=[];Dr.animIdCounter=0;Dr.animRunning=!1;var zf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const e=st,n=Ki,i=rt,o=Pe;var l={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=1,h=2,f=3,p=0,m=["fill","stroke","shadowColor"];class C{constructor(y,E,P,T,k,v,x){this.prop=y,this.propFunc=E,this.begin=T,this._pos=T,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=k-this.begin,this.pause()}fire(y){var E=this[y];E&&E()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===h?this.setTime(y):this.state===f&&this.setTime(this.duration-y)}pause(){this.state=c,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(y){var E=this,P=y.node,T=P._id,k,v=y.easing||a.Easings.Linear,x=!!y.yoyo,b;typeof y.duration>"u"?k=.3:y.duration===0?k=.001:k=y.duration,this.node=P,this._id=p++;var R=P.getLayer()||(P instanceof o.Konva.Stage?P.getLayers():null);R||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){E.tween.onEnterFrame()},R),this.tween=new C(b,function(B){E._tweenFunc(B)},v,0,1,k*1e3,x),this._addListeners(),w.attrs[T]||(w.attrs[T]={}),w.attrs[T][this._id]||(w.attrs[T][this._id]={}),w.tweens[T]||(w.tweens[T]={});for(b in y)l[b]===void 0&&this._addAttr(b,y[b]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,E){var P=this.node,T=P._id,k,v,x,b,R,B,O,$;if(x=w.tweens[T][y],x&&delete w.attrs[T][x][y],k=P.getAttr(y),e.Util._isArray(E))if(v=[],R=Math.max(E.length,k.length),y==="points"&&E.length!==k.length&&(E.length>k.length?(O=k,k=e.Util._prepareArrayForTween(k,E,P.closed())):(B=E,E=e.Util._prepareArrayForTween(E,k,P.closed()))),y.indexOf("fill")===0)for(b=0;b<R;b++)if(b%2===0)v.push(E[b]-k[b]);else{var M=e.Util.colorToRGBA(k[b]);$=e.Util.colorToRGBA(E[b]),k[b]=M,v.push({r:$.r-M.r,g:$.g-M.g,b:$.b-M.b,a:$.a-M.a})}else for(b=0;b<R;b++)v.push(E[b]-k[b]);else m.indexOf(y)!==-1?(k=e.Util.colorToRGBA(k),$=e.Util.colorToRGBA(E),v={r:$.r-k.r,g:$.g-k.g,b:$.b-k.b,a:$.a-k.a}):v=E-k;w.attrs[T][this._id][y]={start:k,diff:v,end:E,trueEnd:B,trueStart:O},w.tweens[T][y]=this._id}_tweenFunc(y){var E=this.node,P=w.attrs[E._id][this._id],T,k,v,x,b,R,B,O;for(T in P){if(k=P[T],v=k.start,x=k.diff,O=k.end,e.Util._isArray(v))if(b=[],B=Math.max(v.length,O.length),T.indexOf("fill")===0)for(R=0;R<B;R++)R%2===0?b.push((v[R]||0)+x[R]*y):b.push("rgba("+Math.round(v[R].r+x[R].r*y)+","+Math.round(v[R].g+x[R].g*y)+","+Math.round(v[R].b+x[R].b*y)+","+(v[R].a+x[R].a*y)+")");else for(R=0;R<B;R++)b.push((v[R]||0)+x[R]*y);else m.indexOf(T)!==-1?b="rgba("+Math.round(v.r+x.r*y)+","+Math.round(v.g+x.g*y)+","+Math.round(v.b+x.b*y)+","+(v.a+x.a*y)+")":b=v+x*y;E.setAttr(T,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueEnd&&y.setAttr("points",E.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,E=w.attrs[y._id][this._id];E.points&&E.points.trueStart&&y.points(E.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,E=this._id,P=w.tweens[y],T;this.pause();for(T in P)delete w.tweens[y][T];delete w.attrs[y][E]}}a.Tween=w,w.attrs={},w.tweens={},i.Node.prototype.to=function(_){var y=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),y&&y()};var E=new w(_);E.play()},a.Easings={BackEaseIn(_,y,E,P){var T=1.70158;return E*(_/=P)*_*((T+1)*_-T)+y},BackEaseOut(_,y,E,P){var T=1.70158;return E*((_=_/P-1)*_*((T+1)*_+T)+1)+y},BackEaseInOut(_,y,E,P){var T=1.70158;return(_/=P/2)<1?E/2*(_*_*(((T*=1.525)+1)*_-T))+y:E/2*((_-=2)*_*(((T*=1.525)+1)*_+T)+2)+y},ElasticEaseIn(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+E:(k||(k=P*.3),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),-(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y)},ElasticEaseOut(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+E:(k||(k=P*.3),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),T*Math.pow(2,-10*_)*Math.sin((_*P-v)*(2*Math.PI)/k)+E+y)},ElasticEaseInOut(_,y,E,P,T,k){var v=0;return _===0?y:(_/=P/2)===2?y+E:(k||(k=P*(.3*1.5)),!T||T<Math.abs(E)?(T=E,v=k/4):v=k/(2*Math.PI)*Math.asin(E/T),_<1?-.5*(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y:T*Math.pow(2,-10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k)*.5+E+y)},BounceEaseOut(_,y,E,P){return(_/=P)<1/2.75?E*(7.5625*_*_)+y:_<2/2.75?E*(7.5625*(_-=1.5/2.75)*_+.75)+y:_<2.5/2.75?E*(7.5625*(_-=2.25/2.75)*_+.9375)+y:E*(7.5625*(_-=2.625/2.75)*_+.984375)+y},BounceEaseIn(_,y,E,P){return E-a.Easings.BounceEaseOut(P-_,0,E,P)+y},BounceEaseInOut(_,y,E,P){return _<P/2?a.Easings.BounceEaseIn(_*2,0,E,P)*.5+y:a.Easings.BounceEaseOut(_*2-P,0,E,P)*.5+E*.5+y},EaseIn(_,y,E,P){return E*(_/=P)*_+y},EaseOut(_,y,E,P){return-E*(_/=P)*(_-2)+y},EaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_+y:-E/2*(--_*(_-2)-1)+y},StrongEaseIn(_,y,E,P){return E*(_/=P)*_*_*_*_+y},StrongEaseOut(_,y,E,P){return E*((_=_/P-1)*_*_*_*_+1)+y},StrongEaseInOut(_,y,E,P){return(_/=P/2)<1?E/2*_*_*_*_*_+y:E/2*((_-=2)*_*_*_*_+2)+y},Linear(_,y,E,P){return E*_/P+y}}})(zf);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const e=Pe,n=st,i=rt,o=Yn,l=Df,c=Ya,h=ks,f=Xi,p=Os,m=xt,C=Ki,w=zf,_=Jr,y=Tr;a.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:o.Container,Stage:l.Stage,stages:l.stages,Layer:c.Layer,FastLayer:h.FastLayer,Group:f.Group,DD:p.DD,Shape:m.Shape,shapes:m.shapes,Animation:C.Animation,Tween:w.Tween,Easings:w.Easings,Context:_.Context,Canvas:y.Canvas}),a.default=a.Konva})(ms);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Arc=void 0;const Ms=be,ov=xt,O0=Pe,Ns=ue,sv=Pe;class rn extends ov.Shape{_sceneFunc(e){var n=O0.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),o=O0.Konva.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(o,Math.PI)),c=1,h=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),f=Math.sin(Math.min(o,Math.PI/2)),p=l*(l>0?e:n),m=c*n,C=h*(h>0?e:n),w=f*(f>0?n:e);return{x:p,y:i?-1*w:C,width:m-p,height:w-C}}}Rs.Arc=rn;rn.prototype._centroid=!0;rn.prototype.className="Arc";rn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,sv._registerNode)(rn);Ms.Factory.addGetterSetter(rn,"innerRadius",0,(0,Ns.getNumberValidator)());Ms.Factory.addGetterSetter(rn,"outerRadius",0,(0,Ns.getNumberValidator)());Ms.Factory.addGetterSetter(rn,"angle",0,(0,Ns.getNumberValidator)());Ms.Factory.addGetterSetter(rn,"clockwise",!1,(0,Ns.getBooleanValidator)());var As={},Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.Line=void 0;const Fs=be,lv=xt,Bf=ue,uv=Pe;function wc(a,e,n,i,o,l,c){var h=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-e,2)),f=Math.sqrt(Math.pow(o-n,2)+Math.pow(l-i,2)),p=c*h/(h+f),m=c*f/(h+f),C=n-p*(o-a),w=i-p*(l-e),_=n+m*(o-a),y=i+m*(l-e);return[C,w,_,y]}function T0(a,e){var n=a.length,i=[],o,l;for(o=2;o<n-2;o+=2)l=wc(a[o-2],a[o-1],a[o],a[o+1],a[o+2],a[o+3],e),!isNaN(l[0])&&(i.push(l[0]),i.push(l[1]),i.push(a[o]),i.push(a[o+1]),i.push(l[2]),i.push(l[3]));return i}class Pn extends lv.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),i=n.length,o=this.tension(),l=this.closed(),c=this.bezier(),h,f,p;if(i){if(e.beginPath(),e.moveTo(n[0],n[1]),o!==0&&i>4){for(h=this.getTensionPoints(),f=h.length,p=l?0:4,l||e.quadraticCurveTo(h[0],h[1],h[2],h[3]);p<f-2;)e.bezierCurveTo(h[p++],h[p++],h[p++],h[p++],h[p++],h[p++]);l||e.quadraticCurveTo(h[f-2],h[f-1],n[i-2],n[i-1])}else if(c)for(p=2;p<i;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<i;p+=2)e.lineTo(n[p],n[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():T0(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,i=this.tension(),o=wc(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),l=wc(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),c=T0(e,i),h=[o[2],o[3]].concat(c).concat([l[0],l[1],e[n-2],e[n-1],l[2],l[3],o[0],o[1],e[0],e[1]]);return h}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);return{x:n,y:o,width:i-n,height:l-o}}}Qa.Line=Pn;Pn.prototype.className="Line";Pn.prototype._attrsAffectingSize=["points","bezier","tension"];(0,uv._registerNode)(Pn);Fs.Factory.addGetterSetter(Pn,"closed",!1);Fs.Factory.addGetterSetter(Pn,"bezier",!1);Fs.Factory.addGetterSetter(Pn,"tension",0,(0,Bf.getNumberValidator)());Fs.Factory.addGetterSetter(Pn,"points",[],(0,Bf.getNumberArrayValidator)());var qi={},Uf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(c,h,f)=>{let p,m,C;p=f/2,m=0;for(let _=0;_<20;_++)C=p*a.tValues[20][_]+p,m+=a.cValues[20][_]*i(c,h,C);return p*m};a.getCubicArcLength=e;const n=(c,h,f)=>{f===void 0&&(f=1);const p=c[0]-2*c[1]+c[2],m=h[0]-2*h[1]+h[2],C=2*c[1]-2*c[0],w=2*h[1]-2*h[0],_=4*(p*p+m*m),y=4*(p*C+m*w),E=C*C+w*w;if(_===0)return f*Math.sqrt(Math.pow(c[2]-c[0],2)+Math.pow(h[2]-h[0],2));const P=y/(2*_),T=E/_,k=f+P,v=T-P*P,x=k*k+v>0?Math.sqrt(k*k+v):0,b=P*P+v>0?Math.sqrt(P*P+v):0,R=P+Math.sqrt(P*P+v)!==0?v*Math.log(Math.abs((k+x)/(P+b))):0;return Math.sqrt(_)/2*(k*x-P*b+R)};a.getQuadraticArcLength=n;function i(c,h,f){const p=o(1,f,c),m=o(1,f,h),C=p*p+m*m;return Math.sqrt(C)}const o=(c,h,f)=>{const p=f.length-1;let m,C;if(p===0)return 0;if(c===0){C=0;for(let w=0;w<=p;w++)C+=a.binomialCoefficients[p][w]*Math.pow(1-h,p-w)*Math.pow(h,w)*f[w];return C}else{m=new Array(p);for(let w=0;w<p;w++)m[w]=p*(f[w+1]-f[w]);return o(c-1,h,m)}},l=(c,h,f)=>{let p=1,m=c/h,C=(c-f(m))/h,w=0;for(;p>.001;){const _=f(m+C),y=Math.abs(c-_)/h;if(y<p)p=y,m+=C;else{const E=f(m-C),P=Math.abs(c-E)/h;P<p?(p=P,m-=C):C/=2}if(w++,w>500)break}return m};a.t2length=l})(Uf);Object.defineProperty(qi,"__esModule",{value:!0});qi.Path=void 0;const cv=be,dv=xt,hv=Pe,Ii=Uf;class St extends dv.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=St.parsePathData(this.data()),this.pathLength=St.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var i=!1,o=0;o<n.length;o++){var l=n[o].command,c=n[o].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":var h=c[0],f=c[1],p=c[2],m=c[3],C=c[4],w=c[5],_=c[6],y=c[7],E=p>m?p:m,P=p>m?1:p/m,T=p>m?m/p:1;e.translate(h,f),e.rotate(_),e.scale(P,T),e.arc(0,0,E,C,C+w,1-y),e.scale(1/P,1/T),e.rotate(-_),e.translate(-h,-f);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var m=p.points[4],C=p.points[5],w=p.points[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),C<0)for(let y=m-_;y>w;y-=_){const E=St.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}else for(let y=m+_;y<w;y+=_){const E=St.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(E.x,E.y)}}else if(p.command==="C")for(let y=0;y<=1;y+=.01){const E=St.getPointOnCubicBezier(y,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(E.x,E.y)}else e=e.concat(p.points)});for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],isNaN(c)||(n=Math.min(n,c),i=Math.max(i,c)),isNaN(h)||(o=Math.min(o,h),l=Math.max(l,h));return{x:n,y:o,width:i-n,height:l-o}}getLength(){return this.pathLength}getPointAtLength(e){return St.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,o){return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n))}static getPathLength(e){let n=0;for(var i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var i,o=0,l=n.length;if(!l)return null;for(;o<l&&e>n[o].pathLength;)e-=n[o].pathLength,++o;if(o===l)return i=n[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=n[o].points.slice(0,2),{x:i[0],y:i[1]};var c=n[o],h=c.points;switch(c.command){case"L":return St.getPointOnLine(e,c.start.x,c.start.y,h[0],h[1]);case"C":return St.getPointOnCubicBezier((0,Ii.t2length)(e,St.getPathLength(n),E=>(0,Ii.getCubicArcLength)([c.start.x,h[0],h[2],h[4]],[c.start.y,h[1],h[3],h[5]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return St.getPointOnQuadraticBezier((0,Ii.t2length)(e,St.getPathLength(n),E=>(0,Ii.getQuadraticArcLength)([c.start.x,h[0],h[2]],[c.start.y,h[1],h[3]],E)),c.start.x,c.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],p=h[1],m=h[2],C=h[3],w=h[4],_=h[5],y=h[6];return w+=_*e/c.pathLength,St.getPointOnEllipticalArc(f,p,m,C,w,y)}return null}static getPointOnLine(e,n,i,o,l,c,h){c===void 0&&(c=n),h===void 0&&(h=i);var f=(l-i)/(o-n+1e-8),p=Math.sqrt(e*e/(1+f*f));o<n&&(p*=-1);var m=f*p,C;if(o===n)C={x:c,y:h+m};else if((h-i)/(c-n+1e-8)===f)C={x:c+p,y:h+m};else{var w,_,y=this.getLineLength(n,i,o,l),E=(c-n)*(o-n)+(h-i)*(l-i);E=E/(y*y),w=n+E*(o-n),_=i+E*(l-i);var P=this.getLineLength(c,h,w,_),T=Math.sqrt(e*e-P*P);p=Math.sqrt(T*T/(1+f*f)),o<n&&(p*=-1),m=f*p,C={x:w+p,y:_+m}}return C}static getPointOnCubicBezier(e,n,i,o,l,c,h,f,p){function m(P){return P*P*P}function C(P){return 3*P*P*(1-P)}function w(P){return 3*P*(1-P)*(1-P)}function _(P){return(1-P)*(1-P)*(1-P)}var y=f*m(e)+c*C(e)+o*w(e)+n*_(e),E=p*m(e)+h*C(e)+l*w(e)+i*_(e);return{x:y,y:E}}static getPointOnQuadraticBezier(e,n,i,o,l,c,h){function f(_){return _*_}function p(_){return 2*_*(1-_)}function m(_){return(1-_)*(1-_)}var C=c*f(e)+o*p(e)+n*m(e),w=h*f(e)+l*p(e)+i*m(e);return{x:C,y:w}}static getPointOnEllipticalArc(e,n,i,o,l,c){var h=Math.cos(c),f=Math.sin(c),p={x:i*Math.cos(l),y:o*Math.sin(l)};return{x:e+(p.x*h-p.y*f),y:n+(p.x*f+p.y*h)}}static parsePathData(e){if(!e)return[];var n=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var o=0;o<i.length;o++)n=n.replace(new RegExp(i[o],"g"),"|"+i[o]);var l=n.split("|"),c=[],h=[],f=0,p=0,m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,C;for(o=1;o<l.length;o++){var w=l[o],_=w.charAt(0);for(w=w.slice(1),h.length=0;C=m.exec(w);)h.push(C[0]);for(var y=[],E=0,P=h.length;E<P;E++){if(h[E]==="00"){y.push(0,0);continue}var T=parseFloat(h[E]);isNaN(T)?y.push(0):y.push(T)}for(;y.length>0&&!isNaN(y[0]);){var k="",v=[],x=f,b=p,R,B,O,$,M,D,X,W,Z,K;switch(_){case"l":f+=y.shift(),p+=y.shift(),k="L",v.push(f,p);break;case"L":f=y.shift(),p=y.shift(),v.push(f,p);break;case"m":var se=y.shift(),de=y.shift();if(f+=se,p+=de,k="M",c.length>2&&c[c.length-1].command==="z"){for(var me=c.length-2;me>=0;me--)if(c[me].command==="M"){f=c[me].points[0]+se,p=c[me].points[1]+de;break}}v.push(f,p),_="l";break;case"M":f=y.shift(),p=y.shift(),k="M",v.push(f,p),_="L";break;case"h":f+=y.shift(),k="L",v.push(f,p);break;case"H":f=y.shift(),k="L",v.push(f,p);break;case"v":p+=y.shift(),k="L",v.push(f,p);break;case"V":p=y.shift(),k="L",v.push(f,p);break;case"C":v.push(y.shift(),y.shift(),y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"c":v.push(f+y.shift(),p+y.shift(),f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"S":B=f,O=p,R=c[c.length-1],R.command==="C"&&(B=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(B,O,y.shift(),y.shift()),f=y.shift(),p=y.shift(),k="C",v.push(f,p);break;case"s":B=f,O=p,R=c[c.length-1],R.command==="C"&&(B=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(B,O,f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"Q":v.push(y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"q":v.push(f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="Q",v.push(f,p);break;case"T":B=f,O=p,R=c[c.length-1],R.command==="Q"&&(B=f+(f-R.points[0]),O=p+(p-R.points[1])),f=y.shift(),p=y.shift(),k="Q",v.push(B,O,f,p);break;case"t":B=f,O=p,R=c[c.length-1],R.command==="Q"&&(B=f+(f-R.points[0]),O=p+(p-R.points[1])),f+=y.shift(),p+=y.shift(),k="Q",v.push(B,O,f,p);break;case"A":$=y.shift(),M=y.shift(),D=y.shift(),X=y.shift(),W=y.shift(),Z=f,K=p,f=y.shift(),p=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,K,f,p,X,W,$,M,D);break;case"a":$=y.shift(),M=y.shift(),D=y.shift(),X=y.shift(),W=y.shift(),Z=f,K=p,f+=y.shift(),p+=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,K,f,p,X,W,$,M,D);break}c.push({command:k||_,points:v,start:{x,y:b},pathLength:this.calcLength(x,b,k||_,v)})}(_==="z"||_==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(e,n,i,o){var l,c,h,f,p=St;switch(i){case"L":return p.getLineLength(e,n,o[0],o[1]);case"C":return(0,Ii.getCubicArcLength)([e,o[0],o[2],o[4]],[n,o[1],o[3],o[5]],1);case"Q":return(0,Ii.getQuadraticArcLength)([e,o[0],o[2]],[n,o[1],o[3]],1);case"A":l=0;var m=o[4],C=o[5],w=o[4]+C,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),c=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],m,0),C<0)for(f=m-_;f>w;f-=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;else for(f=m+_;f<w;f+=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;return h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],w,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),l}return 0}static convertEndpointToCenterParameterization(e,n,i,o,l,c,h,f,p){var m=p*(Math.PI/180),C=Math.cos(m)*(e-i)/2+Math.sin(m)*(n-o)/2,w=-1*Math.sin(m)*(e-i)/2+Math.cos(m)*(n-o)/2,_=C*C/(h*h)+w*w/(f*f);_>1&&(h*=Math.sqrt(_),f*=Math.sqrt(_));var y=Math.sqrt((h*h*(f*f)-h*h*(w*w)-f*f*(C*C))/(h*h*(w*w)+f*f*(C*C)));l===c&&(y*=-1),isNaN(y)&&(y=0);var E=y*h*w/f,P=y*-f*C/h,T=(e+i)/2+Math.cos(m)*E-Math.sin(m)*P,k=(n+o)/2+Math.sin(m)*E+Math.cos(m)*P,v=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},x=function(M,D){return(M[0]*D[0]+M[1]*D[1])/(v(M)*v(D))},b=function(M,D){return(M[0]*D[1]<M[1]*D[0]?-1:1)*Math.acos(x(M,D))},R=b([1,0],[(C-E)/h,(w-P)/f]),B=[(C-E)/h,(w-P)/f],O=[(-1*C-E)/h,(-1*w-P)/f],$=b(B,O);return x(B,O)<=-1&&($=Math.PI),x(B,O)>=1&&($=0),c===0&&$>0&&($=$-2*Math.PI),c===1&&$<0&&($=$+2*Math.PI),[T,k,h,f,R,$,m,c]}}qi.Path=St;St.prototype.className="Path";St.prototype._attrsAffectingSize=["data"];(0,hv._registerNode)(St);cv.Factory.addGetterSetter(St,"data");Object.defineProperty(As,"__esModule",{value:!0});As.Arrow=void 0;const Is=be,fv=Qa,Hf=ue,gv=Pe,k0=qi;class Jn extends fv.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,i=this.points(),o=i,l=this.tension()!==0&&i.length>4;l&&(o=this.getTensionPoints());var c=this.pointerLength(),h=i.length,f,p;if(l){const w=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[h-2],i[h-1]],_=k0.Path.calcLength(o[o.length-4],o[o.length-3],"C",w),y=k0.Path.getPointOnQuadraticBezier(Math.min(1,1-c/_),w[0],w[1],w[2],w[3],w[4],w[5]);f=i[h-2]-y.x,p=i[h-1]-y.y}else f=i[h-2]-i[h-4],p=i[h-1]-i[h-3];var m=(Math.atan2(p,f)+n)%n,C=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[h-2],i[h-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),l?(f=(o[0]+o[2])/2-i[0],p=(o[1]+o[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-f)+n)%n),e.moveTo(0,0),e.lineTo(-c,C/2),e.lineTo(-c,-C/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}As.Arrow=Jn;Jn.prototype.className="Arrow";(0,gv._registerNode)(Jn);Is.Factory.addGetterSetter(Jn,"pointerLength",10,(0,Hf.getNumberValidator)());Is.Factory.addGetterSetter(Jn,"pointerWidth",10,(0,Hf.getNumberValidator)());Is.Factory.addGetterSetter(Jn,"pointerAtBeginning",!1);Is.Factory.addGetterSetter(Jn,"pointerAtEnding",!0);var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.Circle=void 0;const pv=be,vv=xt,mv=ue,yv=Pe;class Yi extends vv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Ls.Circle=Yi;Yi.prototype._centroid=!0;Yi.prototype.className="Circle";Yi.prototype._attrsAffectingSize=["radius"];(0,yv._registerNode)(Yi);pv.Factory.addGetterSetter(Yi,"radius",0,(0,mv.getNumberValidator)());var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Ellipse=void 0;const zc=be,_v=xt,Vf=ue,Sv=Pe;class bn extends _v.Shape{_sceneFunc(e){var n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ds.Ellipse=bn;bn.prototype.className="Ellipse";bn.prototype._centroid=!0;bn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Sv._registerNode)(bn);zc.Factory.addComponentsGetterSetter(bn,"radius",["x","y"]);zc.Factory.addGetterSetter(bn,"radiusX",0,(0,Vf.getNumberValidator)());zc.Factory.addGetterSetter(bn,"radiusY",0,(0,Vf.getNumberValidator)());var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Image=void 0;const nc=st,Zn=be,xv=xt,wv=Pe,Ja=ue;let $r=class Wf extends xv.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),l=this.attrs.image;let c;if(l){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?c=[l,this.cropX(),this.cropY(),h,f,0,0,n,i]:c=[l,0,0,n,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?nc.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),l&&(o&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){var n=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?nc.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,i=null){var o=nc.Util.createImageElement();o.onload=function(){var l=new Wf({image:o});n(l)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}};Gs.Image=$r;$r.prototype.className="Image";(0,wv._registerNode)($r);Zn.Factory.addGetterSetter($r,"cornerRadius",0,(0,Ja.getNumberOrArrayOfNumbersValidator)(4));Zn.Factory.addGetterSetter($r,"image");Zn.Factory.addComponentsGetterSetter($r,"crop",["x","y","width","height"]);Zn.Factory.addGetterSetter($r,"cropX",0,(0,Ja.getNumberValidator)());Zn.Factory.addGetterSetter($r,"cropY",0,(0,Ja.getNumberValidator)());Zn.Factory.addGetterSetter($r,"cropWidth",0,(0,Ja.getNumberValidator)());Zn.Factory.addGetterSetter($r,"cropHeight",0,(0,Ja.getNumberValidator)());var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.Tag=zi.Label=void 0;const $s=be,Ev=xt,Cv=Xi,Bc=ue,Xf=Pe;var Kf=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Pv="Change.konva",bv="none",Ec="up",Cc="right",Pc="down",bc="left",Ov=Kf.length;class Uc extends Cv.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,i,o=function(){n._sync()};for(i=0;i<Ov;i++)e.on(Kf[i]+Pv,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),i,o,l,c,h,f,p;if(e&&n){switch(i=e.width(),o=e.height(),l=n.pointerDirection(),c=n.pointerWidth(),p=n.pointerHeight(),h=0,f=0,l){case Ec:h=i/2,f=-1*p;break;case Cc:h=i+c,f=o/2;break;case Pc:h=i/2,f=o+p;break;case bc:h=-1*c,f=o/2;break}n.setAttrs({x:-1*h,y:-1*f,width:i,height:o}),e.setAttrs({x:-1*h,y:-1*f})}}}zi.Label=Uc;Uc.prototype.className="Label";(0,Xf._registerNode)(Uc);class ei extends Ev.Shape{_sceneFunc(e){var n=this.width(),i=this.height(),o=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),h=this.cornerRadius();let f=0,p=0,m=0,C=0;typeof h=="number"?f=p=m=C=Math.min(h,n/2,i/2):(f=Math.min(h[0]||0,n/2,i/2),p=Math.min(h[1]||0,n/2,i/2),C=Math.min(h[2]||0,n/2,i/2),m=Math.min(h[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(f,0),o===Ec&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*c),e.lineTo((n+l)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),o===Cc&&(e.lineTo(n,(i-c)/2),e.lineTo(n+l,i/2),e.lineTo(n,(i+c)/2)),e.lineTo(n,i-C),e.arc(n-C,i-C,C,0,Math.PI/2,!1),o===Pc&&(e.lineTo((n+l)/2,i),e.lineTo(n/2,i+c),e.lineTo((n-l)/2,i)),e.lineTo(m,i),e.arc(m,i-m,m,Math.PI/2,Math.PI,!1),o===bc&&(e.lineTo(0,(i+c)/2),e.lineTo(-1*l,i/2),e.lineTo(0,(i-c)/2)),e.lineTo(0,f),e.arc(f,f,f,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,i=this.pointerWidth(),o=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),h=this.height();return l===Ec?(n-=o,h+=o):l===Pc?h+=o:l===bc?(e-=i*1.5,c+=i):l===Cc&&(c+=i*1.5),{x:e,y:n,width:c,height:h}}}zi.Tag=ei;ei.prototype.className="Tag";(0,Xf._registerNode)(ei);$s.Factory.addGetterSetter(ei,"pointerDirection",bv);$s.Factory.addGetterSetter(ei,"pointerWidth",0,(0,Bc.getNumberValidator)());$s.Factory.addGetterSetter(ei,"pointerHeight",0,(0,Bc.getNumberValidator)());$s.Factory.addGetterSetter(ei,"cornerRadius",0,(0,Bc.getNumberOrArrayOfNumbersValidator)(4));var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.Rect=void 0;const Tv=be,kv=xt,Rv=Pe,Mv=st,Nv=ue;let js=class extends kv.Shape{_sceneFunc(e){var n=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),n?Mv.Util.drawRoundedRectPath(e,i,o,n):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};Za.Rect=js;js.prototype.className="Rect";(0,Rv._registerNode)(js);Tv.Factory.addGetterSetter(js,"cornerRadius",0,(0,Nv.getNumberOrArrayOfNumbersValidator)(4));var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.RegularPolygon=void 0;const qf=be,Av=xt,Yf=ue,Fv=Pe;class ti extends Av.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var o=0;o<e;o++)i.push({x:n*Math.sin(o*2*Math.PI/e),y:-1*n*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();var n=e[0].x,i=e[0].y,o=e[0].x,l=e[0].y;return e.forEach(c=>{n=Math.min(n,c.x),i=Math.max(i,c.x),o=Math.min(o,c.y),l=Math.max(l,c.y)}),{x:n,y:o,width:i-n,height:l-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}zs.RegularPolygon=ti;ti.prototype.className="RegularPolygon";ti.prototype._centroid=!0;ti.prototype._attrsAffectingSize=["radius"];(0,Fv._registerNode)(ti);qf.Factory.addGetterSetter(ti,"radius",0,(0,Yf.getNumberValidator)());qf.Factory.addGetterSetter(ti,"sides",0,(0,Yf.getNumberValidator)());var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Ring=void 0;const Qf=be,Iv=xt,Jf=ue,Lv=Pe;var R0=Math.PI*2;class ri extends Iv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,R0,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),R0,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Bs.Ring=ri;ri.prototype.className="Ring";ri.prototype._centroid=!0;ri.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Lv._registerNode)(ri);Qf.Factory.addGetterSetter(ri,"innerRadius",0,(0,Jf.getNumberValidator)());Qf.Factory.addGetterSetter(ri,"outerRadius",0,(0,Jf.getNumberValidator)());var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Sprite=void 0;const ni=be,Dv=xt,Gv=Ki,Zf=ue,$v=Pe;class jr extends Dv.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Gv.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+0],f=l[o+1],p=l[o+2],m=l[o+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,m),e.closePath(),e.fillStrokeShape(this)),C)if(c){var w=c[n],_=i*2;e.drawImage(C,h,f,p,m,w[_+0],w[_+1],p,m)}else e.drawImage(C,h,f,p,m,0,0,p,m)}_hitFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+2],f=l[o+3];if(e.beginPath(),c){var p=c[n],m=i*2;e.rect(p[m+0],p[m+1],h,f)}else e.rect(0,0,h,f);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),i=this.animations(),o=i[n],l=o.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}Us.Sprite=jr;jr.prototype.className="Sprite";(0,$v._registerNode)(jr);ni.Factory.addGetterSetter(jr,"animation");ni.Factory.addGetterSetter(jr,"animations");ni.Factory.addGetterSetter(jr,"frameOffsets");ni.Factory.addGetterSetter(jr,"image");ni.Factory.addGetterSetter(jr,"frameIndex",0,(0,Zf.getNumberValidator)());ni.Factory.addGetterSetter(jr,"frameRate",17,(0,Zf.getNumberValidator)());ni.Factory.backCompat(jr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Star=void 0;const Hc=be,jv=xt,Vc=ue,zv=Pe;class On extends jv.Shape{_sceneFunc(e){var n=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var l=1;l<o*2;l++){var c=l%2===0?i:n,h=c*Math.sin(l*Math.PI/o),f=-1*c*Math.cos(l*Math.PI/o);e.lineTo(h,f)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Hs.Star=On;On.prototype.className="Star";On.prototype._centroid=!0;On.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,zv._registerNode)(On);Hc.Factory.addGetterSetter(On,"numPoints",5,(0,Vc.getNumberValidator)());Hc.Factory.addGetterSetter(On,"innerRadius",0,(0,Vc.getNumberValidator)());Hc.Factory.addGetterSetter(On,"outerRadius",0,(0,Vc.getNumberValidator)());var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.Text=qn.stringToArray=void 0;const Oc=st,Ut=be,Bv=xt,Tn=ue,Uv=Pe;function e1(a){return Array.from(a)}qn.stringToArray=e1;var Li="auto",Hv="center",t1="inherit",Ia="justify",Vv="Change.konva",Wv="2d",M0="-",r1="left",Xv="text",Kv="Text",qv="top",Yv="bottom",N0="middle",n1="normal",Qv="px ",as=" ",Jv="right",A0="rtl",Zv="word",em="char",F0="none",ic="…",i1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],tm=i1.length;function rm(a){return a.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}var os;function ac(){return os||(os=Oc.Util.createCanvasElement().getContext(Wv),os)}function nm(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function im(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function am(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}let ct=class extends Bv.Shape{constructor(e){super(am(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<tm;n++)this.on(i1[n]+Vv,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,i=n.length;if(this.text()){var o=this.padding(),l=this.fontSize(),c=this.lineHeight()*l,h=this.verticalAlign(),f=this.direction(),p=0,m=this.align(),C=this.getWidth(),w=this.letterSpacing(),_=this.fill(),y=this.textDecoration(),E=y.indexOf("underline")!==-1,P=y.indexOf("line-through")!==-1,T;f=f===t1?e.direction:f;var k=0,k=c/2,v=0,x=0;for(f===A0&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",N0),e.setAttr("textAlign",r1),h===N0?p=(this.getHeight()-i*c-o*2)/2:h===Yv&&(p=this.getHeight()-i*c-o*2),e.translate(o,p+o),T=0;T<i;T++){var v=0,x=0,b=n[T],R=b.text,B=b.width,O=b.lastInParagraph,$,M,D;if(e.save(),m===Jv?v+=C-B-o*2:m===Hv&&(v+=(C-B-o*2)/2),E){e.save(),e.beginPath(),e.moveTo(v,k+x+Math.round(l/2)),$=R.split(" ").length-1,M=$===0,D=m===Ia&&!O?C-o*2:B,e.lineTo(v+Math.round(D),k+x+Math.round(l/2)),e.lineWidth=l/15;const de=this._getLinearGradient();e.strokeStyle=de||_,e.stroke(),e.restore()}if(P){e.save(),e.beginPath(),e.moveTo(v,k+x),$=R.split(" ").length-1,M=$===0,D=m===Ia&&O&&!M?C-o*2:B,e.lineTo(v+Math.round(D),k+x),e.lineWidth=l/15;const de=this._getLinearGradient();e.strokeStyle=de||_,e.stroke(),e.restore()}if(f!==A0&&(w!==0||m===Ia)){$=R.split(" ").length-1;for(var X=e1(R),W=0;W<X.length;W++){var Z=X[W];Z===" "&&!O&&m===Ia&&(v+=(C-o*2-B)/$),this._partialTextX=v,this._partialTextY=k+x,this._partialText=Z,e.fillStrokeShape(this),v+=this.measureSize(Z).width+w}}else w!==0&&e.setAttr("letterSpacing",`${w}px`),this._partialTextX=v,this._partialTextY=k+x,this._partialText=R,e.fillStrokeShape(this);e.restore(),i>1&&(k+=c)}}}_hitFunc(e){var n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=Oc.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Xv,n),this}getWidth(){var e=this.attrs.width===Li||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Li||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Oc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=ac(),i=this.fontSize(),o;return n.save(),n.font=this._getContextFont(),o=n.measureText(e),n.restore(),{width:o.width,height:i}}_getContextFont(){return this.fontStyle()+as+this.fontVariant()+as+(this.fontSize()+Qv)+rm(this.fontFamily())}_addTextLine(e){this.align()===Ia&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),i=e.length;return ac().measureText(e).width+(i?n*(i-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),i=0,o=this.lineHeight()*n,l=this.attrs.width,c=this.attrs.height,h=l!==Li&&l!==void 0,f=c!==Li&&c!==void 0,p=this.padding(),m=l-p*2,C=c-p*2,w=0,_=this.wrap(),y=_!==F0,E=_!==em&&y,P=this.ellipsis();this.textArr=[],ac().font=this._getContextFont();for(var T=P?this._getTextWidth(ic):0,k=0,v=e.length;k<v;++k){var x=e[k],b=this._getTextWidth(x);if(h&&b>m)for(;x.length>0;){for(var R=0,B=x.length,O="",$=0;R<B;){var M=R+B>>>1,D=x.slice(0,M+1),X=this._getTextWidth(D)+T;X<=m?(R=M+1,O=D,$=X):B=M}if(O){if(E){var W,Z=x[O.length],K=Z===as||Z===M0;K&&$<=m?W=O.length:W=Math.max(O.lastIndexOf(as),O.lastIndexOf(M0))+1,W>0&&(R=W,O=O.slice(0,R),$=this._getTextWidth(O))}O=O.trimRight(),this._addTextLine(O),i=Math.max(i,$),w+=o;var se=this._shouldHandleEllipsis(w);if(se){this._tryToAddEllipsisToLastLine();break}if(x=x.slice(R),x=x.trimLeft(),x.length>0&&(b=this._getTextWidth(x),b<=m)){this._addTextLine(x),w+=o,i=Math.max(i,b);break}}else break}else this._addTextLine(x),w+=o,i=Math.max(i,b),this._shouldHandleEllipsis(w)&&k<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&w+o>C)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){var n=+this.fontSize(),i=this.lineHeight()*n,o=this.attrs.height,l=o!==Li&&o!==void 0,c=this.padding(),h=o-c*2,f=this.wrap(),p=f!==F0;return!p||l&&e+i>h}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Li&&e!==void 0,i=this.padding(),o=e-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];if(!(!c||!l)){if(n){var h=this._getTextWidth(c.text+ic)<o;h||(c.text=c.text.slice(0,c.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+ic)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};qn.Text=ct;ct.prototype._fillFunc=nm;ct.prototype._strokeFunc=im;ct.prototype.className=Kv;ct.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Uv._registerNode)(ct);Ut.Factory.overWriteSetter(ct,"width",(0,Tn.getNumberOrAutoValidator)());Ut.Factory.overWriteSetter(ct,"height",(0,Tn.getNumberOrAutoValidator)());Ut.Factory.addGetterSetter(ct,"direction",t1);Ut.Factory.addGetterSetter(ct,"fontFamily","Arial");Ut.Factory.addGetterSetter(ct,"fontSize",12,(0,Tn.getNumberValidator)());Ut.Factory.addGetterSetter(ct,"fontStyle",n1);Ut.Factory.addGetterSetter(ct,"fontVariant",n1);Ut.Factory.addGetterSetter(ct,"padding",0,(0,Tn.getNumberValidator)());Ut.Factory.addGetterSetter(ct,"align",r1);Ut.Factory.addGetterSetter(ct,"verticalAlign",qv);Ut.Factory.addGetterSetter(ct,"lineHeight",1,(0,Tn.getNumberValidator)());Ut.Factory.addGetterSetter(ct,"wrap",Zv);Ut.Factory.addGetterSetter(ct,"ellipsis",!1,(0,Tn.getBooleanValidator)());Ut.Factory.addGetterSetter(ct,"letterSpacing",0,(0,Tn.getNumberValidator)());Ut.Factory.addGetterSetter(ct,"text","",(0,Tn.getStringValidator)());Ut.Factory.addGetterSetter(ct,"textDecoration","");var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.TextPath=void 0;const oc=st,kr=be,om=xt,La=qi,sc=qn,a1=ue,sm=Pe;var lm="",o1="normal";function s1(a){a.fillText(this.partialText,0,0)}function l1(a){a.strokeText(this.partialText,0,0)}class wt extends om.Shape{constructor(e){super(e),this.dummyCanvas=oc.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return La.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:La.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=La.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),i=this.fill(),o=this.fontSize(),l=this.glyphInfo;n==="underline"&&e.beginPath();for(var c=0;c<l.length;c++){e.save();var h=l[c].p0;e.translate(h.x,h.y),e.rotate(l[c].rotation),this.partialText=l[c].text,e.fillStrokeShape(this),n==="underline"&&(c===0&&e.moveTo(0,o/2+1),e.lineTo(o,o/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;e.moveTo(i.x,i.y)}for(var o=0;o<n.length;o++){var l=n[o].p1;e.lineTo(l.x,l.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return oc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return sc.Text.prototype.setText.call(this,e)}_getContextFont(){return sc.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),l=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let h=0;o==="center"&&(h=Math.max(0,this.pathLength/2-c/2)),o==="right"&&(h=Math.max(0,this.pathLength-c));const f=(0,sc.stringToArray)(this.text());let p=h;for(var m=0;m<f.length;m++){const C=this._getPointAtLength(p);if(!C)return;let w=this._getTextSize(f[m]).width+i;if(f[m]===" "&&o==="justify"){const k=this.text().split(" ").length-1;w+=(this.pathLength-c)/k}const _=this._getPointAtLength(p+w);if(!_)return;const y=La.Path.getLineLength(C.x,C.y,_.x,_.y);let E=0;if(l)try{E=l(f[m-1],f[m])*this.fontSize()}catch{E=0}C.x+=E,_.x+=E,this.textWidth+=E;const P=La.Path.getPointOnLine(E+y/2,C.x,C.y,_.x,_.y),T=Math.atan2(_.y-C.y,_.x-C.x);this.glyphInfo.push({transposeX:P.x,transposeY:P.y,text:f[m],rotation:T,p0:C,p1:_}),p+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});for(var n=e[0]||0,i=e[0]||0,o=e[1]||0,l=e[1]||0,c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);var p=this.fontSize();return{x:n-p/2,y:o-p/2,width:i-n+p,height:l-o+p}}destroy(){return oc.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Vs.TextPath=wt;wt.prototype._fillFunc=s1;wt.prototype._strokeFunc=l1;wt.prototype._fillFuncHit=s1;wt.prototype._strokeFuncHit=l1;wt.prototype.className="TextPath";wt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,sm._registerNode)(wt);kr.Factory.addGetterSetter(wt,"data");kr.Factory.addGetterSetter(wt,"fontFamily","Arial");kr.Factory.addGetterSetter(wt,"fontSize",12,(0,a1.getNumberValidator)());kr.Factory.addGetterSetter(wt,"fontStyle",o1);kr.Factory.addGetterSetter(wt,"align","left");kr.Factory.addGetterSetter(wt,"letterSpacing",0,(0,a1.getNumberValidator)());kr.Factory.addGetterSetter(wt,"textBaseline","middle");kr.Factory.addGetterSetter(wt,"fontVariant",o1);kr.Factory.addGetterSetter(wt,"text",lm);kr.Factory.addGetterSetter(wt,"textDecoration",null);kr.Factory.addGetterSetter(wt,"kerningFunc",null);var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Transformer=void 0;const Ve=st,je=be,I0=rt,um=xt,cm=Za,L0=Xi,Or=Pe,kn=ue,dm=Pe;var u1="tr-konva",hm=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${u1}`).join(" "),D0="nodesRect",fm=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],gm={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const pm="ontouchstart"in Or.Konva._global;function vm(a,e,n){if(a==="rotater")return n;e+=Ve.Util.degToRad(gm[a]||0);var i=(Ve.Util.radToDeg(e)%360+360)%360;return Ve.Util._inRange(i,315+22.5,360)||Ve.Util._inRange(i,0,22.5)?"ns-resize":Ve.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":Ve.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":Ve.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":Ve.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":Ve.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":Ve.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":Ve.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(Ve.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var _s=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],G0=1e8;function mm(a){return{x:a.x+a.width/2*Math.cos(a.rotation)+a.height/2*Math.sin(-a.rotation),y:a.y+a.height/2*Math.cos(a.rotation)+a.width/2*Math.sin(a.rotation)}}function c1(a,e,n){const i=n.x+(a.x-n.x)*Math.cos(e)-(a.y-n.y)*Math.sin(e),o=n.y+(a.x-n.x)*Math.sin(e)+(a.y-n.y)*Math.cos(e);return{...a,rotation:a.rotation+e,x:i,y:o}}function ym(a,e){const n=mm(a);return c1(a,e,n)}function _m(a,e,n){let i=e;for(let o=0;o<a.length;o++){const l=Or.Konva.getAngle(a[o]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<n&&(i=l)}return i}let Tc=0;class Ne extends L0.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(hm,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Ve.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u1+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(o=>o.isAncestorOf(this)?(Ve.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},c=o._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");o.on(c,l),o.on(fm.map(h=>h+`.${this._getEventNamespace()}`).join(" "),l),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(o)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const o=e.getAbsolutePosition(),l=o.x-n.x,c=o.y-n.y;this.nodes().forEach(h=>{if(h===e||h.isDragging())return;const f=h.getAbsolutePosition();h.setAbsolutePosition({x:f.x+l,y:f.y+c}),h.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(D0),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(D0,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){var o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(i),c=e.getAbsolutePosition(i),h=o.x*l.x-e.offsetX()*l.x,f=o.y*l.y-e.offsetY()*l.y;const p=(Or.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:c.x+h*Math.cos(p)+f*Math.sin(-p),y:c.y+f*Math.cos(p)+h*Math.sin(p),width:o.width*l.x,height:o.height*l.y,rotation:p};return c1(m,-Or.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-G0,y:-G0,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var C=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],w=p.getAbsoluteTransform();C.forEach(function(_){var y=w.point(_);n.push(y)})});const i=new Ve.Transform;i.rotate(-Or.Konva.getAngle(this.rotation()));var o=1/0,l=1/0,c=-1/0,h=-1/0;n.forEach(function(p){var m=i.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),i.invert();const f=i.point({x:o,y:l});return{x:f.x,y:f.y,width:c-o,height:h-l,rotation:Or.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),_s.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new cm.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:pm?10:"auto"}),i=this;n.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),n.on("dragstart",o=>{n.stopDrag(),o.cancelBubble=!0}),n.on("dragend",o=>{o.cancelBubble=!0}),n.on("mouseenter",()=>{var o=Or.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=vm(e,o,l);n.getStage().content&&(n.getStage().content.style.cursor=c),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new um.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,i){var o=i.getParent(),l=o.padding();n.beginPath(),n.rect(-l,-l,i.width()+l*2,i.height()+l*2),n.moveTo(i.width()/2,-l),o.rotateEnabled()&&o.rotateLineVisible()&&n.lineTo(i.width()/2,-o.rotateAnchorOffset()*Ve.Util._sign(i.height())-l),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(this.shouldOverdrawWholeArea()){var o=this.padding();n.beginPath(),n.rect(-o,-o,i.width()+o*2,i.height()+o*2),n.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,o=n.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var c=e.target.getAbsolutePosition(),h=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-c.x,y:h.y-c.y},Tc++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:e.evt,target:f})})}_handleMouseMove(e){var n,i,o,l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const h=c.getPointerPosition();let f={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const p=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,e)),l.setAbsolutePosition(f);const m=l.getAbsolutePosition();if(!(p.x===m.x&&p.y===m.y)){if(this._movingAnchorName==="rotater"){var C=this._getNodeRect();n=l.x()-C.width/2,i=-l.y()+C.height/2;let W=Math.atan2(-i,n)+Math.PI/2;C.height<0&&(W-=Math.PI);var w=Or.Konva.getAngle(this.rotation());const Z=w+W,K=Or.Konva.getAngle(this.rotationSnapTolerance()),de=_m(this.rotationSnaps(),Z,K)-C.rotation,me=ym(C,de);this._fitNodesInto(me,e);return}var _=this.shiftBehavior(),y;_==="inverted"?y=this.keepRatio()&&!e.shiftKey:_==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;var v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-left").x()>E.x?-1:1,T=this.findOne(".top-left").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-left").x(E.x-n),this.findOne(".top-left").y(E.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(E.y-l.y(),2));var P=this.findOne(".top-right").x()<E.x?-1:1,T=this.findOne(".top-right").y()>E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-right").x(E.x+n),this.findOne(".top-right").y(E.y-i)}var k=l.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(E.x-l.x(),2)+Math.pow(l.y()-E.y,2));var P=E.x<l.x()?-1:1,T=l.y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,l.x(E.x-n),l.y(E.y+i)}k=l.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(y){var E=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(l.x()-E.x,2)+Math.pow(l.y()-E.y,2));var P=this.findOne(".bottom-right").x()<E.x?-1:1,T=this.findOne(".bottom-right").y()<E.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".bottom-right").x(E.x+n),this.findOne(".bottom-right").y(E.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||e.altKey;if(v){var x=this.findOne(".top-left"),b=this.findOne(".bottom-right"),R=x.x(),B=x.y(),O=this.getWidth()-b.x(),$=this.getHeight()-b.y();b.move({x:-R,y:-B}),x.move({x:O,y:$})}var M=this.findOne(".top-left").getAbsolutePosition();n=M.x,i=M.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:D,height:X,rotation:Or.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();Tc--,this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:e,target:i})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var i=this._getNodeRect();const o=1;if(Ve.Util._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(Ve.Util._inRange(e.height,-this.padding()*2-o,o)){this.update();return}var l=new Ve.Transform;if(l.rotate(Or.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const w=l.point({x:-this.padding()*2,y:0});e.x+=w.x,e.y+=w.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const w=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const w=l.point({x:0,y:-this.padding()*2});e.x+=w.x,e.y+=w.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const w=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const w=this.boundBoxFunc()(i,e);w?e=w:Ve.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,h=new Ve.Transform;h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.width/c,i.height/c);const f=new Ve.Transform,p=e.width/c,m=e.height/c;this.flipEnabled()===!1?(f.translate(e.x,e.y),f.rotate(e.rotation),f.translate(e.width<0?e.width:0,e.height<0?e.height:0),f.scale(Math.abs(p),Math.abs(m))):(f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(p,m));const C=f.multiply(h.invert());this._nodes.forEach(w=>{var _;const y=w.getParent().getAbsoluteTransform(),E=w.getTransform().copy();E.translate(w.offsetX(),w.offsetY());const P=new Ve.Transform;P.multiply(y.copy().invert()).multiply(C).multiply(y).multiply(E);const T=P.decompose();w.setAttrs(T),(_=w.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(Ve.Util._getRotation(e.rotation)),this._nodes.forEach(w=>{this._fire("transform",{evt:n,target:w}),w._fire("transform",{evt:n,target:w})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(Ve.Util._getRotation(n.rotation));var i=n.width,o=n.height,l=this.enabledAnchors(),c=this.resizeEnabled(),h=this.padding(),f=this.anchorSize();const p=this.find("._anchor");p.forEach(C=>{C.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+h,offsetY:f/2+h,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+h,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-h,offsetY:f/2+h,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+h,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-h,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-h,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Ve.Util._sign(o)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(C=>{m(C)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),L0.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return I0.Node.prototype.toObject.call(this)}clone(e){var n=I0.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Ws.Transformer=Ne;Ne.isTransforming=()=>Tc>0;function Sm(a){return a instanceof Array||Ve.Util.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(e){_s.indexOf(e)===-1&&Ve.Util.warn("Unknown anchor name: "+e+". Available names are: "+_s.join(", "))}),a||[]}Ne.prototype.className="Transformer";(0,dm._registerNode)(Ne);je.Factory.addGetterSetter(Ne,"enabledAnchors",_s,Sm);je.Factory.addGetterSetter(Ne,"flipEnabled",!0,(0,kn.getBooleanValidator)());je.Factory.addGetterSetter(Ne,"resizeEnabled",!0);je.Factory.addGetterSetter(Ne,"anchorSize",10,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"rotateEnabled",!0);je.Factory.addGetterSetter(Ne,"rotateLineVisible",!0);je.Factory.addGetterSetter(Ne,"rotationSnaps",[]);je.Factory.addGetterSetter(Ne,"rotateAnchorOffset",50,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"rotateAnchorCursor","crosshair");je.Factory.addGetterSetter(Ne,"rotationSnapTolerance",5,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"borderEnabled",!0);je.Factory.addGetterSetter(Ne,"anchorStroke","rgb(0, 161, 255)");je.Factory.addGetterSetter(Ne,"anchorStrokeWidth",1,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"anchorFill","white");je.Factory.addGetterSetter(Ne,"anchorCornerRadius",0,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"borderStroke","rgb(0, 161, 255)");je.Factory.addGetterSetter(Ne,"borderStrokeWidth",1,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"borderDash");je.Factory.addGetterSetter(Ne,"keepRatio",!0);je.Factory.addGetterSetter(Ne,"shiftBehavior","default");je.Factory.addGetterSetter(Ne,"centeredScaling",!1);je.Factory.addGetterSetter(Ne,"ignoreStroke",!1);je.Factory.addGetterSetter(Ne,"padding",0,(0,kn.getNumberValidator)());je.Factory.addGetterSetter(Ne,"node");je.Factory.addGetterSetter(Ne,"nodes");je.Factory.addGetterSetter(Ne,"boundBoxFunc");je.Factory.addGetterSetter(Ne,"anchorDragBoundFunc");je.Factory.addGetterSetter(Ne,"anchorStyleFunc");je.Factory.addGetterSetter(Ne,"shouldOverdrawWholeArea",!1);je.Factory.addGetterSetter(Ne,"useSingleNodeRotation",!0);je.Factory.backCompat(Ne,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Wedge=void 0;const Ks=be,xm=xt,wm=Pe,d1=ue,Em=Pe;class nn extends xm.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,wm.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Xs.Wedge=nn;nn.prototype.className="Wedge";nn.prototype._centroid=!0;nn.prototype._attrsAffectingSize=["radius"];(0,Em._registerNode)(nn);Ks.Factory.addGetterSetter(nn,"radius",0,(0,d1.getNumberValidator)());Ks.Factory.addGetterSetter(nn,"angle",0,(0,d1.getNumberValidator)());Ks.Factory.addGetterSetter(nn,"clockwise",!1);Ks.Factory.backCompat(nn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Blur=void 0;const $0=be,Cm=rt,Pm=ue;function j0(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var bm=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Om=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Tm(a,e){var n=a.data,i=a.width,o=a.height,l,c,h,f,p,m,C,w,_,y,E,P,T,k,v,x,b,R,B,O,$,M,D,X,W=e+e+1,Z=i-1,K=o-1,se=e+1,de=se*(se+1)/2,me=new j0,Te=null,le=me,J=null,he=null,ke=bm[e],we=Om[e];for(h=1;h<W;h++)le=le.next=new j0,h===se&&(Te=le);for(le.next=me,C=m=0,c=0;c<o;c++){for(x=b=R=B=w=_=y=E=0,P=se*(O=n[m]),T=se*($=n[m+1]),k=se*(M=n[m+2]),v=se*(D=n[m+3]),w+=de*O,_+=de*$,y+=de*M,E+=de*D,le=me,h=0;h<se;h++)le.r=O,le.g=$,le.b=M,le.a=D,le=le.next;for(h=1;h<se;h++)f=m+((Z<h?Z:h)<<2),w+=(le.r=O=n[f])*(X=se-h),_+=(le.g=$=n[f+1])*X,y+=(le.b=M=n[f+2])*X,E+=(le.a=D=n[f+3])*X,x+=O,b+=$,R+=M,B+=D,le=le.next;for(J=me,he=Te,l=0;l<i;l++)n[m+3]=D=E*ke>>we,D!==0?(D=255/D,n[m]=(w*ke>>we)*D,n[m+1]=(_*ke>>we)*D,n[m+2]=(y*ke>>we)*D):n[m]=n[m+1]=n[m+2]=0,w-=P,_-=T,y-=k,E-=v,P-=J.r,T-=J.g,k-=J.b,v-=J.a,f=C+((f=l+e+1)<Z?f:Z)<<2,x+=J.r=n[f],b+=J.g=n[f+1],R+=J.b=n[f+2],B+=J.a=n[f+3],w+=x,_+=b,y+=R,E+=B,J=J.next,P+=O=he.r,T+=$=he.g,k+=M=he.b,v+=D=he.a,x-=O,b-=$,R-=M,B-=D,he=he.next,m+=4;C+=i}for(l=0;l<i;l++){for(b=R=B=x=_=y=E=w=0,m=l<<2,P=se*(O=n[m]),T=se*($=n[m+1]),k=se*(M=n[m+2]),v=se*(D=n[m+3]),w+=de*O,_+=de*$,y+=de*M,E+=de*D,le=me,h=0;h<se;h++)le.r=O,le.g=$,le.b=M,le.a=D,le=le.next;for(p=i,h=1;h<=e;h++)m=p+l<<2,w+=(le.r=O=n[m])*(X=se-h),_+=(le.g=$=n[m+1])*X,y+=(le.b=M=n[m+2])*X,E+=(le.a=D=n[m+3])*X,x+=O,b+=$,R+=M,B+=D,le=le.next,h<K&&(p+=i);for(m=l,J=me,he=Te,c=0;c<o;c++)f=m<<2,n[f+3]=D=E*ke>>we,D>0?(D=255/D,n[f]=(w*ke>>we)*D,n[f+1]=(_*ke>>we)*D,n[f+2]=(y*ke>>we)*D):n[f]=n[f+1]=n[f+2]=0,w-=P,_-=T,y-=k,E-=v,P-=J.r,T-=J.g,k-=J.b,v-=J.a,f=l+((f=c+se)<K?f:K)*i<<2,w+=x+=J.r=n[f],_+=b+=J.g=n[f+1],y+=R+=J.b=n[f+2],E+=B+=J.a=n[f+3],J=J.next,P+=O=he.r,T+=$=he.g,k+=M=he.b,v+=D=he.a,x-=O,b-=$,R-=M,B-=D,he=he.next,m+=i}}const km=function(e){var n=Math.round(this.blurRadius());n>0&&Tm(e,n)};qs.Blur=km;$0.Factory.addGetterSetter(Cm.Node,"blurRadius",0,(0,Pm.getNumberValidator)(),$0.Factory.afterSetFilter);var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Brighten=void 0;const z0=be,Rm=rt,Mm=ue,Nm=function(a){var e=this.brightness()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=4)n[o]+=e,n[o+1]+=e,n[o+2]+=e};Ys.Brighten=Nm;z0.Factory.addGetterSetter(Rm.Node,"brightness",0,(0,Mm.getNumberValidator)(),z0.Factory.afterSetFilter);var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.Contrast=void 0;const B0=be,Am=rt,Fm=ue,Im=function(a){var e=Math.pow((this.contrast()+100)/100,2),n=a.data,i=n.length,o=150,l=150,c=150,h;for(h=0;h<i;h+=4)o=n[h],l=n[h+1],c=n[h+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,o=o<0?0:o>255?255:o,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,n[h]=o,n[h+1]=l,n[h+2]=c};Qs.Contrast=Im;B0.Factory.addGetterSetter(Am.Node,"contrast",0,(0,Fm.getNumberValidator)(),B0.Factory.afterSetFilter);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.Emboss=void 0;const Cn=be,Zs=rt,Lm=st,h1=ue,Dm=function(a){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),o=this.embossBlend(),l=0,c=0,h=a.data,f=a.width,p=a.height,m=f*4,C=p;switch(i){case"top-left":l=-1,c=-1;break;case"top":l=-1,c=0;break;case"top-right":l=-1,c=1;break;case"right":l=0,c=1;break;case"bottom-right":l=1,c=1;break;case"bottom":l=1,c=0;break;case"bottom-left":l=1,c=-1;break;case"left":l=0,c=-1;break;default:Lm.Util.error("Unknown emboss direction: "+i)}do{var w=(C-1)*m,_=l;C+_<1&&(_=0),C+_>p&&(_=0);var y=(C-1+_)*f*4,E=f;do{var P=w+(E-1)*4,T=c;E+T<1&&(T=0),E+T>f&&(T=0);var k=y+(E-1+T)*4,v=h[P]-h[k],x=h[P+1]-h[k+1],b=h[P+2]-h[k+2],R=v,B=R>0?R:-R,O=x>0?x:-x,$=b>0?b:-b;if(O>B&&(R=x),$>B&&(R=b),R*=e,o){var M=h[P]+R,D=h[P+1]+R,X=h[P+2]+R;h[P]=M>255?255:M<0?0:M,h[P+1]=D>255?255:D<0?0:D,h[P+2]=X>255?255:X<0?0:X}else{var W=n-R;W<0?W=0:W>255&&(W=255),h[P]=h[P+1]=h[P+2]=W}}while(--E)}while(--C)};Js.Emboss=Dm;Cn.Factory.addGetterSetter(Zs.Node,"embossStrength",.5,(0,h1.getNumberValidator)(),Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(Zs.Node,"embossWhiteLevel",.5,(0,h1.getNumberValidator)(),Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(Zs.Node,"embossDirection","top-left",null,Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(Zs.Node,"embossBlend",!1,null,Cn.Factory.afterSetFilter);var el={};Object.defineProperty(el,"__esModule",{value:!0});el.Enhance=void 0;const U0=be,Gm=rt,$m=ue;function lc(a,e,n,i,o){var l=n-e,c=o-i,h;return l===0?i+c/2:c===0?i:(h=(a-e)/l,h=c*h+i,h)}const jm=function(a){var e=a.data,n=e.length,i=e[0],o=i,l,c=e[1],h=c,f,p=e[2],m=p,C,w,_=this.enhance();if(_!==0){for(w=0;w<n;w+=4)l=e[w+0],l<i?i=l:l>o&&(o=l),f=e[w+1],f<c?c=f:f>h&&(h=f),C=e[w+2],C<p?p=C:C>m&&(m=C);o===i&&(o=255,i=0),h===c&&(h=255,c=0),m===p&&(m=255,p=0);var y,E,P,T,k,v,x,b,R;for(_>0?(E=o+_*(255-o),P=i-_*(i-0),k=h+_*(255-h),v=c-_*(c-0),b=m+_*(255-m),R=p-_*(p-0)):(y=(o+i)*.5,E=o+_*(o-y),P=i+_*(i-y),T=(h+c)*.5,k=h+_*(h-T),v=c+_*(c-T),x=(m+p)*.5,b=m+_*(m-x),R=p+_*(p-x)),w=0;w<n;w+=4)e[w+0]=lc(e[w+0],i,o,P,E),e[w+1]=lc(e[w+1],c,h,v,k),e[w+2]=lc(e[w+2],p,m,R,b)}};el.Enhance=jm;U0.Factory.addGetterSetter(Gm.Node,"enhance",0,(0,$m.getNumberValidator)(),U0.Factory.afterSetFilter);var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.Grayscale=void 0;const zm=function(a){var e=a.data,n=e.length,i,o;for(i=0;i<n;i+=4)o=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o};tl.Grayscale=zm;var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.HSL=void 0;const Bi=be,Wc=rt,Xc=ue;Bi.Factory.addGetterSetter(Wc.Node,"hue",0,(0,Xc.getNumberValidator)(),Bi.Factory.afterSetFilter);Bi.Factory.addGetterSetter(Wc.Node,"saturation",0,(0,Xc.getNumberValidator)(),Bi.Factory.afterSetFilter);Bi.Factory.addGetterSetter(Wc.Node,"luminance",0,(0,Xc.getNumberValidator)(),Bi.Factory.afterSetFilter);const Bm=function(a){var e=a.data,n=e.length,i=1,o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,h,f=i*o*Math.cos(l*Math.PI/180),p=i*o*Math.sin(l*Math.PI/180),m=.299*i+.701*f+.167*p,C=.587*i-.587*f+.33*p,w=.114*i-.114*f-.497*p,_=.299*i-.299*f-.328*p,y=.587*i+.413*f+.035*p,E=.114*i-.114*f+.293*p,P=.299*i-.3*f+1.25*p,T=.587*i-.586*f-1.05*p,k=.114*i+.886*f-.2*p,v,x,b,R;for(h=0;h<n;h+=4)v=e[h+0],x=e[h+1],b=e[h+2],R=e[h+3],e[h+0]=m*v+C*x+w*b+c,e[h+1]=_*v+y*x+E*b+c,e[h+2]=P*v+T*x+k*b+c,e[h+3]=R};rl.HSL=Bm;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.HSV=void 0;const Ui=be,Kc=rt,qc=ue,Um=function(a){var e=a.data,n=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c,h=i*o*Math.cos(l*Math.PI/180),f=i*o*Math.sin(l*Math.PI/180),p=.299*i+.701*h+.167*f,m=.587*i-.587*h+.33*f,C=.114*i-.114*h-.497*f,w=.299*i-.299*h-.328*f,_=.587*i+.413*h+.035*f,y=.114*i-.114*h+.293*f,E=.299*i-.3*h+1.25*f,P=.587*i-.586*h-1.05*f,T=.114*i+.886*h-.2*f,k,v,x,b;for(c=0;c<n;c+=4)k=e[c+0],v=e[c+1],x=e[c+2],b=e[c+3],e[c+0]=p*k+m*v+C*x,e[c+1]=w*k+_*v+y*x,e[c+2]=E*k+P*v+T*x,e[c+3]=b};nl.HSV=Um;Ui.Factory.addGetterSetter(Kc.Node,"hue",0,(0,qc.getNumberValidator)(),Ui.Factory.afterSetFilter);Ui.Factory.addGetterSetter(Kc.Node,"saturation",0,(0,qc.getNumberValidator)(),Ui.Factory.afterSetFilter);Ui.Factory.addGetterSetter(Kc.Node,"value",0,(0,qc.getNumberValidator)(),Ui.Factory.afterSetFilter);var il={};Object.defineProperty(il,"__esModule",{value:!0});il.Invert=void 0;const Hm=function(a){var e=a.data,n=e.length,i;for(i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};il.Invert=Hm;var al={};Object.defineProperty(al,"__esModule",{value:!0});al.Kaleidoscope=void 0;const Ss=be,f1=rt,H0=st,g1=ue;var Vm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w=0,_=0,y=0,E=0,P,T=Math.sqrt(h*h+f*f);m=l-h,C=c-f,P=Math.sqrt(m*m+C*C),T=P>T?P:T;var k=c,v=l,x,b,R=360/v*Math.PI/180,B,O;for(b=0;b<v;b+=1)for(B=Math.sin(b*R),O=Math.cos(b*R),x=0;x<k;x+=1)m=Math.floor(h+T*x/k*O),C=Math.floor(f+T*x/k*B),p=(C*l+m)*4,w=i[p+0],_=i[p+1],y=i[p+2],E=i[p+3],p=(b+x*l)*4,o[p+0]=w,o[p+1]=_,o[p+2]=y,o[p+3]=E},Wm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,C,w,_,y=0,E=0,P=0,T=0,k,v=Math.sqrt(h*h+f*f);m=l-h,C=c-f,k=Math.sqrt(m*m+C*C),v=k>v?k:v;var x=c,b=l,R,B,O=n.polarRotation||0,$,M;for(m=0;m<l;m+=1)for(C=0;C<c;C+=1)w=m-h,_=C-f,R=Math.sqrt(w*w+_*_)*x/v,B=(Math.atan2(_,w)*180/Math.PI+360+O)%360,B=B*b/360,$=Math.floor(B),M=Math.floor(R),p=(M*l+$)*4,y=i[p+0],E=i[p+1],P=i[p+2],T=i[p+3],p=(C*l+m)*4,o[p+0]=y,o[p+1]=E,o[p+2]=P,o[p+3]=T};const Xm=function(a){var e=a.width,n=a.height,i,o,l,c,h,f,p,m,C,w,_=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),E=Math.floor(e*(y%360)/360);if(!(_<1)){var P=H0.Util.createCanvasElement();P.width=e,P.height=n;var T=P.getContext("2d").getImageData(0,0,e,n);H0.Util.releaseCanvas(P),Vm(a,T,{polarCenterX:e/2,polarCenterY:n/2});for(var k=e/Math.pow(2,_);k<=8;)k=k*2,_-=1;k=Math.ceil(k);var v=k,x=0,b=v,R=1;for(E+k>e&&(x=v,b=0,R=-1),o=0;o<n;o+=1)for(i=x;i!==b;i+=R)l=Math.round(i+E)%e,C=(e*o+l)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+i)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;for(o=0;o<n;o+=1)for(v=Math.floor(k),c=0;c<_;c+=1){for(i=0;i<v+1;i+=1)C=(e*o+i)*4,h=T.data[C+0],f=T.data[C+1],p=T.data[C+2],m=T.data[C+3],w=(e*o+v*2-i-1)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;v*=2}Wm(T,a,{polarRotation:0})}};al.Kaleidoscope=Xm;Ss.Factory.addGetterSetter(f1.Node,"kaleidoscopePower",2,(0,g1.getNumberValidator)(),Ss.Factory.afterSetFilter);Ss.Factory.addGetterSetter(f1.Node,"kaleidoscopeAngle",0,(0,g1.getNumberValidator)(),Ss.Factory.afterSetFilter);var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.Mask=void 0;const V0=be,Km=rt,qm=ue;function ss(a,e,n){var i=(n*a.width+e)*4,o=[];return o.push(a.data[i++],a.data[i++],a.data[i++],a.data[i++]),o}function Da(a,e){return Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2))}function Ym(a){for(var e=[0,0,0],n=0;n<a.length;n++)e[0]+=a[n][0],e[1]+=a[n][1],e[2]+=a[n][2];return e[0]/=a.length,e[1]/=a.length,e[2]/=a.length,e}function Qm(a,e){var n=ss(a,0,0),i=ss(a,a.width-1,0),o=ss(a,0,a.height-1),l=ss(a,a.width-1,a.height-1),c=e||10;if(Da(n,i)<c&&Da(i,l)<c&&Da(l,o)<c&&Da(o,n)<c){for(var h=Ym([i,n,l,o]),f=[],p=0;p<a.width*a.height;p++){var m=Da(h,[a.data[p*4],a.data[p*4+1],a.data[p*4+2]]);f[p]=m<c?0:255}return f}}function Jm(a,e){for(var n=0;n<a.width*a.height;n++)a.data[4*n+3]=e[n]}function Zm(a,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m===255*8?255:0}return c}function e3(a,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m>=255*4?255:0}return c}function t3(a,e,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,C=0;C<o;C++)for(var w=0;w<o;w++){var _=h+C-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var E=_*e+y,P=i[C*o+w];m+=a[E]*P}}c[p]=m}return c}const r3=function(a){var e=this.threshold(),n=Qm(a,e);return n&&(n=Zm(n,a.width,a.height),n=e3(n,a.width,a.height),n=t3(n,a.width,a.height),Jm(a,n)),a};ol.Mask=r3;V0.Factory.addGetterSetter(Km.Node,"threshold",0,(0,qm.getNumberValidator)(),V0.Factory.afterSetFilter);var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.Noise=void 0;const W0=be,n3=rt,i3=ue,a3=function(a){var e=this.noise()*255,n=a.data,i=n.length,o=e/2,l;for(l=0;l<i;l+=4)n[l+0]+=o-2*o*Math.random(),n[l+1]+=o-2*o*Math.random(),n[l+2]+=o-2*o*Math.random()};sl.Noise=a3;W0.Factory.addGetterSetter(n3.Node,"noise",.2,(0,i3.getNumberValidator)(),W0.Factory.afterSetFilter);var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.Pixelate=void 0;const X0=be,o3=st,s3=rt,l3=ue,u3=function(a){var e=Math.ceil(this.pixelSize()),n=a.width,i=a.height,o,l,c,h,f,p,m,C=Math.ceil(n/e),w=Math.ceil(i/e),_,y,E,P,T,k,v,x=a.data;if(e<=0){o3.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<C;T+=1)for(k=0;k<w;k+=1){for(h=0,f=0,p=0,m=0,_=T*e,y=_+e,E=k*e,P=E+e,v=0,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,h+=x[c+0],f+=x[c+1],p+=x[c+2],m+=x[c+3],v+=1);for(h=h/v,f=f/v,p=p/v,m=m/v,o=_;o<y;o+=1)if(!(o>=n))for(l=E;l<P;l+=1)l>=i||(c=(n*l+o)*4,x[c+0]=h,x[c+1]=f,x[c+2]=p,x[c+3]=m)}};ll.Pixelate=u3;X0.Factory.addGetterSetter(s3.Node,"pixelSize",8,(0,l3.getNumberValidator)(),X0.Factory.afterSetFilter);var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.Posterize=void 0;const K0=be,c3=rt,d3=ue,h3=function(a){var e=Math.round(this.levels()*254)+1,n=a.data,i=n.length,o=255/e,l;for(l=0;l<i;l+=1)n[l]=Math.floor(n[l]/o)*o};ul.Posterize=h3;K0.Factory.addGetterSetter(c3.Node,"levels",.5,(0,d3.getNumberValidator)(),K0.Factory.afterSetFilter);var cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.RGB=void 0;const xs=be,Yc=rt,f3=ue,g3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c,h;for(c=0;c<n;c+=4)h=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255,e[c]=h*i,e[c+1]=h*o,e[c+2]=h*l,e[c+3]=e[c+3]};cl.RGB=g3;xs.Factory.addGetterSetter(Yc.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});xs.Factory.addGetterSetter(Yc.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});xs.Factory.addGetterSetter(Yc.Node,"blue",0,f3.RGBComponent,xs.Factory.afterSetFilter);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.RGBA=void 0;const Va=be,hl=rt,p3=ue,v3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c=this.alpha(),h,f;for(h=0;h<n;h+=4)f=1-c,e[h]=i*c+e[h]*f,e[h+1]=o*c+e[h+1]*f,e[h+2]=l*c+e[h+2]*f};dl.RGBA=v3;Va.Factory.addGetterSetter(hl.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Va.Factory.addGetterSetter(hl.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Va.Factory.addGetterSetter(hl.Node,"blue",0,p3.RGBComponent,Va.Factory.afterSetFilter);Va.Factory.addGetterSetter(hl.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a});var fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.Sepia=void 0;const m3=function(a){var e=a.data,n=e.length,i,o,l,c;for(i=0;i<n;i+=4)o=e[i+0],l=e[i+1],c=e[i+2],e[i+0]=Math.min(255,o*.393+l*.769+c*.189),e[i+1]=Math.min(255,o*.349+l*.686+c*.168),e[i+2]=Math.min(255,o*.272+l*.534+c*.131)};fl.Sepia=m3;var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.Solarize=void 0;const y3=function(a){var e=a.data,n=a.width,i=a.height,o=n*4,l=i;do{var c=(l-1)*o,h=n;do{var f=c+(h-1)*4,p=e[f],m=e[f+1],C=e[f+2];p>127&&(p=255-p),m>127&&(m=255-m),C>127&&(C=255-C),e[f]=p,e[f+1]=m,e[f+2]=C}while(--h)}while(--l)};gl.Solarize=y3;var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.Threshold=void 0;const q0=be,_3=rt,S3=ue,x3=function(a){var e=this.threshold()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=1)n[o]=n[o]<e?0:255};pl.Threshold=x3;q0.Factory.addGetterSetter(_3.Node,"threshold",.5,(0,S3.getNumberValidator)(),q0.Factory.afterSetFilter);Object.defineProperty(Cs,"__esModule",{value:!0});Cs.Konva=void 0;const Y0=ms,w3=Rs,E3=As,C3=Ls,P3=Ds,b3=Gs,Q0=zi,O3=Qa,T3=qi,k3=Za,R3=zs,M3=Bs,N3=Us,A3=Hs,F3=qn,I3=Vs,L3=Ws,D3=Xs,G3=qs,$3=Ys,j3=Qs,z3=Js,B3=el,U3=tl,H3=rl,V3=nl,W3=il,X3=al,K3=ol,q3=sl,Y3=ll,Q3=ul,J3=cl,Z3=dl,e4=fl,t4=gl,r4=pl;Cs.Konva=Y0.Konva.Util._assign(Y0.Konva,{Arc:w3.Arc,Arrow:E3.Arrow,Circle:C3.Circle,Ellipse:P3.Ellipse,Image:b3.Image,Label:Q0.Label,Tag:Q0.Tag,Line:O3.Line,Path:T3.Path,Rect:k3.Rect,RegularPolygon:R3.RegularPolygon,Ring:M3.Ring,Sprite:N3.Sprite,Star:A3.Star,Text:F3.Text,TextPath:I3.TextPath,Transformer:L3.Transformer,Wedge:D3.Wedge,Filters:{Blur:G3.Blur,Brighten:$3.Brighten,Contrast:j3.Contrast,Emboss:z3.Emboss,Enhance:B3.Enhance,Grayscale:U3.Grayscale,HSL:H3.HSL,HSV:V3.HSV,Invert:W3.Invert,Kaleidoscope:X3.Kaleidoscope,Mask:K3.Mask,Noise:q3.Noise,Pixelate:Y3.Pixelate,Posterize:Q3.Posterize,RGB:J3.RGB,RGBA:Z3.RGBA,Sepia:e4.Sepia,Solarize:t4.Solarize,Threshold:r4.Threshold}});var n4=Af.exports;Object.defineProperty(n4,"__esModule",{value:!0});const i4=Cs;Af.exports=i4.Konva;var kc={exports:{}};(function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=ms;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const i=ms;a.exports=i.Konva})(kc,kc.exports);var a4=kc.exports;const Wa=ws(a4);var p1={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4=function(e){var n={},i=N,o=fs,l=Object.assign;function c(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}function B(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case p:return"Portal";case w:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y:return(t.displayName||"Context")+".Consumer";case _:return(t._context.displayName||"Context")+".Provider";case E:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:B(t.type)||"Memo";case v:r=t._payload,t=t._init;try{return B(t(r))}catch{}}return null}function O(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(r);case 8:return r===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function $(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function M(t){if($(t)!==t)throw Error(c(188))}function D(t){var r=t.alternate;if(!r){if(r=$(t),r===null)throw Error(c(188));return r!==t?null:t}for(var s=t,u=r;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return M(d),t;if(g===u)return M(d),r;g=g.sibling}throw Error(c(188))}if(s.return!==u.return)s=d,u=g;else{for(var S=!1,A=d.child;A;){if(A===s){S=!0,s=d,u=g;break}if(A===u){S=!0,u=d,s=g;break}A=A.sibling}if(!S){for(A=g.child;A;){if(A===s){S=!0,s=g,u=d;break}if(A===u){S=!0,u=g,s=d;break}A=A.sibling}if(!S)throw Error(c(189))}}if(s.alternate!==u)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?t:r}function X(t){return t=D(t),t!==null?W(t):null}function W(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=W(t);if(r!==null)return r;t=t.sibling}return null}function Z(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=Z(t);if(r!==null)return r}t=t.sibling}return null}var K=Array.isArray,se=e.getPublicInstance,de=e.getRootHostContext,me=e.getChildHostContext,Te=e.prepareForCommit,le=e.resetAfterCommit,J=e.createInstance,he=e.appendInitialChild,ke=e.finalizeInitialChildren,we=e.prepareUpdate,qe=e.shouldSetTextContent,Ae=e.createTextInstance,F=e.scheduleTimeout,V=e.cancelTimeout,re=e.noTimeout,ge=e.isPrimaryRenderer,pe=e.supportsMutation,Le=e.supportsPersistence,Me=e.supportsHydration,It=e.getInstanceFromNode,Fe=e.preparePortalMount,Tt=e.getCurrentEventPriority,Ye=e.detachDeletedInstance,Ie=e.supportsMicrotasks,lt=e.scheduleMicrotask,Lt=e.supportsTestSelectors,$e=e.findFiberRoot,ze=e.getBoundingRect,pt=e.getTextContent,Dt=e.isHiddenSubtree,an=e.matchAccessibilityRole,on=e.setFocusIfFocusable,Nn=e.setupIntersectionObserver,ta=e.appendChild,An=e.appendChildToContainer,ra=e.commitTextUpdate,li=e.commitMount,na=e.commitUpdate,rr=e.insertBefore,Ht=e.insertInContainerBefore,sn=e.removeChild,ia=e.removeChildFromContainer,ui=e.resetTextContent,aa=e.hideInstance,oa=e.hideTextInstance,ae=e.unhideInstance,_e=e.unhideTextInstance,mt=e.clearContainer,kt=e.cloneInstance,nr=e.createContainerChildSet,ci=e.appendChildToContainerChildSet,Vt=e.finalizeContainerChildren,di=e.replaceContainerChildren,io=e.cloneHiddenInstance,ao=e.cloneHiddenTextInstance,Ol=e.canHydrateInstance,hi=e.canHydrateTextInstance,Tl=e.canHydrateSuspenseInstance,oo=e.isSuspenseInstancePending,fi=e.isSuspenseInstanceFallback,kl=e.getSuspenseInstanceFallbackErrorDetails,Rl=e.registerSuspenseInstanceRetry,ln=e.getNextHydratableSibling,sa=e.getFirstHydratableChild,la=e.getFirstHydratableChildWithinContainer,so=e.getFirstHydratableChildWithinSuspenseInstance,Ml=e.hydrateInstance,gi=e.hydrateTextInstance,Nl=e.hydrateSuspenseInstance,Al=e.getNextHydratableInstanceAfterSuspenseInstance,Fl=e.commitHydratedContainer,Il=e.commitHydratedSuspenseInstance,Ll=e.clearSuspenseBoundary,Dl=e.clearSuspenseBoundaryFromContainer,Fn=e.shouldDeleteUnhydratedTailInstances,Gl=e.didNotMatchHydratedContainerTextInstance,lo=e.didNotMatchHydratedTextInstance,ua;function In(t){if(ua===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);ua=r&&r[1]||""}return`
`+ua+t}var ca=!1;function da(t,r){if(!t||ca)return"";ca=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(q){var u=q}Reflect.construct(t,[],r)}else{try{r.call()}catch(q){u=q}t.call(r.prototype)}else{try{throw Error()}catch(q){u=q}t()}}catch(q){if(q&&u&&typeof q.stack=="string"){for(var d=q.stack.split(`
`),g=u.stack.split(`
`),S=d.length-1,A=g.length-1;1<=S&&0<=A&&d[S]!==g[A];)A--;for(;1<=S&&0<=A;S--,A--)if(d[S]!==g[A]){if(S!==1||A!==1)do if(S--,A--,0>A||d[S]!==g[A]){var z=`
`+d[S].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=S&&0<=A);break}}}finally{ca=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?In(t):""}var uo=Object.prototype.hasOwnProperty,ha=[],zr=-1;function ur(t){return{current:t}}function We(t){0>zr||(t.current=ha[zr],ha[zr]=null,zr--)}function Be(t,r){zr++,ha[zr]=t.current,t.current=r}var Sr={},Et=ur(Sr),nt=ur(!1),Br=Sr;function un(t,r){var s=t.type.contextTypes;if(!s)return Sr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=r[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Rt(t){return t=t.childContextTypes,t!=null}function pi(){We(nt),We(Et)}function vi(t,r,s){if(Et.current!==Sr)throw Error(c(168));Be(Et,r),Be(nt,s)}function fa(t,r,s){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in r))throw Error(c(108,O(t)||"Unknown",d));return l({},s,u)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,Br=Et.current,Be(Et,t),Be(nt,nt.current),!0}function yi(t,r,s){var u=t.stateNode;if(!u)throw Error(c(169));s?(t=fa(t,r,Br),u.__reactInternalMemoizedMergedChildContext=t,We(nt),We(Et),Be(Et,t)):We(nt),Be(nt,s)}var Kt=Math.clz32?Math.clz32:$l,co=Math.log,ga=Math.LN2;function $l(t){return t>>>=0,t===0?32:31-(co(t)/ga|0)|0}var Ln=64,cn=4194304;function Dn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _i(t,r){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,S=s&268435455;if(S!==0){var A=S&~d;A!==0?u=Dn(A):(g&=S,g!==0&&(u=Dn(g)))}else S=s&~d,S!==0?u=Dn(S):g!==0&&(u=Dn(g));if(u===0)return 0;if(r!==0&&r!==u&&!(r&d)&&(d=u&-u,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if(u&4&&(u|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)s=31-Kt(r),d=1<<s,u|=t[s],r&=~d;return u}function ho(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jl(t,r){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var S=31-Kt(g),A=1<<S,z=d[S];z===-1?(!(A&s)||A&u)&&(d[S]=ho(A,r)):z<=r&&(t.expiredLanes|=A),g&=~A}}function Si(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fo(){var t=Ln;return Ln<<=1,!(Ln&4194240)&&(Ln=64),t}function dn(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Gn(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Kt(r),t[r]=s}function zl(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-Kt(s),g=1<<d;r[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function xi(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var u=31-Kt(s),d=1<<u;d&r|t[u]&r&&(t[u]|=r),s&=~d}}var Ce=0;function wi(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pa=o.unstable_scheduleCallback,go=o.unstable_cancelCallback,po=o.unstable_shouldYield,Bl=o.unstable_requestPaint,dt=o.unstable_now,va=o.unstable_ImmediatePriority,vo=o.unstable_UserBlockingPriority,ma=o.unstable_NormalPriority,Rd=o.unstable_IdlePriority,Ei=null,cr=null;function Ul(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Ei,t,void 0,(t.current.flags&128)===128)}catch{}}function Hl(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var qt=typeof Object.is=="function"?Object.is:Hl,L=null,H=!1,Q=!1;function Y(t){L===null?L=[t]:L.push(t)}function ce(t){H=!0,Y(t)}function ie(){if(!Q&&L!==null){Q=!0;var t=0,r=Ce;try{var s=L;for(Ce=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}L=null,H=!1}catch(d){throw L!==null&&(L=L.slice(t+1)),pa(va,ie),d}finally{Ce=r,Q=!1}}return null}var Ue=[],Mt=0,Rr=null,ht=0,it=[],Ze=0,Ur=null,Hr=1,Vr="";function $n(t,r){Ue[Mt++]=ht,Ue[Mt++]=Rr,Rr=t,ht=r}function Md(t,r,s){it[Ze++]=Hr,it[Ze++]=Vr,it[Ze++]=Ur,Ur=t;var u=Hr;t=Vr;var d=32-Kt(u)-1;u&=~(1<<d),s+=1;var g=32-Kt(r)+d;if(30<g){var S=d-d%5;g=(u&(1<<S)-1).toString(32),u>>=S,d-=S,Hr=1<<32-Kt(r)+d|s<<d|u,Vr=g+t}else Hr=1<<g|s<<d|u,Vr=t}function Vl(t){t.return!==null&&($n(t,1),Md(t,1,0))}function Wl(t){for(;t===Rr;)Rr=Ue[--Mt],Ue[Mt]=null,ht=Ue[--Mt],Ue[Mt]=null;for(;t===Ur;)Ur=it[--Ze],it[Ze]=null,Vr=it[--Ze],it[Ze]=null,Hr=it[--Ze],it[Ze]=null}var ir=null,dr=null,et=!1,ya=!1,xr=null;function Nd(t,r){var s=vr(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Ad(t,r){switch(t.tag){case 5:return r=Ol(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,ir=t,dr=sa(r),!0):!1;case 6:return r=hi(r,t.pendingProps),r!==null?(t.stateNode=r,ir=t,dr=null,!0):!1;case 13:if(r=Tl(r),r!==null){var s=Ur!==null?{id:Hr,overflow:Vr}:null;return t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=vr(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,ir=t,dr=null,!0}return!1;default:return!1}}function Xl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kl(t){if(et){var r=dr;if(r){var s=r;if(!Ad(t,r)){if(Xl(t))throw Error(c(418));r=ln(s);var u=ir;r&&Ad(t,r)?Nd(u,s):(t.flags=t.flags&-4097|2,et=!1,ir=t)}}else{if(Xl(t))throw Error(c(418));t.flags=t.flags&-4097|2,et=!1,ir=t}}}function Fd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ir=t}function mo(t){if(!Me||t!==ir)return!1;if(!et)return Fd(t),et=!0,!1;if(t.tag!==3&&(t.tag!==5||Fn(t.type)&&!qe(t.type,t.memoizedProps))){var r=dr;if(r){if(Xl(t))throw Id(),Error(c(418));for(;r;)Nd(t,r),r=ln(r)}}if(Fd(t),t.tag===13){if(!Me)throw Error(c(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));dr=Al(t)}else dr=ir?ln(t.stateNode):null;return!0}function Id(){for(var t=dr;t;)t=ln(t)}function Ci(){Me&&(dr=ir=null,ya=et=!1)}function ql(t){xr===null?xr=[t]:xr.push(t)}var K1=h.ReactCurrentBatchConfig;function yo(t,r){if(qt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),u=Object.keys(r);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!uo.call(r,d)||!qt(t[d],r[d]))return!1}return!0}function q1(t){switch(t.tag){case 5:return In(t.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 2:case 15:return t=da(t.type,!1),t;case 11:return t=da(t.type.render,!1),t;case 1:return t=da(t.type,!0),t;default:return""}}function wr(t,r){if(t&&t.defaultProps){r=l({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}var _o=ur(null),So=null,Pi=null,Yl=null;function Ql(){Yl=Pi=So=null}function Ld(t,r,s){ge?(Be(_o,r._currentValue),r._currentValue=s):(Be(_o,r._currentValue2),r._currentValue2=s)}function Jl(t){var r=_o.current;We(_o),ge?t._currentValue=r:t._currentValue2=r}function Zl(t,r,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===s)break;t=t.return}}function bi(t,r){So=t,Yl=Pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Yt=!0),t.firstContext=null)}function hr(t){var r=ge?t._currentValue:t._currentValue2;if(Yl!==t)if(t={context:t,memoizedValue:r,next:null},Pi===null){if(So===null)throw Error(c(308));Pi=t,So.dependencies={lanes:0,firstContext:t}}else Pi=Pi.next=t;return r}var jn=null;function eu(t){jn===null?jn=[t]:jn.push(t)}function Dd(t,r,s,u){var d=r.interleaved;return d===null?(s.next=s,eu(r)):(s.next=d.next,d.next=s),r.interleaved=s,Mr(t,u)}function Mr(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var hn=!1;function tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function fn(t,r,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Oe&2){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,Mr(t,s)}return d=u.interleaved,d===null?(r.next=r,eu(u)):(r.next=d.next,d.next=r),u.interleaved=r,Mr(t,s)}function xo(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,xi(t,s)}}function $d(t,r){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=S:g=g.next=S,s=s.next}while(s!==null);g===null?d=g=r:g=g.next=r}else d=g=r;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function wo(t,r,s,u){var d=t.updateQueue;hn=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var z=A,q=z.next;z.next=null,S===null?g=q:S.next=q,S=z;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==S&&(A===null?oe.firstBaseUpdate=q:A.next=q,oe.lastBaseUpdate=z))}if(g!==null){var Se=d.baseState;S=0,oe=q=z=null,A=g;do{var ee=A.lane,Qe=A.eventTime;if((u&ee)===ee){oe!==null&&(oe=oe.next={eventTime:Qe,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Xe=t,Zt=A;switch(ee=r,Qe=s,Zt.tag){case 1:if(Xe=Zt.payload,typeof Xe=="function"){Se=Xe.call(Qe,Se,ee);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Zt.payload,ee=typeof Xe=="function"?Xe.call(Qe,Se,ee):Xe,ee==null)break e;Se=l({},Se,ee);break e;case 2:hn=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,ee=d.effects,ee===null?d.effects=[A]:ee.push(A))}else Qe={eventTime:Qe,lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(q=oe=Qe,z=Se):oe=oe.next=Qe,S|=ee;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);if(oe===null&&(z=Se),d.baseState=z,d.firstBaseUpdate=q,d.lastBaseUpdate=oe,r=d.shared.interleaved,r!==null){d=r;do S|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);Bn|=S,t.lanes=S,t.memoizedState=Se}}function jd(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(c(191,d));d.call(u)}}}var zd=new i.Component().refs;function ru(t,r,s,u){r=t.memoizedState,s=s(u,r),s=s==null?r:l({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Eo={isMounted:function(t){return(t=t._reactInternals)?$(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var u=zt(),d=vn(t),g=Wr(u,d);g.payload=r,s!=null&&(g.callback=s),r=fn(t,g,d),r!==null&&(pr(r,t,d,u),xo(r,t,d))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var u=zt(),d=vn(t),g=Wr(u,d);g.tag=1,g.payload=r,s!=null&&(g.callback=s),r=fn(t,g,d),r!==null&&(pr(r,t,d,u),xo(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=zt(),u=vn(t),d=Wr(s,u);d.tag=2,r!=null&&(d.callback=r),r=fn(t,d,u),r!==null&&(pr(r,t,u,s),xo(r,t,u))}};function Bd(t,r,s,u,d,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,S):r.prototype&&r.prototype.isPureReactComponent?!yo(s,u)||!yo(d,g):!0}function Ud(t,r,s){var u=!1,d=Sr,g=r.contextType;return typeof g=="object"&&g!==null?g=hr(g):(d=Rt(r)?Br:Et.current,u=r.contextTypes,g=(u=u!=null)?un(t,d):Sr),r=new r(s,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Eo,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function Hd(t,r,s,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,u),r.state!==t&&Eo.enqueueReplaceState(r,r.state,null)}function nu(t,r,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs=zd,tu(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=hr(g):(g=Rt(r)?Br:Et.current,d.context=un(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(ru(t,r,g,s),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Eo.enqueueReplaceState(d,d.state,null),wo(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(c(309));var u=s.stateNode}if(!u)throw Error(c(147,t));var d=u,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(S){var A=d.refs;A===zd&&(A=d.refs={}),S===null?delete A[g]:A[g]=S},r._stringRef=g,r)}if(typeof t!="string")throw Error(c(284));if(!s._owner)throw Error(c(290,t))}return t}function Co(t,r){throw t=Object.prototype.toString.call(r),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vd(t){var r=t._init;return r(t._payload)}function Wd(t){function r(j,I){if(t){var U=j.deletions;U===null?(j.deletions=[I],j.flags|=16):U.push(I)}}function s(j,I){if(!t)return null;for(;I!==null;)r(j,I),I=I.sibling;return null}function u(j,I){for(j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function d(j,I){return j=yn(j,I),j.index=0,j.sibling=null,j}function g(j,I,U){return j.index=U,t?(U=j.alternate,U!==null?(U=U.index,U<I?(j.flags|=2,I):U):(j.flags|=2,I)):(j.flags|=1048576,I)}function S(j){return t&&j.alternate===null&&(j.flags|=2),j}function A(j,I,U,te){return I===null||I.tag!==6?(I=Hu(U,j.mode,te),I.return=j,I):(I=d(I,U),I.return=j,I)}function z(j,I,U,te){var fe=U.type;return fe===m?oe(j,I,U.props.children,te,U.key):I!==null&&(I.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===v&&Vd(fe)===I.type)?(te=d(I,U.props),te.ref=_a(j,I,U),te.return=j,te):(te=Yo(U.type,U.key,U.props,null,j.mode,te),te.ref=_a(j,I,U),te.return=j,te)}function q(j,I,U,te){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=Vu(U,j.mode,te),I.return=j,I):(I=d(I,U.children||[]),I.return=j,I)}function oe(j,I,U,te,fe){return I===null||I.tag!==7?(I=Wn(U,j.mode,te,fe),I.return=j,I):(I=d(I,U),I.return=j,I)}function Se(j,I,U){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Hu(""+I,j.mode,U),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case f:return U=Yo(I.type,I.key,I.props,null,j.mode,U),U.ref=_a(j,null,I),U.return=j,U;case p:return I=Vu(I,j.mode,U),I.return=j,I;case v:var te=I._init;return Se(j,te(I._payload),U)}if(K(I)||R(I))return I=Wn(I,j.mode,U,null),I.return=j,I;Co(j,I)}return null}function ee(j,I,U,te){var fe=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return fe!==null?null:A(j,I,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case f:return U.key===fe?z(j,I,U,te):null;case p:return U.key===fe?q(j,I,U,te):null;case v:return fe=U._init,ee(j,I,fe(U._payload),te)}if(K(U)||R(U))return fe!==null?null:oe(j,I,U,te,null);Co(j,U)}return null}function Qe(j,I,U,te,fe){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(U)||null,A(I,j,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case f:return j=j.get(te.key===null?U:te.key)||null,z(I,j,te,fe);case p:return j=j.get(te.key===null?U:te.key)||null,q(I,j,te,fe);case v:var Ee=te._init;return Qe(j,I,U,Ee(te._payload),fe)}if(K(te)||R(te))return j=j.get(U)||null,oe(I,j,te,fe,null);Co(I,te)}return null}function Xe(j,I,U,te){for(var fe=null,Ee=null,xe=I,De=I=0,bt=null;xe!==null&&De<U.length;De++){xe.index>De?(bt=xe,xe=null):bt=xe.sibling;var Ge=ee(j,xe,U[De],te);if(Ge===null){xe===null&&(xe=bt);break}t&&xe&&Ge.alternate===null&&r(j,xe),I=g(Ge,I,De),Ee===null?fe=Ge:Ee.sibling=Ge,Ee=Ge,xe=bt}if(De===U.length)return s(j,xe),et&&$n(j,De),fe;if(xe===null){for(;De<U.length;De++)xe=Se(j,U[De],te),xe!==null&&(I=g(xe,I,De),Ee===null?fe=xe:Ee.sibling=xe,Ee=xe);return et&&$n(j,De),fe}for(xe=u(j,xe);De<U.length;De++)bt=Qe(xe,j,De,U[De],te),bt!==null&&(t&&bt.alternate!==null&&xe.delete(bt.key===null?De:bt.key),I=g(bt,I,De),Ee===null?fe=bt:Ee.sibling=bt,Ee=bt);return t&&xe.forEach(function(_n){return r(j,_n)}),et&&$n(j,De),fe}function Zt(j,I,U,te){var fe=R(U);if(typeof fe!="function")throw Error(c(150));if(U=fe.call(U),U==null)throw Error(c(151));for(var Ee=fe=null,xe=I,De=I=0,bt=null,Ge=U.next();xe!==null&&!Ge.done;De++,Ge=U.next()){xe.index>De?(bt=xe,xe=null):bt=xe.sibling;var _n=ee(j,xe,Ge.value,te);if(_n===null){xe===null&&(xe=bt);break}t&&xe&&_n.alternate===null&&r(j,xe),I=g(_n,I,De),Ee===null?fe=_n:Ee.sibling=_n,Ee=_n,xe=bt}if(Ge.done)return s(j,xe),et&&$n(j,De),fe;if(xe===null){for(;!Ge.done;De++,Ge=U.next())Ge=Se(j,Ge.value,te),Ge!==null&&(I=g(Ge,I,De),Ee===null?fe=Ge:Ee.sibling=Ge,Ee=Ge);return et&&$n(j,De),fe}for(xe=u(j,xe);!Ge.done;De++,Ge=U.next())Ge=Qe(xe,j,De,Ge.value,te),Ge!==null&&(t&&Ge.alternate!==null&&xe.delete(Ge.key===null?De:Ge.key),I=g(Ge,I,De),Ee===null?fe=Ge:Ee.sibling=Ge,Ee=Ge);return t&&xe.forEach(function(Pg){return r(j,Pg)}),et&&$n(j,De),fe}function qr(j,I,U,te){if(typeof U=="object"&&U!==null&&U.type===m&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case f:e:{for(var fe=U.key,Ee=I;Ee!==null;){if(Ee.key===fe){if(fe=U.type,fe===m){if(Ee.tag===7){s(j,Ee.sibling),I=d(Ee,U.props.children),I.return=j,j=I;break e}}else if(Ee.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===v&&Vd(fe)===Ee.type){s(j,Ee.sibling),I=d(Ee,U.props),I.ref=_a(j,Ee,U),I.return=j,j=I;break e}s(j,Ee);break}else r(j,Ee);Ee=Ee.sibling}U.type===m?(I=Wn(U.props.children,j.mode,te,U.key),I.return=j,j=I):(te=Yo(U.type,U.key,U.props,null,j.mode,te),te.ref=_a(j,I,U),te.return=j,j=te)}return S(j);case p:e:{for(Ee=U.key;I!==null;){if(I.key===Ee)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){s(j,I.sibling),I=d(I,U.children||[]),I.return=j,j=I;break e}else{s(j,I);break}else r(j,I);I=I.sibling}I=Vu(U,j.mode,te),I.return=j,j=I}return S(j);case v:return Ee=U._init,qr(j,I,Ee(U._payload),te)}if(K(U))return Xe(j,I,U,te);if(R(U))return Zt(j,I,U,te);Co(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,I!==null&&I.tag===6?(s(j,I.sibling),I=d(I,U),I.return=j,j=I):(s(j,I),I=Hu(U,j.mode,te),I.return=j,j=I),S(j)):s(j,I)}return qr}var Oi=Wd(!0),Xd=Wd(!1),Sa={},fr=ur(Sa),xa=ur(Sa),Ti=ur(Sa);function Nr(t){if(t===Sa)throw Error(c(174));return t}function iu(t,r){Be(Ti,r),Be(xa,t),Be(fr,Sa),t=de(r),We(fr),Be(fr,t)}function ki(){We(fr),We(xa),We(Ti)}function Kd(t){var r=Nr(Ti.current),s=Nr(fr.current);r=me(s,t.type,r),s!==r&&(Be(xa,t),Be(fr,r))}function au(t){xa.current===t&&(We(fr),We(xa))}var at=ur(0);function Po(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||oo(s)||fi(s)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ou=[];function su(){for(var t=0;t<ou.length;t++){var r=ou[t];ge?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}ou.length=0}var bo=h.ReactCurrentDispatcher,lu=h.ReactCurrentBatchConfig,zn=0,ot=null,yt=null,Ct=null,Oo=!1,wa=!1,Ea=0,Y1=0;function Gt(){throw Error(c(321))}function uu(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!qt(t[s],r[s]))return!1;return!0}function cu(t,r,s,u,d,g){if(zn=g,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,bo.current=t===null||t.memoizedState===null?eg:tg,t=s(u,d),wa){g=0;do{if(wa=!1,Ea=0,25<=g)throw Error(c(301));g+=1,Ct=yt=null,r.updateQueue=null,bo.current=rg,t=s(u,d)}while(wa)}if(bo.current=Ro,r=yt!==null&&yt.next!==null,zn=0,Ct=yt=ot=null,Oo=!1,r)throw Error(c(300));return t}function du(){var t=Ea!==0;return Ea=0,t}function Ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ot.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function gr(){if(yt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=Ct===null?ot.memoizedState:Ct.next;if(r!==null)Ct=r,yt=t;else{if(t===null)throw Error(c(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Ct===null?ot.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Ca(t,r){return typeof r=="function"?r(t):r}function hu(t){var r=gr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=yt,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var A=S=null,z=null,q=g;do{var oe=q.lane;if((zn&oe)===oe)z!==null&&(z=z.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),u=q.hasEagerState?q.eagerState:t(u,q.action);else{var Se={lane:oe,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};z===null?(A=z=Se,S=u):z=z.next=Se,ot.lanes|=oe,Bn|=oe}q=q.next}while(q!==null&&q!==g);z===null?S=u:z.next=A,qt(u,r.memoizedState)||(Yt=!0),r.memoizedState=u,r.baseState=S,r.baseQueue=z,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,ot.lanes|=g,Bn|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function fu(t){var r=gr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=r.memoizedState;if(d!==null){s.pending=null;var S=d=d.next;do g=t(g,S.action),S=S.next;while(S!==d);qt(g,r.memoizedState)||(Yt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,u]}function qd(){}function Yd(t,r){var s=ot,u=gr(),d=r(),g=!qt(u.memoizedState,d);if(g&&(u.memoizedState=d,Yt=!0),u=u.queue,gu(Zd.bind(null,s,u,t),[t]),u.getSnapshot!==r||g||Ct!==null&&Ct.memoizedState.tag&1){if(s.flags|=2048,Pa(9,Jd.bind(null,s,u,d,r),void 0,null),Pt===null)throw Error(c(349));zn&30||Qd(s,r,d)}return d}function Qd(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Jd(t,r,s,u){r.value=s,r.getSnapshot=u,eh(r)&&th(t)}function Zd(t,r,s){return s(function(){eh(r)&&th(t)})}function eh(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!qt(t,s)}catch{return!0}}function th(t){var r=Mr(t,1);r!==null&&pr(r,t,1,-1)}function rh(t){var r=Ar();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},r.queue=t,t=t.dispatch=Z1.bind(null,ot,t),[r.memoizedState,t]}function Pa(t,r,s,u){return t={tag:t,create:r,destroy:s,deps:u,next:null},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,r.lastEffect=t)),t}function nh(){return gr().memoizedState}function To(t,r,s,u){var d=Ar();ot.flags|=t,d.memoizedState=Pa(1|r,s,void 0,u===void 0?null:u)}function ko(t,r,s,u){var d=gr();u=u===void 0?null:u;var g=void 0;if(yt!==null){var S=yt.memoizedState;if(g=S.destroy,u!==null&&uu(u,S.deps)){d.memoizedState=Pa(r,s,g,u);return}}ot.flags|=t,d.memoizedState=Pa(1|r,s,g,u)}function ih(t,r){return To(8390656,8,t,r)}function gu(t,r){return ko(2048,8,t,r)}function ah(t,r){return ko(4,2,t,r)}function oh(t,r){return ko(4,4,t,r)}function sh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function lh(t,r,s){return s=s!=null?s.concat([t]):null,ko(4,4,sh.bind(null,r,t),s)}function pu(){}function uh(t,r){var s=gr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&uu(r,u[1])?u[0]:(s.memoizedState=[t,r],t)}function ch(t,r){var s=gr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&uu(r,u[1])?u[0]:(t=t(),s.memoizedState=[t,r],t)}function dh(t,r,s){return zn&21?(qt(s,r)||(s=fo(),ot.lanes|=s,Bn|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=s)}function Q1(t,r){var s=Ce;Ce=s!==0&&4>s?s:4,t(!0);var u=lu.transition;lu.transition={};try{t(!1),r()}finally{Ce=s,lu.transition=u}}function hh(){return gr().memoizedState}function J1(t,r,s){var u=vn(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},fh(t))gh(r,s);else if(s=Dd(t,r,s,u),s!==null){var d=zt();pr(s,t,u,d),ph(s,r,u)}}function Z1(t,r,s){var u=vn(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(fh(t))gh(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,A=g(S,s);if(d.hasEagerState=!0,d.eagerState=A,qt(A,S)){var z=r.interleaved;z===null?(d.next=d,eu(r)):(d.next=z.next,z.next=d),r.interleaved=d;return}}catch{}finally{}s=Dd(t,r,d,u),s!==null&&(d=zt(),pr(s,t,u,d),ph(s,r,u))}}function fh(t){var r=t.alternate;return t===ot||r!==null&&r===ot}function gh(t,r){wa=Oo=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function ph(t,r,s){if(s&4194240){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,xi(t,s)}}var Ro={readContext:hr,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},eg={readContext:hr,useCallback:function(t,r){return Ar().memoizedState=[t,r===void 0?null:r],t},useContext:hr,useEffect:ih,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,To(4194308,4,sh.bind(null,r,t),s)},useLayoutEffect:function(t,r){return To(4194308,4,t,r)},useInsertionEffect:function(t,r){return To(4,2,t,r)},useMemo:function(t,r){var s=Ar();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var u=Ar();return r=s!==void 0?s(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=J1.bind(null,ot,t),[u.memoizedState,t]},useRef:function(t){var r=Ar();return t={current:t},r.memoizedState=t},useState:rh,useDebugValue:pu,useDeferredValue:function(t){return Ar().memoizedState=t},useTransition:function(){var t=rh(!1),r=t[0];return t=Q1.bind(null,t[1]),Ar().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var u=ot,d=Ar();if(et){if(s===void 0)throw Error(c(407));s=s()}else{if(s=r(),Pt===null)throw Error(c(349));zn&30||Qd(u,r,s)}d.memoizedState=s;var g={value:s,getSnapshot:r};return d.queue=g,ih(Zd.bind(null,u,g,t),[t]),u.flags|=2048,Pa(9,Jd.bind(null,u,g,s,r),void 0,null),s},useId:function(){var t=Ar(),r=Pt.identifierPrefix;if(et){var s=Vr,u=Hr;s=(u&~(1<<32-Kt(u)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ea++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Y1++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},tg={readContext:hr,useCallback:uh,useContext:hr,useEffect:gu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:hu,useRef:nh,useState:function(){return hu(Ca)},useDebugValue:pu,useDeferredValue:function(t){var r=gr();return dh(r,yt.memoizedState,t)},useTransition:function(){var t=hu(Ca)[0],r=gr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1},rg={readContext:hr,useCallback:uh,useContext:hr,useEffect:gu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:fu,useRef:nh,useState:function(){return fu(Ca)},useDebugValue:pu,useDeferredValue:function(t){var r=gr();return yt===null?r.memoizedState=t:dh(r,yt.memoizedState,t)},useTransition:function(){var t=fu(Ca)[0],r=gr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1};function Ri(t,r){try{var s="",u=r;do s+=q1(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d,digest:null}}function vu(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function mu(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function vh(t,r,s){s=Wr(-1,s),s.tag=3,s.payload={element:null};var u=r.value;return s.callback=function(){Ho||(Ho=!0,Du=u),mu(t,r)},s}function mh(t,r,s){s=Wr(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=r.value;s.payload=function(){return u(d)},s.callback=function(){mu(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){mu(t,r),typeof u!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),s}function yh(t,r,s){var u=t.pingCache;if(u===null){u=t.pingCache=new ng;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(s)||(d.add(s),t=mg.bind(null,t,r,s),r.then(t,t))}function _h(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Sh(t,r,s,u,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Wr(-1,1),r.tag=2,fn(s,r,1))),s.lanes|=1),t)}var ig=h.ReactCurrentOwner,Yt=!1;function Wt(t,r,s,u){r.child=t===null?Xd(r,null,s,u):Oi(r,t.child,s,u)}function xh(t,r,s,u,d){s=s.render;var g=r.ref;return bi(r,d),u=cu(t,r,s,u,g,d),s=du(),t!==null&&!Yt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Xr(t,r,d)):(et&&s&&Vl(r),r.flags|=1,Wt(t,r,u,d),r.child)}function wh(t,r,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Uu(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=g,Eh(t,r,g,u,d)):(t=Yo(s.type,null,u,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!(t.lanes&d)){var S=g.memoizedProps;if(s=s.compare,s=s!==null?s:yo,s(S,u)&&t.ref===r.ref)return Xr(t,r,d)}return r.flags|=1,t=yn(g,u),t.ref=r.ref,t.return=r,r.child=t}function Eh(t,r,s,u,d){if(t!==null){var g=t.memoizedProps;if(yo(g,u)&&t.ref===r.ref)if(Yt=!1,r.pendingProps=u=g,(t.lanes&d)!==0)t.flags&131072&&(Yt=!0);else return r.lanes=t.lanes,Xr(t,r,d)}return yu(t,r,s,u,d)}function Ch(t,r,s){var u=r.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Ni,ar),ar|=s;else{if(!(s&1073741824))return t=g!==null?g.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Be(Ni,ar),ar|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,Be(Ni,ar),ar|=u}else g!==null?(u=g.baseLanes|s,r.memoizedState=null):u=s,Be(Ni,ar),ar|=u;return Wt(t,r,d,s),r.child}function Ph(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function yu(t,r,s,u,d){var g=Rt(s)?Br:Et.current;return g=un(r,g),bi(r,d),s=cu(t,r,s,u,g,d),u=du(),t!==null&&!Yt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Xr(t,r,d)):(et&&u&&Vl(r),r.flags|=1,Wt(t,r,s,d),r.child)}function bh(t,r,s,u,d){if(Rt(s)){var g=!0;mi(r)}else g=!1;if(bi(r,d),r.stateNode===null)No(t,r),Ud(r,s,u),nu(r,s,u,d),u=!0;else if(t===null){var S=r.stateNode,A=r.memoizedProps;S.props=A;var z=S.context,q=s.contextType;typeof q=="object"&&q!==null?q=hr(q):(q=Rt(s)?Br:Et.current,q=un(r,q));var oe=s.getDerivedStateFromProps,Se=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";Se||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==u||z!==q)&&Hd(r,S,u,q),hn=!1;var ee=r.memoizedState;S.state=ee,wo(r,u,S,d),z=r.memoizedState,A!==u||ee!==z||nt.current||hn?(typeof oe=="function"&&(ru(r,s,oe,u),z=r.memoizedState),(A=hn||Bd(r,s,A,u,ee,z,q))?(Se||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=z),S.props=u,S.state=z,S.context=q,u=A):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{S=r.stateNode,Gd(t,r),A=r.memoizedProps,q=r.type===r.elementType?A:wr(r.type,A),S.props=q,Se=r.pendingProps,ee=S.context,z=s.contextType,typeof z=="object"&&z!==null?z=hr(z):(z=Rt(s)?Br:Et.current,z=un(r,z));var Qe=s.getDerivedStateFromProps;(oe=typeof Qe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==Se||ee!==z)&&Hd(r,S,u,z),hn=!1,ee=r.memoizedState,S.state=ee,wo(r,u,S,d);var Xe=r.memoizedState;A!==Se||ee!==Xe||nt.current||hn?(typeof Qe=="function"&&(ru(r,s,Qe,u),Xe=r.memoizedState),(q=hn||Bd(r,s,q,u,ee,Xe,z)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(u,Xe,z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(u,Xe,z)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Xe),S.props=u,S.state=Xe,S.context=z,u=q):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),u=!1)}return _u(t,r,s,u,g,d)}function _u(t,r,s,u,d,g){Ph(t,r);var S=(r.flags&128)!==0;if(!u&&!S)return d&&yi(r,s,!1),Xr(t,r,g);u=r.stateNode,ig.current=r;var A=S&&typeof s.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&S?(r.child=Oi(r,t.child,null,g),r.child=Oi(r,null,A,g)):Wt(t,r,A,g),r.memoizedState=u.state,d&&yi(r,s,!0),r.child}function Oh(t){var r=t.stateNode;r.pendingContext?vi(t,r.pendingContext,r.pendingContext!==r.context):r.context&&vi(t,r.context,!1),iu(t,r.containerInfo)}function Th(t,r,s,u,d){return Ci(),ql(d),r.flags|=256,Wt(t,r,s,u),r.child}var Su={dehydrated:null,treeContext:null,retryLane:0};function xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function kh(t,r,s){var u=r.pendingProps,d=at.current,g=!1,S=(r.flags&128)!==0,A;if((A=S)||(A=t!==null&&t.memoizedState===null?!1:(d&2)!==0),A?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Be(at,d&1),t===null)return Kl(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?fi(t)?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(S=u.children,t=u.fallback,g?(u=r.mode,g=r.child,S={mode:"hidden",children:S},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=S):g=Qo(S,u,0,null),t=Wn(t,u,s,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=xu(s),r.memoizedState=Su,t):wu(r,S));if(d=t.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return ag(t,r,S,u,A,d,s);if(g){g=u.fallback,S=r.mode,d=t.child,A=d.sibling;var z={mode:"hidden",children:u.children};return!(S&1)&&r.child!==d?(u=r.child,u.childLanes=0,u.pendingProps=z,r.deletions=null):(u=yn(d,z),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=yn(A,g):(g=Wn(g,S,s,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=t.child.memoizedState,S=S===null?xu(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},g.memoizedState=S,g.childLanes=t.childLanes&~s,r.memoizedState=Su,u}return g=t.child,t=g.sibling,u=yn(g,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=s),u.return=r,u.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=u,r.memoizedState=null,u}function wu(t,r){return r=Qo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Mo(t,r,s,u){return u!==null&&ql(u),Oi(r,t.child,null,s),t=wu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ag(t,r,s,u,d,g,S){if(s)return r.flags&256?(r.flags&=-257,u=vu(Error(c(422))),Mo(t,r,S,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=u.fallback,d=r.mode,u=Qo({mode:"visible",children:u.children},d,0,null),g=Wn(g,d,S,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,r.mode&1&&Oi(r,t.child,null,S),r.child.memoizedState=xu(S),r.memoizedState=Su,g);if(!(r.mode&1))return Mo(t,r,S,null);if(fi(d))return u=kl(d).digest,g=Error(c(419)),u=vu(g,u,void 0),Mo(t,r,S,u);if(s=(S&t.childLanes)!==0,Yt||s){if(u=Pt,u!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|S)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Mr(t,d),pr(u,t,d,-1))}return Bu(),u=vu(Error(c(421))),Mo(t,r,S,u)}return oo(d)?(r.flags|=128,r.child=t.child,r=yg.bind(null,t),Rl(d,r),null):(t=g.treeContext,Me&&(dr=so(d),ir=r,et=!0,xr=null,ya=!1,t!==null&&(it[Ze++]=Hr,it[Ze++]=Vr,it[Ze++]=Ur,Hr=t.id,Vr=t.overflow,Ur=r)),r=wu(r,u.children),r.flags|=4096,r)}function Rh(t,r,s){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Zl(t.return,r,s)}function Eu(t,r,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Mh(t,r,s){var u=r.pendingProps,d=u.revealOrder,g=u.tail;if(Wt(t,r,u.children,s),u=at.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rh(t,s,r);else if(t.tag===19)Rh(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Be(at,u),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(s=r.child,d=null;s!==null;)t=s.alternate,t!==null&&Po(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=r.child,r.child=null):(d=s.sibling,s.sibling=null),Eu(r,!1,d,s,g);break;case"backwards":for(s=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Po(t)===null){r.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Eu(r,!0,s,null,g);break;case"together":Eu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function No(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Xr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Bn|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(c(153));if(r.child!==null){for(t=r.child,s=yn(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=yn(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function og(t,r,s){switch(r.tag){case 3:Oh(r),Ci();break;case 5:Kd(r);break;case 1:Rt(r.type)&&mi(r);break;case 4:iu(r,r.stateNode.containerInfo);break;case 10:Ld(r,r.type._context,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Be(at,at.current&1),r.flags|=128,null):s&r.child.childLanes?kh(t,r,s):(Be(at,at.current&1),t=Xr(t,r,s),t!==null?t.sibling:null);Be(at,at.current&1);break;case 19:if(u=(s&r.childLanes)!==0,t.flags&128){if(u)return Mh(t,r,s);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Be(at,at.current),u)break;return null;case 22:case 23:return r.lanes=0,Ch(t,r,s)}return Xr(t,r,s)}function Fr(t){t.flags|=4}function Nh(t,r){if(t!==null&&t.child===r.child)return!0;if(r.flags&16)return!1;for(t=r.child;t!==null;){if(t.flags&12854||t.subtreeFlags&12854)return!1;t=t.sibling}return!0}var ba,Oa,Ao,Fo;if(pe)ba=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)he(t,s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Oa=function(){},Ao=function(t,r,s,u,d){if(t=t.memoizedProps,t!==u){var g=r.stateNode,S=Nr(fr.current);s=we(g,s,t,u,d,S),(r.updateQueue=s)&&Fr(r)}},Fo=function(t,r,s,u){s!==u&&Fr(r)};else if(Le){ba=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=io(g,d.type,d.memoizedProps,d)),he(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ao(g,d.memoizedProps,d)),he(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),ba(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var Ah=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=io(g,d.type,d.memoizedProps,d)),ci(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ao(g,d.memoizedProps,d)),ci(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Ah(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Oa=function(t,r){var s=r.stateNode;if(!Nh(t,r)){t=s.containerInfo;var u=nr(t);Ah(u,r,!1,!1),s.pendingChildren=u,Fr(r),Vt(t,u)}},Ao=function(t,r,s,u,d){var g=t.stateNode,S=t.memoizedProps;if((t=Nh(t,r))&&S===u)r.stateNode=g;else{var A=r.stateNode,z=Nr(fr.current),q=null;S!==u&&(q=we(A,s,S,u,d,z)),t&&q===null?r.stateNode=g:(g=kt(g,q,s,S,u,r,t,A),ke(g,s,u,d,z)&&Fr(r),r.stateNode=g,t?Fr(r):ba(g,r,!1,!1))}},Fo=function(t,r,s,u){s!==u?(t=Nr(Ti.current),s=Nr(fr.current),r.stateNode=Ae(u,t,s,r),Fr(r)):r.stateNode=t.stateNode}}else Oa=function(){},Ao=function(){},Fo=function(){};function Ta(t,r){if(!et)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function $t(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(r)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,r}function sg(t,r,s){var u=r.pendingProps;switch(Wl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return Rt(r.type)&&pi(),$t(r),null;case 3:return s=r.stateNode,ki(),We(nt),We(Et),su(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(mo(r)?Fr(r):t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,xr!==null&&(ju(xr),xr=null))),Oa(t,r),$t(r),null;case 5:au(r),s=Nr(Ti.current);var d=r.type;if(t!==null&&r.stateNode!=null)Ao(t,r,d,u,s),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(c(166));return $t(r),null}if(t=Nr(fr.current),mo(r)){if(!Me)throw Error(c(175));t=Ml(r.stateNode,r.type,r.memoizedProps,s,t,r,!ya),r.updateQueue=t,t!==null&&Fr(r)}else{var g=J(d,u,s,t,r);ba(g,r,!1,!1),r.stateNode=g,ke(g,d,u,s,t)&&Fr(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return $t(r),null;case 6:if(t&&r.stateNode!=null)Fo(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(c(166));if(t=Nr(Ti.current),s=Nr(fr.current),mo(r)){if(!Me)throw Error(c(176));if(t=r.stateNode,s=r.memoizedProps,(u=gi(t,s,r,!ya))&&(d=ir,d!==null))switch(d.tag){case 3:Gl(d.stateNode.containerInfo,t,s,(d.mode&1)!==0);break;case 5:lo(d.type,d.memoizedProps,d.stateNode,t,s,(d.mode&1)!==0)}u&&Fr(r)}else r.stateNode=Ae(u,t,s,r)}return $t(r),null;case 13:if(We(at),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&dr!==null&&r.mode&1&&!(r.flags&128))Id(),Ci(),r.flags|=98560,d=!1;else if(d=mo(r),u!==null&&u.dehydrated!==null){if(t===null){if(!d)throw Error(c(318));if(!Me)throw Error(c(344));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));Nl(d,r)}else Ci(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;$t(r),d=!1}else xr!==null&&(ju(xr),xr=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(s=u!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||at.current&1?_t===0&&(_t=3):Bu())),r.updateQueue!==null&&(r.flags|=4),$t(r),null);case 4:return ki(),Oa(t,r),t===null&&Fe(r.stateNode.containerInfo),$t(r),null;case 10:return Jl(r.type._context),$t(r),null;case 17:return Rt(r.type)&&pi(),$t(r),null;case 19:if(We(at),d=r.memoizedState,d===null)return $t(r),null;if(u=(r.flags&128)!==0,g=d.rendering,g===null)if(u)Ta(d,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(g=Po(t),g!==null){for(r.flags|=128,Ta(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=s,s=r.child;s!==null;)u=s,d=t,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,d=g.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),s=s.sibling;return Be(at,at.current&1|2),r.child}t=t.sibling}d.tail!==null&&dt()>Lu&&(r.flags|=128,u=!0,Ta(d,!1),r.lanes=4194304)}else{if(!u)if(t=Po(g),t!==null){if(r.flags|=128,u=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),Ta(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!et)return $t(r),null}else 2*dt()-d.renderingStartTime>Lu&&s!==1073741824&&(r.flags|=128,u=!0,Ta(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=dt(),r.sibling=null,t=at.current,Be(at,u?t&1|2:t&1),r):($t(r),null);case 22:case 23:return zu(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?ar&1073741824&&($t(r),pe&&r.subtreeFlags&6&&(r.flags|=8192)):$t(r),null;case 24:return null;case 25:return null}throw Error(c(156,r.tag))}function lg(t,r){switch(Wl(r),r.tag){case 1:return Rt(r.type)&&pi(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ki(),We(nt),We(Et),su(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return au(r),null;case 13:if(We(at),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(c(340));Ci()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(at),null;case 4:return ki(),null;case 10:return Jl(r.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var Io=!1,jt=!1,ug=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Mi(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){tt(t,r,u)}else s.current=null}function Cu(t,r,s){try{s()}catch(u){tt(t,r,u)}}var Fh=!1;function cg(t,r){for(Te(t.containerInfo),ne=r;ne!==null;)if(t=ne,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,ne=r;else for(;ne!==null;){t=ne;try{var s=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var u=s.memoizedProps,d=s.memoizedState,g=t.stateNode,S=g.getSnapshotBeforeUpdate(t.elementType===t.type?u:wr(t.type,u),d);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:pe&&mt(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(A){tt(t,t.return,A)}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}return s=Fh,Fh=!1,s}function ka(t,r,s){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Cu(r,s,g)}d=d.next}while(d!==u)}}function Lo(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==r)}}function Pu(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=se(s);break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Ih(t){var r=t.alternate;r!==null&&(t.alternate=null,Ih(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ye(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lh(t){return t.tag===5||t.tag===3||t.tag===4}function Dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bu(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?Ht(s,t,r):An(s,t);else if(u!==4&&(t=t.child,t!==null))for(bu(t,r,s),t=t.sibling;t!==null;)bu(t,r,s),t=t.sibling}function Ou(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?rr(s,t,r):ta(s,t);else if(u!==4&&(t=t.child,t!==null))for(Ou(t,r,s),t=t.sibling;t!==null;)Ou(t,r,s),t=t.sibling}var Nt=null,Er=!1;function Ir(t,r,s){for(s=s.child;s!==null;)Tu(t,r,s),s=s.sibling}function Tu(t,r,s){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Ei,s)}catch{}switch(s.tag){case 5:jt||Mi(s,r);case 6:if(pe){var u=Nt,d=Er;Nt=null,Ir(t,r,s),Nt=u,Er=d,Nt!==null&&(Er?ia(Nt,s.stateNode):sn(Nt,s.stateNode))}else Ir(t,r,s);break;case 18:pe&&Nt!==null&&(Er?Dl(Nt,s.stateNode):Ll(Nt,s.stateNode));break;case 4:pe?(u=Nt,d=Er,Nt=s.stateNode.containerInfo,Er=!0,Ir(t,r,s),Nt=u,Er=d):(Le&&(u=s.stateNode.containerInfo,d=nr(u),di(u,d)),Ir(t,r,s));break;case 0:case 11:case 14:case 15:if(!jt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,S=g.destroy;g=g.tag,S!==void 0&&(g&2||g&4)&&Cu(s,r,S),d=d.next}while(d!==u)}Ir(t,r,s);break;case 1:if(!jt&&(Mi(s,r),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){tt(s,r,A)}Ir(t,r,s);break;case 21:Ir(t,r,s);break;case 22:s.mode&1?(jt=(u=jt)||s.memoizedState!==null,Ir(t,r,s),jt=u):Ir(t,r,s);break;default:Ir(t,r,s)}}function Gh(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ug),r.forEach(function(u){var d=_g.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function Cr(t,r){var s=r.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,S=r;if(pe){var A=S;e:for(;A!==null;){switch(A.tag){case 5:Nt=A.stateNode,Er=!1;break e;case 3:Nt=A.stateNode.containerInfo,Er=!0;break e;case 4:Nt=A.stateNode.containerInfo,Er=!0;break e}A=A.return}if(Nt===null)throw Error(c(160));Tu(g,S,d),Nt=null,Er=!1}else Tu(g,S,d);var z=d.alternate;z!==null&&(z.return=null),d.return=null}catch(q){tt(d,r,q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)$h(r,t),r=r.sibling}function $h(t,r){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cr(r,t),Lr(t),u&4){try{ka(3,t,t.return),Lo(3,t)}catch(ee){tt(t,t.return,ee)}try{ka(5,t,t.return)}catch(ee){tt(t,t.return,ee)}}break;case 1:Cr(r,t),Lr(t),u&512&&s!==null&&Mi(s,s.return);break;case 5:if(Cr(r,t),Lr(t),u&512&&s!==null&&Mi(s,s.return),pe){if(t.flags&32){var d=t.stateNode;try{ui(d)}catch(ee){tt(t,t.return,ee)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(s=s!==null?s.memoizedProps:g,u=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{na(d,r,u,s,g,t)}catch(ee){tt(t,t.return,ee)}}}break;case 6:if(Cr(r,t),Lr(t),u&4&&pe){if(t.stateNode===null)throw Error(c(162));d=t.stateNode,g=t.memoizedProps,s=s!==null?s.memoizedProps:g;try{ra(d,s,g)}catch(ee){tt(t,t.return,ee)}}break;case 3:if(Cr(r,t),Lr(t),u&4){if(pe&&Me&&s!==null&&s.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(ee){tt(t,t.return,ee)}if(Le){d=r.containerInfo,g=r.pendingChildren;try{di(d,g)}catch(ee){tt(t,t.return,ee)}}}break;case 4:if(Cr(r,t),Lr(t),u&4&&Le){g=t.stateNode,d=g.containerInfo,g=g.pendingChildren;try{di(d,g)}catch(ee){tt(t,t.return,ee)}}break;case 13:Cr(r,t),Lr(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Iu=dt())),u&4&&Gh(t);break;case 22:var S=s!==null&&s.memoizedState!==null;if(t.mode&1?(jt=(s=jt)||S,Cr(r,t),jt=s):Cr(r,t),Lr(t),u&8192){if(s=t.memoizedState!==null,(t.stateNode.isHidden=s)&&!S&&t.mode&1)for(ne=t,u=t.child;u!==null;){for(r=ne=u;ne!==null;){S=ne;var A=S.child;switch(S.tag){case 0:case 11:case 14:case 15:ka(4,S,S.return);break;case 1:Mi(S,S.return);var z=S.stateNode;if(typeof z.componentWillUnmount=="function"){var q=S,oe=S.return;try{var Se=q;z.props=Se.memoizedProps,z.state=Se.memoizedState,z.componentWillUnmount()}catch(ee){tt(q,oe,ee)}}break;case 5:Mi(S,S.return);break;case 22:if(S.memoizedState!==null){Bh(r);continue}}A!==null?(A.return=S,ne=A):Bh(r)}u=u.sibling}if(pe){e:if(u=null,pe)for(r=t;;){if(r.tag===5){if(u===null){u=r;try{d=r.stateNode,s?aa(d):ae(r.stateNode,r.memoizedProps)}catch(ee){tt(t,t.return,ee)}}}else if(r.tag===6){if(u===null)try{g=r.stateNode,s?oa(g):_e(g,r.memoizedProps)}catch(ee){tt(t,t.return,ee)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}}}break;case 19:Cr(r,t),Lr(t),u&4&&Gh(t);break;case 21:break;default:Cr(r,t),Lr(t)}}function Lr(t){var r=t.flags;if(r&2){try{if(pe){e:{for(var s=t.return;s!==null;){if(Lh(s)){var u=s;break e}s=s.return}throw Error(c(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(ui(d),u.flags&=-33);var g=Dh(t);Ou(t,g,d);break;case 3:case 4:var S=u.stateNode.containerInfo,A=Dh(t);bu(t,A,S);break;default:throw Error(c(161))}}}catch(z){tt(t,t.return,z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dg(t,r,s){ne=t,jh(t)}function jh(t,r,s){for(var u=(t.mode&1)!==0;ne!==null;){var d=ne,g=d.child;if(d.tag===22&&u){var S=d.memoizedState!==null||Io;if(!S){var A=d.alternate,z=A!==null&&A.memoizedState!==null||jt;A=Io;var q=jt;if(Io=S,(jt=z)&&!q)for(ne=d;ne!==null;)S=ne,z=S.child,S.tag===22&&S.memoizedState!==null?Uh(d):z!==null?(z.return=S,ne=z):Uh(d);for(;g!==null;)ne=g,jh(g),g=g.sibling;ne=d,Io=A,jt=q}zh(t)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ne=g):zh(t)}}function zh(t){for(;ne!==null;){var r=ne;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:jt||Lo(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!jt)if(s===null)u.componentDidMount();else{var d=r.elementType===r.type?s.memoizedProps:wr(r.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&jd(r,g,u);break;case 3:var S=r.updateQueue;if(S!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=se(r.child.stateNode);break;case 1:s=r.child.stateNode}jd(r,S,s)}break;case 5:var A=r.stateNode;s===null&&r.flags&4&&li(A,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(Me&&r.memoizedState===null){var z=r.alternate;if(z!==null){var q=z.memoizedState;if(q!==null){var oe=q.dehydrated;oe!==null&&Il(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}jt||r.flags&512&&Pu(r)}catch(Se){tt(r,r.return,Se)}}if(r===t){ne=null;break}if(s=r.sibling,s!==null){s.return=r.return,ne=s;break}ne=r.return}}function Bh(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ne=s;break}ne=r.return}}function Uh(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Lo(4,r)}catch(z){tt(r,s,z)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var d=r.return;try{u.componentDidMount()}catch(z){tt(r,d,z)}}var g=r.return;try{Pu(r)}catch(z){tt(r,g,z)}break;case 5:var S=r.return;try{Pu(r)}catch(z){tt(r,S,z)}}}catch(z){tt(r,r.return,z)}if(r===t){ne=null;break}var A=r.sibling;if(A!==null){A.return=r.return,ne=A;break}ne=r.return}}var Do=0,Go=1,$o=2,jo=3,zo=4;if(typeof Symbol=="function"&&Symbol.for){var Ra=Symbol.for;Do=Ra("selector.component"),Go=Ra("selector.has_pseudo_class"),$o=Ra("selector.role"),jo=Ra("selector.test_id"),zo=Ra("selector.text")}function ku(t){var r=It(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(c(364));return r}if(t=$e(t),t===null)throw Error(c(362));return t.stateNode.current}function Ru(t,r){switch(r.$$typeof){case Do:if(t.type===r.value)return!0;break;case Go:e:{r=r.value,t=[t,0];for(var s=0;s<t.length;){var u=t[s++],d=t[s++],g=r[d];if(u.tag!==5||!Dt(u)){for(;g!=null&&Ru(u,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(u=u.child;u!==null;)t.push(u,d),u=u.sibling}}r=!1}return r;case $o:if(t.tag===5&&an(t.stateNode,r.value))return!0;break;case zo:if((t.tag===5||t.tag===6)&&(t=pt(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case jo:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Mu(t){switch(t.$$typeof){case Do:return"<"+(B(t.value)||"Unknown")+">";case Go:return":has("+(Mu(t)||"")+")";case $o:return'[role="'+t.value+'"]';case zo:return'"'+t.value+'"';case jo:return'[data-testname="'+t.value+'"]';default:throw Error(c(365))}}function Hh(t,r){var s=[];t=[t,0];for(var u=0;u<t.length;){var d=t[u++],g=t[u++],S=r[g];if(d.tag!==5||!Dt(d)){for(;S!=null&&Ru(d,S);)g++,S=r[g];if(g===r.length)s.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return s}function Nu(t,r){if(!Lt)throw Error(c(363));t=ku(t),t=Hh(t,r),r=[],t=Array.from(t);for(var s=0;s<t.length;){var u=t[s++];if(u.tag===5)Dt(u)||r.push(u.stateNode);else for(u=u.child;u!==null;)t.push(u),u=u.sibling}return r}var hg=Math.ceil,Bo=h.ReactCurrentDispatcher,Au=h.ReactCurrentOwner,ft=h.ReactCurrentBatchConfig,Oe=0,Pt=null,vt=null,At=0,ar=0,Ni=ur(0),_t=0,Ma=null,Bn=0,Uo=0,Fu=0,Na=null,Qt=null,Iu=0,Lu=1/0,Kr=null;function Ai(){Lu=dt()+500}var Ho=!1,Du=null,gn=null,Vo=!1,pn=null,Wo=0,Aa=0,Gu=null,Xo=-1,Ko=0;function zt(){return Oe&6?dt():Xo!==-1?Xo:Xo=dt()}function vn(t){return t.mode&1?Oe&2&&At!==0?At&-At:K1.transition!==null?(Ko===0&&(Ko=fo()),Ko):(t=Ce,t!==0?t:Tt()):1}function pr(t,r,s,u){if(50<Aa)throw Aa=0,Gu=null,Error(c(185));Gn(t,s,u),(!(Oe&2)||t!==Pt)&&(t===Pt&&(!(Oe&2)&&(Uo|=s),_t===4&&mn(t,At)),Jt(t,u),s===1&&Oe===0&&!(r.mode&1)&&(Ai(),H&&ie()))}function Jt(t,r){var s=t.callbackNode;jl(t,r);var u=_i(t,t===Pt?At:0);if(u===0)s!==null&&go(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(s!=null&&go(s),r===1)t.tag===0?ce(Wh.bind(null,t)):Y(Wh.bind(null,t)),Ie?lt(function(){!(Oe&6)&&ie()}):pa(va,ie),s=null;else{switch(wi(u)){case 1:s=va;break;case 4:s=vo;break;case 16:s=ma;break;case 536870912:s=Rd;break;default:s=ma}s=t0(s,Vh.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Vh(t,r){if(Xo=-1,Ko=0,Oe&6)throw Error(c(327));var s=t.callbackNode;if(Vn()&&t.callbackNode!==s)return null;var u=_i(t,t===Pt?At:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=qo(t,u);else{r=u;var d=Oe;Oe|=2;var g=qh();(Pt!==t||At!==r)&&(Kr=null,Ai(),Un(t,r));do try{pg();break}catch(A){Kh(t,A)}while(!0);Ql(),Bo.current=g,Oe=d,vt!==null?r=0:(Pt=null,At=0,r=_t)}if(r!==0){if(r===2&&(d=Si(t),d!==0&&(u=d,r=$u(t,d))),r===1)throw s=Ma,Un(t,0),mn(t,u),Jt(t,dt()),s;if(r===6)mn(t,u);else{if(d=t.current.alternate,!(u&30)&&!fg(d)&&(r=qo(t,u),r===2&&(g=Si(t),g!==0&&(u=g,r=$u(t,g))),r===1))throw s=Ma,Un(t,0),mn(t,u),Jt(t,dt()),s;switch(t.finishedWork=d,t.finishedLanes=u,r){case 0:case 1:throw Error(c(345));case 2:Hn(t,Qt,Kr);break;case 3:if(mn(t,u),(u&130023424)===u&&(r=Iu+500-dt(),10<r)){if(_i(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){zt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=F(Hn.bind(null,t,Qt,Kr),r);break}Hn(t,Qt,Kr);break;case 4:if(mn(t,u),(u&4194240)===u)break;for(r=t.eventTimes,d=-1;0<u;){var S=31-Kt(u);g=1<<S,S=r[S],S>d&&(d=S),u&=~g}if(u=d,u=dt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*hg(u/1960))-u,10<u){t.timeoutHandle=F(Hn.bind(null,t,Qt,Kr),u);break}Hn(t,Qt,Kr);break;case 5:Hn(t,Qt,Kr);break;default:throw Error(c(329))}}}return Jt(t,dt()),t.callbackNode===s?Vh.bind(null,t):null}function $u(t,r){var s=Na;return t.current.memoizedState.isDehydrated&&(Un(t,r).flags|=256),t=qo(t,r),t!==2&&(r=Qt,Qt=s,r!==null&&ju(r)),t}function ju(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function fg(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!qt(g(),d))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mn(t,r){for(r&=~Fu,r&=~Uo,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-Kt(r),u=1<<s;t[s]=-1,r&=~u}}function Wh(t){if(Oe&6)throw Error(c(327));Vn();var r=_i(t,0);if(!(r&1))return Jt(t,dt()),null;var s=qo(t,r);if(t.tag!==0&&s===2){var u=Si(t);u!==0&&(r=u,s=$u(t,u))}if(s===1)throw s=Ma,Un(t,0),mn(t,r),Jt(t,dt()),s;if(s===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Hn(t,Qt,Kr),Jt(t,dt()),null}function Xh(t){pn!==null&&pn.tag===0&&!(Oe&6)&&Vn();var r=Oe;Oe|=1;var s=ft.transition,u=Ce;try{if(ft.transition=null,Ce=1,t)return t()}finally{Ce=u,ft.transition=s,Oe=r,!(Oe&6)&&ie()}}function zu(){ar=Ni.current,We(Ni)}function Un(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==re&&(t.timeoutHandle=re,V(s)),vt!==null)for(s=vt.return;s!==null;){var u=s;switch(Wl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&pi();break;case 3:ki(),We(nt),We(Et),su();break;case 5:au(u);break;case 4:ki();break;case 13:We(at);break;case 19:We(at);break;case 10:Jl(u.type._context);break;case 22:case 23:zu()}s=s.return}if(Pt=t,vt=t=yn(t.current,null),At=ar=r,_t=0,Ma=null,Fu=Uo=Bn=0,Qt=Na=null,jn!==null){for(r=0;r<jn.length;r++)if(s=jn[r],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var S=g.next;g.next=d,u.next=S}s.pending=u}jn=null}return t}function Kh(t,r){do{var s=vt;try{if(Ql(),bo.current=Ro,Oo){for(var u=ot.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Oo=!1}if(zn=0,Ct=yt=ot=null,wa=!1,Ea=0,Au.current=null,s===null||s.return===null){_t=1,Ma=r,vt=null;break}e:{var g=t,S=s.return,A=s,z=r;if(r=At,A.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var q=z,oe=A,Se=oe.tag;if(!(oe.mode&1)&&(Se===0||Se===11||Se===15)){var ee=oe.alternate;ee?(oe.updateQueue=ee.updateQueue,oe.memoizedState=ee.memoizedState,oe.lanes=ee.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Qe=_h(S);if(Qe!==null){Qe.flags&=-257,Sh(Qe,S,A,g,r),Qe.mode&1&&yh(g,q,r),r=Qe,z=q;var Xe=r.updateQueue;if(Xe===null){var Zt=new Set;Zt.add(z),r.updateQueue=Zt}else Xe.add(z);break e}else{if(!(r&1)){yh(g,q,r),Bu();break e}z=Error(c(426))}}else if(et&&A.mode&1){var qr=_h(S);if(qr!==null){!(qr.flags&65536)&&(qr.flags|=256),Sh(qr,S,A,g,r),ql(Ri(z,A));break e}}g=z=Ri(z,A),_t!==4&&(_t=2),Na===null?Na=[g]:Na.push(g),g=S;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var j=vh(g,z,r);$d(g,j);break e;case 1:A=z;var I=g.type,U=g.stateNode;if(!(g.flags&128)&&(typeof I.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(gn===null||!gn.has(U)))){g.flags|=65536,r&=-r,g.lanes|=r;var te=mh(g,A,r);$d(g,te);break e}}g=g.return}while(g!==null)}Qh(s)}catch(fe){r=fe,vt===s&&s!==null&&(vt=s=s.return);continue}break}while(!0)}function qh(){var t=Bo.current;return Bo.current=Ro,t===null?Ro:t}function Bu(){(_t===0||_t===3||_t===2)&&(_t=4),Pt===null||!(Bn&268435455)&&!(Uo&268435455)||mn(Pt,At)}function qo(t,r){var s=Oe;Oe|=2;var u=qh();(Pt!==t||At!==r)&&(Kr=null,Un(t,r));do try{gg();break}catch(d){Kh(t,d)}while(!0);if(Ql(),Oe=s,Bo.current=u,vt!==null)throw Error(c(261));return Pt=null,At=0,_t}function gg(){for(;vt!==null;)Yh(vt)}function pg(){for(;vt!==null&&!po();)Yh(vt)}function Yh(t){var r=e0(t.alternate,t,ar);t.memoizedProps=t.pendingProps,r===null?Qh(t):vt=r,Au.current=null}function Qh(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=lg(s,r),s!==null){s.flags&=32767,vt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,vt=null;return}}else if(s=sg(s,r,ar),s!==null){vt=s;return}if(r=r.sibling,r!==null){vt=r;return}vt=r=t}while(r!==null);_t===0&&(_t=5)}function Hn(t,r,s){var u=Ce,d=ft.transition;try{ft.transition=null,Ce=1,vg(t,r,s,u)}finally{ft.transition=d,Ce=u}return null}function vg(t,r,s,u){do Vn();while(pn!==null);if(Oe&6)throw Error(c(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(zl(t,g),t===Pt&&(vt=Pt=null,At=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Vo||(Vo=!0,t0(ma,function(){return Vn(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=ft.transition,ft.transition=null;var S=Ce;Ce=1;var A=Oe;Oe|=4,Au.current=null,cg(t,s),$h(s,t),le(t.containerInfo),t.current=s,dg(s),Bl(),Oe=A,Ce=S,ft.transition=g}else t.current=s;if(Vo&&(Vo=!1,pn=t,Wo=d),g=t.pendingLanes,g===0&&(gn=null),Ul(s.stateNode),Jt(t,dt()),r!==null)for(u=t.onRecoverableError,s=0;s<r.length;s++)d=r[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Ho)throw Ho=!1,t=Du,Du=null,t;return Wo&1&&t.tag!==0&&Vn(),g=t.pendingLanes,g&1?t===Gu?Aa++:(Aa=0,Gu=t):Aa=0,ie(),null}function Vn(){if(pn!==null){var t=wi(Wo),r=ft.transition,s=Ce;try{if(ft.transition=null,Ce=16>t?16:t,pn===null)var u=!1;else{if(t=pn,pn=null,Wo=0,Oe&6)throw Error(c(331));var d=Oe;for(Oe|=4,ne=t.current;ne!==null;){var g=ne,S=g.child;if(ne.flags&16){var A=g.deletions;if(A!==null){for(var z=0;z<A.length;z++){var q=A[z];for(ne=q;ne!==null;){var oe=ne;switch(oe.tag){case 0:case 11:case 15:ka(8,oe,g)}var Se=oe.child;if(Se!==null)Se.return=oe,ne=Se;else for(;ne!==null;){oe=ne;var ee=oe.sibling,Qe=oe.return;if(Ih(oe),oe===q){ne=null;break}if(ee!==null){ee.return=Qe,ne=ee;break}ne=Qe}}}var Xe=g.alternate;if(Xe!==null){var Zt=Xe.child;if(Zt!==null){Xe.child=null;do{var qr=Zt.sibling;Zt.sibling=null,Zt=qr}while(Zt!==null)}}ne=g}}if(g.subtreeFlags&2064&&S!==null)S.return=g,ne=S;else e:for(;ne!==null;){if(g=ne,g.flags&2048)switch(g.tag){case 0:case 11:case 15:ka(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,ne=j;break e}ne=g.return}}var I=t.current;for(ne=I;ne!==null;){S=ne;var U=S.child;if(S.subtreeFlags&2064&&U!==null)U.return=S,ne=U;else e:for(S=I;ne!==null;){if(A=ne,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Lo(9,A)}}catch(fe){tt(A,A.return,fe)}if(A===S){ne=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,ne=te;break e}ne=A.return}}if(Oe=d,ie(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Ei,t)}catch{}u=!0}return u}finally{Ce=s,ft.transition=r}}return!1}function Jh(t,r,s){r=Ri(s,r),r=vh(t,r,1),t=fn(t,r,1),r=zt(),t!==null&&(Gn(t,1,r),Jt(t,r))}function tt(t,r,s){if(t.tag===3)Jh(t,t,s);else for(;r!==null;){if(r.tag===3){Jh(r,t,s);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(gn===null||!gn.has(u))){t=Ri(s,t),t=mh(r,t,1),r=fn(r,t,1),t=zt(),r!==null&&(Gn(r,1,t),Jt(r,t));break}}r=r.return}}function mg(t,r,s){var u=t.pingCache;u!==null&&u.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&s,Pt===t&&(At&s)===s&&(_t===4||_t===3&&(At&130023424)===At&&500>dt()-Iu?Un(t,0):Fu|=s),Jt(t,r)}function Zh(t,r){r===0&&(t.mode&1?(r=cn,cn<<=1,!(cn&130023424)&&(cn=4194304)):r=1);var s=zt();t=Mr(t,r),t!==null&&(Gn(t,r,s),Jt(t,s))}function yg(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Zh(t,s)}function _g(t,r){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(c(314))}u!==null&&u.delete(r),Zh(t,s)}var e0;e0=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||nt.current)Yt=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Yt=!1,og(t,r,s);Yt=!!(t.flags&131072)}else Yt=!1,et&&r.flags&1048576&&Md(r,ht,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;No(t,r),t=r.pendingProps;var d=un(r,Et.current);bi(r,s),d=cu(null,r,u,t,d,s);var g=du();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Rt(u)?(g=!0,mi(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,tu(r),d.updater=Eo,r.stateNode=d,d._reactInternals=r,nu(r,u,t,s),r=_u(null,r,u,!0,g,s)):(r.tag=0,et&&g&&Vl(r),Wt(null,r,d,s),r=r.child),r;case 16:u=r.elementType;e:{switch(No(t,r),t=r.pendingProps,d=u._init,u=d(u._payload),r.type=u,d=r.tag=xg(u),t=wr(u,t),d){case 0:r=yu(null,r,u,t,s);break e;case 1:r=bh(null,r,u,t,s);break e;case 11:r=xh(null,r,u,t,s);break e;case 14:r=wh(null,r,u,wr(u.type,t),s);break e}throw Error(c(306,u,""))}return r;case 0:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),yu(t,r,u,d,s);case 1:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),bh(t,r,u,d,s);case 3:e:{if(Oh(r),t===null)throw Error(c(387));u=r.pendingProps,g=r.memoizedState,d=g.element,Gd(t,r),wo(r,u,null,s);var S=r.memoizedState;if(u=S.element,Me&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=Ri(Error(c(423)),r),r=Th(t,r,u,s,d);break e}else if(u!==d){d=Ri(Error(c(424)),r),r=Th(t,r,u,s,d);break e}else for(Me&&(dr=la(r.stateNode.containerInfo),ir=r,et=!0,xr=null,ya=!1),s=Xd(r,null,u,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ci(),u===d){r=Xr(t,r,s);break e}Wt(t,r,u,s)}r=r.child}return r;case 5:return Kd(r),t===null&&Kl(r),u=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,S=d.children,qe(u,d)?S=null:g!==null&&qe(u,g)&&(r.flags|=32),Ph(t,r),Wt(t,r,S,s),r.child;case 6:return t===null&&Kl(r),null;case 13:return kh(t,r,s);case 4:return iu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Oi(r,null,u,s):Wt(t,r,u,s),r.child;case 11:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),xh(t,r,u,d,s);case 7:return Wt(t,r,r.pendingProps,s),r.child;case 8:return Wt(t,r,r.pendingProps.children,s),r.child;case 12:return Wt(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(u=r.type._context,d=r.pendingProps,g=r.memoizedProps,S=d.value,Ld(r,u,S),g!==null)if(qt(g.value,S)){if(g.children===d.children&&!nt.current){r=Xr(t,r,s);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var A=g.dependencies;if(A!==null){S=g.child;for(var z=A.firstContext;z!==null;){if(z.context===u){if(g.tag===1){z=Wr(-1,s&-s),z.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var oe=q.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),q.pending=z}}g.lanes|=s,z=g.alternate,z!==null&&(z.lanes|=s),Zl(g.return,s,r),A.lanes|=s;break}z=z.next}}else if(g.tag===10)S=g.type===r.type?null:g.child;else if(g.tag===18){if(S=g.return,S===null)throw Error(c(341));S.lanes|=s,A=S.alternate,A!==null&&(A.lanes|=s),Zl(S,s,r),S=g.sibling}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}Wt(t,r,d.children,s),r=r.child}return r;case 9:return d=r.type,u=r.pendingProps.children,bi(r,s),d=hr(d),u=u(d),r.flags|=1,Wt(t,r,u,s),r.child;case 14:return u=r.type,d=wr(u,r.pendingProps),d=wr(u.type,d),wh(t,r,u,d,s);case 15:return Eh(t,r,r.type,r.pendingProps,s);case 17:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:wr(u,d),No(t,r),r.tag=1,Rt(u)?(t=!0,mi(r)):t=!1,bi(r,s),Ud(r,u,d),nu(r,u,d,s),_u(null,r,u,!0,t,s);case 19:return Mh(t,r,s);case 22:return Ch(t,r,s)}throw Error(c(156,r.tag))};function t0(t,r){return pa(t,r)}function Sg(t,r,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,r,s,u){return new Sg(t,r,s,u)}function Uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xg(t){if(typeof t=="function")return Uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E)return 11;if(t===k)return 14}return 2}function yn(t,r){var s=t.alternate;return s===null?(s=vr(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Yo(t,r,s,u,d,g){var S=2;if(u=t,typeof t=="function")Uu(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case m:return Wn(s.children,d,g,r);case C:S=8,d|=8;break;case w:return t=vr(12,s,r,d|2),t.elementType=w,t.lanes=g,t;case P:return t=vr(13,s,r,d),t.elementType=P,t.lanes=g,t;case T:return t=vr(19,s,r,d),t.elementType=T,t.lanes=g,t;case x:return Qo(s,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:S=10;break e;case y:S=9;break e;case E:S=11;break e;case k:S=14;break e;case v:S=16,u=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return r=vr(S,s,r,d),r.elementType=t,r.type=u,r.lanes=g,r}function Wn(t,r,s,u){return t=vr(7,t,u,r),t.lanes=s,t}function Qo(t,r,s,u){return t=vr(22,t,u,r),t.elementType=x,t.lanes=s,t.stateNode={isHidden:!1},t}function Hu(t,r,s){return t=vr(6,t,null,r),t.lanes=s,t}function Vu(t,r,s){return r=vr(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function wg(t,r,s,u,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=re,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dn(0),this.expirationTimes=dn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dn(0),this.identifierPrefix=u,this.onRecoverableError=d,Me&&(this.mutableSourceEagerHydrationData=null)}function r0(t,r,s,u,d,g,S,A,z){return t=new wg(t,r,s,A,z),r===1?(r=1,g===!0&&(r|=8)):r=0,g=vr(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(g),t}function n0(t){if(!t)return Sr;t=t._reactInternals;e:{if($(t)!==t||t.tag!==1)throw Error(c(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Rt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(c(171))}if(t.tag===1){var s=t.type;if(Rt(s))return fa(t,s,r)}return r}function i0(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=X(r),t===null?null:t.stateNode}function a0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Jo(t,r){a0(t,r),(t=t.alternate)&&a0(t,r)}function Eg(t){return t=X(t),t===null?null:t.stateNode}function Cg(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Mr(t,134217728);if(r!==null){var s=zt();pr(r,t,134217728,s)}Jo(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Mr(t,1);if(r!==null){var s=zt();pr(r,t,1,s)}Jo(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=vn(t),s=Mr(t,r);if(s!==null){var u=zt();pr(s,t,r,u)}Jo(t,r)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=Dn(r.pendingLanes);s!==0&&(xi(r,s|1),Jt(r,dt()),!(Oe&6)&&(Ai(),ie()))}break;case 13:Xh(function(){var u=Mr(t,1);if(u!==null){var d=zt();pr(u,t,1,d)}}),Jo(t,1)}},n.batchedUpdates=function(t,r){var s=Oe;Oe|=1;try{return t(r)}finally{Oe=s,Oe===0&&(Ai(),H&&ie())}},n.createComponentSelector=function(t){return{$$typeof:Do,value:t}},n.createContainer=function(t,r,s,u,d,g,S){return r0(t,r,!1,null,s,u,d,g,S)},n.createHasPseudoClassSelector=function(t){return{$$typeof:Go,value:t}},n.createHydrationContainer=function(t,r,s,u,d,g,S,A,z){return t=r0(s,u,!0,t,d,g,S,A,z),t.context=n0(null),s=t.current,u=zt(),d=vn(s),g=Wr(u,d),g.callback=r??null,fn(s,g,d),t.current.lanes=d,Gn(t,d,u),Jt(t,u),t},n.createPortal=function(t,r,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:u==null?null:""+u,children:t,containerInfo:r,implementation:s}},n.createRoleSelector=function(t){return{$$typeof:$o,value:t}},n.createTestNameSelector=function(t){return{$$typeof:jo,value:t}},n.createTextSelector=function(t){return{$$typeof:zo,value:t}},n.deferredUpdates=function(t){var r=Ce,s=ft.transition;try{return ft.transition=null,Ce=16,t()}finally{Ce=r,ft.transition=s}},n.discreteUpdates=function(t,r,s,u,d){var g=Ce,S=ft.transition;try{return ft.transition=null,Ce=1,t(r,s,u,d)}finally{Ce=g,ft.transition=S,Oe===0&&Ai()}},n.findAllNodes=Nu,n.findBoundingRects=function(t,r){if(!Lt)throw Error(c(363));r=Nu(t,r),t=[];for(var s=0;s<r.length;s++)t.push(ze(r[s]));for(r=t.length-1;0<r;r--){s=t[r];for(var u=s.x,d=u+s.width,g=s.y,S=g+s.height,A=r-1;0<=A;A--)if(r!==A){var z=t[A],q=z.x,oe=q+z.width,Se=z.y,ee=Se+z.height;if(u>=q&&g>=Se&&d<=oe&&S<=ee){t.splice(r,1);break}else if(u!==q||s.width!==z.width||ee<g||Se>S){if(!(g!==Se||s.height!==z.height||oe<u||q>d)){q>u&&(z.width+=q-u,z.x=u),oe<d&&(z.width=d-q),t.splice(r,1);break}}else{Se>g&&(z.height+=Se-g,z.y=g),ee<S&&(z.height=S-Se),t.splice(r,1);break}}}return t},n.findHostInstance=i0,n.findHostInstanceWithNoPortals=function(t){return t=D(t),t=t!==null?Z(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return i0(t)},n.flushControlled=function(t){var r=Oe;Oe|=1;var s=ft.transition,u=Ce;try{ft.transition=null,Ce=1,t()}finally{Ce=u,ft.transition=s,Oe=r,Oe===0&&(Ai(),ie())}},n.flushPassiveEffects=Vn,n.flushSync=Xh,n.focusWithin=function(t,r){if(!Lt)throw Error(c(363));for(t=ku(t),r=Hh(t,r),r=Array.from(r),t=0;t<r.length;){var s=r[t++];if(!Dt(s)){if(s.tag===5&&on(s.stateNode))return!0;for(s=s.child;s!==null;)r.push(s),s=s.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Ce},n.getFindAllNodesFailureDescription=function(t,r){if(!Lt)throw Error(c(363));var s=0,u=[];t=[ku(t),0];for(var d=0;d<t.length;){var g=t[d++],S=t[d++],A=r[S];if((g.tag!==5||!Dt(g))&&(Ru(g,A)&&(u.push(Mu(A)),S++,S>s&&(s=S)),S<r.length))for(g=g.child;g!==null;)t.push(g,S),g=g.sibling}if(s<r.length){for(t=[];s<r.length;s++)t.push(Mu(r[s]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return se(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:Eg,findFiberByHostInstance:t.findFiberByHostInstance||Cg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{Ei=r.inject(t),cr=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,s,u){if(!Lt)throw Error(c(363));t=Nu(t,r);var d=Nn(t,s,u).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var s=r._getVersion;s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s)},n.runWithPriority=function(t,r){var s=Ce;try{return Ce=t,r()}finally{Ce=s}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,s,u){var d=r.current,g=zt(),S=vn(d);return s=n0(s),r.context===null?r.context=s:r.pendingContext=s,r=Wr(g,S),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=fn(d,r,S),t!==null&&(pr(t,d,S,g),xo(t,d,S)),S},n};p1.exports=o4;var s4=p1.exports;const l4=ws(s4);var v1={exports:{}},ii={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ii.ConcurrentRoot=1;ii.ContinuousEventPriority=4;ii.DefaultEventPriority=16;ii.DiscreteEventPriority=1;ii.IdleEventPriority=536870912;ii.LegacyRoot=0;v1.exports=ii;var m1=v1.exports;const J0={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Z0=!1,ef=!1;const Qc=".react-konva-event",u4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,c4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,d4={};function vl(a,e,n=d4){if(!Z0&&"zIndex"in e&&(console.warn(c4),Z0=!0),!ef&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(u4),ef=!0)}for(var l in n)if(!J0[l]){var c=l.slice(0,2)==="on",h=n[l]!==e[l];if(c&&h){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),a.off(f,n[l])}var p=!e.hasOwnProperty(l);p&&a.setAttr(l,void 0)}var m=e._useStrictMode,C={},w=!1;const _={};for(var l in e)if(!J0[l]){var c=l.slice(0,2)==="on",y=n[l]!==e[l];if(c&&y){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e[l]&&(_[f]=e[l])}!c&&(e[l]!==n[l]||m&&e[l]!==a.getAttr(l))&&(w=!0,C[l]=e[l])}w&&(a.setAttrs(C),Rn(a));for(var f in _)a.on(f+Qc,_[f])}function Rn(a){if(!Pe.Konva.autoDrawEnabled){var e=a.getLayer()||a.getStage();e&&e.batchDraw()}}const y1={},h4={};Wa.Node.prototype._applyProps=vl;function f4(a,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}a.add(e),Rn(a)}function g4(a,e,n){let i=Wa[a];i||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Wa.Group);const o={},l={};for(var c in e){var h=c.slice(0,2)==="on";h?l[c]=e[c]:o[c]=e[c]}const f=new i(o);return vl(f,l),f}function p4(a,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function v4(a,e,n){return!1}function m4(a){return a}function y4(){return null}function _4(){return null}function S4(a,e,n,i){return h4}function x4(){}function w4(a){}function E4(a,e){return!1}function C4(){return y1}function P4(){return y1}const b4=setTimeout,O4=clearTimeout,T4=-1;function k4(a,e){return!1}const R4=!1,M4=!0,N4=!0;function A4(a,e){e.parent===a?e.moveToTop():a.add(e),Rn(a)}function F4(a,e){e.parent===a?e.moveToTop():a.add(e),Rn(a)}function _1(a,e,n){e._remove(),a.add(e),e.setZIndex(n.getZIndex()),Rn(a)}function I4(a,e,n){_1(a,e,n)}function L4(a,e){e.destroy(),e.off(Qc),Rn(a)}function D4(a,e){e.destroy(),e.off(Qc),Rn(a)}function G4(a,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function $4(a,e,n){}function j4(a,e,n,i,o){vl(a,o,i)}function z4(a){a.hide(),Rn(a)}function B4(a){}function U4(a,e){(e.visible==null||e.visible)&&a.show()}function H4(a,e){}function V4(a){}function W4(){}const X4=()=>m1.DefaultEventPriority,K4=Object.freeze(Object.defineProperty({__proto__:null,appendChild:A4,appendChildToContainer:F4,appendInitialChild:f4,cancelTimeout:O4,clearContainer:V4,commitMount:$4,commitTextUpdate:G4,commitUpdate:j4,createInstance:g4,createTextInstance:p4,detachDeletedInstance:W4,finalizeInitialChildren:v4,getChildHostContext:P4,getCurrentEventPriority:X4,getPublicInstance:m4,getRootHostContext:C4,hideInstance:z4,hideTextInstance:B4,idlePriority:fs.unstable_IdlePriority,insertBefore:_1,insertInContainerBefore:I4,isPrimaryRenderer:R4,noTimeout:T4,now:fs.unstable_now,prepareForCommit:y4,preparePortalMount:_4,prepareUpdate:S4,removeChild:L4,removeChildFromContainer:D4,resetAfterCommit:x4,resetTextContent:w4,run:fs.unstable_runWithPriority,scheduleTimeout:b4,shouldDeprioritizeSubtree:E4,shouldSetTextContent:k4,supportsMutation:N4,unhideInstance:U4,unhideTextInstance:H4,warnsIfNotActing:M4},Symbol.toStringTag,{value:"Module"}));var q4=Object.defineProperty,Y4=Object.defineProperties,Q4=Object.getOwnPropertyDescriptors,tf=Object.getOwnPropertySymbols,J4=Object.prototype.hasOwnProperty,Z4=Object.prototype.propertyIsEnumerable,rf=(a,e,n)=>e in a?q4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,nf=(a,e)=>{for(var n in e||(e={}))J4.call(e,n)&&rf(a,n,e[n]);if(tf)for(var n of tf(e))Z4.call(e,n)&&rf(a,n,e[n]);return a},e5=(a,e)=>Y4(a,Q4(e));function S1(a,e,n){if(!a)return;if(n(a)===!0)return a;let i=e?a.return:a.child;for(;i;){const o=S1(i,e,n);if(o)return o;i=e?null:i.sibling}}function x1(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const Jc=x1(N.createContext(null));class w1 extends N.Component{render(){return N.createElement(Jc.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:af,ReactCurrentDispatcher:of}=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function t5(){const a=N.useContext(Jc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const i of[af?.current,a,a?.alternate]){if(!i)continue;const o=S1(i,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(o)return o}},[a,e])}function r5(){var a,e;const n=t5(),[i]=N.useState(()=>new Map);i.clear();let o=n;for(;o;){const l=(a=o.type)==null?void 0:a._context;l&&l!==Jc&&!i.has(l)&&i.set(l,(e=of?.current)==null?void 0:e.readContext(x1(l))),o=o.return}return i}function n5(){const a=r5();return N.useMemo(()=>Array.from(a.keys()).reduce((e,n)=>i=>N.createElement(e,null,N.createElement(n.Provider,e5(nf({},i),{value:a.get(n)}))),e=>N.createElement(w1,nf({},e))),[a])}function i5(a){const e=He.useRef({});return He.useLayoutEffect(()=>{e.current=a}),He.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const a5=a=>{const e=He.useRef(),n=He.useRef(),i=He.useRef(),o=i5(a),l=n5(),c=h=>{const{forwardedRef:f}=a;f&&(typeof f=="function"?f(h):f.current=h)};return He.useLayoutEffect(()=>(n.current=new Wa.Stage({width:a.width,height:a.height,container:e.current}),c(n.current),i.current=Ba.createContainer(n.current,m1.LegacyRoot,!1,null),Ba.updateContainer(He.createElement(l,{},a.children),i.current),()=>{Wa.isBrowser&&(c(null),Ba.updateContainer(null,i.current,null),n.current.destroy())}),[]),He.useLayoutEffect(()=>{c(n.current),vl(n.current,a,o),Ba.updateContainer(He.createElement(l,{},a.children),i.current,null)}),He.createElement("div",{ref:e,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},o5="Layer",s5="Rect",l5="Image",u5="Text",Ba=l4(K4);Ba.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:He.version,rendererPackageName:"react-konva"});const c5=He.forwardRef((a,e)=>He.createElement(w1,{},He.createElement(a5,{...a,forwardedRef:e}))),d5=({imageSrc:a,objectBoxes:e,labelColors:n})=>{const[i,o]=N.useState({width:0,height:0}),[l,c]=N.useState({width:450,height:450}),[h,f]=N.useState(new window.Image),[p,m]=N.useState(1),[C,w]=N.useState({x:0,y:0}),_=y=>{y.evt.preventDefault();const P=y.target.getStage().getPointerPosition(),T=y.evt.deltaY>0?p/1.1:p*1.1;m(T);const k={x:P.x-(P.x-C.x)*(T/p),y:P.y-(P.y-C.y)*(T/p)};w(k)};return N.useEffect(()=>{const y=new window.Image;y.src=a,f(y),y.onload=()=>{y.width/y.height,l.width/l.height;let E=y.width,P=y.height;m(1),w({x:0,y:0}),o({width:E,height:P})}},[a]),G.jsx("div",{children:G.jsx(c5,{width:l.width,height:l.height,onWheel:_,draggable:!0,children:G.jsxs(o5,{children:[G.jsx(l5,{image:h,width:i.width,height:i.height,x:C.x,y:C.y,scaleX:p,scaleY:p}),e.map((y,E)=>G.jsxs(He.Fragment,{children:[G.jsx(s5,{x:y.x*p+C.x,y:y.y*p+C.y,width:y.width*p,height:y.height*p,fill:"rgba(0,0,0,0)",stroke:n[y.label],strokeWidth:2}),G.jsx(u5,{text:y.label,x:y.x*p+C.x,y:y.y*p+C.y,fontSize:12,fill:n[y.label]})]},E))]})})})},h5=d5;var Zc={},ml={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});function f5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var g5=function a(e,n){f5(this,a),this.data=e,this.text=n.text||e,this.options=n};tr.default=g5;Object.defineProperty(ml,"__esModule",{value:!0});ml.CODE39=void 0;var p5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),v5=tr,m5=y5(v5);function y5(a){return a&&a.__esModule?a:{default:a}}function _5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function S5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function x5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var w5=function(a){x5(e,a);function e(n,i){return _5(this,e),n=n.toUpperCase(),i.mod43&&(n+=P5(b5(n))),S5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return p5(e,[{key:"encode",value:function(){for(var i=uc("*"),o=0;o<this.data.length;o++)i+=uc(this.data[o])+"0";return i+=uc("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(m5.default),E1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],E5=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function uc(a){return C5(C1(a))}function C5(a){return E5[a].toString(2)}function P5(a){return E1[a]}function C1(a){return E1.indexOf(a)}function b5(a){for(var e=0,n=0;n<a.length;n++)e+=C1(a[n]);return e=e%43,e}ml.CODE39=w5;var Gr={},ed={},Qi={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});var Ga;function cc(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var P1=Je.SET_A=0,b1=Je.SET_B=1,O1=Je.SET_C=2;Je.SHIFT=98;var O5=Je.START_A=103,T5=Je.START_B=104,k5=Je.START_C=105;Je.MODULO=103;Je.STOP=106;Je.FNC1=207;Je.SET_BY_CODE=(Ga={},cc(Ga,O5,P1),cc(Ga,T5,b1),cc(Ga,k5,O1),Ga);Je.SWAP={101:P1,100:b1,99:O1};Je.A_START_CHAR="Ð";Je.B_START_CHAR="Ñ";Je.C_START_CHAR="Ò";Je.A_CHARS="[\0-_È-Ï]";Je.B_CHARS="[ -È-Ï]";Je.C_CHARS="(Ï*[0-9]{2}Ï*)";Je.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Qi,"__esModule",{value:!0});var R5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),M5=tr,N5=A5(M5),or=Je;function A5(a){return a&&a.__esModule?a:{default:a}}function F5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function I5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function L5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var D5=function(a){L5(e,a);function e(n,i){F5(this,e);var o=I5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return R5(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=or.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(or.FNC1);var c=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+c.result+e.getBar((c.checksum+o)%or.MODULO)+e.getBar(or.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return or.BARS[i]?or.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===or.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===or.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var c=void 0,h=void 0;if(i[0]>=200){h=i.shift()-105;var f=or.SWAP[h];f!==void 0?c=e.next(i,o+1,f):((l===or.SET_A||l===or.SET_B)&&h===or.SHIFT&&(i[0]=l===or.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),c=e.next(i,o+1,l))}else h=e.correctIndex(i,l),c=e.next(i,o+1,l);var p=e.getBar(h),m=h*o;return{result:p+c.result,checksum:m+c.checksum}}}]),e}(N5.default);Qi.default=D5;var td={};Object.defineProperty(td,"__esModule",{value:!0});var wn=Je,T1=function(e){return e.match(new RegExp("^"+wn.A_CHARS+"*"))[0].length},k1=function(e){return e.match(new RegExp("^"+wn.B_CHARS+"*"))[0].length},R1=function(e){return e.match(new RegExp("^"+wn.C_CHARS+"*"))[0]};function rd(a,e){var n=e?wn.A_CHARS:wn.B_CHARS,i=a.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"Ì"+M1(a.substring(i[1].length));var o=a.match(new RegExp("^"+n+"+"))[0];return o.length===a.length?a:o+String.fromCharCode(e?205:206)+rd(a.substring(o.length),!e)}function M1(a){var e=R1(a),n=e.length;if(n===a.length)return a;a=a.substring(n);var i=T1(a)>=k1(a);return e+String.fromCharCode(i?206:205)+rd(a,i)}td.default=function(a){var e=void 0,n=R1(a).length;if(n>=2)e=wn.C_START_CHAR+M1(a);else{var i=T1(a)>k1(a);e=(i?wn.A_START_CHAR:wn.B_START_CHAR)+rd(a,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return"Ë"+l})};Object.defineProperty(ed,"__esModule",{value:!0});var G5=Qi,$5=N1(G5),j5=td,z5=N1(j5);function N1(a){return a&&a.__esModule?a:{default:a}}function B5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function dc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function U5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var H5=function(a){U5(e,a);function e(n,i){if(B5(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=dc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,z5.default)(n),i));else var o=dc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return dc(o)}return e}($5.default);ed.default=H5;var nd={};Object.defineProperty(nd,"__esModule",{value:!0});var V5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),W5=Qi,X5=K5(W5),sf=Je;function K5(a){return a&&a.__esModule?a:{default:a}}function q5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Q5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var J5=function(a){Q5(e,a);function e(n,i){return q5(this,e),Y5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,sf.A_START_CHAR+n,i))}return V5(e,[{key:"valid",value:function(){return new RegExp("^"+sf.A_CHARS+"+$").test(this.data)}}]),e}(X5.default);nd.default=J5;var id={};Object.defineProperty(id,"__esModule",{value:!0});var Z5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),e6=Qi,t6=r6(e6),lf=Je;function r6(a){return a&&a.__esModule?a:{default:a}}function n6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function a6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var o6=function(a){a6(e,a);function e(n,i){return n6(this,e),i6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,lf.B_START_CHAR+n,i))}return Z5(e,[{key:"valid",value:function(){return new RegExp("^"+lf.B_CHARS+"+$").test(this.data)}}]),e}(t6.default);id.default=o6;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});var s6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l6=Qi,u6=c6(l6),uf=Je;function c6(a){return a&&a.__esModule?a:{default:a}}function d6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function h6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function f6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var g6=function(a){f6(e,a);function e(n,i){return d6(this,e),h6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,uf.C_START_CHAR+n,i))}return s6(e,[{key:"valid",value:function(){return new RegExp("^"+uf.C_CHARS+"+$").test(this.data)}}]),e}(u6.default);ad.default=g6;Object.defineProperty(Gr,"__esModule",{value:!0});Gr.CODE128C=Gr.CODE128B=Gr.CODE128A=Gr.CODE128=void 0;var p6=ed,v6=yl(p6),m6=nd,y6=yl(m6),_6=id,S6=yl(_6),x6=ad,w6=yl(x6);function yl(a){return a&&a.__esModule?a:{default:a}}Gr.CODE128=v6.default;Gr.CODE128A=y6.default;Gr.CODE128B=S6.default;Gr.CODE128C=w6.default;var er={},od={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.SIDE_BIN="101";_r.MIDDLE_BIN="01010";_r.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};_r.EAN2_STRUCTURE=["LL","LG","GL","GG"];_r.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];_r.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var _l={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});var E6=_r,C6=function(e,n,i){var o=e.split("").map(function(c,h){return E6.BINARIES[n[h]]}).map(function(c,h){return c?c[e[h]]:""});if(i){var l=e.length-1;o=o.map(function(c,h){return h<l?c+i:c})}return o.join("")};ai.default=C6;Object.defineProperty(_l,"__esModule",{value:!0});var P6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Di=_r,b6=ai,cf=A1(b6),O6=tr,T6=A1(O6);function A1(a){return a&&a.__esModule?a:{default:a}}function k6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function R6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function M6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var N6=function(a){M6(e,a);function e(n,i){k6(this,e);var o=R6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return P6(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:Di.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:Di.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:Di.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[Di.SIDE_BIN,this.leftEncode(),Di.MIDDLE_BIN,this.rightEncode(),Di.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(T6.default);_l.default=N6;Object.defineProperty(od,"__esModule",{value:!0});var A6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),$a=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},F6=_r,I6=_l,L6=D6(I6);function D6(a){return a&&a.__esModule?a:{default:a}}function G6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function $6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function j6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var df=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},z6=function(a){j6(e,a);function e(n,i){G6(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=df(n));var o=$6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return A6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===df(this.data)}},{key:"leftText",value:function(){return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=F6.EAN13_STRUCTURE[this.data[0]];return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=$a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(L6.default);od.default=z6;var sd={};Object.defineProperty(sd,"__esModule",{value:!0});var B6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ls=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},U6=_l,H6=V6(U6);function V6(a){return a&&a.__esModule?a:{default:a}}function W6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function X6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function K6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var hf=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},q6=function(a){K6(e,a);function e(n,i){return W6(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=hf(n)),X6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return B6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===hf(this.data)}},{key:"leftText",value:function(){return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(H6.default);sd.default=q6;var ld={};Object.defineProperty(ld,"__esModule",{value:!0});var Y6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Q6=_r,J6=ai,Z6=F1(J6),e8=tr,t8=F1(e8);function F1(a){return a&&a.__esModule?a:{default:a}}function r8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function n8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function i8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var a8=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},o8=function(a){i8(e,a);function e(n,i){return r8(this,e),n8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return Y6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=Q6.EAN5_STRUCTURE[a8(this.data)];return{data:"1011"+(0,Z6.default)(this.data,i,"01"),text:this.text}}}]),e}(t8.default);ld.default=o8;var ud={};Object.defineProperty(ud,"__esModule",{value:!0});var s8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l8=_r,u8=ai,c8=I1(u8),d8=tr,h8=I1(d8);function I1(a){return a&&a.__esModule?a:{default:a}}function f8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function g8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function p8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var v8=function(a){p8(e,a);function e(n,i){return f8(this,e),g8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return s8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=l8.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,c8.default)(this.data,i,"01"),text:this.text}}}]),e}(h8.default);ud.default=v8;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var m8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();eo.checksum=Rc;var y8=ai,Gi=L1(y8),_8=tr,S8=L1(_8);function L1(a){return a&&a.__esModule?a:{default:a}}function x8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function w8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function E8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var C8=function(a){E8(e,a);function e(n,i){x8(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=Rc(n));var o=w8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return m8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Rc(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,Gi.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,Gi.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,Gi.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,Gi.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,Gi.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,Gi.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(S8.default);function Rc(a){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(a[n]);for(n=0;n<11;n+=2)e+=parseInt(a[n])*3;return(10-e%10)%10}eo.default=C8;var cd={};Object.defineProperty(cd,"__esModule",{value:!0});var P8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),b8=ai,O8=D1(b8),T8=tr,k8=D1(T8),R8=eo;function D1(a){return a&&a.__esModule?a:{default:a}}function M8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function hc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function N8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var A8=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],F8=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],I8=function(a){N8(e,a);function e(n,i){M8(this,e);var o=hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=ff(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=ff(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return hc(o);else return hc(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return P8(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=F8[parseInt(o)][parseInt(i)];return(0,O8.default)(this.middleDigits,l)}}]),e}(k8.default);function ff(a,e){for(var n=parseInt(a[a.length-1]),i=A8[n],o="",l=0,c=0;c<i.length;c++){var h=i[c];h==="X"?o+=a[l++]:o+=h}return o=""+e+o,""+o+(0,R8.checksum)(o)}cd.default=I8;Object.defineProperty(er,"__esModule",{value:!0});er.UPCE=er.UPC=er.EAN2=er.EAN5=er.EAN8=er.EAN13=void 0;var L8=od,D8=Ji(L8),G8=sd,$8=Ji(G8),j8=ld,z8=Ji(j8),B8=ud,U8=Ji(B8),H8=eo,V8=Ji(H8),W8=cd,X8=Ji(W8);function Ji(a){return a&&a.__esModule?a:{default:a}}er.EAN13=D8.default;er.EAN8=$8.default;er.EAN5=z8.default;er.EAN2=U8.default;er.UPC=V8.default;er.UPCE=X8.default;var Hi={},Sl={},to={};Object.defineProperty(to,"__esModule",{value:!0});to.START_BIN="1010";to.END_BIN="11101";to.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Sl,"__esModule",{value:!0});var K8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),us=to,q8=tr,Y8=Q8(q8);function Q8(a){return a&&a.__esModule?a:{default:a}}function J8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Z8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ey(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var ty=function(a){ey(e,a);function e(){return J8(this,e),Z8(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return K8(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:us.START_BIN+o+us.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=us.BINARIES[i[1]];return us.BINARIES[i[0]].split("").map(function(l,c){return(l==="1"?"111":"1")+(o[c]==="1"?"000":"0")}).join("")}}]),e}(Y8.default);Sl.default=ty;var dd={};Object.defineProperty(dd,"__esModule",{value:!0});var ry=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ny=Sl,iy=ay(ny);function ay(a){return a&&a.__esModule?a:{default:a}}function oy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function sy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ly(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var gf=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},uy=function(a){ly(e,a);function e(n,i){return oy(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=gf(n)),sy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return ry(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===gf(this.data)}}]),e}(iy.default);dd.default=uy;Object.defineProperty(Hi,"__esModule",{value:!0});Hi.ITF14=Hi.ITF=void 0;var cy=Sl,dy=G1(cy),hy=dd,fy=G1(hy);function G1(a){return a&&a.__esModule?a:{default:a}}Hi.ITF=dy.default;Hi.ITF14=fy.default;var yr={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});var gy=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),py=tr,vy=my(py);function my(a){return a&&a.__esModule?a:{default:a}}function yy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _y(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Sy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var xy=function(a){Sy(e,a);function e(n,i){return yy(this,e),_y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return gy(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),c=l.toString(2);c=wy(c,4-c.length);for(var h=0;h<c.length;h++)i+=c[h]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(vy.default);function wy(a,e){for(var n=0;n<e;n++)a="0"+a;return a}oi.default=xy;var hd={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.mod10=Ey;si.mod11=Cy;function Ey(a){for(var e=0,n=0;n<a.length;n++){var i=parseInt(a[n]);(n+a.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function Cy(a){for(var e=0,n=[2,3,4,5,6,7],i=0;i<a.length;i++){var o=parseInt(a[a.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(hd,"__esModule",{value:!0});var Py=oi,by=Ty(Py),Oy=si;function Ty(a){return a&&a.__esModule?a:{default:a}}function ky(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Ry(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function My(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Ny=function(a){My(e,a);function e(n,i){return ky(this,e),Ry(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Oy.mod10)(n),i))}return e}(by.default);hd.default=Ny;var fd={};Object.defineProperty(fd,"__esModule",{value:!0});var Ay=oi,Fy=Ly(Ay),Iy=si;function Ly(a){return a&&a.__esModule?a:{default:a}}function Dy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Gy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function $y(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var jy=function(a){$y(e,a);function e(n,i){return Dy(this,e),Gy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Iy.mod11)(n),i))}return e}(Fy.default);fd.default=jy;var gd={};Object.defineProperty(gd,"__esModule",{value:!0});var zy=oi,By=Uy(zy),pf=si;function Uy(a){return a&&a.__esModule?a:{default:a}}function Hy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Vy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Wy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Xy=function(a){Wy(e,a);function e(n,i){return Hy(this,e),n+=(0,pf.mod10)(n),n+=(0,pf.mod10)(n),Vy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(By.default);gd.default=Xy;var pd={};Object.defineProperty(pd,"__esModule",{value:!0});var Ky=oi,qy=Yy(Ky),vf=si;function Yy(a){return a&&a.__esModule?a:{default:a}}function Qy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Jy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Zy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var e_=function(a){Zy(e,a);function e(n,i){return Qy(this,e),n+=(0,vf.mod11)(n),n+=(0,vf.mod10)(n),Jy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(qy.default);pd.default=e_;Object.defineProperty(yr,"__esModule",{value:!0});yr.MSI1110=yr.MSI1010=yr.MSI11=yr.MSI10=yr.MSI=void 0;var t_=oi,r_=ro(t_),n_=hd,i_=ro(n_),a_=fd,o_=ro(a_),s_=gd,l_=ro(s_),u_=pd,c_=ro(u_);function ro(a){return a&&a.__esModule?a:{default:a}}yr.MSI=r_.default;yr.MSI10=i_.default;yr.MSI11=o_.default;yr.MSI1010=l_.default;yr.MSI1110=c_.default;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.pharmacode=void 0;var d_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),h_=tr,f_=g_(h_);function g_(a){return a&&a.__esModule?a:{default:a}}function p_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function v_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function m_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var y_=function(a){m_(e,a);function e(n,i){p_(this,e);var o=v_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return d_(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(f_.default);xl.pharmacode=y_;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.codabar=void 0;var __=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),S_=tr,x_=w_(S_);function w_(a){return a&&a.__esModule?a:{default:a}}function E_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function C_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function P_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var b_=function(a){P_(e,a);function e(n,i){E_(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=C_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return __(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(x_.default);wl.codabar=b_;var El={};Object.defineProperty(El,"__esModule",{value:!0});El.GenericBarcode=void 0;var O_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),T_=tr,k_=R_(T_);function R_(a){return a&&a.__esModule?a:{default:a}}function M_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function N_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function A_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var F_=function(a){A_(e,a);function e(n,i){return M_(this,e),N_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return O_(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(k_.default);El.GenericBarcode=F_;Object.defineProperty(Zc,"__esModule",{value:!0});var I_=ml,cs=Gr,$i=er,mf=Hi,ja=yr,L_=xl,D_=wl,G_=El;Zc.default={CODE39:I_.CODE39,CODE128:cs.CODE128,CODE128A:cs.CODE128A,CODE128B:cs.CODE128B,CODE128C:cs.CODE128C,EAN13:$i.EAN13,EAN8:$i.EAN8,EAN5:$i.EAN5,EAN2:$i.EAN2,UPC:$i.UPC,UPCE:$i.UPCE,ITF14:mf.ITF14,ITF:mf.ITF,MSI:ja.MSI,MSI10:ja.MSI10,MSI11:ja.MSI11,MSI1010:ja.MSI1010,MSI1110:ja.MSI1110,pharmacode:L_.pharmacode,codabar:D_.codabar,GenericBarcode:G_.GenericBarcode};var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});var $_=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a};Zi.default=function(a,e){return $_({},a,e)};var vd={};Object.defineProperty(vd,"__esModule",{value:!0});vd.default=j_;function j_(a){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(a),e}var md={};Object.defineProperty(md,"__esModule",{value:!0});md.default=z_;function z_(a){return a.marginTop=a.marginTop||a.margin,a.marginBottom=a.marginBottom||a.margin,a.marginRight=a.marginRight||a.margin,a.marginLeft=a.marginLeft||a.margin,a}var yd={},_d={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.default=B_;function B_(a){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof a[n]=="string"&&(a[n]=parseInt(a[n],10)));return typeof a.displayValue=="string"&&(a.displayValue=a.displayValue!="false"),a}var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});var U_={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Pl.default=U_;Object.defineProperty(_d,"__esModule",{value:!0});var H_=Cl,V_=$1(H_),W_=Pl,yf=$1(W_);function $1(a){return a&&a.__esModule?a:{default:a}}function X_(a){var e={};for(var n in yf.default)yf.default.hasOwnProperty(n)&&(a.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=a.getAttribute("jsbarcode-"+n.toLowerCase())),a.hasAttribute("data-"+n.toLowerCase())&&(e[n]=a.getAttribute("data-"+n.toLowerCase())));return e.value=a.getAttribute("jsbarcode-value")||a.getAttribute("data-value"),e=(0,V_.default)(e),e}_d.default=X_;var Sd={},xd={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.getTotalWidthOfEncodings=lr.calculateEncodingAttributes=lr.getBarcodePadding=lr.getEncodingHeight=lr.getMaximumHeightOfEncodings=void 0;var K_=Zi,q_=Y_(K_);function Y_(a){return a&&a.__esModule?a:{default:a}}function j1(a,e){return e.height+(e.displayValue&&a.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function z1(a,e,n){if(n.displayValue&&e<a){if(n.textAlign=="center")return Math.floor((a-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(a-e)}return 0}function Q_(a,e,n){for(var i=0;i<a.length;i++){var o=a[i],l=(0,q_.default)(e,o.options),c;l.displayValue?c=e9(o.text,l,n):c=0;var h=o.data.length*l.width;o.width=Math.ceil(Math.max(c,h)),o.height=j1(o,l),o.barcodePadding=z1(c,h,l)}}function J_(a){for(var e=0,n=0;n<a.length;n++)e+=a[n].width;return e}function Z_(a){for(var e=0,n=0;n<a.length;n++)a[n].height>e&&(e=a[n].height);return e}function e9(a,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(a);if(!o)return 0;var l=o.width;return l}lr.getMaximumHeightOfEncodings=Z_;lr.getEncodingHeight=j1;lr.getBarcodePadding=z1;lr.calculateEncodingAttributes=Q_;lr.getTotalWidthOfEncodings=J_;Object.defineProperty(xd,"__esModule",{value:!0});var t9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),r9=Zi,n9=i9(r9),fc=lr;function i9(a){return a&&a.__esModule?a:{default:a}}function a9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var o9=function(){function a(e,n,i){a9(this,a),this.canvas=e,this.encodings=n,this.options=i}return t9(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,n9.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,fc.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,fc.getTotalWidthOfEncodings)(this.encodings),o=(0,fc.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,c;n.textPosition=="top"?c=n.marginTop+n.fontSize+n.textMargin:c=n.marginTop,o.fillStyle=n.lineColor;for(var h=0;h<l.length;h++){var f=h*n.width+i.barcodePadding;l[h]==="1"?o.fillRect(f,c,n.width,n.height):l[h]&&o.fillRect(f,c,n.width,n.height*l[h])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var c,h;n.textPosition=="top"?h=n.marginTop+n.fontSize-n.textMargin:h=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(c=0,o.textAlign="left"):n.textAlign=="right"?(c=i.width-1,o.textAlign="right"):(c=i.width/2,o.textAlign="center"),o.fillText(i.text,c,h)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),a}();xd.default=o9;var wd={};Object.defineProperty(wd,"__esModule",{value:!0});var s9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),l9=Zi,u9=c9(l9),gc=lr;function c9(a){return a&&a.__esModule?a:{default:a}}function d9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var ds="http://www.w3.org/2000/svg",h9=function(){function a(e,n,i){d9(this,a),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return s9(a,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,u9.default)(this.options,o.options),c=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(c,l),this.drawSvgBarcode(c,l,o),this.drawSVGText(c,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,gc.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,gc.getTotalWidthOfEncodings)(this.encodings),i=(0,gc.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,c;i.textPosition=="top"?c=i.fontSize+i.textMargin:c=0;for(var h=0,f=0,p=0;p<l.length;p++)f=p*i.width+o.barcodePadding,l[p]==="1"?h++:h>0&&(this.drawRect(f-i.width*h,c,i.width*h,i.height,n),h=0);h>0&&this.drawRect(f-i.width*(h-1),c,i.width*h,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(ds,"text");if(i.displayValue){var c,h;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?h=i.fontSize-i.textMargin:h=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(c=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(c=o.width-1,l.setAttribute("text-anchor","end")):(c=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",c),l.setAttribute("y",h),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",ds),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(ds,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,c){var h=this.document.createElementNS(ds,"rect");return h.setAttribute("x",n),h.setAttribute("y",i),h.setAttribute("width",o),h.setAttribute("height",l),c.appendChild(h),h}}]),a}();wd.default=h9;var Ed={};Object.defineProperty(Ed,"__esModule",{value:!0});var f9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function g9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var p9=function(){function a(e,n,i){g9(this,a),this.object=e,this.encodings=n,this.options=i}return f9(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a}();Ed.default=p9;Object.defineProperty(Sd,"__esModule",{value:!0});var v9=xd,m9=Cd(v9),y9=wd,_9=Cd(y9),S9=Ed,x9=Cd(S9);function Cd(a){return a&&a.__esModule?a:{default:a}}Sd.default={CanvasRenderer:m9.default,SVGRenderer:_9.default,ObjectRenderer:x9.default};var ea={};Object.defineProperty(ea,"__esModule",{value:!0});function Pd(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function bd(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Od(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var w9=function(a){Od(e,a);function e(n,i){Pd(this,e);var o=bd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),E9=function(a){Od(e,a);function e(){Pd(this,e);var n=bd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),C9=function(a){Od(e,a);function e(){Pd(this,e);var n=bd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);ea.InvalidInputException=w9;ea.InvalidElementException=E9;ea.NoElementException=C9;Object.defineProperty(yd,"__esModule",{value:!0});var P9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b9=_d,Mc=B1(b9),O9=Sd,Ua=B1(O9),T9=ea;function B1(a){return a&&a.__esModule?a:{default:a}}function Td(a){if(typeof a=="string")return k9(a);if(Array.isArray(a)){for(var e=[],n=0;n<a.length;n++)e.push(Td(a[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return R9(a);if(a&&a.nodeName&&a.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,Mc.default)(a),renderer:Ua.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,Mc.default)(a),renderer:Ua.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:Ua.default.CanvasRenderer};if(a&&(typeof a>"u"?"undefined":P9(a))==="object"&&!a.nodeName)return{element:a,renderer:Ua.default.ObjectRenderer};throw new T9.InvalidElementException}}function k9(a){var e=document.querySelectorAll(a);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(Td(e[i]));return n}}function R9(a){var e=document.createElement("canvas");return{element:e,options:(0,Mc.default)(a),renderer:Ua.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",e.toDataURL())}}}yd.default=Td;var kd={};Object.defineProperty(kd,"__esModule",{value:!0});var M9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function N9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var A9=function(){function a(e){N9(this,a),this.api=e}return M9(a,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),a}();kd.default=A9;var F9=Zc,Kn=Mn(F9),I9=Zi,no=Mn(I9),L9=vd,U1=Mn(L9),D9=md,_f=Mn(D9),G9=yd,$9=Mn(G9),j9=Cl,z9=Mn(j9),B9=kd,U9=Mn(B9),H1=ea,H9=Pl,V1=Mn(H9);function Mn(a){return a&&a.__esModule?a:{default:a}}var Zr=function(){},bl=function(e,n,i){var o=new Zr;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,$9.default)(e),o._encodings=[],o._options=V1.default,o._errorHandler=new U9.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=X1()),o.options(i)[i.format](n,i).render()),o};bl.getModule=function(a){return Kn.default[a]};for(var Sf in Kn.default)Kn.default.hasOwnProperty(Sf)&&V9(Kn.default,Sf);function V9(a,e){Zr.prototype[e]=Zr.prototype[e.toUpperCase()]=Zr.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,no.default)(o._options,i);l=(0,z9.default)(l);var c=a[e],h=W1(n,c,l);return o._encodings.push(h),o})}}function W1(a,e,n){a=""+a;var i=new e(a,n);if(!i.valid())throw new H1.InvalidInputException(i.constructor.name,a);var o=i.encode();o=(0,U1.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,no.default)(n,o[l].options);return o}function X1(){return Kn.default.CODE128?"CODE128":Object.keys(Kn.default)[0]}Zr.prototype.options=function(a){return this._options=(0,no.default)(this._options,a),this};Zr.prototype.blank=function(a){var e=new Array(a+1).join("0");return this._encodings.push({data:e}),this};Zr.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var a;for(var e in this._renderProperties){a=this._renderProperties[e];var n=(0,no.default)(this._options,a.options);n.format=="auto"&&(n.format=X1()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Kn.default[n.format.toUpperCase()],l=W1(i,o,n);Nc(a,l,n)})}}};Zr.prototype.render=function(){if(!this._renderProperties)throw new H1.NoElementException;if(Array.isArray(this._renderProperties))for(var a=0;a<this._renderProperties.length;a++)Nc(this._renderProperties[a],this._encodings,this._options);else Nc(this._renderProperties,this._encodings,this._options);return this};Zr.prototype._defaults=V1.default;function Nc(a,e,n){e=(0,U1.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,no.default)(n,e[i].options),(0,_f.default)(e[i].options);(0,_f.default)(n);var o=a.renderer,l=new o(a.element,e,n);l.render(),a.afterRender&&a.afterRender()}typeof window<"u"&&(window.JsBarcode=bl);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(a,e){var n=[];return jQuery(this).each(function(){n.push(this)}),bl(n,a,e)});var W9=bl;const X9=ws(W9),ji=Xg.apiUrl;function K9(){const[a,e]=N.useState("checkbox"),[n,i]=N.useState([]),[o,l]=N.useState(""),[c]=Zo(),[h]=Zo(),[f]=Zo(),[p]=Zo(),[m,C]=N.useState(!1),[w,_]=N.useState(!1),[y,E]=N.useState({}),[P,T]=N.useState(!1),[k,v]=N.useState({}),[x,b]=N.useState(!1),[R,B]=N.useState(!1),[O,$]=N.useState(!1),[M,D]=N.useState(!1),[X,W]=N.useState(!1),[Z,K]=N.useState(!1),[se,de]=N.useState(!1),[me,Te]=N.useState(!1),[le,J]=N.useState(!1),[he,ke]=N.useState({}),[we,qe]=N.useState([]),[Ae,F]=N.useState(""),[V,re]=N.useState([]),[ge,pe]=N.useState({}),[Le,Me]=N.useState(!1),[It,Fe]=N.useState({}),[Tt,Ye]=N.useState(!1),[Ie,lt]=N.useState([]),[Lt,$e]=N.useState([]),[ze,pt]=N.useState([]),[Dt,an]=N.useState(null),[on,Nn]=N.useState([]),[ta,An]=N.useState(!1),[ra,li]=N.useState(!1),[na,rr]=N.useState(!1),[Ht,sn]=N.useState([]),[ia,ui]=N.useState(""),[aa,oa]=N.useState([]),[ae,_e]=N.useState(!1),[mt,kt]=N.useState(!1),[nr,ci]=N.useState(""),[Vt,di]=N.useState([]),[io,ao]=N.useState([]),[Ol,hi]=N.useState([]),[Tl,oo]=N.useState(""),[fi,kl]=N.useState([]),[Rl,ln]=N.useState(!1);let sa={};const[la,so]=N.useState([]),[Ml,gi]=N.useState([]),Nl={action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",multiple:!1,onRemove:()=>{gi([]),so([])},beforeUpload:async L=>{try{const H=L.name.toLowerCase();if(H.endsWith(".xls")||H.endsWith(".xlsx")||H.endsWith(".xlsm")||H.endsWith(".xlsb")||H.endsWith(".csv")||H.endsWith(".ods")){let Q=[{uid:"-1",name:L.name,status:"done",url:""}];gi(Q);const Y=new FileReader;return Y.onload=ce=>{const ie=ce.target.result,Ue=Vg(ie,{type:"buffer"}),Mt=Ue.SheetNames[0],Rr=Ue.Sheets[Mt],ht=Wg.sheet_to_json(Rr,{header:1});let it=[];if(ht.length>=2)for(let Ze=1;Ze<ht.length;Ze++){if(!ht[Ze][2])continue;let Ur={product_code:ht[Ze][0]?ht[Ze][0]:"",barcode:ht[Ze][1]?ht[Ze][1]:"",product_name:ht[Ze][2],product_description:ht[Ze][3],url_images:ht[Ze][4]?JSON.parse(ht[Ze][4].replace("“",'"').replace("”",'"')):[]};it.push(Ur)}console.log(it),so(it)},Y.readAsArrayBuffer(L),!1}else return ve.error("Đã xảy ra lỗi, không đúng định dạng file: xls, xlsx, xlsm, xlsb, csv, ods"),!1}catch{return ve.error("Chưa nhập File hoặc File không chính xác tải dữ liệu mẫu để tiếp tục"),!1}}},Al={onRemove:L=>{if(L.name){const Q=ze.indexOf(L.uid);re(Y=>Y.filter((ce,ie)=>ie!==Q)),pt(Y=>Y.filter((ce,ie)=>ie!==Q))}},beforeUpload:async L=>{const H=L.name.toLowerCase();if(H.endsWith(".jpeg")||H.endsWith(".jpg")||H.endsWith(".png")||H.endsWith(".gif")||H.endsWith(".bmp")||H.endsWith(".tiff")||H.endsWith(".tif")){if(!(L.size/1024/1024<2)){ve.error("Dung lượng tệp tải lên phải bé hơn 2MB!");return}const Y=new FormData,ce={file:L,category_name:he.name};for(const[Ue,Mt]of Object.entries(ce))Y.append(Ue,Mt);const ie=await Bt.post("/api/method/mbw_audit.api.api.upload_file_for_product",Y);ie.message==="ok"?(re(Ue=>[...Ue,ie.result.file_url]),pt(Ue=>[...Ue,L.uid]),ve.success("Tải ảnh thành công")):ve.error("Tải ảnh thất bại")}else ve.error("Đã xảy ra lỗi, chỉ chấp nhận các định dạng file ảnh: JPEG, JPG, PNG, GIF, BMP, TIFF, TIF");return!1}},Fl={onRemove:L=>{if(L.name){const Q=Lt.indexOf(L.uid);lt(Y=>Y.filter((ce,ie)=>ie!==Q)),$e(Y=>Y.filter((ce,ie)=>ie!==Q))}else wi(Q=>Q.filter(Y=>!Y.uid))},beforeUpload:async L=>{const H=L.name.toLowerCase();if(H.endsWith(".jpeg")||H.endsWith(".jpg")||H.endsWith(".png")||H.endsWith(".gif")||H.endsWith(".bmp")||H.endsWith(".tiff")||H.endsWith(".tif")){if(!(L.size/1024/1024<2)){ve.error("Dung lượng tệp tải lên phải bé hơn 2MB!");return}const Y=new FormData,ce={file:L,category_name:he.name};for(const[Ue,Mt]of Object.entries(ce))Y.append(Ue,Mt);const ie=await Bt.post("/api/method/mbw_audit.api.api.upload_file_for_product",Y);return ie.message=="ok"?(lt(Ue=>[...Ue,ie.result.file_url]),$e(Ue=>[...Ue,L.uid]),ve.success("Tải ảnh thành công")):ve.error("Tải ảnh thất bại"),!1}else ve.error("Đã xảy ra lỗi, chỉ chấp nhận các định dạng file ảnh: JPEG, JPG, PNG, GIF, BMP, TIFF, TIF")}},Il={onRemove:()=>{hi([]),sn([])},action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",accept:"image/png, image/jpeg",beforeUpload:async L=>{const H=L.type==="image/jpeg"||L.type==="image/png";if(!H)return ve.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),H;const Q=L.size/1024/1024<2;if(!Q)return ve.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),Q;const Y=new FormData,ce={file:L};for(const[Ue,Mt]of Object.entries(ce))Y.append(Ue,Mt);const ie=await Bt.post("/api/method/mbw_audit.api.api.upload_file_for_checking",Y);if(ie.message=="ok"){let Ue=[],Mt={uid:"-1",name:ie.result.date_time,status:"done",url:ie.result.file_url};Ue.push(Mt),hi(Ue),sn(Rr=>[...Rr,ie.result.file_url]),ve.success("Tải ảnh thành công")}else ve.error("Tải ảnh thất bại");return!1}},Ll=[{title:"Mã Sản phẩm",dataIndex:"product_code",render:(L,H)=>G.jsx("a",{href:"javascript:;",onClick:()=>fa(H),children:L})},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Hành động",key:"action",render:(L,H)=>G.jsxs(G.Fragment,{children:[G.jsx(mc,{className:"mr-4",onClick:()=>fa(H)}),G.jsx(Wu,{onClick:()=>$l(H)})]})}],Dl={onChange:(L,H)=>{Nn(H),H.length>0?An(!0):An(!1)}},Fn=async()=>{try{let L='/api/resource/VGM_Category?fields=["*"]';if(o!=null&&o!=""){let Q=`[["category_name", "like", "%${o}%"]]`;L+=`&filters=${Q}`}const H=await Bt.get(L);if(H&&H.data){let Q=H.data.map((Y,ce)=>({...Y,key:Y.name,hidden:!0,selected:!1}));Q=lo(Q,"category_name"),Q.length>0&&(Q[0].selected=!0),i(Q),Q.length>0&&ke(Q[0])}}catch{}finally{}};N.useEffect(()=>{Fn()},[]),N.useEffect(()=>{Fn()},[o]);const Gl=L=>{l(L.target.value)},lo=(L,H)=>L.sort((Q,Y)=>Q[H]&&Y[H]?Q[H].localeCompare(Y[H]):0),ua=(L,H)=>{i(Q=>Q.map(Y=>Y.key===H.key?{...Y,hidden:!1}:Y))},In=(L,H)=>{i(Q=>Q.map(Y=>Y.key===H.key?{...Y,hidden:!0}:Y))},ca=L=>{let H={item:L,title:"Xóa "+L.category_name,contentConfirm:"Bạn có chắc muốn xóa "+L.category_name+" ra khỏi hệ thống không?",contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};E(H),T(!0)},da=async()=>{if(y!=null&&y.item!=null){let L=[];L=[y.item.name];let H=ji+".api.deleteListByDoctype",Q={doctype:"VGM_Category",items:JSON.stringify(L)},Y=await Bt.post(H,Q);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ve.success("Xóa thành công"),Fn(),uo()):ve.error("Xóa thất bại, Danh mục này đang được sử dụng")}},uo=()=>{T(!1),E({})},ha=L=>{h.setFieldsValue({name_item:L.category_name,des:L.category_description}),v(L),b(!0)},zr=async()=>{D(!0);let L=h.getFieldsValue();if(!L.hasOwnProperty("name_item")||!L.name_item){ve.warning("Vui lòng nhập tên danh mục."),D(!1);return}const H=L.name_item.trim();if(!H){ve.warning("Vui lòng nhập tên danh mục.");return}if(n.some(Y=>Y.category_name.toLowerCase()===H.toLowerCase()&&Y.category_name!==k.category_name)){ve.error("Danh mục đã tồn tại."),D(!1);return}if(k!=null&&k.name!=null){let Y=`/api/resource/VGM_Category/${k.name}`,ce={category_name:L.name_item,category_description:L.des},ie=await Bt.put(Y,ce);ie!=null&&ie.data!=null?(ve.success("Sửa thành công"),D(!1),Fn(),ur()):(ve.error("Sửa thất bại"),D(!1))}},ur=()=>{v({}),b(!1)},We=()=>{_(!0)},Be=async()=>{B(!0);const L=c.getFieldsValue();if(!L.hasOwnProperty("name_item")||!L.name_item){ve.warning("Vui lòng nhập tên danh mục."),B(!1);return}const H=L.name_item.trim();if(!H){ve.warning("Vui lòng nhập tên danh mục.");return}if(n.some(Y=>Y.category_name.toLowerCase()===H.toLowerCase())){ve.error("Danh mục đã tồn tại."),B(!1);return}if(H.length>25){ve.error("Tên danh mục không được vượt quá 25 ký tự."),B(!1);return}try{const Y={doc:JSON.stringify({doctype:"VGM_Category",category_name:H,category_description:L.des}),action:"Save"},ce=await Bt.post("/api/method/frappe.desk.form.save.savedocs",Y);ce&&ce.docs&&ce.docs.length>0?(c.resetFields(),ve.success("Thêm mới thành công"),B(!1),Fn(),_(!1)):(ve.error("Thêm mới thất bại"),B(!1))}catch{ve.error("Đã xảy ra lỗi khi thêm mới danh mục.")}},Sr=()=>{_(!1),B(!1)},Et=L=>{ke(L),i(H=>H.map(Q=>Q.key===L.key?{...Q,selected:!0}:{...Q,selected:!1}))};N.useEffect(()=>{nt()},[he]),N.useEffect(()=>{Dt!=null&&Dt!=""&&yi(Dt)},[Dt]),N.useEffect(()=>{nt()},[Ae]);const nt=async()=>{let L="";Ae!=null&&Ae!=""?L=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${he.name}"],["product_name","like","%${Ae}%"]]`:L=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${he.name}"]]`;let H=await Bt.get(L);if(H&&H.data){let Q=H.data.map(Y=>({...Y,key:Y.name,category_name:he.category_name}));Q=lo(Q,"product_name"),qe(Q)}},Br=L=>{F(L.target.value)},un=()=>{f.resetFields(),xi([]),W(!1);let L=document.getElementById("barcode");L&&(L.innerHTML=""),he!=null&&he.name!=null&&C(!0)},Rt=L=>!/[\u00C0-\u1EF9\u1EFB-\u1F01\u1F03-\u1F57\u1F59-\u1F5B\u1F5D-\u1F5F\u1F60-\u1FC1\u1FC3-\u1FF9\u1FFB-\u1FFF]/.test(L),pi=L=>{yi(L.target.value)},vi=()=>{C(!1)},fa=L=>{Fe(L),Ye(!0),p.setFieldsValue({product_code:L.product_code,barcode_product:L.barcode,product_name:L.product_name,product_description:L.product_description}),an(L.barcode);let H=JSON.parse(L.images),Q=[];for(let Y=0;Y<H.length;Y++){let ce={uid:Y,url:H[Y],url_base:H[Y]};Q.push(ce)}wi(Q)},mi=L=>{yi(L.target.value)},yi=L=>{X9("#barcode",L,{width:4,height:40,displayValue:!0,font:"Arial",text:L,textMargin:10,fontSize:13,background:"#F5F7FA"})},Kt=async()=>{W(!0);let L=f.getFieldsValue();if(L.product_code&&we.filter(Ue=>Ue.product_code.toLowerCase()===L.product_code.toLowerCase()).length>0){ve.error("Mã sản phẩm đã tồn tại"),W(!1);return}let H=[];for(let ie=0;ie<V.length;ie++)H.push(V[ie]);if(!Rt(L.barcode_product)){ve.error("Barcode không được chứa ký tự tiếng Việt"),W(!1);return}if(!L.product_name||H.length===0){ve.error("Vui lòng nhập tên sản phẩm và tải lên ít nhất một hình ảnh"),W(!1);return}let Q="/api/resource/VGM_Product",Y={barcode:L.barcode_product,product_code:L.product_code!=null?L.product_code.trim():null,product_name:L.product_name!=null?L.product_name.trim():null,product_description:L.product_description!=null?L.product_description.trim():null,category:he.name,images:JSON.stringify(H)},ce=await Bt.post(Q,Y);if(ce!=null&&ce.data!=null){ve.success("Thêm mới thành công"),W(!1),f.resetFields();let ie=document.getElementById("barcode");ie.innerHTML="",re([]),pt([]),nt(),vi()}else ve.error("Thêm mới thất bại"),W(!1)},co=async()=>{K(!0);let L=[],H=p.getFieldsValue();if(!Rt(H.barcode_product)){ve.error("Barcode không được chứa ký tự tiếng Việt"),K(!1);return}for(let ie=0;ie<Ce.length;ie++)Ce[ie].url_base&&Ce[ie].url_base!==null&&Ce[ie].url_base!==""&&L.push(Ce[ie].url_base);if(Ie!==null)for(let ie=0;ie<Ie.length;ie++)L.push(Ie[ie]);let Q=`/api/resource/VGM_Product/${It.name}`,Y={barcode:H.barcode_product,product_code:H.product_code!=null?H.product_code.trim():null,product_name:H.product_name!=null?H.product_name.trim():null,product_description:H.product_description!=null?H.product_description.trim():null,category:he.name,images:JSON.stringify(L)},ce=await Bt.put(Q,Y);if(ce!=null&&ce.data!=null){ve.success("Sửa thành công"),K(!1),p.resetFields();let ie=document.getElementById("barcode");ie.innerHTML="",lt([]),$e([]),nt(),ga()}else ve.error("Sửa thất bại"),K(!1)},ga=()=>{Ye(!1),K(!1)},$l=L=>{let H={item:L,title:`Xóa ${L.product_name}`,contentConfirm:`Bạn có chắc muốn xóa ${L.product_name} ra khỏi hệ thống không?`,contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};pe(H),Me(!0)},Ln=async()=>{let L=[];try{$(!0),L=[ge.item.name];let H=ji+".api.deleteListByDoctype",Q={doctype:"VGM_Product",items:JSON.stringify(L)},Y=await Bt.post(H,Q);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ve.success("Xóa thành công"),pe({}),nt(),$(!1),cn()):(ve.error("Xóa thất bại , Sản phẩm đang được sử dụng"),$(!1))}catch{ve.error("Xóa thất bại,Có lỗi xảy ra khi xóa sản phẩm"),$(!1)}},cn=()=>{Me(!1)},Dn=()=>{li(!0)},_i=async()=>{try{let L=ji+".api.deleteListByDoctype",H=[];for(let ce=0;ce<on.length;ce++)H.push(on[ce].name);let Q={doctype:"VGM_Product",items:JSON.stringify(H)},Y=await Bt.post(L,Q);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ve.success("Xóa thành công"),Nn([]),An(!1),nt(),ho()):ve.error("Xóa thất bại, có sản phẩm đã tồn tại trong báo cáo")}catch{ve.error("Có lỗi xảy ra khi xóa sản phẩm")}},ho=()=>{li(!1)},jl=()=>{rr(!0)},Si=async()=>{if(we.length==0){ve.error("Chưa thêm thêm sản phẩm cho danh mục này"),de(!1);return}if(Ht.length==0){ve.error("Chưa thêm hình ảnh nhận diện"),de(!1);return}else{de(!0);let L=ji+".api.checkImageProductExist";console.log(Ht);let H={collection_name:he.name,linkimages:Ht.length>0?Ht[Ht.length-1]:""},Q=await Bt.post(L,H),Y=[];for(let ce=0;ce<we.length;ce++)Y.push({key:we[ce].name,product_code:we[ce].product_code,product_name:we[ce].product_name,product_count:0});if(Q!=null&&Q.message!=null)if(Q.message.status=="failed")de(!1),ve.error("Không thể kiểm tra ảnh sản phẩm");else{oo("data:image/png;base64,"+Q.message.results.verbose[0].base64_image);let ce=[];Y.forEach(ie=>{Q.message.results.count[ie.product_name]!=null&&(ie.product_count=Q.message.results.count[ie.product_name]);let Rr=Q.message.results.verbose[0].locates.filter(function(ht){return ht.label===ie.product_name}).map(function(ht){let it=ht.bbox;return{x:it[0],y:it[1],width:it[2]-it[0],height:it[3]-it[1],label:ht.label}});ce=ce.concat(Rr)}),kl(ce)}ui(Ht.length>0?Ht[Ht.length-1]:""),de(!1),oa(Y),_e(!0),dn()}},fo=()=>{const L="0123456789ABCDEF";let H="#";for(let Q=0;Q<6;Q++)H+=L[Math.floor(Math.random()*16)];return H};fi.forEach(L=>{sa[L.label]||(sa[L.label]=fo())});const dn=()=>{sn([]),hi([]),de(!1),rr(!1)},Gn=()=>{_e(!1),hi([]),sn([])},[zl,xi]=N.useState([]),[Ce,wi]=N.useState([]),pa=({fileList:L})=>{xi(L)},go=({fileList:L})=>{wi(L)},po=async L=>{let H=L.url;H||(H=await new Promise(ce=>{const ie=new FileReader;ie.readAsDataURL(L.originFileObj),ie.onload=()=>ce(ie.result)}));const Q=new Image;Q.src=H,window.open(H)?.document.write(Q.outerHTML)},Bl=()=>{kt(!0)},dt=()=>{kt(!1)},va=L=>{ci(L.target.value)},vo=()=>{ln(!1),gi([])};N.useEffect(()=>{cr()},[nr]);const ma=Vt.length>0,Ei={productFromERPSelected:Vt,onChange:(L,H)=>{console.log(H),di(H)}},cr=async()=>{let H=await Bt.get("/api/method/mbw_dms.api.selling.product.list_product"),Q=[];H!=null&&H.result!=null&&H.result.data!=null&&(Q=H.result.data.map(Y=>({...Y,key:Y.name}))),nr!=null&&nr.trim()!==""&&(Q=Q.filter(Y=>Y.item_name.toLowerCase().includes(nr.toLowerCase()))),ao(Q)},Ul=async()=>{Te(!0);let L=[];for(let ce=0;ce<Vt.length;ce++){let ie={product_code:Vt[ce].item_code,barcode:Vt[ce].item_code,product_name:Vt[ce].item_name,product_description:Vt[ce].description,url_images:Vt[ce].image!=null&&Vt[ce].image!=""?[Vt[ce].image]:[]};L.push(ie)}let H={listproduct:JSON.stringify(L),category:he.name},Q=ji+".api.import_product",Y=await Bt.post(Q,H);Y!=null&&Y.message!=null&&Y.message.status=="success"?(ve.success("Thêm mới thành công"),Te(!1),di([]),nt(),dt()):(ve.error("Thêm mới thất bại"),Te(!1))},Hl=()=>{ln(!0),gi([])},qt=async()=>{if(la&&la.length>0){J(!0);let L={listproduct:JSON.stringify(la),category:he.name},H=ji+".api.import_product",Q=await Bt.post(H,L);Q!=null&&Q.message!=null&&Q.message.status=="success"?(ve.success("Thêm mới thành công"),J(!1),nt(),ln(!1)):(ve.error("Thêm mới thất bại"),J(!1))}else ve.error("File không chính xác, tải dữ liệu mẫu để tiếp tục")};return G.jsxs(G.Fragment,{children:[G.jsx($g,{title:"Sản phẩm",buttons:[ta&&{label:"Xóa",type:"primary",icon:G.jsx(Wu,{}),size:"20px",className:"flex items-center mr-2",danger:!0,action:Dn},{label:"Nhập file",icon:G.jsx(Hg,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:Hl},{label:"Thêm sản phẩm từ ERP",icon:G.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:Bl},{label:"Kiểm tra sản phẩm",type:"primary",icon:G.jsx(sp,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:jl},{label:"Thêm mới",type:"primary",icon:G.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center",action:un}]}),G.jsxs(Ef,{gutter:16,children:[G.jsx(pc,{span:18,push:6,children:G.jsxs("div",{className:"bg-white rounded-xl border-[#DFE3E8] border-[0.2px] border-solid",children:[G.jsx(Ft,{className:"w-[320px] border-none p-4",children:G.jsx(Pr,{value:Ae,onChange:Br,placeholder:"Tìm kiếm sản phẩm",prefix:G.jsx(Xu,{})})}),G.jsx("div",{className:"pt-3",children:G.jsx(c0,{rowSelection:{type:a,...Dl},columns:Ll,dataSource:we})})]})}),G.jsx(pc,{span:6,pull:18,children:G.jsxs("div",{className:"bg-white rounded-xl p-4 border-[#DFE3E8] border-[0.2px] border-solid",children:[G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("div",{children:G.jsx("p",{className:"text-base leading-5 font-medium text-[#212B36]",children:"Danh mục"})}),G.jsx("div",{className:"cursor-pointer",onClick:We,children:G.jsx(Ku,{})})]}),G.jsx("div",{className:"py-3",children:G.jsx(Ft,{className:"w-full border-none",name:"filter_category",children:G.jsx(Pr,{onChange:Gl,value:o,placeholder:"Tìm kiếm danh mục",prefix:G.jsx(Xu,{})})})}),G.jsx(_c,{style:{maxHeight:"calc(100vh - 500px)",overflow:"auto",paddingRight:"10px"},header:!1,footer:!1,bordered:!1,dataSource:n,renderItem:L=>G.jsx(_c.Item,{onMouseEnter:H=>ua(H,L),onMouseLeave:H=>In(H,L),onClick:()=>Et(L),children:G.jsxs("div",{className:"item_category",children:[G.jsxs("span",{className:`${L.selected?"selected":""}`,children:[G.jsx(np.Text,{})," ",L.category_name]}),G.jsxs("span",{style:{display:L.hidden?"none":"block"},children:[G.jsx("span",{style:{marginRight:"10px"},children:G.jsx(mc,{onClick:()=>ha(L)},"edit")}),G.jsx("span",{onClick:()=>ca(L),children:G.jsx(Wu,{},"delete")})]})]})})})]})})]}),G.jsxs(br,{title:"Kiểm tra ảnh sản phẩm",open:na,width:777,afterClose:dn,onOk:Si,onCancel:dn,footer:[G.jsx(Xt,{onClick:dn,children:"Hủy"},"back"),G.jsx(Xt,{type:"primary",onClick:Si,loading:se,children:"Kiểm tra"},"submit")],children:[G.jsx("p",{className:"text-[#637381] font-normal text-sm",children:"Chọn ảnh sản phẩm bất kì để kiểm tra nhận diện sản phẩm"}),G.jsxs(yc,{...Il,fileList:Ol,children:[G.jsx("p",{className:"ant-upload-drag-icon",children:G.jsx(Ku,{})}),G.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn ảnh để tải lên"})]})]}),G.jsxs(br,{title:"Kiểm tra ảnh sản phẩm",open:ae,width:920,onCancel:Gn,footer:null,children:[G.jsxs("div",{style:{marginBottom:"20px",display:"flex"},children:[G.jsx("img",{src:ia,style:{width:"450px",height:"450px",marginRight:"20px"}}),G.jsx(h5,{imageSrc:Tl,objectBoxes:fi,labelColors:sa})]}),G.jsxs("div",{children:[G.jsx("div",{children:"Kết quả kiểm tra hình ảnh:"}),G.jsx(jg,{dataSource:aa,columns:[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"},{title:"Số lượng",dataIndex:"product_count",key:"product_count"}],pagination:!1})]})]}),G.jsxs(br,{width:990,title:"Thêm sản phẩm từ ERP",open:mt,onCancel:dt,footer:!1,children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx(Ft,{className:"w-[320px] border-none pt-4",children:G.jsx(Pr,{value:nr,onChange:va,placeholder:"Tìm kiếm sản phẩm",prefix:G.jsx(Xu,{})})}),G.jsxs("div",{children:[G.jsx("span",{style:{marginRight:8},children:ma?`Đã chọn ${Vt.length} sản phẩm`:""}),G.jsx(Xt,{type:"primary",onClick:Ul,loading:me,children:"Thêm"})]})]}),G.jsx("div",{className:"pt-4",children:G.jsx(c0,{rowSelection:Ei,columns:[{title:"Mã sản phẩm",dataIndex:"item_code",key:"item_code"},{title:"Tên sản phẩm",dataIndex:"item_name",key:"item_name"},{title:"Danh mục",dataIndex:"item_group",key:"item_group"}],dataSource:io})})]}),G.jsx(br,{title:"Thêm mới sản phẩm",open:m,onOk:Kt,onCancel:vi,width:1e3,footer:[G.jsx(Xt,{onClick:vi,children:"Hủy"},"back"),G.jsx(Xt,{type:"primary",onClick:Kt,loading:X,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:f,children:[G.jsx(Ft,{label:"Mã sản phẩm",name:"product_code",required:!0,children:G.jsx(Pr,{})}),G.jsx(Ft,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:G.jsx(Pr,{onChange:L=>pi(L)})}),G.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:G.jsx("svg",{id:"barcode"})}),G.jsx(Ft,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:G.jsx(Pr,{})}),G.jsx(Ft,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),G.jsx(Ft,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:G.jsx(v0,{...Al,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:zl,onChange:pa,onPreview:po,children:"+ Upload"})})]})})}),G.jsx(br,{title:"Sửa sản phẩm",open:Tt,onOk:co,onCancel:ga,width:1e3,footer:[G.jsx(Xt,{onClick:ga,children:"Hủy"},"back"),G.jsx(Xt,{type:"primary",onClick:co,loading:Z,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:p,children:[G.jsx(Ft,{label:"Mã sản phẩm",name:"product_code",required:!0,children:G.jsx(Pr,{})}),G.jsx(Ft,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:G.jsx(Pr,{onChange:L=>mi(L)})}),G.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:G.jsx("svg",{id:"barcode"})}),G.jsx(Ft,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:G.jsx(Pr,{})}),G.jsx(Ft,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),G.jsx(Ft,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:G.jsx(v0,{...Fl,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:Ce,onChange:go,onPreview:po,children:"+ Upload"})})]})})}),G.jsxs(br,{title:ge.title,open:Le,onOk:Ln,onCancel:cn,footer:[G.jsx(Xt,{onClick:cn,children:"Hủy"},"submit"),G.jsx(Xt,{type:"primary",loading:O,onClick:Ln,children:"Xác nhận"},"submit")],cancelText:"Hủy",children:[G.jsx("div",{children:ge.contentConfirm}),G.jsx("div",{children:ge.contentRemind})]}),G.jsxs(br,{title:`Xóa ${on.length} sản phẩm?`,open:ra,onOk:_i,onCancel:ho,okText:"Xác nhận",cancelText:"Hủy",children:[G.jsxs("div",{children:["Bạn có chắc muốn xóa ",on.length," sản phẩm ra khỏi hệ thống không?"]}),G.jsx("div",{children:"Khi thực hiện hành động này, sẽ không thể hoàn tác."})]}),G.jsx(br,{title:"Thêm mới danh mục",open:w,onOk:Be,onCancel:Sr,width:600,footer:[G.jsx(Xt,{onClick:Sr,children:"Hủy"},"back"),G.jsx(Xt,{type:"primary",onClick:Be,loading:R,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:c,children:[G.jsx(Ft,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,rules:[{required:!0,message:"Vui lòng nhập tên danh mục!"},{max:25,message:"Tên danh mục không được vượt quá 25 ký tự!"}],children:G.jsx(Pr,{})}),G.jsx(Ft,{className:"pt-3",label:"Mô tả",name:"des",children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})})]})})}),G.jsx(br,{title:"Sửa danh mục",open:x,onOk:zr,onCancel:ur,width:600,footer:[G.jsx(Xt,{onClick:ur,children:"Hủy"},"back"),G.jsx(Xt,{type:"primary",onClick:zr,loading:M,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:h,children:[G.jsx(Ft,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:G.jsx(Pr,{value:k.category_name})}),G.jsx(Ft,{className:"pt-3",label:"Mô tả",name:"des",children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5},value:k.category_description})})]})})}),G.jsxs(br,{title:y.title,open:P,onOk:da,onCancel:uo,okText:"Xác nhận",cancelText:"Hủy",children:[G.jsx("div",{children:y.contentConfirm}),G.jsx("div",{children:y.contentRemind})]}),G.jsxs(br,{title:"Nhập dữ liệu từ tệp excel",open:Rl,width:777,onOk:qt,onCancel:vo,footer:[G.jsx(Xt,{onClick:vo,children:"Hủy"},"back"),G.jsx(Xt,{type:"primary",onClick:qt,loading:le,children:"Lưu lại"},"submit")],children:[G.jsxs("p",{className:"text-[#637381] font-normal text-sm",children:["Chọn file excel có định dạng .xlsx để thực hiện nhập dữ liệu. Tải dữ liệu mẫu"," ",G.jsx("a",{target:"_blank",href:"/mbw_audit/data_sample/product_sample.xlsx",children:"tại đây"})]}),G.jsxs(yc,{...Nl,fileList:Ml,children:[G.jsx("p",{className:"ant-upload-drag-icon",children:G.jsx(Ku,{})}),G.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn tệp để tải lên"})]})]})]})}function t7(){return G.jsxs(G.Fragment,{children:[G.jsx(zg,{children:G.jsx("title",{children:"Sản phẩm"})}),G.jsx(K9,{})]})}export{t7 as default};
