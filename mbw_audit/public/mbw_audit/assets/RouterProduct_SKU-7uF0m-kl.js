import{R as Ve,r as N,g as Xa,c as wn,h as xf,C as pc,i as wf,m as bg,k as kt,l as Og,n as Tg,o as kg,P as Rg,_ as o0,p as Mg,q as s0,a as Cf,t as Ng,v as Ag,K as vs,w as Ac,x as Fc,y as ws,z as Ef,B as Fg,E as za,G as Pf,I as bf,J as hs,L as vc,M as Ig,N as Of,O as Lg,Q as l0,U as Dg,V as Gg,W as u0,X as fs,j as G,Y as Zo,A as Ut,H as $g,Z as Wu,f as It,$ as Tr,a0 as Xu,T as c0,a1 as Ku,a2 as kr,a3 as Ht,a4 as jg,F as es,s as ve,d as zg}from"./main-kqMsOJ0h.js";import{E as mc,I as Bg,D as yc,L as Ug,a as Hg,V as d0,r as Vg,u as Wg,p as Xg}from"./xlsx-f7s6KlHO.js";import{V as Kg,e as qg,F as Yg}from"./FileSaver.min-8HOEA7SQ.js";import"./progress-XWPFGn0k.js";const Ic=Ve.createContext({});Ic.Consumer;var Tf=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const Qg=a=>{var{prefixCls:e,className:n,avatar:i,title:o,description:l}=a,c=Tf(a,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:h}=N.useContext(Xa),f=h("list",e),p=wn(`${f}-item-meta`,n),m=Ve.createElement("div",{className:`${f}-item-meta-content`},o&&Ve.createElement("h4",{className:`${f}-item-meta-title`},o),l&&Ve.createElement("div",{className:`${f}-item-meta-description`},l));return Ve.createElement("div",Object.assign({},c,{className:p}),i&&Ve.createElement("div",{className:`${f}-item-meta-avatar`},i),(o||l)&&m)},Jg=(a,e)=>{var{prefixCls:n,children:i,actions:o,extra:l,className:c,colStyle:h}=a,f=Tf(a,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:p,itemLayout:m}=N.useContext(Ic),{getPrefixCls:E}=N.useContext(Xa),w=()=>{let k;return N.Children.forEach(i,v=>{typeof v=="string"&&(k=!0)}),k&&N.Children.count(i)>1},_=()=>m==="vertical"?!!l:!w(),y=E("list",n),C=o&&o.length>0&&Ve.createElement("ul",{className:`${y}-item-action`,key:"actions"},o.map((k,v)=>Ve.createElement("li",{key:`${y}-item-action-${v}`},k,v!==o.length-1&&Ve.createElement("em",{className:`${y}-item-action-split`})))),P=p?"div":"li",T=Ve.createElement(P,Object.assign({},f,p?{}:{ref:e},{className:wn(`${y}-item`,{[`${y}-item-no-flex`]:!_()},c)}),m==="vertical"&&l?[Ve.createElement("div",{className:`${y}-item-main`,key:"content"},i,C),Ve.createElement("div",{className:`${y}-item-extra`,key:"extra"},l)]:[i,C,xf(l,{key:"extra"})]);return p?Ve.createElement(pc,{ref:e,flex:1,style:h},T):T},kf=N.forwardRef(Jg);kf.Meta=Qg;const Zg=kf,e2=a=>{const{listBorderedCls:e,componentCls:n,paddingLG:i,margin:o,itemPaddingSM:l,itemPaddingLG:c,marginLG:h,borderRadiusLG:f}=a;return{[`${e}`]:{border:`${kt(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderRadius:f,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${kt(o)} ${kt(h)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},t2=a=>{const{componentCls:e,screenSM:n,screenMD:i,marginLG:o,marginSM:l,margin:c}=a;return{[`@media screen and (max-width:${i}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:l}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:a.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${kt(c)}`}}}}}},r2=a=>{const{componentCls:e,antCls:n,controlHeight:i,minHeight:o,paddingSM:l,marginLG:c,padding:h,itemPadding:f,colorPrimary:p,itemPaddingSM:m,itemPaddingLG:E,paddingXS:w,margin:_,colorText:y,colorTextDescription:C,motionDurationSlow:P,lineWidth:T,headerBg:k,footerBg:v,emptyTextPadding:x,metaMarginBottom:b,avatarMarginRight:R,titleMarginBottom:U,descriptionFontSize:O}=a,$={};return["start","center","end"].forEach(M=>{$[`&-align-${M}`]={textAlign:M}}),{[`${e}`]:Object.assign(Object.assign({},Og(a)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:k},[`${e}-footer`]:{background:v},[`${e}-header, ${e}-footer`]:{paddingBlock:l},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:c},$),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:f,color:y,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:R},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:y},[`${e}-item-meta-title`]:{margin:`0 0 ${kt(a.marginXXS)} 0`,color:y,fontSize:a.fontSize,lineHeight:a.lineHeight,"> a":{color:y,transition:`all ${P}`,"&:hover":{color:p}}},[`${e}-item-meta-description`]:{color:C,fontSize:O,lineHeight:a.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:a.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${kt(w)}`,color:C,fontSize:a.fontSize,lineHeight:a.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:T,height:a.calc(a.fontHeight).sub(a.calc(a.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:a.colorSplit}}},[`${e}-empty`]:{padding:`${kt(h)} 0`,color:C,fontSize:a.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:x,color:a.colorTextDisabled,fontSize:a.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:_,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:c},[`${e}-item-meta`]:{marginBlockEnd:b,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:U,color:y,fontSize:a.fontSizeLG,lineHeight:a.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:h,marginInlineStart:"auto","> li":{padding:`0 ${kt(h)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${kt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${kt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${kt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${kt(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:E},[`${e}-sm ${e}-item`]:{padding:m},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},n2=a=>({contentWidth:220,itemPadding:`${kt(a.paddingContentVertical)} 0`,itemPaddingSM:`${kt(a.paddingContentVerticalSM)} ${kt(a.paddingContentHorizontal)}`,itemPaddingLG:`${kt(a.paddingContentVerticalLG)} ${kt(a.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:a.padding,metaMarginBottom:a.padding,avatarMarginRight:a.padding,titleMarginBottom:a.paddingSM,descriptionFontSize:a.fontSize}),i2=wf("List",a=>{const e=bg(a,{listBorderedCls:`${a.componentCls}-bordered`,minHeight:a.controlHeightLG});return[r2(e),e2(e),t2(e)]},n2);var a2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function _c(a){var e,{pagination:n=!1,prefixCls:i,bordered:o=!1,split:l=!0,className:c,rootClassName:h,style:f,children:p,itemLayout:m,loadMore:E,grid:w,dataSource:_=[],size:y,header:C,footer:P,loading:T=!1,rowKey:k,renderItem:v,locale:x}=a,b=a2(a,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const R=n&&typeof n=="object"?n:{},[U,O]=N.useState(R.defaultCurrent||1),[$,M]=N.useState(R.defaultPageSize||10),{getPrefixCls:D,renderEmpty:K,direction:X,list:Z}=N.useContext(Xa),q={current:1,total:0},le=ze=>(Ue,vt)=>{var Gt;O(Ue),M(vt),n&&n[ze]&&((Gt=n?.[ze])===null||Gt===void 0||Gt.call(n,Ue,vt))},de=le("onChange"),me=le("onShowSizeChange"),ke=(ze,Ue)=>{if(!v)return null;let vt;return typeof k=="function"?vt=k(ze):k?vt=ze[k]:vt=ze.key,vt||(vt=`list-item-${Ue}`),N.createElement(N.Fragment,{key:vt},v(ze,Ue))},ue=()=>!!(E||n||P),J=D("list",i),[he,Re,we]=i2(J);let Ye=T;typeof Ye=="boolean"&&(Ye={spinning:Ye});const Fe=Ye&&Ye.spinning,F=Tg(y);let V="";switch(F){case"large":V="lg";break;case"small":V="sm";break}const re=wn(J,{[`${J}-vertical`]:m==="vertical",[`${J}-${V}`]:V,[`${J}-split`]:l,[`${J}-bordered`]:o,[`${J}-loading`]:Fe,[`${J}-grid`]:!!w,[`${J}-something-after-last-item`]:ue(),[`${J}-rtl`]:X==="rtl"},Z?.className,c,h,Re,we),ge=kg(q,{total:_.length,current:U,pageSize:$},n||{}),pe=Math.ceil(ge.total/ge.pageSize);ge.current>pe&&(ge.current=pe);const De=n?N.createElement("div",{className:wn(`${J}-pagination`,`${J}-pagination-align-${(e=ge?.align)!==null&&e!==void 0?e:"end"}`)},N.createElement(Rg,Object.assign({},ge,{onChange:de,onShowSizeChange:me}))):null;let Ne=o0(_);n&&_.length>(ge.current-1)*ge.pageSize&&(Ne=o0(_).splice((ge.current-1)*ge.pageSize,ge.pageSize));const Lt=Object.keys(w||{}).some(ze=>["xs","sm","md","lg","xl","xxl"].includes(ze)),Ie=Mg(Lt),Rt=N.useMemo(()=>{for(let ze=0;ze<s0.length;ze+=1){const Ue=s0[ze];if(Ie[Ue])return Ue}},[Ie]),Qe=N.useMemo(()=>{if(!w)return;const ze=Rt&&w[Rt]?w[Rt]:w.column;if(ze)return{width:`${100/ze}%`,maxWidth:`${100/ze}%`}},[w?.column,Rt]);let Le=Fe&&N.createElement("div",{style:{minHeight:53}});if(Ne.length>0){const ze=Ne.map((Ue,vt)=>ke(Ue,vt));Le=w?N.createElement(Cf,{gutter:w.gutter},N.Children.map(ze,Ue=>N.createElement("div",{key:Ue?.key,style:Qe},Ue))):N.createElement("ul",{className:`${J}-items`},ze)}else!p&&!Fe&&(Le=N.createElement("div",{className:`${J}-empty-text`},x&&x.emptyText||K?.("List")||N.createElement(Ng,{componentName:"List"})));const ut=ge.position||"bottom",Dt=N.useMemo(()=>({grid:w,itemLayout:m}),[JSON.stringify(w),m]);return he(N.createElement(Ic.Provider,{value:Dt},N.createElement("div",Object.assign({style:Object.assign(Object.assign({},Z?.style),f),className:re},b),(ut==="top"||ut==="both")&&De,C&&N.createElement("div",{className:`${J}-header`},C),N.createElement(Ag,Object.assign({},Ye),Le,p),P&&N.createElement("div",{className:`${J}-footer`},P),E||(ut==="bottom"||ut==="both")&&De)))}_c.Item=Zg;var o2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const s2={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},l2=N.forwardRef((a,e)=>{const n=p=>{const{keyCode:m}=p;m===vs.ENTER&&p.preventDefault()},i=p=>{const{keyCode:m}=p,{onClick:E}=a;m===vs.ENTER&&E&&E()},{style:o,noStyle:l,disabled:c}=a,h=o2(a,["style","noStyle","disabled"]);let f={};return l||(f=Object.assign({},s2)),c&&(f.pointerEvents="none"),f=Object.assign(Object.assign({},f),o),N.createElement("div",Object.assign({role:"button",tabIndex:0,ref:e},h,{onKeyDown:n,onKeyUp:i,style:f}))}),h0=l2;var u2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const c2=u2;var d2=function(e,n){return N.createElement(Ac,Fc({},e,{ref:n,icon:c2}))};const h2=N.forwardRef(d2);var f2=function(){var a=document.getSelection();if(!a.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<a.rangeCount;i++)n.push(a.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return a.removeAllRanges(),function(){a.type==="Caret"&&a.removeAllRanges(),a.rangeCount||n.forEach(function(o){a.addRange(o)}),e&&e.focus()}},g2=f2,f0={"text/plain":"Text","text/html":"Url",default:"Text"},p2="Copy to clipboard: #{key}, Enter";function v2(a){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,e)}function m2(a,e){var n,i,o,l,c,h,f=!1;e||(e={}),n=e.debug||!1;try{o=g2(),l=document.createRange(),c=document.getSelection(),h=document.createElement("span"),h.textContent=a,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(m){if(m.stopPropagation(),e.format)if(m.preventDefault(),typeof m.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var E=f0[e.format]||f0.default;window.clipboardData.setData(E,a)}else m.clipboardData.clearData(),m.clipboardData.setData(e.format,a);e.onCopy&&(m.preventDefault(),e.onCopy(m.clipboardData))}),document.body.appendChild(h),l.selectNodeContents(h),c.addRange(l);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");f=!0}catch(m){n&&console.error("unable to copy using execCommand: ",m),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",a),e.onCopy&&e.onCopy(window.clipboardData),f=!0}catch(E){n&&console.error("unable to copy using clipboardData: ",E),n&&console.error("falling back to prompt"),i=v2("message"in e?e.message:p2),window.prompt(i,a)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(l):c.removeAllRanges()),h&&document.body.removeChild(h),o()}return f}var y2=m2;const _2=ws(y2);var S2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const x2=S2;var w2=function(e,n){return N.createElement(Ac,Fc({},e,{ref:n,icon:x2}))};const C2=N.forwardRef(w2),E2=(a,e,n,i)=>{const{titleMarginBottom:o,fontWeightStrong:l}=i;return{marginBottom:o,color:n,fontWeight:l,fontSize:a,lineHeight:e}},P2=a=>{const e=[1,2,3,4,5],n={};return e.forEach(i=>{n[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=E2(a[`fontSizeHeading${i}`],a[`lineHeightHeading${i}`],a.colorTextHeading,a)}),n},b2=a=>{const{componentCls:e}=a;return{"a&, a":Object.assign(Object.assign({},Ef(a)),{textDecoration:a.linkDecoration,"&:active, &:hover":{textDecoration:a.linkHoverDecoration},[`&[disabled], &${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:a.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},O2=a=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:a.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Fg[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:a.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),T2=a=>{const{componentCls:e,paddingSM:n}=a,i=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:a.calc(a.paddingSM).mul(-1).equal(),marginTop:a.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${kt(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:a.calc(a.marginXS).add(2).equal(),insetBlockEnd:a.marginXS,color:a.colorTextDescription,fontWeight:"normal",fontSize:a.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},k2=a=>({[`${a.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:a.colorSuccess}},[`${a.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),R2=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),M2=a=>{const{componentCls:e,titleMarginTop:n}=a;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:a.colorText,wordBreak:"break-word",lineHeight:a.lineHeight,[`&${e}-secondary`]:{color:a.colorTextDescription},[`&${e}-success`]:{color:a.colorSuccess},[`&${e}-warning`]:{color:a.colorWarning},[`&${e}-danger`]:{color:a.colorError,"a&:active, a&:focus":{color:a.colorErrorActive},"a&:hover":{color:a.colorErrorHover}},[`&${e}-disabled`]:{color:a.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},P2(a)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),O2(a)),b2(a)),{[`
        ${e}-expand,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Ef(a)),{marginInlineStart:a.marginXXS})}),T2(a)),k2(a)),R2()),{"&-rtl":{direction:"rtl"}})}},N2=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Rf=wf("Typography",a=>[M2(a)],N2),A2=a=>{const{prefixCls:e,"aria-label":n,className:i,style:o,direction:l,maxLength:c,autoSize:h=!0,value:f,onSave:p,onCancel:m,onEnd:E,component:w,enterIcon:_=N.createElement(C2,null)}=a,y=N.useRef(null),C=N.useRef(!1),P=N.useRef(),[T,k]=N.useState(f);N.useEffect(()=>{k(f)},[f]),N.useEffect(()=>{if(y.current&&y.current.resizableTextArea){const{textArea:q}=y.current.resizableTextArea;q.focus();const{length:le}=q.value;q.setSelectionRange(le,le)}},[]);const v=q=>{let{target:le}=q;k(le.value.replace(/[\n\r]/g,""))},x=()=>{C.current=!0},b=()=>{C.current=!1},R=q=>{let{keyCode:le}=q;C.current||(P.current=le)},U=()=>{p(T.trim())},O=q=>{let{keyCode:le,ctrlKey:de,altKey:me,metaKey:ke,shiftKey:ue}=q;P.current===le&&!C.current&&!de&&!me&&!ke&&!ue&&(le===vs.ENTER?(U(),E?.()):le===vs.ESC&&m())},$=()=>{U()},M=w?`${e}-${w}`:"",[D,K,X]=Rf(e),Z=wn(e,`${e}-edit-content`,{[`${e}-rtl`]:l==="rtl"},i,M,K,X);return D(N.createElement("div",{className:Z,style:o},N.createElement(za,{ref:y,maxLength:c,value:T,onChange:v,onKeyDown:R,onKeyUp:O,onCompositionStart:x,onCompositionEnd:b,onBlur:$,"aria-label":n,rows:1,autoSize:h}),_!==null?xf(_,{className:`${e}-edit-content-confirm`}):null))},F2=A2;function qu(a,e){return N.useMemo(()=>{const n=!!a;return[n,Object.assign(Object.assign({},e),n&&typeof a=="object"?a:null)]},[a])}const I2=(a,e)=>{const n=N.useRef(!1);N.useEffect(()=>{n.current?a():n.current=!0},e)};var L2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const D2=N.forwardRef((a,e)=>{const{prefixCls:n,component:i="article",className:o,rootClassName:l,setContentRef:c,children:h,direction:f,style:p}=a,m=L2(a,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:E,direction:w,typography:_}=N.useContext(Xa),y=f??w;let C=e;c&&(C=Pf(e,c));const P=E("typography",n),[T,k,v]=Rf(P),x=wn(P,_?.className,{[`${P}-rtl`]:y==="rtl"},o,l,k,v),b=Object.assign(Object.assign({},_?.style),p);return T(N.createElement(i,Object.assign({className:x,style:b,ref:C},m),h))}),Mf=D2;function Nf(a){const e=typeof a;return e==="string"||e==="number"}function G2(a){let e=0;return a.forEach(n=>{Nf(n)?e+=String(n).length:e+=1}),e}function Yu(a,e){let n=0;const i=[];for(let o=0;o<a.length;o+=1){if(n===e)return i;const l=a[o],h=Nf(l)?String(l).length:1,f=n+h;if(f>e){const p=e-n;return i.push(String(l).slice(0,p)),i}i.push(l),n=f}return a}const $2=0,ts=1,g0=2,Qu=3,Ju=4,j2=a=>{let{enabledMeasure:e,children:n,text:i,width:o,fontSize:l,rows:c,onEllipsis:h}=a;const[[f,p,m],E]=N.useState([0,0,0]),[w,_]=N.useState(0),[y,C]=N.useState($2),[P,T]=N.useState(0),k=N.useRef(null),v=N.useRef(null),x=N.useMemo(()=>bf(i),[i]),b=N.useMemo(()=>G2(x),[x]),R=N.useMemo(()=>!e||y!==Qu?w&&y!==Ju&&e?n(Yu(x,w),w<b):n(x,!1):n(Yu(x,p),p<b),[e,y,n,x,p,b]);hs(()=>{e&&o&&l&&b&&(C(ts),E([0,Math.ceil(b/2),b]))},[e,o,l,i,b,c]),hs(()=>{var M;y===ts&&T(((M=k.current)===null||M===void 0?void 0:M.offsetHeight)||0)},[y]),hs(()=>{var M,D;if(P){if(y===ts){const K=((M=v.current)===null||M===void 0?void 0:M.offsetHeight)||0,X=c*P;K<=X?(C(Ju),h(!1)):C(g0)}else if(y===g0)if(f!==m){const K=((D=v.current)===null||D===void 0?void 0:D.offsetHeight)||0,X=c*P;let Z=f,q=m;f===m-1?q=f:K<=X?Z=p:q=p;const le=Math.ceil((Z+q)/2);E([Z,le,q])}else C(Qu),_(p),h(!0)}},[y,f,m,c,P]);const U={width:o,whiteSpace:"normal",margin:0,padding:0},O=(M,D,K)=>N.createElement("span",{"aria-hidden":!0,ref:D,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(l/2)*2},K)},M),$=(M,D)=>{const K=Yu(x,M);return O(n(K,!0),D,U)};return N.createElement(N.Fragment,null,R,e&&y!==Qu&&y!==Ju&&N.createElement(N.Fragment,null,O("lg",k,{wordBreak:"keep-all",whiteSpace:"nowrap"}),y===ts?O(n(x,!1),v,U):$(p,v)))},z2=j2,B2=a=>{let{enabledEllipsis:e,isEllipsis:n,children:i,tooltipProps:o}=a;return!o?.title||!e?i:N.createElement(vc,Object.assign({open:n?void 0:!1},o),i)},U2=B2;var H2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};function V2(a,e){let{mark:n,code:i,underline:o,delete:l,strong:c,keyboard:h,italic:f}=a,p=e;function m(E,w){w&&(p=N.createElement(E,{},p))}return m("strong",c),m("u",o),m("del",l),m("code",i),m("mark",n),m("kbd",h),m("i",f),p}function rs(a,e,n){return a===!0||a===void 0?e:a||n&&e}function p0(a){return a===!1?[!1,!1]:Array.isArray(a)?a:[a]}const W2="...",X2=N.forwardRef((a,e)=>{var n,i,o;const{prefixCls:l,className:c,style:h,type:f,disabled:p,children:m,ellipsis:E,editable:w,copyable:_,component:y,title:C}=a,P=H2(a,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:T,direction:k}=N.useContext(Xa),[v]=Ig("Text"),x=N.useRef(null),b=N.useRef(null),R=T("typography",l),U=Of(P,["mark","code","delete","underline","strong","keyboard","italic"]),[O,$]=qu(w),[M,D]=Lg(!1,{value:$.editing}),{triggerType:K=["icon"]}=$,X=ae=>{var _e;ae&&((_e=$.onStart)===null||_e===void 0||_e.call($)),D(ae)};I2(()=>{var ae;M||(ae=b.current)===null||ae===void 0||ae.focus()},[M]);const Z=ae=>{ae?.preventDefault(),X(!0)},q=ae=>{var _e;(_e=$.onChange)===null||_e===void 0||_e.call($,ae),X(!1)},le=()=>{var ae;(ae=$.onCancel)===null||ae===void 0||ae.call($),X(!1)},[de,me]=qu(_),[ke,ue]=N.useState(!1),J=N.useRef(null),he={};me.format&&(he.format=me.format);const Re=()=>{J.current&&clearTimeout(J.current)},we=ae=>{var _e;ae?.preventDefault(),ae?.stopPropagation(),_2(me.text||String(m)||"",he),ue(!0),Re(),J.current=setTimeout(()=>{ue(!1)},3e3),(_e=me.onCopy)===null||_e===void 0||_e.call(me,ae)};N.useEffect(()=>Re,[]);const[Ye,Fe]=N.useState(!1),[F,V]=N.useState(!1),[re,ge]=N.useState(!1),[pe,De]=N.useState(!1),[Ne,Lt]=N.useState(!1),[Ie,Rt]=N.useState(!0),[Qe,Le]=qu(E,{expandable:!1}),ut=Qe&&!re,{rows:Dt=1}=Le,ze=N.useMemo(()=>!ut||Le.suffix!==void 0||Le.onEllipsis||Le.expandable||O||de,[ut,Le,O,de]);hs(()=>{Qe&&!ze&&(Fe(l0("webkitLineClamp")),V(l0("textOverflow")))},[ze,Qe]);const Ue=N.useMemo(()=>ze?!1:Dt===1?F:Ye,[ze,F,Ye]),vt=ut&&(Ue?Ne:pe),Gt=ut&&Dt===1&&Ue,nn=ut&&Dt>1&&Ue,an=ae=>{var _e;ge(!0),(_e=Le.onExpand)===null||_e===void 0||_e.call(Le,ae)},[Mn,ra]=N.useState(0),[Nn,na]=N.useState(0),li=(ae,_e)=>{let{offsetWidth:yt}=ae;var Mt;ra(yt),na(parseInt((Mt=window.getComputedStyle)===null||Mt===void 0?void 0:Mt.call(window,_e).fontSize,10)||0)},ia=ae=>{var _e;De(ae),pe!==ae&&((_e=Le.onEllipsis)===null||_e===void 0||_e.call(Le,ae))};N.useEffect(()=>{const ae=x.current;if(Qe&&Ue&&ae){const _e=nn?ae.offsetHeight<ae.scrollHeight:ae.offsetWidth<ae.scrollWidth;Ne!==_e&&Lt(_e)}},[Qe,Ue,m,nn,Ie,Mn]),N.useEffect(()=>{const ae=x.current;if(typeof IntersectionObserver>"u"||!ae||!Ue||!ut)return;const _e=new IntersectionObserver(()=>{Rt(!!ae.offsetParent)});return _e.observe(ae),()=>{_e.disconnect()}},[Ue,ut]);let nr={};Le.tooltip===!0?nr={title:(n=$.text)!==null&&n!==void 0?n:m}:N.isValidElement(Le.tooltip)?nr={title:Le.tooltip}:typeof Le.tooltip=="object"?nr=Object.assign({title:(i=$.text)!==null&&i!==void 0?i:m},Le.tooltip):nr={title:Le.tooltip};const Wt=N.useMemo(()=>{const ae=_e=>["string","number"].includes(typeof _e);if(!(!Qe||Ue)){if(ae($.text))return $.text;if(ae(m))return m;if(ae(C))return C;if(ae(nr.title))return nr.title}},[Qe,Ue,C,nr.title,vt]);if(M)return N.createElement(F2,{value:(o=$.text)!==null&&o!==void 0?o:typeof m=="string"?m:"",onSave:q,onCancel:le,onEnd:$.onEnd,prefixCls:R,className:c,style:h,direction:k,component:y,maxLength:$.maxLength,autoSize:$.autoSize,enterIcon:$.enterIcon});const on=()=>{const{expandable:ae,symbol:_e}=Le;if(!ae)return null;let yt;return _e?yt=_e:yt=v?.expand,N.createElement("a",{key:"expand",className:`${R}-expand`,onClick:an,"aria-label":v?.expand},yt)},aa=()=>{if(!O)return;const{icon:ae,tooltip:_e}=$,yt=bf(_e)[0]||v?.edit,Mt=typeof yt=="string"?yt:"";return K.includes("icon")?N.createElement(vc,{key:"edit",title:_e===!1?"":yt},N.createElement(h0,{ref:b,className:`${R}-edit`,onClick:Z,"aria-label":Mt},ae||N.createElement(mc,{role:"button"}))):null},ui=()=>{if(!de)return null;const{tooltips:ae,icon:_e}=me,yt=p0(ae),Mt=p0(_e),ir=ke?rs(yt[1],v?.copied):rs(yt[0],v?.copy),ci=ke?v?.copied:v?.copy,Xt=typeof ir=="string"?ir:ci;return N.createElement(vc,{key:"copy",title:ir},N.createElement(h0,{className:wn(`${R}-copy`,{[`${R}-copy-success`]:ke,[`${R}-copy-icon-only`]:m==null}),onClick:we,"aria-label":Xt},ke?rs(Mt[1],N.createElement(Gg,null),!0):rs(Mt[0],N.createElement(h2,null),!0)))},An=ae=>[ae&&on(),aa(),ui()],oa=ae=>[ae&&N.createElement("span",{"aria-hidden":!0,key:"ellipsis"},W2),Le.suffix,An(ae)];return N.createElement(Dg,{onResize:li,disabled:!ut},ae=>N.createElement(U2,{tooltipProps:nr,enabledEllipsis:ut,isEllipsis:vt},N.createElement(Mf,Object.assign({className:wn({[`${R}-${f}`]:f,[`${R}-disabled`]:p,[`${R}-ellipsis`]:Qe,[`${R}-single-line`]:ut&&Dt===1,[`${R}-ellipsis-single-line`]:Gt,[`${R}-ellipsis-multiple-line`]:nn},c),prefixCls:l,style:Object.assign(Object.assign({},h),{WebkitLineClamp:nn?Dt:void 0}),component:y,ref:Pf(ae,x,e),direction:k,onClick:K.includes("text")?Z:void 0,"aria-label":Wt?.toString(),title:C},U),N.createElement(z2,{enabledMeasure:ut&&!Ue,text:m,rows:Dt,width:Mn,fontSize:Nn,onEllipsis:ia},(_e,yt)=>{let Mt=_e;return _e.length&&yt&&Wt&&(Mt=N.createElement("span",{key:"show-content","aria-hidden":!0},Mt)),V2(a,N.createElement(N.Fragment,null,Mt,oa(yt)))}))))}),Cs=X2;var K2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const q2=N.forwardRef((a,e)=>{var{ellipsis:n,rel:i}=a,o=K2(a,["ellipsis","rel"]);const l=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete l.navigate,N.createElement(Cs,Object.assign({},l,{ref:e,ellipsis:!!n,component:"a"}))}),Y2=q2,Q2=N.forwardRef((a,e)=>N.createElement(Cs,Object.assign({ref:e},a,{component:"div"}))),J2=Q2;var Z2=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const ep=(a,e)=>{var{ellipsis:n}=a,i=Z2(a,["ellipsis"]);const o=N.useMemo(()=>n&&typeof n=="object"?Of(n,["expandable","rows"]):n,[n]);return N.createElement(Cs,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},tp=N.forwardRef(ep);var rp=function(a,e){var n={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(a);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(a,i[o])&&(n[i[o]]=a[i[o]]);return n};const np=[1,2,3,4,5],ip=N.forwardRef((a,e)=>{const{level:n=1}=a,i=rp(a,["level"]);let o;return np.includes(n)?o=`h${n}`:o="h1",N.createElement(Cs,Object.assign({ref:e},i,{component:o}))}),ap=ip,Ka=Mf;Ka.Text=tp;Ka.Link=Y2;Ka.Title=ap;Ka.Paragraph=J2;const op=Ka,Lc=Bg;Lc.Dragger=yc;Lc.LIST_IGNORE=Ug;const v0=Lc;var sp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M644.7 669.2a7.92 7.92 0 00-6.5-3.3H594c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.8-5.3 0-12.7-6.5-12.7h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-22.9-31.9zM688 306v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 458H208V148h560v296c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h312c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm402.6-320.8l-192-66.7c-.9-.3-1.7-.4-2.6-.4s-1.8.1-2.6.4l-192 66.7a7.96 7.96 0 00-5.4 7.5v251.1c0 2.5 1.1 4.8 3.1 6.3l192 150.2c1.4 1.1 3.2 1.7 4.9 1.7s3.5-.6 4.9-1.7l192-150.2c1.9-1.5 3.1-3.8 3.1-6.3V538.7c0-3.4-2.2-6.4-5.4-7.5zM826 763.7L688 871.6 550 763.7V577l138-48 138 48v186.7z"}}]},name:"file-protect",theme:"outlined"};const lp=sp;var up=function(e,n){return N.createElement(Ac,Fc({},e,{ref:n,icon:lp}))};const cp=N.forwardRef(up);var Af={exports:{}},Es={},ms={},be={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof u0<"u"?u0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.5",isBrowser:n(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle(o){return a.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var o;return(o=a.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(o){a.glob.Konva=o}};const i=o=>{a.Konva[o.prototype.getClassName()]=o};a._registerNode=i,a.Konva._injectGlobal(a.Konva)})(be);var lt={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const e=be;class n{constructor(x=[1,0,0,1,0,0]){this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]}point(x){var b=this.m;return{x:b[0]*x.x+b[2]*x.y+b[4],y:b[1]*x.x+b[3]*x.y+b[5]}}translate(x,b){return this.m[4]+=this.m[0]*x+this.m[2]*b,this.m[5]+=this.m[1]*x+this.m[3]*b,this}scale(x,b){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=b,this.m[3]*=b,this}rotate(x){var b=Math.cos(x),R=Math.sin(x),U=this.m[0]*b+this.m[2]*R,O=this.m[1]*b+this.m[3]*R,$=this.m[0]*-R+this.m[2]*b,M=this.m[1]*-R+this.m[3]*b;return this.m[0]=U,this.m[1]=O,this.m[2]=$,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(x,b){var R=this.m[0]+this.m[2]*b,U=this.m[1]+this.m[3]*b,O=this.m[2]+this.m[0]*x,$=this.m[3]+this.m[1]*x;return this.m[0]=R,this.m[1]=U,this.m[2]=O,this.m[3]=$,this}multiply(x){var b=this.m[0]*x.m[0]+this.m[2]*x.m[1],R=this.m[1]*x.m[0]+this.m[3]*x.m[1],U=this.m[0]*x.m[2]+this.m[2]*x.m[3],O=this.m[1]*x.m[2]+this.m[3]*x.m[3],$=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],M=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=b,this.m[1]=R,this.m[2]=U,this.m[3]=O,this.m[4]=$,this.m[5]=M,this}invert(){var x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*x,R=-this.m[1]*x,U=-this.m[2]*x,O=this.m[0]*x,$=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=R,this.m[2]=U,this.m[3]=O,this.m[4]=$,this.m[5]=M,this}getMatrix(){return this.m}decompose(){var x=this.m[0],b=this.m[1],R=this.m[2],U=this.m[3],O=this.m[4],$=this.m[5],M=x*U-b*R;let D={x:O,y:$,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||b!=0){var K=Math.sqrt(x*x+b*b);D.rotation=b>0?Math.acos(x/K):-Math.acos(x/K),D.scaleX=K,D.scaleY=M/K,D.skewX=(x*R+b*U)/M,D.skewY=0}else if(R!=0||U!=0){var X=Math.sqrt(R*R+U*U);D.rotation=Math.PI/2-(U>0?Math.acos(-R/X):-Math.acos(R/X)),D.scaleX=M/X,D.scaleY=X,D.skewX=0,D.skewY=(x*R+b*U)/M}return D.rotation=a.Util._getRotation(D.rotation),D}}a.Transform=n;var i="[object Array]",o="[object Number]",l="[object String]",c="[object Boolean]",h=Math.PI/180,f=180/Math.PI,p="#",m="",E="0",w="Konva warning: ",_="Konva error: ",y="rgb(",C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};a.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===i},_isNumber(v){return Object.prototype.toString.call(v)===o&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===l},_isBoolean(v){return Object.prototype.toString.call(v)===c},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;var x=v[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){T.push(v),T.length===1&&k(function(){const x=T;T=[],x.forEach(function(b){b()})})},createCanvasElement(){var v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,x){var b=a.Util.createImageElement();b.onload=function(){x(b)},b.src=v},_rgbToHex(v,x,b){return((1<<24)+(v<<16)+(x<<8)+b).toString(16).slice(1)},_hexToRgb(v){v=v.replace(p,m);var x=parseInt(v,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor(){for(var v=(Math.random()*16777215<<0).toString(16);v.length<6;)v=E+v;return p+v},getRGB(v){var x;return v in C?(x=C[v],{r:x[0],g:x[1],b:x[2]}):v[0]===p?this._hexToRgb(v.substring(1)):v.substr(0,4)===y?(x=P.exec(v.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",a.Util._namedColorToRBA(v)||a.Util._hex3ColorToRGBA(v)||a.Util._hex4ColorToRGBA(v)||a.Util._hex6ColorToRGBA(v)||a.Util._hex8ColorToRGBA(v)||a.Util._rgbColorToRGBA(v)||a.Util._rgbaColorToRGBA(v)||a.Util._hslColorToRGBA(v)},_namedColorToRBA(v){var x=C[v.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];var x=v.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];var x=v.split(/ *, */).map((b,R)=>b.slice(-1)==="%"?R===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[x,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),R=Number(b[0])/360,U=Number(b[1])/100,O=Number(b[2])/100;let $,M,D;if(U===0)return D=O*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};O<.5?$=O*(1+U):$=O+U-O*U;const K=2*O-$,X=[0,0,0];for(let Z=0;Z<3;Z++)M=R+1/3*-(Z-1),M<0&&M++,M>1&&M--,6*M<1?D=K+($-K)*6*M:2*M<1?D=$:3*M<2?D=K+($-K)*(2/3-M)*6:D=K,X[Z]=D*255;return{r:Math.round(X[0]),g:Math.round(X[1]),b:Math.round(X[2]),a:1}}},haveIntersection(v,x){return!(x.x>v.x+v.width||x.x+x.width<v.x||x.y>v.y+v.height||x.y+x.height<v.y)},cloneObject(v){var x={};for(var b in v)this._isPlainObject(v[b])?x[b]=this.cloneObject(v[b]):this._isArray(v[b])?x[b]=this.cloneArray(v[b]):x[b]=v[b];return x},cloneArray(v){return v.slice(0)},degToRad(v){return v*h},radToDeg(v){return v*f},_degToRad(v){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(v)},_radToDeg(v){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(v)},_getRotation(v){return e.Konva.angleDeg?a.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(_+v)},error(v){console.error(_+v)},warn(v){e.Konva.showWarnings&&console.warn(w+v)},each(v,x){for(var b in v)x(b,v[b])},_inRange(v,x,b){return x<=v&&v<b},_getProjectionToSegment(v,x,b,R,U,O){var $,M,D,K=(v-b)*(v-b)+(x-R)*(x-R);if(K==0)$=v,M=x,D=(U-b)*(U-b)+(O-R)*(O-R);else{var X=((U-v)*(b-v)+(O-x)*(R-x))/K;X<0?($=v,M=x,D=(v-U)*(v-U)+(x-O)*(x-O)):X>1?($=b,M=R,D=(b-U)*(b-U)+(R-O)*(R-O)):($=v+X*(b-v),M=x+X*(R-x),D=($-U)*($-U)+(M-O)*(M-O))}return[$,M,D]},_getProjectionToLine(v,x,b){var R=a.Util.cloneObject(v),U=Number.MAX_VALUE;return x.forEach(function(O,$){if(!(!b&&$===x.length-1)){var M=x[($+1)%x.length],D=a.Util._getProjectionToSegment(O.x,O.y,M.x,M.y,v.x,v.y),K=D[0],X=D[1],Z=D[2];Z<U&&(R.x=K,R.y=X,U=Z)}}),R},_prepareArrayForTween(v,x,b){var R,U=[],O=[];if(v.length>x.length){var $=x;x=v,v=$}for(R=0;R<v.length;R+=2)U.push({x:v[R],y:v[R+1]});for(R=0;R<x.length;R+=2)O.push({x:x[R],y:x[R+1]});var M=[];return O.forEach(function(D){var K=a.Util._getProjectionToLine(D,U,b);M.push(K.x),M.push(K.y)}),M},_prepareToStringify(v){var x;v.visitedByCircularReferenceRemoval=!0;for(var b in v)if(v.hasOwnProperty(b)&&v[b]&&typeof v[b]=="object"){if(x=Object.getOwnPropertyDescriptor(v,b),v[b].visitedByCircularReferenceRemoval||a.Util._isElement(v[b]))if(x.configurable)delete v[b];else return null;else if(a.Util._prepareToStringify(v[b])===null)if(x.configurable)delete v[b];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,x){for(var b in x)v[b]=x[b];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){e.Konva.releaseCanvasOnDestroy&&v.forEach(x=>{x.width=0,x.height=0})},drawRoundedRectPath(v,x,b,R){let U=0,O=0,$=0,M=0;typeof R=="number"?U=O=$=M=Math.min(R,x/2,b/2):(U=Math.min(R[0]||0,x/2,b/2),O=Math.min(R[1]||0,x/2,b/2),M=Math.min(R[2]||0,x/2,b/2),$=Math.min(R[3]||0,x/2,b/2)),v.moveTo(U,0),v.lineTo(x-O,0),v.arc(x-O,O,O,Math.PI*3/2,0,!1),v.lineTo(x,b-M),v.arc(x-M,b-M,M,0,Math.PI/2,!1),v.lineTo($,b),v.arc($,b-$,$,Math.PI/2,Math.PI,!1),v.lineTo(0,U),v.arc(U,U,U,Math.PI,Math.PI*3/2,!1)}}})(lt);var nt={},Oe={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.getComponentValidator=ce.getBooleanValidator=ce.getNumberArrayValidator=ce.getFunctionValidator=ce.getStringOrGradientValidator=ce.getStringValidator=ce.getNumberOrAutoValidator=ce.getNumberOrArrayOfNumbersValidator=ce.getNumberValidator=ce.alphaComponent=ce.RGBComponent=void 0;const Zr=be,dt=lt;function en(a){return dt.Util._isString(a)?'"'+a+'"':Object.prototype.toString.call(a)==="[object Number]"||dt.Util._isBoolean(a)?a:Object.prototype.toString.call(a)}function dp(a){return a>255?255:a<0?0:Math.round(a)}ce.RGBComponent=dp;function hp(a){return a>1?1:a<1e-4?1e-4:a}ce.alphaComponent=hp;function fp(){if(Zr.Konva.isUnminified)return function(a,e){return dt.Util._isNumber(a)||dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),a}}ce.getNumberValidator=fp;function gp(a){if(Zr.Konva.isUnminified)return function(e,n){let i=dt.Util._isNumber(e),o=dt.Util._isArray(e)&&e.length==a;return!i&&!o&&dt.Util.warn(en(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+a+")"),e}}ce.getNumberOrArrayOfNumbersValidator=gp;function pp(){if(Zr.Konva.isUnminified)return function(a,e){var n=dt.Util._isNumber(a),i=a==="auto";return n||i||dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),a}}ce.getNumberOrAutoValidator=pp;function vp(){if(Zr.Konva.isUnminified)return function(a,e){return dt.Util._isString(a)||dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),a}}ce.getStringValidator=vp;function mp(){if(Zr.Konva.isUnminified)return function(a,e){const n=dt.Util._isString(a),i=Object.prototype.toString.call(a)==="[object CanvasGradient]"||a&&a.addColorStop;return n||i||dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),a}}ce.getStringOrGradientValidator=mp;function yp(){if(Zr.Konva.isUnminified)return function(a,e){return dt.Util._isFunction(a)||dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),a}}ce.getFunctionValidator=yp;function _p(){if(Zr.Konva.isUnminified)return function(a,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&a instanceof n||(dt.Util._isArray(a)?a.forEach(function(i){dt.Util._isNumber(i)||dt.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),a}}ce.getNumberArrayValidator=_p;function Sp(){if(Zr.Konva.isUnminified)return function(a,e){var n=a===!0||a===!1;return n||dt.Util.warn(en(a)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),a}}ce.getBooleanValidator=Sp;function xp(a){if(Zr.Konva.isUnminified)return function(e,n){return e==null||dt.Util.isObject(e)||dt.Util.warn(en(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+a),e}}ce.getComponentValidator=xp;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const e=lt,n=ce;var i="get",o="set";a.Factory={addGetterSetter(l,c,h,f,p){a.Factory.addGetter(l,c,h),a.Factory.addSetter(l,c,f,p),a.Factory.addOverloadedGetterSetter(l,c)},addGetter(l,c,h){var f=i+e.Util._capitalize(c);l.prototype[f]=l.prototype[f]||function(){var p=this.attrs[c];return p===void 0?h:p}},addSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]||a.Factory.overWriteSetter(l,c,h,f)},overWriteSetter(l,c,h,f){var p=o+e.Util._capitalize(c);l.prototype[p]=function(m){return h&&m!==void 0&&m!==null&&(m=h.call(this,m,c)),this._setAttr(c,m),f&&f.call(this),this}},addComponentsGetterSetter(l,c,h,f,p){var m=h.length,E=e.Util._capitalize,w=i+E(c),_=o+E(c),y,C;l.prototype[w]=function(){var T={};for(y=0;y<m;y++)C=h[y],T[C]=this.getAttr(c+E(C));return T};var P=(0,n.getComponentValidator)(h);l.prototype[_]=function(T){var k=this.attrs[c],v;f&&(T=f.call(this,T)),P&&P.call(this,T,c);for(v in T)T.hasOwnProperty(v)&&this._setAttr(c+E(v),T[v]);return T||h.forEach(x=>{this._setAttr(c+E(x),void 0)}),this._fireChangeEvent(c,k,T),p&&p.call(this),this},a.Factory.addOverloadedGetterSetter(l,c)},addOverloadedGetterSetter(l,c){var h=e.Util._capitalize(c),f=o+h,p=i+h;l.prototype[c]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(l,c,h,f){e.Util.error("Adding deprecated "+c);var p=i+e.Util._capitalize(c),m=c+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[p]=function(){e.Util.error(m);var E=this.attrs[c];return E===void 0?h:E},a.Factory.addSetter(l,c,f,function(){e.Util.error(m)}),a.Factory.addOverloadedGetterSetter(l,c)},backCompat(l,c){e.Util.each(c,function(h,f){var p=l.prototype[f],m=i+e.Util._capitalize(h),E=o+e.Util._capitalize(h);function w(){p.apply(this,arguments),e.Util.error('"'+h+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}l.prototype[h]=w,l.prototype[m]=w,l.prototype[E]=w})},afterSetFilter(){this._filterUpToDate=!1}}})(Oe);var Mr={},Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.HitContext=Qr.SceneContext=Qr.Context=void 0;const Ff=lt,wp=be;function Cp(a){var e=[],n=a.length,i=Ff.Util,o,l;for(o=0;o<n;o++)l=a[o],i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),e.push(l);return e}var m0=",",Ep="(",Pp=")",bp="([",Op="])",Tp=";",kp="()",Rp="=",y0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Mp=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Np=100;class Ps{constructor(e){this.canvas=e,wp.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var i=this.traceArr,o=i.length,l="",c,h,f,p;for(c=0;c<o;c++)h=i[c],f=h.method,f?(p=h.args,l+=f,e?l+=kp:Ff.Util._isArray(p[0])?l+=bp+p.join(m0)+Op:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),l+=Ep+p.join(m0)+Pp)):(l+=h.property,e||(l+=Rp+h.val)),l+=Tp;return l}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,i;n.push(e),i=n.length,i>=Np&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,o,l,c){this._context.arc(e,n,i,o,l,c)}arcTo(e,n,i,o,l){this._context.arcTo(e,n,i,o,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,o,l,c){this._context.bezierCurveTo(e,n,i,o,l,c)}clearRect(e,n,i,o){this._context.clearRect(e,n,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,o){return this._context.createLinearGradient(e,n,i,o)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,o,l,c){return this._context.createRadialGradient(e,n,i,o,l,c)}drawImage(e,n,i,o,l,c,h,f,p){var m=arguments,E=this._context;m.length===3?E.drawImage(e,n,i):m.length===5?E.drawImage(e,n,i,o,l):m.length===9&&E.drawImage(e,n,i,o,l,c,h,f,p)}ellipse(e,n,i,o,l,c,h,f){this._context.ellipse(e,n,i,o,l,c,h,f)}isPointInPath(e,n,i,o){return i?this._context.isPointInPath(i,e,n,o):this._context.isPointInPath(e,n,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,o){this._context.fillRect(e,n,i,o)}strokeRect(e,n,i,o){this._context.strokeRect(e,n,i,o)}fillText(e,n,i,o){o?this._context.fillText(e,n,i,o):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,o){return this._context.getImageData(e,n,i,o)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,o){this._context.rect(e,n,i,o)}roundRect(e,n,i,o,l){this._context.roundRect(e,n,i,o,l)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,o){this._context.quadraticCurveTo(e,n,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,o,l,c){this._context.setTransform(e,n,i,o,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,o){this._context.strokeText(e,n,i,o)}transform(e,n,i,o,l,c){this._context.transform(e,n,i,o,l,c)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=y0.length,i=this.setAttr,o,l,c=function(h){var f=e[h],p;e[h]=function(){return l=Cp(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:h,args:l}),p}};for(o=0;o<n;o++)c(y0[o]);e.setAttr=function(){i.apply(e,arguments);var h=arguments[0],f=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:h,val:f})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}Qr.Context=Ps;Mp.forEach(function(a){Object.defineProperty(Ps.prototype,a,{get(){return this._context[a]},set(e){this._context[a]=e}})});class Ap extends Ps{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):o?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,i.x,i.y);if(o){for(var c=0;c<o.length;c+=2)l.addColorStop(o[c],o[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,o,l=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",c=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,h=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=f.x*p,E=f.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(m),Math.abs(E))),this.setAttr("shadowOffsetX",h.x*m),this.setAttr("shadowOffsetY",h.y*E)}}Qr.SceneContext=Ap;class Fp extends Ps{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const l=e.getStrokeScaleEnabled();if(!l){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),l||this.restore()}}}Qr.HitContext=Fp;Object.defineProperty(Mr,"__esModule",{value:!0});Mr.HitCanvas=Mr.SceneCanvas=Mr.Canvas=void 0;const ys=lt,If=Qr,Lf=be,Ip=Oe,Lp=ce;var ns;function Dp(){if(ns)return ns;var a=ys.Util.createCanvasElement(),e=a.getContext("2d");return ns=function(){var n=Lf.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i}(),ys.Util.releaseCanvas(a),ns}class bs{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},i=n.pixelRatio||Lf.Konva.pixelRatio||Dp();this.pixelRatio=i,this._canvas=ys.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(o){return ys.Util.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Mr.Canvas=bs;Ip.Factory.addGetterSetter(bs,"pixelRatio",void 0,(0,Lp.getNumberValidator)());class Gp extends bs{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new If.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Mr.SceneCanvas=Gp;class $p extends bs{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new If.HitContext(this),this.setSize(e.width,e.height)}}Mr.HitCanvas=$p;var Os={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const e=be,n=lt;a.DD={get isDragging(){var i=!1;return a.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){var i;return a.DD._dragElements.forEach(o=>{i=o.node}),i},_dragElements:new Map,_drag(i){const o=[];a.DD._dragElements.forEach((l,c)=>{const{node:h}=l,f=h.getStage();f.setPointersPositions(i),l.pointerId===void 0&&(l.pointerId=n.Util._getFirstPointerId(i));const p=f._changedPointerPositions.find(w=>w.id===l.pointerId);if(p){if(l.dragStatus!=="dragging"){var m=h.dragDistance(),E=Math.max(Math.abs(p.x-l.startPointerPos.x),Math.abs(p.y-l.startPointerPos.y));if(E<m||(h.startDrag({evt:i}),!h.isDragging()))return}h._setDragPosition(i,l),o.push(h)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:i},!0)})},_endDragBefore(i){const o=[];a.DD._dragElements.forEach(l=>{const{node:c}=l,h=c.getStage();if(i&&h.setPointersPositions(i),!h._changedPointerPositions.find(m=>m.id===l.pointerId))return;(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(a.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,l.dragStatus="stopped");const p=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;p&&o.indexOf(p)===-1&&o.push(p)}),o.forEach(l=>{l.draw()})},_endDragAfter(i){a.DD._dragElements.forEach((o,l)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:i},!0),o.dragStatus!=="dragging"&&a.DD._dragElements.delete(l)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1))})(Os);Object.defineProperty(nt,"__esModule",{value:!0});nt.Node=void 0;const Me=lt,qa=Oe,Fa=Mr,_n=be,yr=Os,pt=ce;var gs="absoluteOpacity",is="allEventListeners",Yr="absoluteTransform",_0="absoluteScale",Xn="canvas",jp="Change",zp="children",Bp="konva",Sc="listening",S0="mouseenter",x0="mouseleave",w0="set",C0="Shape",ps=" ",E0="stage",Sn="transform",Up="Stage",xc="visible",Hp=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ps);let Vp=1;class ye{constructor(e){this._id=Vp++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Sn||e===Yr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var i=this._cache.get(e),o=e===Sn||e===Yr,l=i===void 0||o&&i.dirty===!0;return l&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const o=n.map(l=>l+"Change.konva").join(ps);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(Xn)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Yr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Xn)){const{scene:e,filter:n,hit:i}=this._cache.get(Xn);Me.Util.releaseCanvas(e,n,i),this._cache.delete(Xn)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var o=Math.ceil(n.width||i.width),l=Math.ceil(n.height||i.height),c=n.pixelRatio,h=n.x===void 0?Math.floor(i.x):n.x,f=n.y===void 0?Math.floor(i.y):n.y,p=n.offset||0,m=n.drawBorder||!1,E=n.hitCanvasPixelRatio||1;if(!o||!l){Me.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const w=Math.abs(Math.round(i.x)-h)>.5?1:0,_=Math.abs(Math.round(i.y)-f)>.5?1:0;o+=p*2+w,l+=p*2+_,h-=p,f-=p;var y=new Fa.SceneCanvas({pixelRatio:c,width:o,height:l}),C=new Fa.SceneCanvas({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),P=new Fa.HitCanvas({pixelRatio:E,width:o,height:l}),T=y.getContext(),k=P.getContext();return P.isCache=!0,y.isCache=!0,this._cache.delete(Xn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,C.getContext()._context.imageSmoothingEnabled=!1),T.save(),k.save(),T.translate(-h,-f),k.translate(-h,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(gs),this._clearSelfAndDescendantCache(_0),this.drawScene(y,this),this.drawHit(P,this),this._isUnderCache=!1,T.restore(),k.restore(),m&&(T.save(),T.beginPath(),T.rect(0,0,o,l),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),this._cache.set(Xn,{scene:y,filter:C,hit:P,x:h,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(Xn)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,l=1/0,c=-1/0,h=-1/0,f=this.getAbsoluteTransform(n);return i.forEach(function(p){var m=f.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),{x:o,y:l,width:c-o,height:h-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),i=n.scene,o=n.filter,l=o.getContext(),c,h,f,p;if(e){if(!this._filterUpToDate){var m=i.pixelRatio;o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(c=e.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/m,i.getHeight()/m),h=l.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<c;f++){if(p=e[f],typeof p!="function"){Me.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,h),l.putImageData(h,0,0)}}catch(E){Me.Util.error("Unable to apply filter. "+E.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return i}on(e,n){if(this._cache&&this._cache.delete(is),arguments.length===3)return this._delegate.apply(this,arguments);var i=e.split(ps),o=i.length,l,c,h,f,p;for(l=0;l<o;l++)c=i[l],h=c.split("."),f=h[0],p=h[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:n});return this}off(e,n){var i=(e||"").split(ps),o=i.length,l,c,h,f,p,m;if(this._cache&&this._cache.delete(is),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<o;l++)if(h=i[l],f=h.split("."),p=f[0],m=f[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(c in this.eventListeners)this._off(c,m,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){var o=this;this.on(e,function(l){for(var c=l.target.findAncestors(n,!0,o),h=0;h<c.length;h++)l=Me.Util.cloneObject(l),l.currentTarget=c[h],i.call(c[h],l)})}remove(){return this.isDragging()&&this.stopDrag(),yr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Yr),this._clearSelfAndDescendantCache(gs),this._clearSelfAndDescendantCache(_0),this._clearSelfAndDescendantCache(E0),this._clearSelfAndDescendantCache(xc),this._clearSelfAndDescendantCache(Sc)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Me.Util._capitalize(e);return Me.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,i;if(!e)return this;for(n in e)n!==zp&&(i=w0+Me.Util._capitalize(n),Me.Util._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Sc,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(xc,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),o=!1;yr.DD._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(o=!0)});var l=!n&&!_n.Konva.hitOnDragEnabled&&(o||_n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,i=0,o,l,c,h;function f(m){for(o=[],l=m.length,c=0;c<l;c++)h=m[c],i++,h.nodeType!==C0&&(o=o.concat(h.getChildren().slice())),h._id===n._id&&(c=l);o.length>0&&o[0].getDepth()<=e&&f(o)}const p=this.getStage();return n.nodeType!==Up&&p&&f(p.getChildren()),i}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Sn),this._clearSelfAndDescendantCache(Yr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),l=new Me.Transform,c=this.offset();return l.m=o.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...o}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(Sn);var l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(Sn),this._clearSelfAndDescendantCache(Yr),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,i=e.y,o=this.x(),l=this.y();return n!==void 0&&(o+=n),i!==void 0&&(l+=i),this.setPosition({x:o,y:l}),this}_eachAncestorReverse(e,n){var i=[],o=this.getParent(),l,c;if(!(n&&n._id===this._id)){for(i.unshift(this);o&&(!n||o._id!==n._id);)i.unshift(o),o=o.parent;for(l=i.length,c=0;c<l;c++)e(i[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Me.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Me.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Me.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Me.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Me.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Me.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(gs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,i,o,l,c;const h={attrs:{},className:this.getClassName()};for(n in e)i=e[n],c=Me.Util.isObject(i)&&!Me.Util._isPlainObject(i)&&!Me.Util._isArray(i),!c&&(o=typeof this[n]=="function"&&this[n],delete e[n],l=o?o.call(this):null,e[n]=i,l!==i&&(h.attrs[n]=i));return Me.Util._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){var o=[];n&&this._isMatch(e)&&o.push(this);for(var l=this.parent;l;){if(l===i)return o;l._isMatch(e)&&o.push(l),l=l.parent}return o}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),i=n.length,o,l;for(o=0;o<i;o++)if(l=n[o],Me.Util.isValidSelector(l)||(Me.Util.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Me.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Me.Util.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(E0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Yr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Me.Transform,this._eachAncestorReverse(function(o){var l=o.transformsEnabled();l==="all"?n.multiply(o.getTransform()):l==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),n;n=this._cache.get(Yr)||new Me.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,h=this.attrs.offsetY||0;n.translate(o-c,l-h)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Sn,this._getTransform)}_getTransform(){var e,n,i=this._cache.get(Sn)||new Me.Transform;i.reset();var o=this.x(),l=this.y(),c=_n.Konva.getAngle(this.rotation()),h=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,E=this.attrs.offsetX||0,w=this.attrs.offsetY||0;return(o!==0||l!==0)&&i.translate(o,l),c!==0&&i.rotate(c),(p!==0||m!==0)&&i.skew(p,m),(h!==1||f!==1)&&i.scale(h,f),(E!==0||w!==0)&&i.translate(-1*E,-1*w),i.dirty=!1,i}clone(e){var n=Me.Util.cloneObject(this.attrs),i,o,l,c,h;for(i in e)n[i]=e[i];var f=new this.constructor(n);for(i in this.eventListeners)for(o=this.eventListeners[i],l=o.length,c=0;c<l;c++)h=o[c],h.name.indexOf(Bp)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(h));return f}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(n.x),l=e.y!==void 0?e.y:Math.floor(n.y),c=e.pixelRatio||1,h=new Fa.SceneCanvas({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:c}),f=h.getContext();const p=new Fa.SceneCanvas({width:h.width/h.pixelRatio+Math.abs(o),height:h.height/h.pixelRatio+Math.abs(l),pixelRatio:h.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||l)&&f.translate(-1*o,-1*l),this.drawScene(h,void 0,p),f.restore(),h}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,Me.Util._urlToImage(this.toDataURL(e),function(l){n(l),o?.(l)})}catch(o){i(o)}})}toBlob(e){return new Promise((n,i)=>{try{const o=e?.callback;o&&delete e.callback,this.toCanvas(e).toBlob(l=>{n(l),o?.(l)},e?.mimeType,e?.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():_n.Konva.dragDistance}_off(e,n,i){var o=this.eventListeners[e],l,c,h;for(l=0;l<o.length;l++)if(c=o[l].name,h=o[l].handler,(c!=="konva"||n==="konva")&&(!n||c===n)&&(!i||i===h)){if(o.splice(l,1),o.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,n,i){this._fire(e+jp,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){var n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){var i=this[w0+Me.Util._capitalize(e)];return Me.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(_n.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var i=this.attrs[e];i===n&&!Me.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){var o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,n,i){n&&this.nodeType===C0&&(n.target=this);var o=(e===S0||e===x0)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!o){this._fire(e,n);var l=(e===S0||e===x0)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i,o;const l=(n=this._cache.get(is))!==null&&n!==void 0?n:{};let c=l?.[e];if(c===void 0){c=[];let h=Object.getPrototypeOf(this);for(;h;){const f=(o=(i=h.eventListeners)===null||i===void 0?void 0:i[e])!==null&&o!==void 0?o:[];c.push(...f),h=Object.getPrototypeOf(h)}l[e]=c,this._cache.set(is,l)}return c}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(var o=0;o<i.length;o++)i[o].handler.call(this,n);const l=this.eventListeners[e];if(l)for(var o=0;o<l.length;o++)l[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(i){var l=i._getPointerById(n)||i._changedPointerPositions[0]||o;yr.DD._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-o.x,y:l.y-o.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){yr.DD._dragElements.has(this._id)||this._createDragElement(e);const i=yr.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(i){var o={x:i.x-n.offset.x,y:i.y-n.offset.y},l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,o,e);c?o=c:Me.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const n=yr.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),yr.DD._endDragBefore(e),yr.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=yr.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,i=!n||_n.Konva.dragButtons.indexOf(e.evt.button)>=0;if(i&&!this.isDragging()){var o=!1;yr.DD._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(o=!0)}),o||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=yr.DD._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",o=n&&n.dragStatus==="ready";i?this.stopDrag():o&&yr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Me.Util.haveIntersection(i,this.getClientRect())}static create(e,n){return Me.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var i=ye.prototype.getClassName.call(e),o=e.children,l,c,h;n&&(e.attrs.container=n),_n.Konva[i]||(Me.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const f=_n.Konva[i];if(l=new f(e.attrs),o)for(c=o.length,h=0;h<c;h++)l.add(ye._createNode(o[h]));return l}}nt.Node=ye;ye.prototype.nodeType="Node";ye.prototype._attrsAffectingSize=[];ye.prototype.eventListeners={};ye.prototype.on.call(ye.prototype,Hp,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Sn),this._clearSelfAndDescendantCache(Yr)});ye.prototype.on.call(ye.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(xc)});ye.prototype.on.call(ye.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Sc)});ye.prototype.on.call(ye.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(gs)});const qe=qa.Factory.addGetterSetter;qe(ye,"zIndex");qe(ye,"absolutePosition");qe(ye,"position");qe(ye,"x",0,(0,pt.getNumberValidator)());qe(ye,"y",0,(0,pt.getNumberValidator)());qe(ye,"globalCompositeOperation","source-over",(0,pt.getStringValidator)());qe(ye,"opacity",1,(0,pt.getNumberValidator)());qe(ye,"name","",(0,pt.getStringValidator)());qe(ye,"id","",(0,pt.getStringValidator)());qe(ye,"rotation",0,(0,pt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(ye,"scale",["x","y"]);qe(ye,"scaleX",1,(0,pt.getNumberValidator)());qe(ye,"scaleY",1,(0,pt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(ye,"skew",["x","y"]);qe(ye,"skewX",0,(0,pt.getNumberValidator)());qe(ye,"skewY",0,(0,pt.getNumberValidator)());qa.Factory.addComponentsGetterSetter(ye,"offset",["x","y"]);qe(ye,"offsetX",0,(0,pt.getNumberValidator)());qe(ye,"offsetY",0,(0,pt.getNumberValidator)());qe(ye,"dragDistance",null,(0,pt.getNumberValidator)());qe(ye,"width",0,(0,pt.getNumberValidator)());qe(ye,"height",0,(0,pt.getNumberValidator)());qe(ye,"listening",!0,(0,pt.getBooleanValidator)());qe(ye,"preventDefault",!0,(0,pt.getBooleanValidator)());qe(ye,"filters",null,function(a){return this._filterUpToDate=!1,a});qe(ye,"visible",!0,(0,pt.getBooleanValidator)());qe(ye,"transformsEnabled","all",(0,pt.getStringValidator)());qe(ye,"size");qe(ye,"dragBoundFunc");qe(ye,"draggable",!1,(0,pt.getBooleanValidator)());qa.Factory.backCompat(ye,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Container=void 0;const Wi=Oe,Zu=nt,Ts=ce;class Qn extends Zu.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(o){e(o)&&i.push(o)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var i=[];return this._descendants(o=>{const l=o._isMatch(e);return l&&i.push(o),!!(l&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const o of i){if(n=e(o),n)return!0;if(o.hasChildren()&&(n=o._descendants(e),n))return!0}return!1}toObject(){var e=Zu.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=Zu.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){var o=this.getLayer(),l=e||o&&o.getCanvas(),c=l&&l.getContext(),h=this._getCanvasCache(),f=h&&h.scene,p=l&&l.isCache;if(!this.isVisible()&&!p)return this;if(f){c.save();var m=this.getAbsoluteTransform(n).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),o=e||i&&i.hitCanvas,l=o&&o.getContext(),c=this._getCanvasCache(),h=c&&c.hit;if(h){l.save();var f=this.getAbsoluteTransform(n).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",o,n);return this}_drawChildren(e,n,i,o){var l,c=n&&n.getContext(),h=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),m=typeof h=="number"&&typeof f=="number"||p;const E=i===this;if(m){c.save();var w=this.getAbsoluteTransform(i),_=w.getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),c.beginPath();let T;if(p)T=p.call(this,c,this);else{var y=this.clipX(),C=this.clipY();c.rect(y||0,C||0,h,f)}c.clip.apply(c,T),_=w.copy().invert().getMatrix(),c.transform(_[0],_[1],_[2],_[3],_[4],_[5])}var P=!E&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";P&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(T){T[e](n,i,o)}),P&&c.restore(),m&&c.restore()}getClientRect(e={}){var n,i=e.skipTransform,o=e.relativeTo,l,c,h,f,p={x:1/0,y:1/0,width:0,height:0},m=this;(n=this.children)===null||n===void 0||n.forEach(function(C){if(C.visible()){var P=C.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(l===void 0?(l=P.x,c=P.y,h=P.x+P.width,f=P.y+P.height):(l=Math.min(l,P.x),c=Math.min(c,P.y),h=Math.max(h,P.x+P.width),f=Math.max(f,P.y+P.height)))}});for(var E=this.find("Shape"),w=!1,_=0;_<E.length;_++){var y=E[_];if(y._isVisible(this)){w=!0;break}}return w&&l!==void 0?p={x:l,y:c,width:h-l,height:f-c}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,o)}}Yn.Container=Qn;Wi.Factory.addComponentsGetterSetter(Qn,"clip",["x","y","width","height"]);Wi.Factory.addGetterSetter(Qn,"clipX",void 0,(0,Ts.getNumberValidator)());Wi.Factory.addGetterSetter(Qn,"clipY",void 0,(0,Ts.getNumberValidator)());Wi.Factory.addGetterSetter(Qn,"clipWidth",void 0,(0,Ts.getNumberValidator)());Wi.Factory.addGetterSetter(Qn,"clipHeight",void 0,(0,Ts.getNumberValidator)());Wi.Factory.addGetterSetter(Qn,"clipFunc");var Df={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.releaseCapture=lr.setPointerCapture=lr.hasPointerCapture=lr.createEvent=lr.getCapturedShape=void 0;const Wp=be,Ha=new Map,Gf=Wp.Konva._global.PointerEvent!==void 0;function Xp(a){return Ha.get(a)}lr.getCapturedShape=Xp;function Dc(a){return{evt:a,pointerId:a.pointerId}}lr.createEvent=Dc;function Kp(a,e){return Ha.get(a)===e}lr.hasPointerCapture=Kp;function qp(a,e){$f(a),e.getStage()&&(Ha.set(a,e),Gf&&e._fire("gotpointercapture",Dc(new PointerEvent("gotpointercapture"))))}lr.setPointerCapture=qp;function $f(a,e){const n=Ha.get(a);if(!n)return;const i=n.getStage();i&&i.content,Ha.delete(a),Gf&&n._fire("lostpointercapture",Dc(new PointerEvent("lostpointercapture")))}lr.releaseCapture=$f;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const e=lt,n=Oe,i=Yn,o=be,l=Mr,c=Os,h=be,f=lr;var p="Stage",m="string",E="px",w="mouseout",_="mouseleave",y="mouseover",C="mouseenter",P="mousemove",T="mousedown",k="mouseup",v="pointermove",x="pointerdown",b="pointerup",R="pointercancel",U="lostpointercapture",O="pointerout",$="pointerleave",M="pointerover",D="pointerenter",K="contextmenu",X="touchstart",Z="touchend",q="touchmove",le="touchcancel",de="wheel",me=5,ke=[[C,"_pointerenter"],[T,"_pointerdown"],[P,"_pointermove"],[k,"_pointerup"],[_,"_pointerleave"],[X,"_pointerdown"],[q,"_pointermove"],[Z,"_pointerup"],[le,"_pointercancel"],[y,"_pointerover"],[de,"_wheel"],[K,"_contextmenu"],[x,"_pointerdown"],[v,"_pointermove"],[b,"_pointerup"],[R,"_pointercancel"],[U,"_lostpointercapture"]];const ue={mouse:{[O]:w,[$]:_,[M]:y,[D]:C,[v]:P,[x]:T,[b]:k,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O]:"touchout",[$]:"touchleave",[M]:"touchover",[D]:"touchenter",[v]:q,[x]:X,[b]:Z,[R]:le,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O]:O,[$]:$,[M]:M,[D]:D,[v]:v,[x]:x,[b]:b,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},J=Fe=>Fe.indexOf("pointer")>=0?"pointer":Fe.indexOf("touch")>=0?"touch":"mouse",he=Fe=>{const F=J(Fe);if(F==="pointer")return o.Konva.pointerEventsEnabled&&ue.pointer;if(F==="touch")return ue.touch;if(F==="mouse")return ue.mouse};function Re(Fe={}){return(Fe.clipFunc||Fe.clipWidth||Fe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Fe}const we="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Ye extends i.Container{constructor(F){super(Re(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Re(this.attrs)}),this._checkVisibility()}_validateAdd(F){const V=F.getType()==="Layer",re=F.getType()==="FastLayer";V||re||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===m){if(F.charAt(0)==="."){var V=F.slice(1);F=document.getElementsByClassName(V)[0]}else{var re;F.charAt(0)!=="#"?re=F:re=F.slice(1),F=document.getElementById(re)}if(!F)throw"Can not find container in document with id "+re}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var F=this.children,V=F.length,re;for(re=0;re<V;re++)F[re].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,F)}destroy(){super.destroy();var F=this.content;F&&e.Util._isInDocument(F)&&this.container().removeChild(F);var V=a.stages.indexOf(this);return V>-1&&a.stages.splice(V,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(e.Util.warn(we),null)}_getPointerById(F){return this._pointerPositions.find(V=>V.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();var V=new l.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),re=V.getContext()._context,ge=this.children;return(F.x||F.y)&&re.translate(-1*F.x,-1*F.y),ge.forEach(function(pe){if(pe.isVisible()){var De=pe._toKonvaCanvas(F);re.drawImage(De._canvas,F.x,F.y,De.getWidth()/De.getPixelRatio(),De.getHeight()/De.getPixelRatio())}}),V}getIntersection(F){if(!F)return null;var V=this.children,re=V.length,ge=re-1,pe;for(pe=ge;pe>=0;pe--){const De=V[pe].getIntersection(F);if(De)return De}return null}_resizeDOM(){var F=this.width(),V=this.height();this.content&&(this.content.style.width=F+E,this.content.style.height=V+E),this.bufferCanvas.setSize(F,V),this.bufferHitCanvas.setSize(F,V),this.children.forEach(re=>{re.setSize({width:F,height:V}),re.draw()})}add(F,...V){if(arguments.length>1){for(var re=0;re<arguments.length;re++)this.add(arguments[re]);return this}super.add(F);var ge=this.children.length;return ge>me&&e.Util.warn("The stage has "+ge+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),o.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return f.hasPointerCapture(F,this)}setPointerCapture(F){f.setPointerCapture(F,this)}releaseCapture(F){f.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&ke.forEach(([F,V])=>{this.content.addEventListener(F,re=>{this[V](re)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const V=he(F.type);V&&this._fire(V.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const V=he(F.type);V&&this._fire(V.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let V=this[F+"targetShape"];return V&&!V.getStage()&&(V=null),V}_pointerleave(F){const V=he(F.type),re=J(F.type);if(V){this.setPointersPositions(F);var ge=this._getTargetShape(re),pe=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;ge&&pe?(ge._fireAndBubble(V.pointerout,{evt:F}),ge._fireAndBubble(V.pointerleave,{evt:F}),this._fire(V.pointerleave,{evt:F,target:this,currentTarget:this}),this[re+"targetShape"]=null):pe&&(this._fire(V.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(V.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(F){const V=he(F.type),re=J(F.type);if(V){this.setPointersPositions(F);var ge=!1;this._changedPointerPositions.forEach(pe=>{var De=this.getIntersection(pe);if(c.DD.justDragged=!1,o.Konva["_"+re+"ListenClick"]=!0,!De||!De.isListening())return;o.Konva.capturePointerEventsEnabled&&De.setPointerCapture(pe.id),this[re+"ClickStartShape"]=De,De._fireAndBubble(V.pointerdown,{evt:F,pointerId:pe.id}),ge=!0;const Ne=F.type.indexOf("touch")>=0;De.preventDefault()&&F.cancelable&&Ne&&F.preventDefault()}),ge||this._fire(V.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(F){const V=he(F.type),re=J(F.type);if(!V)return;o.Konva.isDragging()&&c.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F);var ge=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;if(!ge)return;var pe={};let De=!1;var Ne=this._getTargetShape(re);this._changedPointerPositions.forEach(Lt=>{const Ie=f.getCapturedShape(Lt.id)||this.getIntersection(Lt),Rt=Lt.id,Qe={evt:F,pointerId:Rt};var Le=Ne!==Ie;if(Le&&Ne&&(Ne._fireAndBubble(V.pointerout,{...Qe},Ie),Ne._fireAndBubble(V.pointerleave,{...Qe},Ie)),Ie){if(pe[Ie._id])return;pe[Ie._id]=!0}Ie&&Ie.isListening()?(De=!0,Le&&(Ie._fireAndBubble(V.pointerover,{...Qe},Ne),Ie._fireAndBubble(V.pointerenter,{...Qe},Ne),this[re+"targetShape"]=Ie),Ie._fireAndBubble(V.pointermove,{...Qe})):Ne&&(this._fire(V.pointerover,{evt:F,target:this,currentTarget:this,pointerId:Rt}),this[re+"targetShape"]=null)}),De||this._fire(V.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const V=he(F.type),re=J(F.type);if(!V)return;this.setPointersPositions(F);const ge=this[re+"ClickStartShape"],pe=this[re+"ClickEndShape"];var De={};let Ne=!1;this._changedPointerPositions.forEach(Lt=>{const Ie=f.getCapturedShape(Lt.id)||this.getIntersection(Lt);if(Ie){if(Ie.releaseCapture(Lt.id),De[Ie._id])return;De[Ie._id]=!0}const Rt=Lt.id,Qe={evt:F,pointerId:Rt};let Le=!1;o.Konva["_"+re+"InDblClickWindow"]?(Le=!0,clearTimeout(this[re+"DblTimeout"])):c.DD.justDragged||(o.Konva["_"+re+"InDblClickWindow"]=!0,clearTimeout(this[re+"DblTimeout"])),this[re+"DblTimeout"]=setTimeout(function(){o.Konva["_"+re+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),Ie&&Ie.isListening()?(Ne=!0,this[re+"ClickEndShape"]=Ie,Ie._fireAndBubble(V.pointerup,{...Qe}),o.Konva["_"+re+"ListenClick"]&&ge&&ge===Ie&&(Ie._fireAndBubble(V.pointerclick,{...Qe}),Le&&pe&&pe===Ie&&Ie._fireAndBubble(V.pointerdblclick,{...Qe}))):(this[re+"ClickEndShape"]=null,o.Konva["_"+re+"ListenClick"]&&this._fire(V.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:Rt}),Le&&this._fire(V.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:Rt}))}),Ne||this._fire(V.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+re+"ListenClick"]=!1,F.cancelable&&re!=="touch"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);var V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(K,{evt:F}):this._fire(K,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);var V=this.getIntersection(this.getPointerPosition());V&&V.isListening()?V._fireAndBubble(de,{evt:F}):this._fire(de,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const V=f.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());V&&V._fireAndBubble(b,f.createEvent(F)),f.releaseCapture(F.pointerId)}_lostpointercapture(F){f.releaseCapture(F.pointerId)}setPointersPositions(F){var V=this._getContentPosition(),re=null,ge=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,pe=>{this._pointerPositions.push({id:pe.identifier,x:(pe.clientX-V.left)/V.scaleX,y:(pe.clientY-V.top)/V.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,pe=>{this._changedPointerPositions.push({id:pe.identifier,x:(pe.clientX-V.left)/V.scaleX,y:(pe.clientY-V.top)/V.scaleY})})):(re=(F.clientX-V.left)/V.scaleX,ge=(F.clientY-V.top)/V.scaleY,this.pointerPos={x:re,y:ge},this._pointerPositions=[{x:re,y:ge,id:e.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:re,y:ge,id:e.Util._getFirstPointerId(F)}])}_setPointerPosition(F){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!o.Konva.isBrowser){var F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}a.Stage=Ye,Ye.prototype.nodeType=p,(0,h._registerNode)(Ye),n.Factory.addGetterSetter(Ye,"container")})(Df);var Ya={},wt={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const e=be,n=lt,i=Oe,o=nt,l=ce,c=be,h=lr;var f="hasShadow",p="shadowRGBA",m="patternImage",E="linearGradient",w="radialGradient";let _;function y(){return _||(_=n.Util.createCanvasElement().getContext("2d"),_)}a.shapes={};function C($){const M=this.attrs.fillRule;M?$.fill(M):$.fill()}function P($){$.stroke()}function T($){$.fill()}function k($){$.stroke()}function v(){this._clearCache(f)}function x(){this._clearCache(p)}function b(){this._clearCache(m)}function R(){this._clearCache(E)}function U(){this._clearCache(w)}class O extends o.Node{constructor(M){super(M);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in a.shapes)););this.colorKey=D,a.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(m,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var M=y();const D=M.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const K=new n.Transform;K.translate(this.fillPatternX(),this.fillPatternY()),K.rotate(e.Konva.getAngle(this.fillPatternRotation())),K.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),K.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const X=K.getMatrix(),Z=typeof DOMMatrix>"u"?{a:X[0],b:X[1],c:X[2],d:X[3],e:X[4],f:X[5]}:new DOMMatrix(X);D.setTransform(Z)}return D}}_getLinearGradient(){return this._getCache(E,this.__getLinearGradient)}__getLinearGradient(){var M=this.fillLinearGradientColorStops();if(M){for(var D=y(),K=this.fillLinearGradientStartPoint(),X=this.fillLinearGradientEndPoint(),Z=D.createLinearGradient(K.x,K.y,X.x,X.y),q=0;q<M.length;q+=2)Z.addColorStop(M[q],M[q+1]);return Z}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){var M=this.fillRadialGradientColorStops();if(M){for(var D=y(),K=this.fillRadialGradientStartPoint(),X=this.fillRadialGradientEndPoint(),Z=D.createRadialGradient(K.x,K.y,this.fillRadialGradientStartRadius(),X.x,X.y,this.fillRadialGradientEndRadius()),q=0;q<M.length;q+=2)Z.addColorStop(M[q],M[q+1]);return Z}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){var D=this.getStage();if(!D)return!1;const K=D.bufferHitCanvas;return K.getContext().clear(),this.drawHit(K,void 0,!0),K.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const X=M||this.hasFill(),Z=this.hasStroke(),q=this.getAbsoluteOpacity()!==1;if(X&&Z&&q)return!0;const le=this.hasShadow(),de=this.shadowForStrokeEnabled();return!!(X&&Z&&le&&de)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){const D=M.skipTransform,K=M.relativeTo,X=this.getSelfRect(),q=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,le=X.width+q,de=X.height+q,me=!M.skipShadow&&this.hasShadow(),ke=me?this.shadowOffsetX():0,ue=me?this.shadowOffsetY():0,J=le+Math.abs(ke),he=de+Math.abs(ue),Re=me&&this.shadowBlur()||0,we=J+Re*2,Ye=he+Re*2,Fe={width:we,height:Ye,x:-(q/2+Re)+Math.min(ke,0)+X.x,y:-(q/2+Re)+Math.min(ue,0)+X.y};return D?Fe:this._transformedRect(Fe,K)}drawScene(M,D,K){var X=this.getLayer(),Z=M||X.getCanvas(),q=Z.getContext(),le=this._getCanvasCache(),de=this.getSceneFunc(),me=this.hasShadow(),ke,ue,J=Z.isCache,he=D===this;if(!this.isVisible()&&!he)return this;if(le){q.save();var Re=this.getAbsoluteTransform(D).getMatrix();return q.transform(Re[0],Re[1],Re[2],Re[3],Re[4],Re[5]),this._drawCachedSceneCanvas(q),q.restore(),this}if(!de)return this;if(q.save(),this._useBufferCanvas()&&!J){ke=this.getStage();const Fe=K||ke.bufferCanvas;ue=Fe.getContext(),ue.clear(),ue.save(),ue._applyLineJoin(this);var we=this.getAbsoluteTransform(D).getMatrix();ue.transform(we[0],we[1],we[2],we[3],we[4],we[5]),de.call(this,ue,this),ue.restore();var Ye=Fe.pixelRatio;me&&q._applyShadow(this),q._applyOpacity(this),q._applyGlobalCompositeOperation(this),q.drawImage(Fe._canvas,0,0,Fe.width/Ye,Fe.height/Ye)}else{if(q._applyLineJoin(this),!he){var we=this.getAbsoluteTransform(D).getMatrix();q.transform(we[0],we[1],we[2],we[3],we[4],we[5]),q._applyOpacity(this),q._applyGlobalCompositeOperation(this)}me&&q._applyShadow(this),de.call(this,q,this)}return q.restore(),this}drawHit(M,D,K=!1){if(!this.shouldDrawHit(D,K))return this;var X=this.getLayer(),Z=M||X.hitCanvas,q=Z&&Z.getContext(),le=this.hitFunc()||this.sceneFunc(),de=this._getCanvasCache(),me=de&&de.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),me){q.save();var ke=this.getAbsoluteTransform(D).getMatrix();return q.transform(ke[0],ke[1],ke[2],ke[3],ke[4],ke[5]),this._drawCachedHitCanvas(q),q.restore(),this}if(!le)return this;if(q.save(),q._applyLineJoin(this),!(this===D)){var J=this.getAbsoluteTransform(D).getMatrix();q.transform(J[0],J[1],J[2],J[3],J[4],J[5])}return le.call(this,q,this),q.restore(),this}drawHitFromCache(M=0){var D=this._getCanvasCache(),K=this._getCachedSceneCanvas(),X=D.hit,Z=X.getContext(),q=X.getWidth(),le=X.getHeight(),de,me,ke,ue,J,he;Z.clear(),Z.drawImage(K._canvas,0,0,q,le);try{for(de=Z.getImageData(0,0,q,le),me=de.data,ke=me.length,ue=n.Util._hexToRgb(this.colorKey),J=0;J<ke;J+=4)he=me[J+3],he>M?(me[J]=ue.r,me[J+1]=ue.g,me[J+2]=ue.b,me[J+3]=255):me[J+3]=0;Z.putImageData(de,0,0)}catch(Re){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Re.message)}return this}hasPointerCapture(M){return h.hasPointerCapture(M,this)}setPointerCapture(M){h.setPointerCapture(M,this)}releaseCapture(M){h.releaseCapture(M,this)}}a.Shape=O,O.prototype._fillFunc=C,O.prototype._strokeFunc=P,O.prototype._fillFuncHit=T,O.prototype._strokeFuncHit=k,O.prototype._centroid=!1,O.prototype.nodeType="Shape",(0,c._registerNode)(O),O.prototype.eventListeners={},O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",U),i.Factory.addGetterSetter(O,"stroke",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"strokeWidth",2,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(O,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(O,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),i.Factory.addGetterSetter(O,"lineJoin"),i.Factory.addGetterSetter(O,"lineCap"),i.Factory.addGetterSetter(O,"sceneFunc"),i.Factory.addGetterSetter(O,"hitFunc"),i.Factory.addGetterSetter(O,"dash"),i.Factory.addGetterSetter(O,"dashOffset",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowColor",void 0,(0,l.getStringValidator)()),i.Factory.addGetterSetter(O,"shadowBlur",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOpacity",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(O,"shadowOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"shadowOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternImage"),i.Factory.addGetterSetter(O,"fill",void 0,(0,l.getStringOrGradientValidator)()),i.Factory.addGetterSetter(O,"fillPatternX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternY",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(O,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(O,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(O,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(O,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(O,"fillEnabled",!0),i.Factory.addGetterSetter(O,"strokeEnabled",!0),i.Factory.addGetterSetter(O,"shadowEnabled",!0),i.Factory.addGetterSetter(O,"dashEnabled",!0),i.Factory.addGetterSetter(O,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(O,"fillPriority","color"),i.Factory.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(O,"fillPatternScaleX",1,(0,l.getNumberValidator)()),i.Factory.addGetterSetter(O,"fillPatternScaleY",1,(0,l.getNumberValidator)()),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(O,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(O,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(O,"fillPatternRotation",0),i.Factory.addGetterSetter(O,"fillRule",void 0,(0,l.getStringValidator)()),i.Factory.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(wt);Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Layer=void 0;const qr=lt,ec=Yn,Ii=nt,Gc=Oe,P0=Mr,Yp=ce,Qp=wt,Jp=be;var Zp="#",ev="beforeDraw",tv="draw",jf=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],rv=jf.length;let Xi=class extends ec.Container{constructor(e){super(e),this.canvas=new P0.SceneCanvas,this.hitCanvas=new P0.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ii.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=Ii.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ii.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ii.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Ii.Node.prototype.remove.call(this),e&&e.parentNode&&qr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&qr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Ii.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){qr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){qr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,qr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let o=0;o<rv;o++){const l=jf[o],c=this._getIntersection({x:e.x+l.x*n,y:e.y+l.y*n}),h=c.shape;if(h)return h;if(i=!!c.antialiased,!c.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,o=i[3];if(o===255){const l=qr.Util._rgbToHex(i[0],i[1],i[2]),c=Qp.shapes[Zp+l];return c?{shape:c}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,n){var i=this.getLayer(),o=e||i&&i.getCanvas();return this._fire(ev,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),ec.Container.prototype.drawScene.call(this,o,n),this._fire(tv,{node:this}),this}drawHit(e,n){var i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),ec.Container.prototype.drawHit.call(this,o,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){qr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return qr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return qr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ya.Layer=Xi;Xi.prototype.nodeType="Layer";(0,Jp._registerNode)(Xi);Gc.Factory.addGetterSetter(Xi,"imageSmoothingEnabled",!0);Gc.Factory.addGetterSetter(Xi,"clearBeforeDraw",!0);Gc.Factory.addGetterSetter(Xi,"hitGraphEnabled",!0,(0,Yp.getBooleanValidator)());var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.FastLayer=void 0;const nv=lt,iv=Ya,av=be;class $c extends iv.Layer{constructor(e){super(e),this.listening(!1),nv.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ks.FastLayer=$c;$c.prototype.nodeType="FastLayer";(0,av._registerNode)($c);var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Group=void 0;const ov=lt,sv=Yn,lv=be;class jc extends sv.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ov.Util.throw("You may only add groups and shapes to groups.")}}Ki.Group=jc;jc.prototype.nodeType="Group";(0,lv._registerNode)(jc);var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.Animation=void 0;const tc=be,b0=lt,rc=function(){return tc.glob.performance&&tc.glob.performance.now?function(){return tc.glob.performance.now()}:function(){return new Date().getTime()}}();class $r{constructor(e,n){this.id=$r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:rc(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let o=0;o<i;o++)if(n[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=$r.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=rc(),$r._addAnimation(this),this}stop(){return $r._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===n){this.animations.splice(l,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const o=n[i],l=o.layers,c=o.func;o._updateFrameObject(rc());const h=l.length;let f;if(c?f=c.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<h;p++){const m=l[p];m._id!==void 0&&(e[m._id]=m)}}for(let i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=$r;e.animations.length?(e._runFrames(),b0.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,b0.Util.requestAnimFrame(this._animationLoop))}}qi.Animation=$r;$r.animations=[];$r.animIdCounter=0;$r.animRunning=!1;var zf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const e=lt,n=qi,i=nt,o=be;var l={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=1,h=2,f=3,p=0,m=["fill","stroke","shadowColor"];class E{constructor(y,C,P,T,k,v,x){this.prop=y,this.propFunc=C,this.begin=T,this._pos=T,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=k-this.begin,this.pause()}fire(y){var C=this[y];C&&C()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===h?this.setTime(y):this.state===f&&this.setTime(this.duration-y)}pause(){this.state=c,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(y){var C=this,P=y.node,T=P._id,k,v=y.easing||a.Easings.Linear,x=!!y.yoyo,b;typeof y.duration>"u"?k=.3:y.duration===0?k=.001:k=y.duration,this.node=P,this._id=p++;var R=P.getLayer()||(P instanceof o.Konva.Stage?P.getLayers():null);R||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){C.tween.onEnterFrame()},R),this.tween=new E(b,function(U){C._tweenFunc(U)},v,0,1,k*1e3,x),this._addListeners(),w.attrs[T]||(w.attrs[T]={}),w.attrs[T][this._id]||(w.attrs[T][this._id]={}),w.tweens[T]||(w.tweens[T]={});for(b in y)l[b]===void 0&&this._addAttr(b,y[b]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,C){var P=this.node,T=P._id,k,v,x,b,R,U,O,$;if(x=w.tweens[T][y],x&&delete w.attrs[T][x][y],k=P.getAttr(y),e.Util._isArray(C))if(v=[],R=Math.max(C.length,k.length),y==="points"&&C.length!==k.length&&(C.length>k.length?(O=k,k=e.Util._prepareArrayForTween(k,C,P.closed())):(U=C,C=e.Util._prepareArrayForTween(C,k,P.closed()))),y.indexOf("fill")===0)for(b=0;b<R;b++)if(b%2===0)v.push(C[b]-k[b]);else{var M=e.Util.colorToRGBA(k[b]);$=e.Util.colorToRGBA(C[b]),k[b]=M,v.push({r:$.r-M.r,g:$.g-M.g,b:$.b-M.b,a:$.a-M.a})}else for(b=0;b<R;b++)v.push(C[b]-k[b]);else m.indexOf(y)!==-1?(k=e.Util.colorToRGBA(k),$=e.Util.colorToRGBA(C),v={r:$.r-k.r,g:$.g-k.g,b:$.b-k.b,a:$.a-k.a}):v=C-k;w.attrs[T][this._id][y]={start:k,diff:v,end:C,trueEnd:U,trueStart:O},w.tweens[T][y]=this._id}_tweenFunc(y){var C=this.node,P=w.attrs[C._id][this._id],T,k,v,x,b,R,U,O;for(T in P){if(k=P[T],v=k.start,x=k.diff,O=k.end,e.Util._isArray(v))if(b=[],U=Math.max(v.length,O.length),T.indexOf("fill")===0)for(R=0;R<U;R++)R%2===0?b.push((v[R]||0)+x[R]*y):b.push("rgba("+Math.round(v[R].r+x[R].r*y)+","+Math.round(v[R].g+x[R].g*y)+","+Math.round(v[R].b+x[R].b*y)+","+(v[R].a+x[R].a*y)+")");else for(R=0;R<U;R++)b.push((v[R]||0)+x[R]*y);else m.indexOf(T)!==-1?b="rgba("+Math.round(v.r+x.r*y)+","+Math.round(v.g+x.g*y)+","+Math.round(v.b+x.b*y)+","+(v.a+x.a*y)+")":b=v+x*y;C.setAttr(T,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,C=w.attrs[y._id][this._id];C.points&&C.points.trueEnd&&y.setAttr("points",C.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,C=w.attrs[y._id][this._id];C.points&&C.points.trueStart&&y.points(C.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,C=this._id,P=w.tweens[y],T;this.pause();for(T in P)delete w.tweens[y][T];delete w.attrs[y][C]}}a.Tween=w,w.attrs={},w.tweens={},i.Node.prototype.to=function(_){var y=_.onFinish;_.node=this,_.onFinish=function(){this.destroy(),y&&y()};var C=new w(_);C.play()},a.Easings={BackEaseIn(_,y,C,P){var T=1.70158;return C*(_/=P)*_*((T+1)*_-T)+y},BackEaseOut(_,y,C,P){var T=1.70158;return C*((_=_/P-1)*_*((T+1)*_+T)+1)+y},BackEaseInOut(_,y,C,P){var T=1.70158;return(_/=P/2)<1?C/2*(_*_*(((T*=1.525)+1)*_-T))+y:C/2*((_-=2)*_*(((T*=1.525)+1)*_+T)+2)+y},ElasticEaseIn(_,y,C,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+C:(k||(k=P*.3),!T||T<Math.abs(C)?(T=C,v=k/4):v=k/(2*Math.PI)*Math.asin(C/T),-(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y)},ElasticEaseOut(_,y,C,P,T,k){var v=0;return _===0?y:(_/=P)===1?y+C:(k||(k=P*.3),!T||T<Math.abs(C)?(T=C,v=k/4):v=k/(2*Math.PI)*Math.asin(C/T),T*Math.pow(2,-10*_)*Math.sin((_*P-v)*(2*Math.PI)/k)+C+y)},ElasticEaseInOut(_,y,C,P,T,k){var v=0;return _===0?y:(_/=P/2)===2?y+C:(k||(k=P*(.3*1.5)),!T||T<Math.abs(C)?(T=C,v=k/4):v=k/(2*Math.PI)*Math.asin(C/T),_<1?-.5*(T*Math.pow(2,10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k))+y:T*Math.pow(2,-10*(_-=1))*Math.sin((_*P-v)*(2*Math.PI)/k)*.5+C+y)},BounceEaseOut(_,y,C,P){return(_/=P)<1/2.75?C*(7.5625*_*_)+y:_<2/2.75?C*(7.5625*(_-=1.5/2.75)*_+.75)+y:_<2.5/2.75?C*(7.5625*(_-=2.25/2.75)*_+.9375)+y:C*(7.5625*(_-=2.625/2.75)*_+.984375)+y},BounceEaseIn(_,y,C,P){return C-a.Easings.BounceEaseOut(P-_,0,C,P)+y},BounceEaseInOut(_,y,C,P){return _<P/2?a.Easings.BounceEaseIn(_*2,0,C,P)*.5+y:a.Easings.BounceEaseOut(_*2-P,0,C,P)*.5+C*.5+y},EaseIn(_,y,C,P){return C*(_/=P)*_+y},EaseOut(_,y,C,P){return-C*(_/=P)*(_-2)+y},EaseInOut(_,y,C,P){return(_/=P/2)<1?C/2*_*_+y:-C/2*(--_*(_-2)-1)+y},StrongEaseIn(_,y,C,P){return C*(_/=P)*_*_*_*_+y},StrongEaseOut(_,y,C,P){return C*((_=_/P-1)*_*_*_*_+1)+y},StrongEaseInOut(_,y,C,P){return(_/=P/2)<1?C/2*_*_*_*_*_+y:C/2*((_-=2)*_*_*_*_+2)+y},Linear(_,y,C,P){return C*_/P+y}}})(zf);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const e=be,n=lt,i=nt,o=Yn,l=Df,c=Ya,h=ks,f=Ki,p=Os,m=wt,E=qi,w=zf,_=Qr,y=Mr;a.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:o.Container,Stage:l.Stage,stages:l.stages,Layer:c.Layer,FastLayer:h.FastLayer,Group:f.Group,DD:p.DD,Shape:m.Shape,shapes:m.shapes,Animation:E.Animation,Tween:w.Tween,Easings:w.Easings,Context:_.Context,Canvas:y.Canvas}),a.default=a.Konva})(ms);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Arc=void 0;const Ms=Oe,uv=wt,O0=be,Ns=ce,cv=be;class tn extends uv.Shape{_sceneFunc(e){var n=O0.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),o=O0.Konva.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(o,Math.PI)),c=1,h=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),f=Math.sin(Math.min(o,Math.PI/2)),p=l*(l>0?e:n),m=c*n,E=h*(h>0?e:n),w=f*(f>0?n:e);return{x:p,y:i?-1*w:E,width:m-p,height:w-E}}}Rs.Arc=tn;tn.prototype._centroid=!0;tn.prototype.className="Arc";tn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,cv._registerNode)(tn);Ms.Factory.addGetterSetter(tn,"innerRadius",0,(0,Ns.getNumberValidator)());Ms.Factory.addGetterSetter(tn,"outerRadius",0,(0,Ns.getNumberValidator)());Ms.Factory.addGetterSetter(tn,"angle",0,(0,Ns.getNumberValidator)());Ms.Factory.addGetterSetter(tn,"clockwise",!1,(0,Ns.getBooleanValidator)());var As={},Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.Line=void 0;const Fs=Oe,dv=wt,Bf=ce,hv=be;function wc(a,e,n,i,o,l,c){var h=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-e,2)),f=Math.sqrt(Math.pow(o-n,2)+Math.pow(l-i,2)),p=c*h/(h+f),m=c*f/(h+f),E=n-p*(o-a),w=i-p*(l-e),_=n+m*(o-a),y=i+m*(l-e);return[E,w,_,y]}function T0(a,e){var n=a.length,i=[],o,l;for(o=2;o<n-2;o+=2)l=wc(a[o-2],a[o-1],a[o],a[o+1],a[o+2],a[o+3],e),!isNaN(l[0])&&(i.push(l[0]),i.push(l[1]),i.push(a[o]),i.push(a[o+1]),i.push(l[2]),i.push(l[3]));return i}class En extends dv.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),i=n.length,o=this.tension(),l=this.closed(),c=this.bezier(),h,f,p;if(i){if(e.beginPath(),e.moveTo(n[0],n[1]),o!==0&&i>4){for(h=this.getTensionPoints(),f=h.length,p=l?0:4,l||e.quadraticCurveTo(h[0],h[1],h[2],h[3]);p<f-2;)e.bezierCurveTo(h[p++],h[p++],h[p++],h[p++],h[p++],h[p++]);l||e.quadraticCurveTo(h[f-2],h[f-1],n[i-2],n[i-1])}else if(c)for(p=2;p<i;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<i;p+=2)e.lineTo(n[p],n[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():T0(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,i=this.tension(),o=wc(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),l=wc(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),c=T0(e,i),h=[o[2],o[3]].concat(c).concat([l[0],l[1],e[n-2],e[n-1],l[2],l[3],o[0],o[1],e[0],e[1]]);return h}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);return{x:n,y:o,width:i-n,height:l-o}}}Qa.Line=En;En.prototype.className="Line";En.prototype._attrsAffectingSize=["points","bezier","tension"];(0,hv._registerNode)(En);Fs.Factory.addGetterSetter(En,"closed",!1);Fs.Factory.addGetterSetter(En,"bezier",!1);Fs.Factory.addGetterSetter(En,"tension",0,(0,Bf.getNumberValidator)());Fs.Factory.addGetterSetter(En,"points",[],(0,Bf.getNumberArrayValidator)());var Yi={},Uf={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(c,h,f)=>{let p,m,E;p=f/2,m=0;for(let _=0;_<20;_++)E=p*a.tValues[20][_]+p,m+=a.cValues[20][_]*i(c,h,E);return p*m};a.getCubicArcLength=e;const n=(c,h,f)=>{f===void 0&&(f=1);const p=c[0]-2*c[1]+c[2],m=h[0]-2*h[1]+h[2],E=2*c[1]-2*c[0],w=2*h[1]-2*h[0],_=4*(p*p+m*m),y=4*(p*E+m*w),C=E*E+w*w;if(_===0)return f*Math.sqrt(Math.pow(c[2]-c[0],2)+Math.pow(h[2]-h[0],2));const P=y/(2*_),T=C/_,k=f+P,v=T-P*P,x=k*k+v>0?Math.sqrt(k*k+v):0,b=P*P+v>0?Math.sqrt(P*P+v):0,R=P+Math.sqrt(P*P+v)!==0?v*Math.log(Math.abs((k+x)/(P+b))):0;return Math.sqrt(_)/2*(k*x-P*b+R)};a.getQuadraticArcLength=n;function i(c,h,f){const p=o(1,f,c),m=o(1,f,h),E=p*p+m*m;return Math.sqrt(E)}const o=(c,h,f)=>{const p=f.length-1;let m,E;if(p===0)return 0;if(c===0){E=0;for(let w=0;w<=p;w++)E+=a.binomialCoefficients[p][w]*Math.pow(1-h,p-w)*Math.pow(h,w)*f[w];return E}else{m=new Array(p);for(let w=0;w<p;w++)m[w]=p*(f[w+1]-f[w]);return o(c-1,h,m)}},l=(c,h,f)=>{let p=1,m=c/h,E=(c-f(m))/h,w=0;for(;p>.001;){const _=f(m+E),y=Math.abs(c-_)/h;if(y<p)p=y,m+=E;else{const C=f(m-E),P=Math.abs(c-C)/h;P<p?(p=P,m-=E):E/=2}if(w++,w>500)break}return m};a.t2length=l})(Uf);Object.defineProperty(Yi,"__esModule",{value:!0});Yi.Path=void 0;const fv=Oe,gv=wt,pv=be,Li=Uf;class xt extends gv.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=xt.parsePathData(this.data()),this.pathLength=xt.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var i=!1,o=0;o<n.length;o++){var l=n[o].command,c=n[o].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":var h=c[0],f=c[1],p=c[2],m=c[3],E=c[4],w=c[5],_=c[6],y=c[7],C=p>m?p:m,P=p>m?1:p/m,T=p>m?m/p:1;e.translate(h,f),e.rotate(_),e.scale(P,T),e.arc(0,0,C,E,E+w,1-y),e.scale(1/P,1/T),e.rotate(-_),e.translate(-h,-f);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var m=p.points[4],E=p.points[5],w=p.points[4]+E,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),E<0)for(let y=m-_;y>w;y-=_){const C=xt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(C.x,C.y)}else for(let y=m+_;y<w;y+=_){const C=xt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(C.x,C.y)}}else if(p.command==="C")for(let y=0;y<=1;y+=.01){const C=xt.getPointOnCubicBezier(y,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(C.x,C.y)}else e=e.concat(p.points)});for(var n=e[0],i=e[0],o=e[1],l=e[1],c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],isNaN(c)||(n=Math.min(n,c),i=Math.max(i,c)),isNaN(h)||(o=Math.min(o,h),l=Math.max(l,h));return{x:n,y:o,width:i-n,height:l-o}}getLength(){return this.pathLength}getPointAtLength(e){return xt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,o){return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n))}static getPathLength(e){let n=0;for(var i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var i,o=0,l=n.length;if(!l)return null;for(;o<l&&e>n[o].pathLength;)e-=n[o].pathLength,++o;if(o===l)return i=n[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=n[o].points.slice(0,2),{x:i[0],y:i[1]};var c=n[o],h=c.points;switch(c.command){case"L":return xt.getPointOnLine(e,c.start.x,c.start.y,h[0],h[1]);case"C":return xt.getPointOnCubicBezier((0,Li.t2length)(e,xt.getPathLength(n),C=>(0,Li.getCubicArcLength)([c.start.x,h[0],h[2],h[4]],[c.start.y,h[1],h[3],h[5]],C)),c.start.x,c.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return xt.getPointOnQuadraticBezier((0,Li.t2length)(e,xt.getPathLength(n),C=>(0,Li.getQuadraticArcLength)([c.start.x,h[0],h[2]],[c.start.y,h[1],h[3]],C)),c.start.x,c.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],p=h[1],m=h[2],E=h[3],w=h[4],_=h[5],y=h[6];return w+=_*e/c.pathLength,xt.getPointOnEllipticalArc(f,p,m,E,w,y)}return null}static getPointOnLine(e,n,i,o,l,c,h){c===void 0&&(c=n),h===void 0&&(h=i);var f=(l-i)/(o-n+1e-8),p=Math.sqrt(e*e/(1+f*f));o<n&&(p*=-1);var m=f*p,E;if(o===n)E={x:c,y:h+m};else if((h-i)/(c-n+1e-8)===f)E={x:c+p,y:h+m};else{var w,_,y=this.getLineLength(n,i,o,l),C=(c-n)*(o-n)+(h-i)*(l-i);C=C/(y*y),w=n+C*(o-n),_=i+C*(l-i);var P=this.getLineLength(c,h,w,_),T=Math.sqrt(e*e-P*P);p=Math.sqrt(T*T/(1+f*f)),o<n&&(p*=-1),m=f*p,E={x:w+p,y:_+m}}return E}static getPointOnCubicBezier(e,n,i,o,l,c,h,f,p){function m(P){return P*P*P}function E(P){return 3*P*P*(1-P)}function w(P){return 3*P*(1-P)*(1-P)}function _(P){return(1-P)*(1-P)*(1-P)}var y=f*m(e)+c*E(e)+o*w(e)+n*_(e),C=p*m(e)+h*E(e)+l*w(e)+i*_(e);return{x:y,y:C}}static getPointOnQuadraticBezier(e,n,i,o,l,c,h){function f(_){return _*_}function p(_){return 2*_*(1-_)}function m(_){return(1-_)*(1-_)}var E=c*f(e)+o*p(e)+n*m(e),w=h*f(e)+l*p(e)+i*m(e);return{x:E,y:w}}static getPointOnEllipticalArc(e,n,i,o,l,c){var h=Math.cos(c),f=Math.sin(c),p={x:i*Math.cos(l),y:o*Math.sin(l)};return{x:e+(p.x*h-p.y*f),y:n+(p.x*f+p.y*h)}}static parsePathData(e){if(!e)return[];var n=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var o=0;o<i.length;o++)n=n.replace(new RegExp(i[o],"g"),"|"+i[o]);var l=n.split("|"),c=[],h=[],f=0,p=0,m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,E;for(o=1;o<l.length;o++){var w=l[o],_=w.charAt(0);for(w=w.slice(1),h.length=0;E=m.exec(w);)h.push(E[0]);for(var y=[],C=0,P=h.length;C<P;C++){if(h[C]==="00"){y.push(0,0);continue}var T=parseFloat(h[C]);isNaN(T)?y.push(0):y.push(T)}for(;y.length>0&&!isNaN(y[0]);){var k="",v=[],x=f,b=p,R,U,O,$,M,D,K,X,Z,q;switch(_){case"l":f+=y.shift(),p+=y.shift(),k="L",v.push(f,p);break;case"L":f=y.shift(),p=y.shift(),v.push(f,p);break;case"m":var le=y.shift(),de=y.shift();if(f+=le,p+=de,k="M",c.length>2&&c[c.length-1].command==="z"){for(var me=c.length-2;me>=0;me--)if(c[me].command==="M"){f=c[me].points[0]+le,p=c[me].points[1]+de;break}}v.push(f,p),_="l";break;case"M":f=y.shift(),p=y.shift(),k="M",v.push(f,p),_="L";break;case"h":f+=y.shift(),k="L",v.push(f,p);break;case"H":f=y.shift(),k="L",v.push(f,p);break;case"v":p+=y.shift(),k="L",v.push(f,p);break;case"V":p=y.shift(),k="L",v.push(f,p);break;case"C":v.push(y.shift(),y.shift(),y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"c":v.push(f+y.shift(),p+y.shift(),f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"S":U=f,O=p,R=c[c.length-1],R.command==="C"&&(U=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(U,O,y.shift(),y.shift()),f=y.shift(),p=y.shift(),k="C",v.push(f,p);break;case"s":U=f,O=p,R=c[c.length-1],R.command==="C"&&(U=f+(f-R.points[2]),O=p+(p-R.points[3])),v.push(U,O,f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="C",v.push(f,p);break;case"Q":v.push(y.shift(),y.shift()),f=y.shift(),p=y.shift(),v.push(f,p);break;case"q":v.push(f+y.shift(),p+y.shift()),f+=y.shift(),p+=y.shift(),k="Q",v.push(f,p);break;case"T":U=f,O=p,R=c[c.length-1],R.command==="Q"&&(U=f+(f-R.points[0]),O=p+(p-R.points[1])),f=y.shift(),p=y.shift(),k="Q",v.push(U,O,f,p);break;case"t":U=f,O=p,R=c[c.length-1],R.command==="Q"&&(U=f+(f-R.points[0]),O=p+(p-R.points[1])),f+=y.shift(),p+=y.shift(),k="Q",v.push(U,O,f,p);break;case"A":$=y.shift(),M=y.shift(),D=y.shift(),K=y.shift(),X=y.shift(),Z=f,q=p,f=y.shift(),p=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,q,f,p,K,X,$,M,D);break;case"a":$=y.shift(),M=y.shift(),D=y.shift(),K=y.shift(),X=y.shift(),Z=f,q=p,f+=y.shift(),p+=y.shift(),k="A",v=this.convertEndpointToCenterParameterization(Z,q,f,p,K,X,$,M,D);break}c.push({command:k||_,points:v,start:{x,y:b},pathLength:this.calcLength(x,b,k||_,v)})}(_==="z"||_==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(e,n,i,o){var l,c,h,f,p=xt;switch(i){case"L":return p.getLineLength(e,n,o[0],o[1]);case"C":return(0,Li.getCubicArcLength)([e,o[0],o[2],o[4]],[n,o[1],o[3],o[5]],1);case"Q":return(0,Li.getQuadraticArcLength)([e,o[0],o[2]],[n,o[1],o[3]],1);case"A":l=0;var m=o[4],E=o[5],w=o[4]+E,_=Math.PI/180;if(Math.abs(m-w)<_&&(_=Math.abs(m-w)),c=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],m,0),E<0)for(f=m-_;f>w;f-=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;else for(f=m+_;f<w;f+=_)h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),c=h;return h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],w,0),l+=p.getLineLength(c.x,c.y,h.x,h.y),l}return 0}static convertEndpointToCenterParameterization(e,n,i,o,l,c,h,f,p){var m=p*(Math.PI/180),E=Math.cos(m)*(e-i)/2+Math.sin(m)*(n-o)/2,w=-1*Math.sin(m)*(e-i)/2+Math.cos(m)*(n-o)/2,_=E*E/(h*h)+w*w/(f*f);_>1&&(h*=Math.sqrt(_),f*=Math.sqrt(_));var y=Math.sqrt((h*h*(f*f)-h*h*(w*w)-f*f*(E*E))/(h*h*(w*w)+f*f*(E*E)));l===c&&(y*=-1),isNaN(y)&&(y=0);var C=y*h*w/f,P=y*-f*E/h,T=(e+i)/2+Math.cos(m)*C-Math.sin(m)*P,k=(n+o)/2+Math.sin(m)*C+Math.cos(m)*P,v=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},x=function(M,D){return(M[0]*D[0]+M[1]*D[1])/(v(M)*v(D))},b=function(M,D){return(M[0]*D[1]<M[1]*D[0]?-1:1)*Math.acos(x(M,D))},R=b([1,0],[(E-C)/h,(w-P)/f]),U=[(E-C)/h,(w-P)/f],O=[(-1*E-C)/h,(-1*w-P)/f],$=b(U,O);return x(U,O)<=-1&&($=Math.PI),x(U,O)>=1&&($=0),c===0&&$>0&&($=$-2*Math.PI),c===1&&$<0&&($=$+2*Math.PI),[T,k,h,f,R,$,m,c]}}Yi.Path=xt;xt.prototype.className="Path";xt.prototype._attrsAffectingSize=["data"];(0,pv._registerNode)(xt);fv.Factory.addGetterSetter(xt,"data");Object.defineProperty(As,"__esModule",{value:!0});As.Arrow=void 0;const Is=Oe,vv=Qa,Hf=ce,mv=be,k0=Yi;class Jn extends vv.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,i=this.points(),o=i,l=this.tension()!==0&&i.length>4;l&&(o=this.getTensionPoints());var c=this.pointerLength(),h=i.length,f,p;if(l){const w=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[h-2],i[h-1]],_=k0.Path.calcLength(o[o.length-4],o[o.length-3],"C",w),y=k0.Path.getPointOnQuadraticBezier(Math.min(1,1-c/_),w[0],w[1],w[2],w[3],w[4],w[5]);f=i[h-2]-y.x,p=i[h-1]-y.y}else f=i[h-2]-i[h-4],p=i[h-1]-i[h-3];var m=(Math.atan2(p,f)+n)%n,E=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[h-2],i[h-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-c,E/2),e.lineTo(-c,-E/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),l?(f=(o[0]+o[2])/2-i[0],p=(o[1]+o[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-f)+n)%n),e.moveTo(0,0),e.lineTo(-c,E/2),e.lineTo(-c,-E/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}As.Arrow=Jn;Jn.prototype.className="Arrow";(0,mv._registerNode)(Jn);Is.Factory.addGetterSetter(Jn,"pointerLength",10,(0,Hf.getNumberValidator)());Is.Factory.addGetterSetter(Jn,"pointerWidth",10,(0,Hf.getNumberValidator)());Is.Factory.addGetterSetter(Jn,"pointerAtBeginning",!1);Is.Factory.addGetterSetter(Jn,"pointerAtEnding",!0);var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.Circle=void 0;const yv=Oe,_v=wt,Sv=ce,xv=be;class Qi extends _v.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Ls.Circle=Qi;Qi.prototype._centroid=!0;Qi.prototype.className="Circle";Qi.prototype._attrsAffectingSize=["radius"];(0,xv._registerNode)(Qi);yv.Factory.addGetterSetter(Qi,"radius",0,(0,Sv.getNumberValidator)());var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Ellipse=void 0;const zc=Oe,wv=wt,Vf=ce,Cv=be;class Pn extends wv.Shape{_sceneFunc(e){var n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ds.Ellipse=Pn;Pn.prototype.className="Ellipse";Pn.prototype._centroid=!0;Pn.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Cv._registerNode)(Pn);zc.Factory.addComponentsGetterSetter(Pn,"radius",["x","y"]);zc.Factory.addGetterSetter(Pn,"radiusX",0,(0,Vf.getNumberValidator)());zc.Factory.addGetterSetter(Pn,"radiusY",0,(0,Vf.getNumberValidator)());var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Image=void 0;const nc=lt,Zn=Oe,Ev=wt,Pv=be,Ja=ce;let zr=class Wf extends Ev.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),l=this.attrs.image;let c;if(l){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?c=[l,this.cropX(),this.cropY(),h,f,0,0,n,i]:c=[l,0,0,n,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?nc.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),l&&(o&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){var n=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?nc.Util.drawRoundedRectPath(e,n,i,o):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,i=null){var o=nc.Util.createImageElement();o.onload=function(){var l=new Wf({image:o});n(l)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}};Gs.Image=zr;zr.prototype.className="Image";(0,Pv._registerNode)(zr);Zn.Factory.addGetterSetter(zr,"cornerRadius",0,(0,Ja.getNumberOrArrayOfNumbersValidator)(4));Zn.Factory.addGetterSetter(zr,"image");Zn.Factory.addComponentsGetterSetter(zr,"crop",["x","y","width","height"]);Zn.Factory.addGetterSetter(zr,"cropX",0,(0,Ja.getNumberValidator)());Zn.Factory.addGetterSetter(zr,"cropY",0,(0,Ja.getNumberValidator)());Zn.Factory.addGetterSetter(zr,"cropWidth",0,(0,Ja.getNumberValidator)());Zn.Factory.addGetterSetter(zr,"cropHeight",0,(0,Ja.getNumberValidator)());var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Tag=Bi.Label=void 0;const $s=Oe,bv=wt,Ov=Ki,Bc=ce,Xf=be;var Kf=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Tv="Change.konva",kv="none",Cc="up",Ec="right",Pc="down",bc="left",Rv=Kf.length;class Uc extends Ov.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,i,o=function(){n._sync()};for(i=0;i<Rv;i++)e.on(Kf[i]+Tv,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),i,o,l,c,h,f,p;if(e&&n){switch(i=e.width(),o=e.height(),l=n.pointerDirection(),c=n.pointerWidth(),p=n.pointerHeight(),h=0,f=0,l){case Cc:h=i/2,f=-1*p;break;case Ec:h=i+c,f=o/2;break;case Pc:h=i/2,f=o+p;break;case bc:h=-1*c,f=o/2;break}n.setAttrs({x:-1*h,y:-1*f,width:i,height:o}),e.setAttrs({x:-1*h,y:-1*f})}}}Bi.Label=Uc;Uc.prototype.className="Label";(0,Xf._registerNode)(Uc);class ei extends bv.Shape{_sceneFunc(e){var n=this.width(),i=this.height(),o=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),h=this.cornerRadius();let f=0,p=0,m=0,E=0;typeof h=="number"?f=p=m=E=Math.min(h,n/2,i/2):(f=Math.min(h[0]||0,n/2,i/2),p=Math.min(h[1]||0,n/2,i/2),E=Math.min(h[2]||0,n/2,i/2),m=Math.min(h[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(f,0),o===Cc&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*c),e.lineTo((n+l)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),o===Ec&&(e.lineTo(n,(i-c)/2),e.lineTo(n+l,i/2),e.lineTo(n,(i+c)/2)),e.lineTo(n,i-E),e.arc(n-E,i-E,E,0,Math.PI/2,!1),o===Pc&&(e.lineTo((n+l)/2,i),e.lineTo(n/2,i+c),e.lineTo((n-l)/2,i)),e.lineTo(m,i),e.arc(m,i-m,m,Math.PI/2,Math.PI,!1),o===bc&&(e.lineTo(0,(i+c)/2),e.lineTo(-1*l,i/2),e.lineTo(0,(i-c)/2)),e.lineTo(0,f),e.arc(f,f,f,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,i=this.pointerWidth(),o=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),h=this.height();return l===Cc?(n-=o,h+=o):l===Pc?h+=o:l===bc?(e-=i*1.5,c+=i):l===Ec&&(c+=i*1.5),{x:e,y:n,width:c,height:h}}}Bi.Tag=ei;ei.prototype.className="Tag";(0,Xf._registerNode)(ei);$s.Factory.addGetterSetter(ei,"pointerDirection",kv);$s.Factory.addGetterSetter(ei,"pointerWidth",0,(0,Bc.getNumberValidator)());$s.Factory.addGetterSetter(ei,"pointerHeight",0,(0,Bc.getNumberValidator)());$s.Factory.addGetterSetter(ei,"cornerRadius",0,(0,Bc.getNumberOrArrayOfNumbersValidator)(4));var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.Rect=void 0;const Mv=Oe,Nv=wt,Av=be,Fv=lt,Iv=ce;let js=class extends Nv.Shape{_sceneFunc(e){var n=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),n?Fv.Util.drawRoundedRectPath(e,i,o,n):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};Za.Rect=js;js.prototype.className="Rect";(0,Av._registerNode)(js);Mv.Factory.addGetterSetter(js,"cornerRadius",0,(0,Iv.getNumberOrArrayOfNumbersValidator)(4));var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.RegularPolygon=void 0;const qf=Oe,Lv=wt,Yf=ce,Dv=be;class ti extends Lv.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var o=0;o<e;o++)i.push({x:n*Math.sin(o*2*Math.PI/e),y:-1*n*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();var n=e[0].x,i=e[0].y,o=e[0].x,l=e[0].y;return e.forEach(c=>{n=Math.min(n,c.x),i=Math.max(i,c.x),o=Math.min(o,c.y),l=Math.max(l,c.y)}),{x:n,y:o,width:i-n,height:l-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}zs.RegularPolygon=ti;ti.prototype.className="RegularPolygon";ti.prototype._centroid=!0;ti.prototype._attrsAffectingSize=["radius"];(0,Dv._registerNode)(ti);qf.Factory.addGetterSetter(ti,"radius",0,(0,Yf.getNumberValidator)());qf.Factory.addGetterSetter(ti,"sides",0,(0,Yf.getNumberValidator)());var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Ring=void 0;const Qf=Oe,Gv=wt,Jf=ce,$v=be;var R0=Math.PI*2;class ri extends Gv.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,R0,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),R0,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Bs.Ring=ri;ri.prototype.className="Ring";ri.prototype._centroid=!0;ri.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,$v._registerNode)(ri);Qf.Factory.addGetterSetter(ri,"innerRadius",0,(0,Jf.getNumberValidator)());Qf.Factory.addGetterSetter(ri,"outerRadius",0,(0,Jf.getNumberValidator)());var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Sprite=void 0;const ni=Oe,jv=wt,zv=qi,Zf=ce,Bv=be;class Br extends jv.Shape{constructor(e){super(e),this._updated=!0,this.anim=new zv.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+0],f=l[o+1],p=l[o+2],m=l[o+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,m),e.closePath(),e.fillStrokeShape(this)),E)if(c){var w=c[n],_=i*2;e.drawImage(E,h,f,p,m,w[_+0],w[_+1],p,m)}else e.drawImage(E,h,f,p,m,0,0,p,m)}_hitFunc(e){var n=this.animation(),i=this.frameIndex(),o=i*4,l=this.animations()[n],c=this.frameOffsets(),h=l[o+2],f=l[o+3];if(e.beginPath(),c){var p=c[n],m=i*2;e.rect(p[m+0],p[m+1],h,f)}else e.rect(0,0,h,f);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),i=this.animations(),o=i[n],l=o.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}Us.Sprite=Br;Br.prototype.className="Sprite";(0,Bv._registerNode)(Br);ni.Factory.addGetterSetter(Br,"animation");ni.Factory.addGetterSetter(Br,"animations");ni.Factory.addGetterSetter(Br,"frameOffsets");ni.Factory.addGetterSetter(Br,"image");ni.Factory.addGetterSetter(Br,"frameIndex",0,(0,Zf.getNumberValidator)());ni.Factory.addGetterSetter(Br,"frameRate",17,(0,Zf.getNumberValidator)());ni.Factory.backCompat(Br,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Star=void 0;const Hc=Oe,Uv=wt,Vc=ce,Hv=be;class bn extends Uv.Shape{_sceneFunc(e){var n=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var l=1;l<o*2;l++){var c=l%2===0?i:n,h=c*Math.sin(l*Math.PI/o),f=-1*c*Math.cos(l*Math.PI/o);e.lineTo(h,f)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Hs.Star=bn;bn.prototype.className="Star";bn.prototype._centroid=!0;bn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Hv._registerNode)(bn);Hc.Factory.addGetterSetter(bn,"numPoints",5,(0,Vc.getNumberValidator)());Hc.Factory.addGetterSetter(bn,"innerRadius",0,(0,Vc.getNumberValidator)());Hc.Factory.addGetterSetter(bn,"outerRadius",0,(0,Vc.getNumberValidator)());var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.Text=qn.stringToArray=void 0;const Oc=lt,Vt=Oe,Vv=wt,On=ce,Wv=be;function e1(a){return Array.from(a)}qn.stringToArray=e1;var Di="auto",Xv="center",t1="inherit",Ia="justify",Kv="Change.konva",qv="2d",M0="-",r1="left",Yv="text",Qv="Text",Jv="top",Zv="bottom",N0="middle",n1="normal",em="px ",as=" ",tm="right",A0="rtl",rm="word",nm="char",F0="none",ic="…",i1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],im=i1.length;function am(a){return a.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}var os;function ac(){return os||(os=Oc.Util.createCanvasElement().getContext(qv),os)}function om(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)}function sm(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function lm(a){return a=a||{},!a.fillLinearGradientColorStops&&!a.fillRadialGradientColorStops&&!a.fillPatternImage&&(a.fill=a.fill||"black"),a}let ht=class extends Vv.Shape{constructor(e){super(lm(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<im;n++)this.on(i1[n]+Kv,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,i=n.length;if(this.text()){var o=this.padding(),l=this.fontSize(),c=this.lineHeight()*l,h=this.verticalAlign(),f=this.direction(),p=0,m=this.align(),E=this.getWidth(),w=this.letterSpacing(),_=this.fill(),y=this.textDecoration(),C=y.indexOf("underline")!==-1,P=y.indexOf("line-through")!==-1,T;f=f===t1?e.direction:f;var k=0,k=c/2,v=0,x=0;for(f===A0&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",N0),e.setAttr("textAlign",r1),h===N0?p=(this.getHeight()-i*c-o*2)/2:h===Zv&&(p=this.getHeight()-i*c-o*2),e.translate(o,p+o),T=0;T<i;T++){var v=0,x=0,b=n[T],R=b.text,U=b.width,O=b.lastInParagraph,$,M,D;if(e.save(),m===tm?v+=E-U-o*2:m===Xv&&(v+=(E-U-o*2)/2),C){e.save(),e.beginPath(),e.moveTo(v,k+x+Math.round(l/2)),$=R.split(" ").length-1,M=$===0,D=m===Ia&&!O?E-o*2:U,e.lineTo(v+Math.round(D),k+x+Math.round(l/2)),e.lineWidth=l/15;const de=this._getLinearGradient();e.strokeStyle=de||_,e.stroke(),e.restore()}if(P){e.save(),e.beginPath(),e.moveTo(v,k+x),$=R.split(" ").length-1,M=$===0,D=m===Ia&&O&&!M?E-o*2:U,e.lineTo(v+Math.round(D),k+x),e.lineWidth=l/15;const de=this._getLinearGradient();e.strokeStyle=de||_,e.stroke(),e.restore()}if(f!==A0&&(w!==0||m===Ia)){$=R.split(" ").length-1;for(var K=e1(R),X=0;X<K.length;X++){var Z=K[X];Z===" "&&!O&&m===Ia&&(v+=(E-o*2-U)/$),this._partialTextX=v,this._partialTextY=k+x,this._partialText=Z,e.fillStrokeShape(this),v+=this.measureSize(Z).width+w}}else w!==0&&e.setAttr("letterSpacing",`${w}px`),this._partialTextX=v,this._partialTextY=k+x,this._partialText=R,e.fillStrokeShape(this);e.restore(),i>1&&(k+=c)}}}_hitFunc(e){var n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=Oc.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Yv,n),this}getWidth(){var e=this.attrs.width===Di||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Di||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Oc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=ac(),i=this.fontSize(),o;return n.save(),n.font=this._getContextFont(),o=n.measureText(e),n.restore(),{width:o.width,height:i}}_getContextFont(){return this.fontStyle()+as+this.fontVariant()+as+(this.fontSize()+em)+am(this.fontFamily())}_addTextLine(e){this.align()===Ia&&(e=e.trim());var i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),i=e.length;return ac().measureText(e).width+(i?n*(i-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),i=0,o=this.lineHeight()*n,l=this.attrs.width,c=this.attrs.height,h=l!==Di&&l!==void 0,f=c!==Di&&c!==void 0,p=this.padding(),m=l-p*2,E=c-p*2,w=0,_=this.wrap(),y=_!==F0,C=_!==nm&&y,P=this.ellipsis();this.textArr=[],ac().font=this._getContextFont();for(var T=P?this._getTextWidth(ic):0,k=0,v=e.length;k<v;++k){var x=e[k],b=this._getTextWidth(x);if(h&&b>m)for(;x.length>0;){for(var R=0,U=x.length,O="",$=0;R<U;){var M=R+U>>>1,D=x.slice(0,M+1),K=this._getTextWidth(D)+T;K<=m?(R=M+1,O=D,$=K):U=M}if(O){if(C){var X,Z=x[O.length],q=Z===as||Z===M0;q&&$<=m?X=O.length:X=Math.max(O.lastIndexOf(as),O.lastIndexOf(M0))+1,X>0&&(R=X,O=O.slice(0,R),$=this._getTextWidth(O))}O=O.trimRight(),this._addTextLine(O),i=Math.max(i,$),w+=o;var le=this._shouldHandleEllipsis(w);if(le){this._tryToAddEllipsisToLastLine();break}if(x=x.slice(R),x=x.trimLeft(),x.length>0&&(b=this._getTextWidth(x),b<=m)){this._addTextLine(x),w+=o,i=Math.max(i,b);break}}else break}else this._addTextLine(x),w+=o,i=Math.max(i,b),this._shouldHandleEllipsis(w)&&k<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&w+o>E)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){var n=+this.fontSize(),i=this.lineHeight()*n,o=this.attrs.height,l=o!==Di&&o!==void 0,c=this.padding(),h=o-c*2,f=this.wrap(),p=f!==F0;return!p||l&&e+i>h}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Di&&e!==void 0,i=this.padding(),o=e-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];if(!(!c||!l)){if(n){var h=this._getTextWidth(c.text+ic)<o;h||(c.text=c.text.slice(0,c.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+ic)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};qn.Text=ht;ht.prototype._fillFunc=om;ht.prototype._strokeFunc=sm;ht.prototype.className=Qv;ht.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Wv._registerNode)(ht);Vt.Factory.overWriteSetter(ht,"width",(0,On.getNumberOrAutoValidator)());Vt.Factory.overWriteSetter(ht,"height",(0,On.getNumberOrAutoValidator)());Vt.Factory.addGetterSetter(ht,"direction",t1);Vt.Factory.addGetterSetter(ht,"fontFamily","Arial");Vt.Factory.addGetterSetter(ht,"fontSize",12,(0,On.getNumberValidator)());Vt.Factory.addGetterSetter(ht,"fontStyle",n1);Vt.Factory.addGetterSetter(ht,"fontVariant",n1);Vt.Factory.addGetterSetter(ht,"padding",0,(0,On.getNumberValidator)());Vt.Factory.addGetterSetter(ht,"align",r1);Vt.Factory.addGetterSetter(ht,"verticalAlign",Jv);Vt.Factory.addGetterSetter(ht,"lineHeight",1,(0,On.getNumberValidator)());Vt.Factory.addGetterSetter(ht,"wrap",rm);Vt.Factory.addGetterSetter(ht,"ellipsis",!1,(0,On.getBooleanValidator)());Vt.Factory.addGetterSetter(ht,"letterSpacing",0,(0,On.getNumberValidator)());Vt.Factory.addGetterSetter(ht,"text","",(0,On.getStringValidator)());Vt.Factory.addGetterSetter(ht,"textDecoration","");var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.TextPath=void 0;const oc=lt,Nr=Oe,um=wt,La=Yi,sc=qn,a1=ce,cm=be;var dm="",o1="normal";function s1(a){a.fillText(this.partialText,0,0)}function l1(a){a.strokeText(this.partialText,0,0)}class Ct extends um.Shape{constructor(e){super(e),this.dummyCanvas=oc.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return La.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:La.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=La.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),i=this.fill(),o=this.fontSize(),l=this.glyphInfo;n==="underline"&&e.beginPath();for(var c=0;c<l.length;c++){e.save();var h=l[c].p0;e.translate(h.x,h.y),e.rotate(l[c].rotation),this.partialText=l[c].text,e.fillStrokeShape(this),n==="underline"&&(c===0&&e.moveTo(0,o/2+1),e.lineTo(o,o/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;e.moveTo(i.x,i.y)}for(var o=0;o<n.length;o++){var l=n[o].p1;e.lineTo(l.x,l.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return oc.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return sc.Text.prototype.setText.call(this,e)}_getContextFont(){return sc.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),l=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let h=0;o==="center"&&(h=Math.max(0,this.pathLength/2-c/2)),o==="right"&&(h=Math.max(0,this.pathLength-c));const f=(0,sc.stringToArray)(this.text());let p=h;for(var m=0;m<f.length;m++){const E=this._getPointAtLength(p);if(!E)return;let w=this._getTextSize(f[m]).width+i;if(f[m]===" "&&o==="justify"){const k=this.text().split(" ").length-1;w+=(this.pathLength-c)/k}const _=this._getPointAtLength(p+w);if(!_)return;const y=La.Path.getLineLength(E.x,E.y,_.x,_.y);let C=0;if(l)try{C=l(f[m-1],f[m])*this.fontSize()}catch{C=0}E.x+=C,_.x+=C,this.textWidth+=C;const P=La.Path.getPointOnLine(C+y/2,E.x,E.y,_.x,_.y),T=Math.atan2(_.y-E.y,_.x-E.x);this.glyphInfo.push({transposeX:P.x,transposeY:P.y,text:f[m],rotation:T,p0:E,p1:_}),p+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});for(var n=e[0]||0,i=e[0]||0,o=e[1]||0,l=e[1]||0,c,h,f=0;f<e.length/2;f++)c=e[f*2],h=e[f*2+1],n=Math.min(n,c),i=Math.max(i,c),o=Math.min(o,h),l=Math.max(l,h);var p=this.fontSize();return{x:n-p/2,y:o-p/2,width:i-n+p,height:l-o+p}}destroy(){return oc.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Vs.TextPath=Ct;Ct.prototype._fillFunc=s1;Ct.prototype._strokeFunc=l1;Ct.prototype._fillFuncHit=s1;Ct.prototype._strokeFuncHit=l1;Ct.prototype.className="TextPath";Ct.prototype._attrsAffectingSize=["text","fontSize","data"];(0,cm._registerNode)(Ct);Nr.Factory.addGetterSetter(Ct,"data");Nr.Factory.addGetterSetter(Ct,"fontFamily","Arial");Nr.Factory.addGetterSetter(Ct,"fontSize",12,(0,a1.getNumberValidator)());Nr.Factory.addGetterSetter(Ct,"fontStyle",o1);Nr.Factory.addGetterSetter(Ct,"align","left");Nr.Factory.addGetterSetter(Ct,"letterSpacing",0,(0,a1.getNumberValidator)());Nr.Factory.addGetterSetter(Ct,"textBaseline","middle");Nr.Factory.addGetterSetter(Ct,"fontVariant",o1);Nr.Factory.addGetterSetter(Ct,"text",dm);Nr.Factory.addGetterSetter(Ct,"textDecoration",null);Nr.Factory.addGetterSetter(Ct,"kerningFunc",null);var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Transformer=void 0;const We=lt,Be=Oe,I0=nt,hm=wt,fm=Za,L0=Ki,Rr=be,Tn=ce,gm=be;var u1="tr-konva",pm=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${u1}`).join(" "),D0="nodesRect",vm=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],mm={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const ym="ontouchstart"in Rr.Konva._global;function _m(a,e,n){if(a==="rotater")return n;e+=We.Util.degToRad(mm[a]||0);var i=(We.Util.radToDeg(e)%360+360)%360;return We.Util._inRange(i,315+22.5,360)||We.Util._inRange(i,0,22.5)?"ns-resize":We.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":We.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":We.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":We.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":We.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":We.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":We.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(We.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var _s=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],G0=1e8;function Sm(a){return{x:a.x+a.width/2*Math.cos(a.rotation)+a.height/2*Math.sin(-a.rotation),y:a.y+a.height/2*Math.cos(a.rotation)+a.width/2*Math.sin(a.rotation)}}function c1(a,e,n){const i=n.x+(a.x-n.x)*Math.cos(e)-(a.y-n.y)*Math.sin(e),o=n.y+(a.x-n.x)*Math.sin(e)+(a.y-n.y)*Math.cos(e);return{...a,rotation:a.rotation+e,x:i,y:o}}function xm(a,e){const n=Sm(a);return c1(a,e,n)}function wm(a,e,n){let i=e;for(let o=0;o<a.length;o++){const l=Rr.Konva.getAngle(a[o]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<n&&(i=l)}return i}let Tc=0;class Ae extends L0.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(pm,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return We.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u1+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(o=>o.isAncestorOf(this)?(We.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},c=o._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");o.on(c,l),o.on(vm.map(h=>h+`.${this._getEventNamespace()}`).join(" "),l),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(o)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const o=e.getAbsolutePosition(),l=o.x-n.x,c=o.y-n.y;this.nodes().forEach(h=>{if(h===e||h.isDragging())return;const f=h.getAbsolutePosition();h.setAbsolutePosition({x:f.x+l,y:f.y+c}),h.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(D0),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(D0,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){var o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(i),c=e.getAbsolutePosition(i),h=o.x*l.x-e.offsetX()*l.x,f=o.y*l.y-e.offsetY()*l.y;const p=(Rr.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:c.x+h*Math.cos(p)+f*Math.sin(-p),y:c.y+f*Math.cos(p)+h*Math.sin(p),width:o.width*l.x,height:o.height*l.y,rotation:p};return c1(m,-Rr.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-G0,y:-G0,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var E=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],w=p.getAbsoluteTransform();E.forEach(function(_){var y=w.point(_);n.push(y)})});const i=new We.Transform;i.rotate(-Rr.Konva.getAngle(this.rotation()));var o=1/0,l=1/0,c=-1/0,h=-1/0;n.forEach(function(p){var m=i.point(p);o===void 0&&(o=c=m.x,l=h=m.y),o=Math.min(o,m.x),l=Math.min(l,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}),i.invert();const f=i.point({x:o,y:l});return{x:f.x,y:f.y,width:c-o,height:h-l,rotation:Rr.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),_s.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new fm.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:ym?10:"auto"}),i=this;n.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),n.on("dragstart",o=>{n.stopDrag(),o.cancelBubble=!0}),n.on("dragend",o=>{o.cancelBubble=!0}),n.on("mouseenter",()=>{var o=Rr.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=_m(e,o,l);n.getStage().content&&(n.getStage().content.style.cursor=c),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new hm.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,i){var o=i.getParent(),l=o.padding();n.beginPath(),n.rect(-l,-l,i.width()+l*2,i.height()+l*2),n.moveTo(i.width()/2,-l),o.rotateEnabled()&&o.rotateLineVisible()&&n.lineTo(i.width()/2,-o.rotateAnchorOffset()*We.Util._sign(i.height())-l),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(this.shouldOverdrawWholeArea()){var o=this.padding();n.beginPath(),n.rect(-o,-o,i.width()+o*2,i.height()+o*2),n.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,o=n.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var c=e.target.getAbsolutePosition(),h=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-c.x,y:h.y-c.y},Tc++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:e.evt,target:f})})}_handleMouseMove(e){var n,i,o,l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const h=c.getPointerPosition();let f={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const p=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,e)),l.setAbsolutePosition(f);const m=l.getAbsolutePosition();if(!(p.x===m.x&&p.y===m.y)){if(this._movingAnchorName==="rotater"){var E=this._getNodeRect();n=l.x()-E.width/2,i=-l.y()+E.height/2;let X=Math.atan2(-i,n)+Math.PI/2;E.height<0&&(X-=Math.PI);var w=Rr.Konva.getAngle(this.rotation());const Z=w+X,q=Rr.Konva.getAngle(this.rotationSnapTolerance()),de=wm(this.rotationSnaps(),Z,q)-E.rotation,me=xm(E,de);this._fitNodesInto(me,e);return}var _=this.shiftBehavior(),y;_==="inverted"?y=this.keepRatio()&&!e.shiftKey:_==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;var v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){var C=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(C.x-l.x(),2)+Math.pow(C.y-l.y(),2));var P=this.findOne(".top-left").x()>C.x?-1:1,T=this.findOne(".top-left").y()>C.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-left").x(C.x-n),this.findOne(".top-left").y(C.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(y){var C=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(l.x()-C.x,2)+Math.pow(C.y-l.y(),2));var P=this.findOne(".top-right").x()<C.x?-1:1,T=this.findOne(".top-right").y()>C.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".top-right").x(C.x+n),this.findOne(".top-right").y(C.y-i)}var k=l.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(y){var C=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(C.x-l.x(),2)+Math.pow(l.y()-C.y,2));var P=C.x<l.x()?-1:1,T=l.y()<C.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,l.x(C.x-n),l.y(C.y+i)}k=l.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(y){var C=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(l.x()-C.x,2)+Math.pow(l.y()-C.y,2));var P=this.findOne(".bottom-right").x()<C.x?-1:1,T=this.findOne(".bottom-right").y()<C.y?-1:1;n=o*this.cos*P,i=o*this.sin*T,this.findOne(".bottom-right").x(C.x+n),this.findOne(".bottom-right").y(C.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||e.altKey;if(v){var x=this.findOne(".top-left"),b=this.findOne(".bottom-right"),R=x.x(),U=x.y(),O=this.getWidth()-b.x(),$=this.getHeight()-b.y();b.move({x:-R,y:-U}),x.move({x:O,y:$})}var M=this.findOne(".top-left").getAbsolutePosition();n=M.x,i=M.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),K=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:D,height:K,rotation:Rr.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();Tc--,this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:e,target:i})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var i=this._getNodeRect();const o=1;if(We.Util._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(We.Util._inRange(e.height,-this.padding()*2-o,o)){this.update();return}var l=new We.Transform;if(l.rotate(Rr.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const w=l.point({x:-this.padding()*2,y:0});e.x+=w.x,e.y+=w.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const w=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const w=l.point({x:0,y:-this.padding()*2});e.x+=w.x,e.y+=w.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const w=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=w.x,this._anchorDragOffset.y-=w.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const w=this.boundBoxFunc()(i,e);w?e=w:We.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,h=new We.Transform;h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.width/c,i.height/c);const f=new We.Transform,p=e.width/c,m=e.height/c;this.flipEnabled()===!1?(f.translate(e.x,e.y),f.rotate(e.rotation),f.translate(e.width<0?e.width:0,e.height<0?e.height:0),f.scale(Math.abs(p),Math.abs(m))):(f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(p,m));const E=f.multiply(h.invert());this._nodes.forEach(w=>{var _;const y=w.getParent().getAbsoluteTransform(),C=w.getTransform().copy();C.translate(w.offsetX(),w.offsetY());const P=new We.Transform;P.multiply(y.copy().invert()).multiply(E).multiply(y).multiply(C);const T=P.decompose();w.setAttrs(T),(_=w.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(We.Util._getRotation(e.rotation)),this._nodes.forEach(w=>{this._fire("transform",{evt:n,target:w}),w._fire("transform",{evt:n,target:w})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(We.Util._getRotation(n.rotation));var i=n.width,o=n.height,l=this.enabledAnchors(),c=this.resizeEnabled(),h=this.padding(),f=this.anchorSize();const p=this.find("._anchor");p.forEach(E=>{E.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+h,offsetY:f/2+h,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+h,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-h,offsetY:f/2+h,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+h,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-h,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-h,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-h,offsetY:f/2-h,visible:c&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*We.Util._sign(o)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(E=>{m(E)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),L0.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return I0.Node.prototype.toObject.call(this)}clone(e){var n=I0.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Ws.Transformer=Ae;Ae.isTransforming=()=>Tc>0;function Cm(a){return a instanceof Array||We.Util.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(e){_s.indexOf(e)===-1&&We.Util.warn("Unknown anchor name: "+e+". Available names are: "+_s.join(", "))}),a||[]}Ae.prototype.className="Transformer";(0,gm._registerNode)(Ae);Be.Factory.addGetterSetter(Ae,"enabledAnchors",_s,Cm);Be.Factory.addGetterSetter(Ae,"flipEnabled",!0,(0,Tn.getBooleanValidator)());Be.Factory.addGetterSetter(Ae,"resizeEnabled",!0);Be.Factory.addGetterSetter(Ae,"anchorSize",10,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"rotateEnabled",!0);Be.Factory.addGetterSetter(Ae,"rotateLineVisible",!0);Be.Factory.addGetterSetter(Ae,"rotationSnaps",[]);Be.Factory.addGetterSetter(Ae,"rotateAnchorOffset",50,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"rotateAnchorCursor","crosshair");Be.Factory.addGetterSetter(Ae,"rotationSnapTolerance",5,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"borderEnabled",!0);Be.Factory.addGetterSetter(Ae,"anchorStroke","rgb(0, 161, 255)");Be.Factory.addGetterSetter(Ae,"anchorStrokeWidth",1,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"anchorFill","white");Be.Factory.addGetterSetter(Ae,"anchorCornerRadius",0,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"borderStroke","rgb(0, 161, 255)");Be.Factory.addGetterSetter(Ae,"borderStrokeWidth",1,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"borderDash");Be.Factory.addGetterSetter(Ae,"keepRatio",!0);Be.Factory.addGetterSetter(Ae,"shiftBehavior","default");Be.Factory.addGetterSetter(Ae,"centeredScaling",!1);Be.Factory.addGetterSetter(Ae,"ignoreStroke",!1);Be.Factory.addGetterSetter(Ae,"padding",0,(0,Tn.getNumberValidator)());Be.Factory.addGetterSetter(Ae,"node");Be.Factory.addGetterSetter(Ae,"nodes");Be.Factory.addGetterSetter(Ae,"boundBoxFunc");Be.Factory.addGetterSetter(Ae,"anchorDragBoundFunc");Be.Factory.addGetterSetter(Ae,"anchorStyleFunc");Be.Factory.addGetterSetter(Ae,"shouldOverdrawWholeArea",!1);Be.Factory.addGetterSetter(Ae,"useSingleNodeRotation",!0);Be.Factory.backCompat(Ae,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Wedge=void 0;const Ks=Oe,Em=wt,Pm=be,d1=ce,bm=be;class rn extends Em.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Pm.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Xs.Wedge=rn;rn.prototype.className="Wedge";rn.prototype._centroid=!0;rn.prototype._attrsAffectingSize=["radius"];(0,bm._registerNode)(rn);Ks.Factory.addGetterSetter(rn,"radius",0,(0,d1.getNumberValidator)());Ks.Factory.addGetterSetter(rn,"angle",0,(0,d1.getNumberValidator)());Ks.Factory.addGetterSetter(rn,"clockwise",!1);Ks.Factory.backCompat(rn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Blur=void 0;const $0=Oe,Om=nt,Tm=ce;function j0(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var km=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Rm=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Mm(a,e){var n=a.data,i=a.width,o=a.height,l,c,h,f,p,m,E,w,_,y,C,P,T,k,v,x,b,R,U,O,$,M,D,K,X=e+e+1,Z=i-1,q=o-1,le=e+1,de=le*(le+1)/2,me=new j0,ke=null,ue=me,J=null,he=null,Re=km[e],we=Rm[e];for(h=1;h<X;h++)ue=ue.next=new j0,h===le&&(ke=ue);for(ue.next=me,E=m=0,c=0;c<o;c++){for(x=b=R=U=w=_=y=C=0,P=le*(O=n[m]),T=le*($=n[m+1]),k=le*(M=n[m+2]),v=le*(D=n[m+3]),w+=de*O,_+=de*$,y+=de*M,C+=de*D,ue=me,h=0;h<le;h++)ue.r=O,ue.g=$,ue.b=M,ue.a=D,ue=ue.next;for(h=1;h<le;h++)f=m+((Z<h?Z:h)<<2),w+=(ue.r=O=n[f])*(K=le-h),_+=(ue.g=$=n[f+1])*K,y+=(ue.b=M=n[f+2])*K,C+=(ue.a=D=n[f+3])*K,x+=O,b+=$,R+=M,U+=D,ue=ue.next;for(J=me,he=ke,l=0;l<i;l++)n[m+3]=D=C*Re>>we,D!==0?(D=255/D,n[m]=(w*Re>>we)*D,n[m+1]=(_*Re>>we)*D,n[m+2]=(y*Re>>we)*D):n[m]=n[m+1]=n[m+2]=0,w-=P,_-=T,y-=k,C-=v,P-=J.r,T-=J.g,k-=J.b,v-=J.a,f=E+((f=l+e+1)<Z?f:Z)<<2,x+=J.r=n[f],b+=J.g=n[f+1],R+=J.b=n[f+2],U+=J.a=n[f+3],w+=x,_+=b,y+=R,C+=U,J=J.next,P+=O=he.r,T+=$=he.g,k+=M=he.b,v+=D=he.a,x-=O,b-=$,R-=M,U-=D,he=he.next,m+=4;E+=i}for(l=0;l<i;l++){for(b=R=U=x=_=y=C=w=0,m=l<<2,P=le*(O=n[m]),T=le*($=n[m+1]),k=le*(M=n[m+2]),v=le*(D=n[m+3]),w+=de*O,_+=de*$,y+=de*M,C+=de*D,ue=me,h=0;h<le;h++)ue.r=O,ue.g=$,ue.b=M,ue.a=D,ue=ue.next;for(p=i,h=1;h<=e;h++)m=p+l<<2,w+=(ue.r=O=n[m])*(K=le-h),_+=(ue.g=$=n[m+1])*K,y+=(ue.b=M=n[m+2])*K,C+=(ue.a=D=n[m+3])*K,x+=O,b+=$,R+=M,U+=D,ue=ue.next,h<q&&(p+=i);for(m=l,J=me,he=ke,c=0;c<o;c++)f=m<<2,n[f+3]=D=C*Re>>we,D>0?(D=255/D,n[f]=(w*Re>>we)*D,n[f+1]=(_*Re>>we)*D,n[f+2]=(y*Re>>we)*D):n[f]=n[f+1]=n[f+2]=0,w-=P,_-=T,y-=k,C-=v,P-=J.r,T-=J.g,k-=J.b,v-=J.a,f=l+((f=c+le)<q?f:q)*i<<2,w+=x+=J.r=n[f],_+=b+=J.g=n[f+1],y+=R+=J.b=n[f+2],C+=U+=J.a=n[f+3],J=J.next,P+=O=he.r,T+=$=he.g,k+=M=he.b,v+=D=he.a,x-=O,b-=$,R-=M,U-=D,he=he.next,m+=i}}const Nm=function(e){var n=Math.round(this.blurRadius());n>0&&Mm(e,n)};qs.Blur=Nm;$0.Factory.addGetterSetter(Om.Node,"blurRadius",0,(0,Tm.getNumberValidator)(),$0.Factory.afterSetFilter);var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Brighten=void 0;const z0=Oe,Am=nt,Fm=ce,Im=function(a){var e=this.brightness()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=4)n[o]+=e,n[o+1]+=e,n[o+2]+=e};Ys.Brighten=Im;z0.Factory.addGetterSetter(Am.Node,"brightness",0,(0,Fm.getNumberValidator)(),z0.Factory.afterSetFilter);var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.Contrast=void 0;const B0=Oe,Lm=nt,Dm=ce,Gm=function(a){var e=Math.pow((this.contrast()+100)/100,2),n=a.data,i=n.length,o=150,l=150,c=150,h;for(h=0;h<i;h+=4)o=n[h],l=n[h+1],c=n[h+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,o=o<0?0:o>255?255:o,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,n[h]=o,n[h+1]=l,n[h+2]=c};Qs.Contrast=Gm;B0.Factory.addGetterSetter(Lm.Node,"contrast",0,(0,Dm.getNumberValidator)(),B0.Factory.afterSetFilter);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.Emboss=void 0;const Cn=Oe,Zs=nt,$m=lt,h1=ce,jm=function(a){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),o=this.embossBlend(),l=0,c=0,h=a.data,f=a.width,p=a.height,m=f*4,E=p;switch(i){case"top-left":l=-1,c=-1;break;case"top":l=-1,c=0;break;case"top-right":l=-1,c=1;break;case"right":l=0,c=1;break;case"bottom-right":l=1,c=1;break;case"bottom":l=1,c=0;break;case"bottom-left":l=1,c=-1;break;case"left":l=0,c=-1;break;default:$m.Util.error("Unknown emboss direction: "+i)}do{var w=(E-1)*m,_=l;E+_<1&&(_=0),E+_>p&&(_=0);var y=(E-1+_)*f*4,C=f;do{var P=w+(C-1)*4,T=c;C+T<1&&(T=0),C+T>f&&(T=0);var k=y+(C-1+T)*4,v=h[P]-h[k],x=h[P+1]-h[k+1],b=h[P+2]-h[k+2],R=v,U=R>0?R:-R,O=x>0?x:-x,$=b>0?b:-b;if(O>U&&(R=x),$>U&&(R=b),R*=e,o){var M=h[P]+R,D=h[P+1]+R,K=h[P+2]+R;h[P]=M>255?255:M<0?0:M,h[P+1]=D>255?255:D<0?0:D,h[P+2]=K>255?255:K<0?0:K}else{var X=n-R;X<0?X=0:X>255&&(X=255),h[P]=h[P+1]=h[P+2]=X}}while(--C)}while(--E)};Js.Emboss=jm;Cn.Factory.addGetterSetter(Zs.Node,"embossStrength",.5,(0,h1.getNumberValidator)(),Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(Zs.Node,"embossWhiteLevel",.5,(0,h1.getNumberValidator)(),Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(Zs.Node,"embossDirection","top-left",null,Cn.Factory.afterSetFilter);Cn.Factory.addGetterSetter(Zs.Node,"embossBlend",!1,null,Cn.Factory.afterSetFilter);var el={};Object.defineProperty(el,"__esModule",{value:!0});el.Enhance=void 0;const U0=Oe,zm=nt,Bm=ce;function lc(a,e,n,i,o){var l=n-e,c=o-i,h;return l===0?i+c/2:c===0?i:(h=(a-e)/l,h=c*h+i,h)}const Um=function(a){var e=a.data,n=e.length,i=e[0],o=i,l,c=e[1],h=c,f,p=e[2],m=p,E,w,_=this.enhance();if(_!==0){for(w=0;w<n;w+=4)l=e[w+0],l<i?i=l:l>o&&(o=l),f=e[w+1],f<c?c=f:f>h&&(h=f),E=e[w+2],E<p?p=E:E>m&&(m=E);o===i&&(o=255,i=0),h===c&&(h=255,c=0),m===p&&(m=255,p=0);var y,C,P,T,k,v,x,b,R;for(_>0?(C=o+_*(255-o),P=i-_*(i-0),k=h+_*(255-h),v=c-_*(c-0),b=m+_*(255-m),R=p-_*(p-0)):(y=(o+i)*.5,C=o+_*(o-y),P=i+_*(i-y),T=(h+c)*.5,k=h+_*(h-T),v=c+_*(c-T),x=(m+p)*.5,b=m+_*(m-x),R=p+_*(p-x)),w=0;w<n;w+=4)e[w+0]=lc(e[w+0],i,o,P,C),e[w+1]=lc(e[w+1],c,h,v,k),e[w+2]=lc(e[w+2],p,m,R,b)}};el.Enhance=Um;U0.Factory.addGetterSetter(zm.Node,"enhance",0,(0,Bm.getNumberValidator)(),U0.Factory.afterSetFilter);var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.Grayscale=void 0;const Hm=function(a){var e=a.data,n=e.length,i,o;for(i=0;i<n;i+=4)o=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o};tl.Grayscale=Hm;var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.HSL=void 0;const Ui=Oe,Wc=nt,Xc=ce;Ui.Factory.addGetterSetter(Wc.Node,"hue",0,(0,Xc.getNumberValidator)(),Ui.Factory.afterSetFilter);Ui.Factory.addGetterSetter(Wc.Node,"saturation",0,(0,Xc.getNumberValidator)(),Ui.Factory.afterSetFilter);Ui.Factory.addGetterSetter(Wc.Node,"luminance",0,(0,Xc.getNumberValidator)(),Ui.Factory.afterSetFilter);const Vm=function(a){var e=a.data,n=e.length,i=1,o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,h,f=i*o*Math.cos(l*Math.PI/180),p=i*o*Math.sin(l*Math.PI/180),m=.299*i+.701*f+.167*p,E=.587*i-.587*f+.33*p,w=.114*i-.114*f-.497*p,_=.299*i-.299*f-.328*p,y=.587*i+.413*f+.035*p,C=.114*i-.114*f+.293*p,P=.299*i-.3*f+1.25*p,T=.587*i-.586*f-1.05*p,k=.114*i+.886*f-.2*p,v,x,b,R;for(h=0;h<n;h+=4)v=e[h+0],x=e[h+1],b=e[h+2],R=e[h+3],e[h+0]=m*v+E*x+w*b+c,e[h+1]=_*v+y*x+C*b+c,e[h+2]=P*v+T*x+k*b+c,e[h+3]=R};rl.HSL=Vm;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.HSV=void 0;const Hi=Oe,Kc=nt,qc=ce,Wm=function(a){var e=a.data,n=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c,h=i*o*Math.cos(l*Math.PI/180),f=i*o*Math.sin(l*Math.PI/180),p=.299*i+.701*h+.167*f,m=.587*i-.587*h+.33*f,E=.114*i-.114*h-.497*f,w=.299*i-.299*h-.328*f,_=.587*i+.413*h+.035*f,y=.114*i-.114*h+.293*f,C=.299*i-.3*h+1.25*f,P=.587*i-.586*h-1.05*f,T=.114*i+.886*h-.2*f,k,v,x,b;for(c=0;c<n;c+=4)k=e[c+0],v=e[c+1],x=e[c+2],b=e[c+3],e[c+0]=p*k+m*v+E*x,e[c+1]=w*k+_*v+y*x,e[c+2]=C*k+P*v+T*x,e[c+3]=b};nl.HSV=Wm;Hi.Factory.addGetterSetter(Kc.Node,"hue",0,(0,qc.getNumberValidator)(),Hi.Factory.afterSetFilter);Hi.Factory.addGetterSetter(Kc.Node,"saturation",0,(0,qc.getNumberValidator)(),Hi.Factory.afterSetFilter);Hi.Factory.addGetterSetter(Kc.Node,"value",0,(0,qc.getNumberValidator)(),Hi.Factory.afterSetFilter);var il={};Object.defineProperty(il,"__esModule",{value:!0});il.Invert=void 0;const Xm=function(a){var e=a.data,n=e.length,i;for(i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};il.Invert=Xm;var al={};Object.defineProperty(al,"__esModule",{value:!0});al.Kaleidoscope=void 0;const Ss=Oe,f1=nt,H0=lt,g1=ce;var Km=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,E,w=0,_=0,y=0,C=0,P,T=Math.sqrt(h*h+f*f);m=l-h,E=c-f,P=Math.sqrt(m*m+E*E),T=P>T?P:T;var k=c,v=l,x,b,R=360/v*Math.PI/180,U,O;for(b=0;b<v;b+=1)for(U=Math.sin(b*R),O=Math.cos(b*R),x=0;x<k;x+=1)m=Math.floor(h+T*x/k*O),E=Math.floor(f+T*x/k*U),p=(E*l+m)*4,w=i[p+0],_=i[p+1],y=i[p+2],C=i[p+3],p=(b+x*l)*4,o[p+0]=w,o[p+1]=_,o[p+2]=y,o[p+3]=C},qm=function(a,e,n){var i=a.data,o=e.data,l=a.width,c=a.height,h=n.polarCenterX||l/2,f=n.polarCenterY||c/2,p,m,E,w,_,y=0,C=0,P=0,T=0,k,v=Math.sqrt(h*h+f*f);m=l-h,E=c-f,k=Math.sqrt(m*m+E*E),v=k>v?k:v;var x=c,b=l,R,U,O=n.polarRotation||0,$,M;for(m=0;m<l;m+=1)for(E=0;E<c;E+=1)w=m-h,_=E-f,R=Math.sqrt(w*w+_*_)*x/v,U=(Math.atan2(_,w)*180/Math.PI+360+O)%360,U=U*b/360,$=Math.floor(U),M=Math.floor(R),p=(M*l+$)*4,y=i[p+0],C=i[p+1],P=i[p+2],T=i[p+3],p=(E*l+m)*4,o[p+0]=y,o[p+1]=C,o[p+2]=P,o[p+3]=T};const Ym=function(a){var e=a.width,n=a.height,i,o,l,c,h,f,p,m,E,w,_=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),C=Math.floor(e*(y%360)/360);if(!(_<1)){var P=H0.Util.createCanvasElement();P.width=e,P.height=n;var T=P.getContext("2d").getImageData(0,0,e,n);H0.Util.releaseCanvas(P),Km(a,T,{polarCenterX:e/2,polarCenterY:n/2});for(var k=e/Math.pow(2,_);k<=8;)k=k*2,_-=1;k=Math.ceil(k);var v=k,x=0,b=v,R=1;for(C+k>e&&(x=v,b=0,R=-1),o=0;o<n;o+=1)for(i=x;i!==b;i+=R)l=Math.round(i+C)%e,E=(e*o+l)*4,h=T.data[E+0],f=T.data[E+1],p=T.data[E+2],m=T.data[E+3],w=(e*o+i)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;for(o=0;o<n;o+=1)for(v=Math.floor(k),c=0;c<_;c+=1){for(i=0;i<v+1;i+=1)E=(e*o+i)*4,h=T.data[E+0],f=T.data[E+1],p=T.data[E+2],m=T.data[E+3],w=(e*o+v*2-i-1)*4,T.data[w+0]=h,T.data[w+1]=f,T.data[w+2]=p,T.data[w+3]=m;v*=2}qm(T,a,{polarRotation:0})}};al.Kaleidoscope=Ym;Ss.Factory.addGetterSetter(f1.Node,"kaleidoscopePower",2,(0,g1.getNumberValidator)(),Ss.Factory.afterSetFilter);Ss.Factory.addGetterSetter(f1.Node,"kaleidoscopeAngle",0,(0,g1.getNumberValidator)(),Ss.Factory.afterSetFilter);var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.Mask=void 0;const V0=Oe,Qm=nt,Jm=ce;function ss(a,e,n){var i=(n*a.width+e)*4,o=[];return o.push(a.data[i++],a.data[i++],a.data[i++],a.data[i++]),o}function Da(a,e){return Math.sqrt(Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2))}function Zm(a){for(var e=[0,0,0],n=0;n<a.length;n++)e[0]+=a[n][0],e[1]+=a[n][1],e[2]+=a[n][2];return e[0]/=a.length,e[1]/=a.length,e[2]/=a.length,e}function e3(a,e){var n=ss(a,0,0),i=ss(a,a.width-1,0),o=ss(a,0,a.height-1),l=ss(a,a.width-1,a.height-1),c=e||10;if(Da(n,i)<c&&Da(i,l)<c&&Da(l,o)<c&&Da(o,n)<c){for(var h=Zm([i,n,l,o]),f=[],p=0;p<a.width*a.height;p++){var m=Da(h,[a.data[p*4],a.data[p*4+1],a.data[p*4+2]]);f[p]=m<c?0:255}return f}}function t3(a,e){for(var n=0;n<a.width*a.height;n++)a.data[4*n+3]=e[n]}function r3(a,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,E=0;E<o;E++)for(var w=0;w<o;w++){var _=h+E-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var C=_*e+y,P=i[E*o+w];m+=a[C]*P}}c[p]=m===255*8?255:0}return c}function n3(a,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,E=0;E<o;E++)for(var w=0;w<o;w++){var _=h+E-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var C=_*e+y,P=i[E*o+w];m+=a[C]*P}}c[p]=m>=255*4?255:0}return c}function i3(a,e,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),l=Math.floor(o/2),c=[],h=0;h<n;h++)for(var f=0;f<e;f++){for(var p=h*e+f,m=0,E=0;E<o;E++)for(var w=0;w<o;w++){var _=h+E-l,y=f+w-l;if(_>=0&&_<n&&y>=0&&y<e){var C=_*e+y,P=i[E*o+w];m+=a[C]*P}}c[p]=m}return c}const a3=function(a){var e=this.threshold(),n=e3(a,e);return n&&(n=r3(n,a.width,a.height),n=n3(n,a.width,a.height),n=i3(n,a.width,a.height),t3(a,n)),a};ol.Mask=a3;V0.Factory.addGetterSetter(Qm.Node,"threshold",0,(0,Jm.getNumberValidator)(),V0.Factory.afterSetFilter);var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.Noise=void 0;const W0=Oe,o3=nt,s3=ce,l3=function(a){var e=this.noise()*255,n=a.data,i=n.length,o=e/2,l;for(l=0;l<i;l+=4)n[l+0]+=o-2*o*Math.random(),n[l+1]+=o-2*o*Math.random(),n[l+2]+=o-2*o*Math.random()};sl.Noise=l3;W0.Factory.addGetterSetter(o3.Node,"noise",.2,(0,s3.getNumberValidator)(),W0.Factory.afterSetFilter);var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.Pixelate=void 0;const X0=Oe,u3=lt,c3=nt,d3=ce,h3=function(a){var e=Math.ceil(this.pixelSize()),n=a.width,i=a.height,o,l,c,h,f,p,m,E=Math.ceil(n/e),w=Math.ceil(i/e),_,y,C,P,T,k,v,x=a.data;if(e<=0){u3.Util.error("pixelSize value can not be <= 0");return}for(T=0;T<E;T+=1)for(k=0;k<w;k+=1){for(h=0,f=0,p=0,m=0,_=T*e,y=_+e,C=k*e,P=C+e,v=0,o=_;o<y;o+=1)if(!(o>=n))for(l=C;l<P;l+=1)l>=i||(c=(n*l+o)*4,h+=x[c+0],f+=x[c+1],p+=x[c+2],m+=x[c+3],v+=1);for(h=h/v,f=f/v,p=p/v,m=m/v,o=_;o<y;o+=1)if(!(o>=n))for(l=C;l<P;l+=1)l>=i||(c=(n*l+o)*4,x[c+0]=h,x[c+1]=f,x[c+2]=p,x[c+3]=m)}};ll.Pixelate=h3;X0.Factory.addGetterSetter(c3.Node,"pixelSize",8,(0,d3.getNumberValidator)(),X0.Factory.afterSetFilter);var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.Posterize=void 0;const K0=Oe,f3=nt,g3=ce,p3=function(a){var e=Math.round(this.levels()*254)+1,n=a.data,i=n.length,o=255/e,l;for(l=0;l<i;l+=1)n[l]=Math.floor(n[l]/o)*o};ul.Posterize=p3;K0.Factory.addGetterSetter(f3.Node,"levels",.5,(0,g3.getNumberValidator)(),K0.Factory.afterSetFilter);var cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.RGB=void 0;const xs=Oe,Yc=nt,v3=ce,m3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c,h;for(c=0;c<n;c+=4)h=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255,e[c]=h*i,e[c+1]=h*o,e[c+2]=h*l,e[c+3]=e[c+3]};cl.RGB=m3;xs.Factory.addGetterSetter(Yc.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});xs.Factory.addGetterSetter(Yc.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});xs.Factory.addGetterSetter(Yc.Node,"blue",0,v3.RGBComponent,xs.Factory.afterSetFilter);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.RGBA=void 0;const Va=Oe,hl=nt,y3=ce,_3=function(a){var e=a.data,n=e.length,i=this.red(),o=this.green(),l=this.blue(),c=this.alpha(),h,f;for(h=0;h<n;h+=4)f=1-c,e[h]=i*c+e[h]*f,e[h+1]=o*c+e[h+1]*f,e[h+2]=l*c+e[h+2]*f};dl.RGBA=_3;Va.Factory.addGetterSetter(hl.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Va.Factory.addGetterSetter(hl.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)});Va.Factory.addGetterSetter(hl.Node,"blue",0,y3.RGBComponent,Va.Factory.afterSetFilter);Va.Factory.addGetterSetter(hl.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a});var fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.Sepia=void 0;const S3=function(a){var e=a.data,n=e.length,i,o,l,c;for(i=0;i<n;i+=4)o=e[i+0],l=e[i+1],c=e[i+2],e[i+0]=Math.min(255,o*.393+l*.769+c*.189),e[i+1]=Math.min(255,o*.349+l*.686+c*.168),e[i+2]=Math.min(255,o*.272+l*.534+c*.131)};fl.Sepia=S3;var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.Solarize=void 0;const x3=function(a){var e=a.data,n=a.width,i=a.height,o=n*4,l=i;do{var c=(l-1)*o,h=n;do{var f=c+(h-1)*4,p=e[f],m=e[f+1],E=e[f+2];p>127&&(p=255-p),m>127&&(m=255-m),E>127&&(E=255-E),e[f]=p,e[f+1]=m,e[f+2]=E}while(--h)}while(--l)};gl.Solarize=x3;var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.Threshold=void 0;const q0=Oe,w3=nt,C3=ce,E3=function(a){var e=this.threshold()*255,n=a.data,i=n.length,o;for(o=0;o<i;o+=1)n[o]=n[o]<e?0:255};pl.Threshold=E3;q0.Factory.addGetterSetter(w3.Node,"threshold",.5,(0,C3.getNumberValidator)(),q0.Factory.afterSetFilter);Object.defineProperty(Es,"__esModule",{value:!0});Es.Konva=void 0;const Y0=ms,P3=Rs,b3=As,O3=Ls,T3=Ds,k3=Gs,Q0=Bi,R3=Qa,M3=Yi,N3=Za,A3=zs,F3=Bs,I3=Us,L3=Hs,D3=qn,G3=Vs,$3=Ws,j3=Xs,z3=qs,B3=Ys,U3=Qs,H3=Js,V3=el,W3=tl,X3=rl,K3=nl,q3=il,Y3=al,Q3=ol,J3=sl,Z3=ll,e4=ul,t4=cl,r4=dl,n4=fl,i4=gl,a4=pl;Es.Konva=Y0.Konva.Util._assign(Y0.Konva,{Arc:P3.Arc,Arrow:b3.Arrow,Circle:O3.Circle,Ellipse:T3.Ellipse,Image:k3.Image,Label:Q0.Label,Tag:Q0.Tag,Line:R3.Line,Path:M3.Path,Rect:N3.Rect,RegularPolygon:A3.RegularPolygon,Ring:F3.Ring,Sprite:I3.Sprite,Star:L3.Star,Text:D3.Text,TextPath:G3.TextPath,Transformer:$3.Transformer,Wedge:j3.Wedge,Filters:{Blur:z3.Blur,Brighten:B3.Brighten,Contrast:U3.Contrast,Emboss:H3.Emboss,Enhance:V3.Enhance,Grayscale:W3.Grayscale,HSL:X3.HSL,HSV:K3.HSV,Invert:q3.Invert,Kaleidoscope:Y3.Kaleidoscope,Mask:Q3.Mask,Noise:J3.Noise,Pixelate:Z3.Pixelate,Posterize:e4.Posterize,RGB:t4.RGB,RGBA:r4.RGBA,Sepia:n4.Sepia,Solarize:i4.Solarize,Threshold:a4.Threshold}});var o4=Af.exports;Object.defineProperty(o4,"__esModule",{value:!0});const s4=Es;Af.exports=s4.Konva;var kc={exports:{}};(function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=ms;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const i=ms;a.exports=i.Konva})(kc,kc.exports);var l4=kc.exports;const Wa=ws(l4);var p1={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4=function(e){var n={},i=N,o=fs,l=Object.assign;function c(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}function U(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case p:return"Portal";case w:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y:return(t.displayName||"Context")+".Consumer";case _:return(t._context.displayName||"Context")+".Provider";case C:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:U(t.type)||"Memo";case v:r=t._payload,t=t._init;try{return U(t(r))}catch{}}return null}function O(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(r);case 8:return r===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function $(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function M(t){if($(t)!==t)throw Error(c(188))}function D(t){var r=t.alternate;if(!r){if(r=$(t),r===null)throw Error(c(188));return r!==t?null:t}for(var s=t,u=r;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return M(d),t;if(g===u)return M(d),r;g=g.sibling}throw Error(c(188))}if(s.return!==u.return)s=d,u=g;else{for(var S=!1,A=d.child;A;){if(A===s){S=!0,s=d,u=g;break}if(A===u){S=!0,u=d,s=g;break}A=A.sibling}if(!S){for(A=g.child;A;){if(A===s){S=!0,s=g,u=d;break}if(A===u){S=!0,u=g,s=d;break}A=A.sibling}if(!S)throw Error(c(189))}}if(s.alternate!==u)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?t:r}function K(t){return t=D(t),t!==null?X(t):null}function X(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=X(t);if(r!==null)return r;t=t.sibling}return null}function Z(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=Z(t);if(r!==null)return r}t=t.sibling}return null}var q=Array.isArray,le=e.getPublicInstance,de=e.getRootHostContext,me=e.getChildHostContext,ke=e.prepareForCommit,ue=e.resetAfterCommit,J=e.createInstance,he=e.appendInitialChild,Re=e.finalizeInitialChildren,we=e.prepareUpdate,Ye=e.shouldSetTextContent,Fe=e.createTextInstance,F=e.scheduleTimeout,V=e.cancelTimeout,re=e.noTimeout,ge=e.isPrimaryRenderer,pe=e.supportsMutation,De=e.supportsPersistence,Ne=e.supportsHydration,Lt=e.getInstanceFromNode,Ie=e.preparePortalMount,Rt=e.getCurrentEventPriority,Qe=e.detachDeletedInstance,Le=e.supportsMicrotasks,ut=e.scheduleMicrotask,Dt=e.supportsTestSelectors,ze=e.findFiberRoot,Ue=e.getBoundingRect,vt=e.getTextContent,Gt=e.isHiddenSubtree,nn=e.matchAccessibilityRole,an=e.setFocusIfFocusable,Mn=e.setupIntersectionObserver,ra=e.appendChild,Nn=e.appendChildToContainer,na=e.commitTextUpdate,li=e.commitMount,ia=e.commitUpdate,nr=e.insertBefore,Wt=e.insertInContainerBefore,on=e.removeChild,aa=e.removeChildFromContainer,ui=e.resetTextContent,An=e.hideInstance,oa=e.hideTextInstance,ae=e.unhideInstance,_e=e.unhideTextInstance,yt=e.clearContainer,Mt=e.cloneInstance,ir=e.createContainerChildSet,ci=e.appendChildToContainerChildSet,Xt=e.finalizeContainerChildren,di=e.replaceContainerChildren,io=e.cloneHiddenInstance,ao=e.cloneHiddenTextInstance,Ol=e.canHydrateInstance,hi=e.canHydrateTextInstance,Tl=e.canHydrateSuspenseInstance,oo=e.isSuspenseInstancePending,fi=e.isSuspenseInstanceFallback,kl=e.getSuspenseInstanceFallbackErrorDetails,Rl=e.registerSuspenseInstanceRetry,sn=e.getNextHydratableSibling,sa=e.getFirstHydratableChild,la=e.getFirstHydratableChildWithinContainer,so=e.getFirstHydratableChildWithinSuspenseInstance,Ml=e.hydrateInstance,gi=e.hydrateTextInstance,Nl=e.hydrateSuspenseInstance,Al=e.getNextHydratableInstanceAfterSuspenseInstance,Fl=e.commitHydratedContainer,Il=e.commitHydratedSuspenseInstance,Ll=e.clearSuspenseBoundary,Dl=e.clearSuspenseBoundaryFromContainer,Fn=e.shouldDeleteUnhydratedTailInstances,Gl=e.didNotMatchHydratedContainerTextInstance,lo=e.didNotMatchHydratedTextInstance,ua;function In(t){if(ua===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);ua=r&&r[1]||""}return`
`+ua+t}var ca=!1;function da(t,r){if(!t||ca)return"";ca=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(Y){var u=Y}Reflect.construct(t,[],r)}else{try{r.call()}catch(Y){u=Y}t.call(r.prototype)}else{try{throw Error()}catch(Y){u=Y}t()}}catch(Y){if(Y&&u&&typeof Y.stack=="string"){for(var d=Y.stack.split(`
`),g=u.stack.split(`
`),S=d.length-1,A=g.length-1;1<=S&&0<=A&&d[S]!==g[A];)A--;for(;1<=S&&0<=A;S--,A--)if(d[S]!==g[A]){if(S!==1||A!==1)do if(S--,A--,0>A||d[S]!==g[A]){var z=`
`+d[S].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=S&&0<=A);break}}}finally{ca=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?In(t):""}var uo=Object.prototype.hasOwnProperty,ha=[],Ur=-1;function cr(t){return{current:t}}function Xe(t){0>Ur||(t.current=ha[Ur],ha[Ur]=null,Ur--)}function He(t,r){Ur++,ha[Ur]=t.current,t.current=r}var xr={},Et=cr(xr),it=cr(!1),Hr=xr;function ln(t,r){var s=t.type.contextTypes;if(!s)return xr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=r[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Nt(t){return t=t.childContextTypes,t!=null}function pi(){Xe(it),Xe(Et)}function vi(t,r,s){if(Et.current!==xr)throw Error(c(168));He(Et,r),He(it,s)}function fa(t,r,s){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in r))throw Error(c(108,O(t)||"Unknown",d));return l({},s,u)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,Hr=Et.current,He(Et,t),He(it,it.current),!0}function yi(t,r,s){var u=t.stateNode;if(!u)throw Error(c(169));s?(t=fa(t,r,Hr),u.__reactInternalMemoizedMergedChildContext=t,Xe(it),Xe(Et),He(Et,t)):Xe(it),He(it,s)}var qt=Math.clz32?Math.clz32:$l,co=Math.log,ga=Math.LN2;function $l(t){return t>>>=0,t===0?32:31-(co(t)/ga|0)|0}var Ln=64,un=4194304;function Dn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _i(t,r){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,S=s&268435455;if(S!==0){var A=S&~d;A!==0?u=Dn(A):(g&=S,g!==0&&(u=Dn(g)))}else S=s&~d,S!==0?u=Dn(S):g!==0&&(u=Dn(g));if(u===0)return 0;if(r!==0&&r!==u&&!(r&d)&&(d=u&-u,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if(u&4&&(u|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)s=31-qt(r),d=1<<s,u|=t[s],r&=~d;return u}function ho(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jl(t,r){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var S=31-qt(g),A=1<<S,z=d[S];z===-1?(!(A&s)||A&u)&&(d[S]=ho(A,r)):z<=r&&(t.expiredLanes|=A),g&=~A}}function Si(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fo(){var t=Ln;return Ln<<=1,!(Ln&4194240)&&(Ln=64),t}function cn(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Gn(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-qt(r),t[r]=s}function zl(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-qt(s),g=1<<d;r[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function xi(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var u=31-qt(s),d=1<<u;d&r|t[u]&r&&(t[u]|=r),s&=~d}}var Pe=0;function wi(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pa=o.unstable_scheduleCallback,go=o.unstable_cancelCallback,po=o.unstable_shouldYield,Bl=o.unstable_requestPaint,ft=o.unstable_now,va=o.unstable_ImmediatePriority,vo=o.unstable_UserBlockingPriority,ma=o.unstable_NormalPriority,Rd=o.unstable_IdlePriority,Ci=null,dr=null;function Ul(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Ci,t,void 0,(t.current.flags&128)===128)}catch{}}function Hl(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Yt=typeof Object.is=="function"?Object.is:Hl,wr=null,Ei=!1,L=!1;function B(t){wr===null?wr=[t]:wr.push(t)}function Q(t){Ei=!0,B(t)}function W(){if(!L&&wr!==null){L=!0;var t=0,r=Pe;try{var s=wr;for(Pe=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}wr=null,Ei=!1}catch(d){throw wr!==null&&(wr=wr.slice(t+1)),pa(va,W),d}finally{Pe=r,L=!1}}return null}var ne=[],se=0,Ce=null,Pt=0,at=[],Ge=0,ct=null,et=1,Cr="";function $n(t,r){ne[se++]=Pt,ne[se++]=Ce,Ce=t,Pt=r}function Md(t,r,s){at[Ge++]=et,at[Ge++]=Cr,at[Ge++]=ct,ct=t;var u=et;t=Cr;var d=32-qt(u)-1;u&=~(1<<d),s+=1;var g=32-qt(r)+d;if(30<g){var S=d-d%5;g=(u&(1<<S)-1).toString(32),u>>=S,d-=S,et=1<<32-qt(r)+d|s<<d|u,Cr=g+t}else et=1<<g|s<<d|u,Cr=t}function Vl(t){t.return!==null&&($n(t,1),Md(t,1,0))}function Wl(t){for(;t===Ce;)Ce=ne[--se],ne[se]=null,Pt=ne[--se],ne[se]=null;for(;t===ct;)ct=at[--Ge],at[Ge]=null,Cr=at[--Ge],at[Ge]=null,et=at[--Ge],at[Ge]=null}var ar=null,hr=null,tt=!1,ya=!1,Er=null;function Nd(t,r){var s=mr(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Ad(t,r){switch(t.tag){case 5:return r=Ol(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,ar=t,hr=sa(r),!0):!1;case 6:return r=hi(r,t.pendingProps),r!==null?(t.stateNode=r,ar=t,hr=null,!0):!1;case 13:if(r=Tl(r),r!==null){var s=ct!==null?{id:et,overflow:Cr}:null;return t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=mr(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,ar=t,hr=null,!0}return!1;default:return!1}}function Xl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kl(t){if(tt){var r=hr;if(r){var s=r;if(!Ad(t,r)){if(Xl(t))throw Error(c(418));r=sn(s);var u=ar;r&&Ad(t,r)?Nd(u,s):(t.flags=t.flags&-4097|2,tt=!1,ar=t)}}else{if(Xl(t))throw Error(c(418));t.flags=t.flags&-4097|2,tt=!1,ar=t}}}function Fd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ar=t}function mo(t){if(!Ne||t!==ar)return!1;if(!tt)return Fd(t),tt=!0,!1;if(t.tag!==3&&(t.tag!==5||Fn(t.type)&&!Ye(t.type,t.memoizedProps))){var r=hr;if(r){if(Xl(t))throw Id(),Error(c(418));for(;r;)Nd(t,r),r=sn(r)}}if(Fd(t),t.tag===13){if(!Ne)throw Error(c(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));hr=Al(t)}else hr=ar?sn(t.stateNode):null;return!0}function Id(){for(var t=hr;t;)t=sn(t)}function Pi(){Ne&&(hr=ar=null,ya=tt=!1)}function ql(t){Er===null?Er=[t]:Er.push(t)}var K1=h.ReactCurrentBatchConfig;function yo(t,r){if(Yt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),u=Object.keys(r);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!uo.call(r,d)||!Yt(t[d],r[d]))return!1}return!0}function q1(t){switch(t.tag){case 5:return In(t.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 2:case 15:return t=da(t.type,!1),t;case 11:return t=da(t.type.render,!1),t;case 1:return t=da(t.type,!0),t;default:return""}}function Pr(t,r){if(t&&t.defaultProps){r=l({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}var _o=cr(null),So=null,bi=null,Yl=null;function Ql(){Yl=bi=So=null}function Ld(t,r,s){ge?(He(_o,r._currentValue),r._currentValue=s):(He(_o,r._currentValue2),r._currentValue2=s)}function Jl(t){var r=_o.current;Xe(_o),ge?t._currentValue=r:t._currentValue2=r}function Zl(t,r,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===s)break;t=t.return}}function Oi(t,r){So=t,Yl=bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Qt=!0),t.firstContext=null)}function fr(t){var r=ge?t._currentValue:t._currentValue2;if(Yl!==t)if(t={context:t,memoizedValue:r,next:null},bi===null){if(So===null)throw Error(c(308));bi=t,So.dependencies={lanes:0,firstContext:t}}else bi=bi.next=t;return r}var jn=null;function eu(t){jn===null?jn=[t]:jn.push(t)}function Dd(t,r,s,u){var d=r.interleaved;return d===null?(s.next=s,eu(r)):(s.next=d.next,d.next=s),r.interleaved=s,Ar(t,u)}function Ar(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var dn=!1;function tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function hn(t,r,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Te&2){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,Ar(t,s)}return d=u.interleaved,d===null?(r.next=r,eu(u)):(r.next=d.next,d.next=r),u.interleaved=r,Ar(t,s)}function xo(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,xi(t,s)}}function $d(t,r){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=S:g=g.next=S,s=s.next}while(s!==null);g===null?d=g=r:g=g.next=r}else d=g=r;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function wo(t,r,s,u){var d=t.updateQueue;dn=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var z=A,Y=z.next;z.next=null,S===null?g=Y:S.next=Y,S=z;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==S&&(A===null?oe.firstBaseUpdate=Y:A.next=Y,oe.lastBaseUpdate=z))}if(g!==null){var Se=d.baseState;S=0,oe=Y=z=null,A=g;do{var ee=A.lane,Je=A.eventTime;if((u&ee)===ee){oe!==null&&(oe=oe.next={eventTime:Je,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ke=t,er=A;switch(ee=r,Je=s,er.tag){case 1:if(Ke=er.payload,typeof Ke=="function"){Se=Ke.call(Je,Se,ee);break e}Se=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=er.payload,ee=typeof Ke=="function"?Ke.call(Je,Se,ee):Ke,ee==null)break e;Se=l({},Se,ee);break e;case 2:dn=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,ee=d.effects,ee===null?d.effects=[A]:ee.push(A))}else Je={eventTime:Je,lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(Y=oe=Je,z=Se):oe=oe.next=Je,S|=ee;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);if(oe===null&&(z=Se),d.baseState=z,d.firstBaseUpdate=Y,d.lastBaseUpdate=oe,r=d.shared.interleaved,r!==null){d=r;do S|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);Bn|=S,t.lanes=S,t.memoizedState=Se}}function jd(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(c(191,d));d.call(u)}}}var zd=new i.Component().refs;function ru(t,r,s,u){r=t.memoizedState,s=s(u,r),s=s==null?r:l({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Co={isMounted:function(t){return(t=t._reactInternals)?$(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var u=Bt(),d=pn(t),g=Vr(u,d);g.payload=r,s!=null&&(g.callback=s),r=hn(t,g,d),r!==null&&(vr(r,t,d,u),xo(r,t,d))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var u=Bt(),d=pn(t),g=Vr(u,d);g.tag=1,g.payload=r,s!=null&&(g.callback=s),r=hn(t,g,d),r!==null&&(vr(r,t,d,u),xo(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Bt(),u=pn(t),d=Vr(s,u);d.tag=2,r!=null&&(d.callback=r),r=hn(t,d,u),r!==null&&(vr(r,t,u,s),xo(r,t,u))}};function Bd(t,r,s,u,d,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,S):r.prototype&&r.prototype.isPureReactComponent?!yo(s,u)||!yo(d,g):!0}function Ud(t,r,s){var u=!1,d=xr,g=r.contextType;return typeof g=="object"&&g!==null?g=fr(g):(d=Nt(r)?Hr:Et.current,u=r.contextTypes,g=(u=u!=null)?ln(t,d):xr),r=new r(s,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Co,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function Hd(t,r,s,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,u),r.state!==t&&Co.enqueueReplaceState(r,r.state,null)}function nu(t,r,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs=zd,tu(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=fr(g):(g=Nt(r)?Hr:Et.current,d.context=ln(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(ru(t,r,g,s),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Co.enqueueReplaceState(d,d.state,null),wo(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(c(309));var u=s.stateNode}if(!u)throw Error(c(147,t));var d=u,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(S){var A=d.refs;A===zd&&(A=d.refs={}),S===null?delete A[g]:A[g]=S},r._stringRef=g,r)}if(typeof t!="string")throw Error(c(284));if(!s._owner)throw Error(c(290,t))}return t}function Eo(t,r){throw t=Object.prototype.toString.call(r),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vd(t){var r=t._init;return r(t._payload)}function Wd(t){function r(j,I){if(t){var H=j.deletions;H===null?(j.deletions=[I],j.flags|=16):H.push(I)}}function s(j,I){if(!t)return null;for(;I!==null;)r(j,I),I=I.sibling;return null}function u(j,I){for(j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function d(j,I){return j=mn(j,I),j.index=0,j.sibling=null,j}function g(j,I,H){return j.index=H,t?(H=j.alternate,H!==null?(H=H.index,H<I?(j.flags|=2,I):H):(j.flags|=2,I)):(j.flags|=1048576,I)}function S(j){return t&&j.alternate===null&&(j.flags|=2),j}function A(j,I,H,te){return I===null||I.tag!==6?(I=Hu(H,j.mode,te),I.return=j,I):(I=d(I,H),I.return=j,I)}function z(j,I,H,te){var fe=H.type;return fe===m?oe(j,I,H.props.children,te,H.key):I!==null&&(I.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===v&&Vd(fe)===I.type)?(te=d(I,H.props),te.ref=_a(j,I,H),te.return=j,te):(te=Yo(H.type,H.key,H.props,null,j.mode,te),te.ref=_a(j,I,H),te.return=j,te)}function Y(j,I,H,te){return I===null||I.tag!==4||I.stateNode.containerInfo!==H.containerInfo||I.stateNode.implementation!==H.implementation?(I=Vu(H,j.mode,te),I.return=j,I):(I=d(I,H.children||[]),I.return=j,I)}function oe(j,I,H,te,fe){return I===null||I.tag!==7?(I=Wn(H,j.mode,te,fe),I.return=j,I):(I=d(I,H),I.return=j,I)}function Se(j,I,H){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Hu(""+I,j.mode,H),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case f:return H=Yo(I.type,I.key,I.props,null,j.mode,H),H.ref=_a(j,null,I),H.return=j,H;case p:return I=Vu(I,j.mode,H),I.return=j,I;case v:var te=I._init;return Se(j,te(I._payload),H)}if(q(I)||R(I))return I=Wn(I,j.mode,H,null),I.return=j,I;Eo(j,I)}return null}function ee(j,I,H,te){var fe=I!==null?I.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return fe!==null?null:A(j,I,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case f:return H.key===fe?z(j,I,H,te):null;case p:return H.key===fe?Y(j,I,H,te):null;case v:return fe=H._init,ee(j,I,fe(H._payload),te)}if(q(H)||R(H))return fe!==null?null:oe(j,I,H,te,null);Eo(j,H)}return null}function Je(j,I,H,te,fe){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(H)||null,A(I,j,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case f:return j=j.get(te.key===null?H:te.key)||null,z(I,j,te,fe);case p:return j=j.get(te.key===null?H:te.key)||null,Y(I,j,te,fe);case v:var Ee=te._init;return Je(j,I,H,Ee(te._payload),fe)}if(q(te)||R(te))return j=j.get(H)||null,oe(I,j,te,fe,null);Eo(I,te)}return null}function Ke(j,I,H,te){for(var fe=null,Ee=null,xe=I,$e=I=0,Tt=null;xe!==null&&$e<H.length;$e++){xe.index>$e?(Tt=xe,xe=null):Tt=xe.sibling;var je=ee(j,xe,H[$e],te);if(je===null){xe===null&&(xe=Tt);break}t&&xe&&je.alternate===null&&r(j,xe),I=g(je,I,$e),Ee===null?fe=je:Ee.sibling=je,Ee=je,xe=Tt}if($e===H.length)return s(j,xe),tt&&$n(j,$e),fe;if(xe===null){for(;$e<H.length;$e++)xe=Se(j,H[$e],te),xe!==null&&(I=g(xe,I,$e),Ee===null?fe=xe:Ee.sibling=xe,Ee=xe);return tt&&$n(j,$e),fe}for(xe=u(j,xe);$e<H.length;$e++)Tt=Je(xe,j,$e,H[$e],te),Tt!==null&&(t&&Tt.alternate!==null&&xe.delete(Tt.key===null?$e:Tt.key),I=g(Tt,I,$e),Ee===null?fe=Tt:Ee.sibling=Tt,Ee=Tt);return t&&xe.forEach(function(yn){return r(j,yn)}),tt&&$n(j,$e),fe}function er(j,I,H,te){var fe=R(H);if(typeof fe!="function")throw Error(c(150));if(H=fe.call(H),H==null)throw Error(c(151));for(var Ee=fe=null,xe=I,$e=I=0,Tt=null,je=H.next();xe!==null&&!je.done;$e++,je=H.next()){xe.index>$e?(Tt=xe,xe=null):Tt=xe.sibling;var yn=ee(j,xe,je.value,te);if(yn===null){xe===null&&(xe=Tt);break}t&&xe&&yn.alternate===null&&r(j,xe),I=g(yn,I,$e),Ee===null?fe=yn:Ee.sibling=yn,Ee=yn,xe=Tt}if(je.done)return s(j,xe),tt&&$n(j,$e),fe;if(xe===null){for(;!je.done;$e++,je=H.next())je=Se(j,je.value,te),je!==null&&(I=g(je,I,$e),Ee===null?fe=je:Ee.sibling=je,Ee=je);return tt&&$n(j,$e),fe}for(xe=u(j,xe);!je.done;$e++,je=H.next())je=Je(xe,j,$e,je.value,te),je!==null&&(t&&je.alternate!==null&&xe.delete(je.key===null?$e:je.key),I=g(je,I,$e),Ee===null?fe=je:Ee.sibling=je,Ee=je);return t&&xe.forEach(function(Pg){return r(j,Pg)}),tt&&$n(j,$e),fe}function Kr(j,I,H,te){if(typeof H=="object"&&H!==null&&H.type===m&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case f:e:{for(var fe=H.key,Ee=I;Ee!==null;){if(Ee.key===fe){if(fe=H.type,fe===m){if(Ee.tag===7){s(j,Ee.sibling),I=d(Ee,H.props.children),I.return=j,j=I;break e}}else if(Ee.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===v&&Vd(fe)===Ee.type){s(j,Ee.sibling),I=d(Ee,H.props),I.ref=_a(j,Ee,H),I.return=j,j=I;break e}s(j,Ee);break}else r(j,Ee);Ee=Ee.sibling}H.type===m?(I=Wn(H.props.children,j.mode,te,H.key),I.return=j,j=I):(te=Yo(H.type,H.key,H.props,null,j.mode,te),te.ref=_a(j,I,H),te.return=j,j=te)}return S(j);case p:e:{for(Ee=H.key;I!==null;){if(I.key===Ee)if(I.tag===4&&I.stateNode.containerInfo===H.containerInfo&&I.stateNode.implementation===H.implementation){s(j,I.sibling),I=d(I,H.children||[]),I.return=j,j=I;break e}else{s(j,I);break}else r(j,I);I=I.sibling}I=Vu(H,j.mode,te),I.return=j,j=I}return S(j);case v:return Ee=H._init,Kr(j,I,Ee(H._payload),te)}if(q(H))return Ke(j,I,H,te);if(R(H))return er(j,I,H,te);Eo(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,I!==null&&I.tag===6?(s(j,I.sibling),I=d(I,H),I.return=j,j=I):(s(j,I),I=Hu(H,j.mode,te),I.return=j,j=I),S(j)):s(j,I)}return Kr}var Ti=Wd(!0),Xd=Wd(!1),Sa={},gr=cr(Sa),xa=cr(Sa),ki=cr(Sa);function Fr(t){if(t===Sa)throw Error(c(174));return t}function iu(t,r){He(ki,r),He(xa,t),He(gr,Sa),t=de(r),Xe(gr),He(gr,t)}function Ri(){Xe(gr),Xe(xa),Xe(ki)}function Kd(t){var r=Fr(ki.current),s=Fr(gr.current);r=me(s,t.type,r),s!==r&&(He(xa,t),He(gr,r))}function au(t){xa.current===t&&(Xe(gr),Xe(xa))}var ot=cr(0);function Po(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||oo(s)||fi(s)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ou=[];function su(){for(var t=0;t<ou.length;t++){var r=ou[t];ge?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}ou.length=0}var bo=h.ReactCurrentDispatcher,lu=h.ReactCurrentBatchConfig,zn=0,st=null,_t=null,bt=null,Oo=!1,wa=!1,Ca=0,Y1=0;function $t(){throw Error(c(321))}function uu(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!Yt(t[s],r[s]))return!1;return!0}function cu(t,r,s,u,d,g){if(zn=g,st=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,bo.current=t===null||t.memoizedState===null?eg:tg,t=s(u,d),wa){g=0;do{if(wa=!1,Ca=0,25<=g)throw Error(c(301));g+=1,bt=_t=null,r.updateQueue=null,bo.current=rg,t=s(u,d)}while(wa)}if(bo.current=Ro,r=_t!==null&&_t.next!==null,zn=0,bt=_t=st=null,Oo=!1,r)throw Error(c(300));return t}function du(){var t=Ca!==0;return Ca=0,t}function Ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?st.memoizedState=bt=t:bt=bt.next=t,bt}function pr(){if(_t===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var r=bt===null?st.memoizedState:bt.next;if(r!==null)bt=r,_t=t;else{if(t===null)throw Error(c(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},bt===null?st.memoizedState=bt=t:bt=bt.next=t}return bt}function Ea(t,r){return typeof r=="function"?r(t):r}function hu(t){var r=pr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=_t,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var A=S=null,z=null,Y=g;do{var oe=Y.lane;if((zn&oe)===oe)z!==null&&(z=z.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),u=Y.hasEagerState?Y.eagerState:t(u,Y.action);else{var Se={lane:oe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};z===null?(A=z=Se,S=u):z=z.next=Se,st.lanes|=oe,Bn|=oe}Y=Y.next}while(Y!==null&&Y!==g);z===null?S=u:z.next=A,Yt(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=S,r.baseQueue=z,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,st.lanes|=g,Bn|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function fu(t){var r=pr(),s=r.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=r.memoizedState;if(d!==null){s.pending=null;var S=d=d.next;do g=t(g,S.action),S=S.next;while(S!==d);Yt(g,r.memoizedState)||(Qt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,u]}function qd(){}function Yd(t,r){var s=st,u=pr(),d=r(),g=!Yt(u.memoizedState,d);if(g&&(u.memoizedState=d,Qt=!0),u=u.queue,gu(Zd.bind(null,s,u,t),[t]),u.getSnapshot!==r||g||bt!==null&&bt.memoizedState.tag&1){if(s.flags|=2048,Pa(9,Jd.bind(null,s,u,d,r),void 0,null),Ot===null)throw Error(c(349));zn&30||Qd(s,r,d)}return d}function Qd(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Jd(t,r,s,u){r.value=s,r.getSnapshot=u,eh(r)&&th(t)}function Zd(t,r,s){return s(function(){eh(r)&&th(t)})}function eh(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!Yt(t,s)}catch{return!0}}function th(t){var r=Ar(t,1);r!==null&&vr(r,t,1,-1)}function rh(t){var r=Ir();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},r.queue=t,t=t.dispatch=Z1.bind(null,st,t),[r.memoizedState,t]}function Pa(t,r,s,u){return t={tag:t,create:r,destroy:s,deps:u,next:null},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,r.lastEffect=t)),t}function nh(){return pr().memoizedState}function To(t,r,s,u){var d=Ir();st.flags|=t,d.memoizedState=Pa(1|r,s,void 0,u===void 0?null:u)}function ko(t,r,s,u){var d=pr();u=u===void 0?null:u;var g=void 0;if(_t!==null){var S=_t.memoizedState;if(g=S.destroy,u!==null&&uu(u,S.deps)){d.memoizedState=Pa(r,s,g,u);return}}st.flags|=t,d.memoizedState=Pa(1|r,s,g,u)}function ih(t,r){return To(8390656,8,t,r)}function gu(t,r){return ko(2048,8,t,r)}function ah(t,r){return ko(4,2,t,r)}function oh(t,r){return ko(4,4,t,r)}function sh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function lh(t,r,s){return s=s!=null?s.concat([t]):null,ko(4,4,sh.bind(null,r,t),s)}function pu(){}function uh(t,r){var s=pr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&uu(r,u[1])?u[0]:(s.memoizedState=[t,r],t)}function ch(t,r){var s=pr();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&uu(r,u[1])?u[0]:(t=t(),s.memoizedState=[t,r],t)}function dh(t,r,s){return zn&21?(Yt(s,r)||(s=fo(),st.lanes|=s,Bn|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=s)}function Q1(t,r){var s=Pe;Pe=s!==0&&4>s?s:4,t(!0);var u=lu.transition;lu.transition={};try{t(!1),r()}finally{Pe=s,lu.transition=u}}function hh(){return pr().memoizedState}function J1(t,r,s){var u=pn(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},fh(t))gh(r,s);else if(s=Dd(t,r,s,u),s!==null){var d=Bt();vr(s,t,u,d),ph(s,r,u)}}function Z1(t,r,s){var u=pn(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(fh(t))gh(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,A=g(S,s);if(d.hasEagerState=!0,d.eagerState=A,Yt(A,S)){var z=r.interleaved;z===null?(d.next=d,eu(r)):(d.next=z.next,z.next=d),r.interleaved=d;return}}catch{}finally{}s=Dd(t,r,d,u),s!==null&&(d=Bt(),vr(s,t,u,d),ph(s,r,u))}}function fh(t){var r=t.alternate;return t===st||r!==null&&r===st}function gh(t,r){wa=Oo=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function ph(t,r,s){if(s&4194240){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,xi(t,s)}}var Ro={readContext:fr,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},eg={readContext:fr,useCallback:function(t,r){return Ir().memoizedState=[t,r===void 0?null:r],t},useContext:fr,useEffect:ih,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,To(4194308,4,sh.bind(null,r,t),s)},useLayoutEffect:function(t,r){return To(4194308,4,t,r)},useInsertionEffect:function(t,r){return To(4,2,t,r)},useMemo:function(t,r){var s=Ir();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var u=Ir();return r=s!==void 0?s(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=J1.bind(null,st,t),[u.memoizedState,t]},useRef:function(t){var r=Ir();return t={current:t},r.memoizedState=t},useState:rh,useDebugValue:pu,useDeferredValue:function(t){return Ir().memoizedState=t},useTransition:function(){var t=rh(!1),r=t[0];return t=Q1.bind(null,t[1]),Ir().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var u=st,d=Ir();if(tt){if(s===void 0)throw Error(c(407));s=s()}else{if(s=r(),Ot===null)throw Error(c(349));zn&30||Qd(u,r,s)}d.memoizedState=s;var g={value:s,getSnapshot:r};return d.queue=g,ih(Zd.bind(null,u,g,t),[t]),u.flags|=2048,Pa(9,Jd.bind(null,u,g,s,r),void 0,null),s},useId:function(){var t=Ir(),r=Ot.identifierPrefix;if(tt){var s=Cr,u=et;s=(u&~(1<<32-qt(u)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ca++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Y1++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},tg={readContext:fr,useCallback:uh,useContext:fr,useEffect:gu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:hu,useRef:nh,useState:function(){return hu(Ea)},useDebugValue:pu,useDeferredValue:function(t){var r=pr();return dh(r,_t.memoizedState,t)},useTransition:function(){var t=hu(Ea)[0],r=pr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1},rg={readContext:fr,useCallback:uh,useContext:fr,useEffect:gu,useImperativeHandle:lh,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:ch,useReducer:fu,useRef:nh,useState:function(){return fu(Ea)},useDebugValue:pu,useDeferredValue:function(t){var r=pr();return _t===null?r.memoizedState=t:dh(r,_t.memoizedState,t)},useTransition:function(){var t=fu(Ea)[0],r=pr().memoizedState;return[t,r]},useMutableSource:qd,useSyncExternalStore:Yd,useId:hh,unstable_isNewReconciler:!1};function Mi(t,r){try{var s="",u=r;do s+=q1(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d,digest:null}}function vu(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function mu(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function vh(t,r,s){s=Vr(-1,s),s.tag=3,s.payload={element:null};var u=r.value;return s.callback=function(){Ho||(Ho=!0,Du=u),mu(t,r)},s}function mh(t,r,s){s=Vr(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=r.value;s.payload=function(){return u(d)},s.callback=function(){mu(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){mu(t,r),typeof u!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),s}function yh(t,r,s){var u=t.pingCache;if(u===null){u=t.pingCache=new ng;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(s)||(d.add(s),t=mg.bind(null,t,r,s),r.then(t,t))}function _h(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Sh(t,r,s,u,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Vr(-1,1),r.tag=2,hn(s,r,1))),s.lanes|=1),t)}var ig=h.ReactCurrentOwner,Qt=!1;function Kt(t,r,s,u){r.child=t===null?Xd(r,null,s,u):Ti(r,t.child,s,u)}function xh(t,r,s,u,d){s=s.render;var g=r.ref;return Oi(r,d),u=cu(t,r,s,u,g,d),s=du(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Wr(t,r,d)):(tt&&s&&Vl(r),r.flags|=1,Kt(t,r,u,d),r.child)}function wh(t,r,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Uu(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=g,Ch(t,r,g,u,d)):(t=Yo(s.type,null,u,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!(t.lanes&d)){var S=g.memoizedProps;if(s=s.compare,s=s!==null?s:yo,s(S,u)&&t.ref===r.ref)return Wr(t,r,d)}return r.flags|=1,t=mn(g,u),t.ref=r.ref,t.return=r,r.child=t}function Ch(t,r,s,u,d){if(t!==null){var g=t.memoizedProps;if(yo(g,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=g,(t.lanes&d)!==0)t.flags&131072&&(Qt=!0);else return r.lanes=t.lanes,Wr(t,r,d)}return yu(t,r,s,u,d)}function Eh(t,r,s){var u=r.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ai,or),or|=s;else{if(!(s&1073741824))return t=g!==null?g.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,He(Ai,or),or|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,He(Ai,or),or|=u}else g!==null?(u=g.baseLanes|s,r.memoizedState=null):u=s,He(Ai,or),or|=u;return Kt(t,r,d,s),r.child}function Ph(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function yu(t,r,s,u,d){var g=Nt(s)?Hr:Et.current;return g=ln(r,g),Oi(r,d),s=cu(t,r,s,u,g,d),u=du(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Wr(t,r,d)):(tt&&u&&Vl(r),r.flags|=1,Kt(t,r,s,d),r.child)}function bh(t,r,s,u,d){if(Nt(s)){var g=!0;mi(r)}else g=!1;if(Oi(r,d),r.stateNode===null)No(t,r),Ud(r,s,u),nu(r,s,u,d),u=!0;else if(t===null){var S=r.stateNode,A=r.memoizedProps;S.props=A;var z=S.context,Y=s.contextType;typeof Y=="object"&&Y!==null?Y=fr(Y):(Y=Nt(s)?Hr:Et.current,Y=ln(r,Y));var oe=s.getDerivedStateFromProps,Se=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";Se||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==u||z!==Y)&&Hd(r,S,u,Y),dn=!1;var ee=r.memoizedState;S.state=ee,wo(r,u,S,d),z=r.memoizedState,A!==u||ee!==z||it.current||dn?(typeof oe=="function"&&(ru(r,s,oe,u),z=r.memoizedState),(A=dn||Bd(r,s,A,u,ee,z,Y))?(Se||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=z),S.props=u,S.state=z,S.context=Y,u=A):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{S=r.stateNode,Gd(t,r),A=r.memoizedProps,Y=r.type===r.elementType?A:Pr(r.type,A),S.props=Y,Se=r.pendingProps,ee=S.context,z=s.contextType,typeof z=="object"&&z!==null?z=fr(z):(z=Nt(s)?Hr:Et.current,z=ln(r,z));var Je=s.getDerivedStateFromProps;(oe=typeof Je=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==Se||ee!==z)&&Hd(r,S,u,z),dn=!1,ee=r.memoizedState,S.state=ee,wo(r,u,S,d);var Ke=r.memoizedState;A!==Se||ee!==Ke||it.current||dn?(typeof Je=="function"&&(ru(r,s,Je,u),Ke=r.memoizedState),(Y=dn||Bd(r,s,Y,u,ee,Ke,z)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(u,Ke,z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(u,Ke,z)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Ke),S.props=u,S.state=Ke,S.context=z,u=Y):(typeof S.componentDidUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&ee===t.memoizedState||(r.flags|=1024),u=!1)}return _u(t,r,s,u,g,d)}function _u(t,r,s,u,d,g){Ph(t,r);var S=(r.flags&128)!==0;if(!u&&!S)return d&&yi(r,s,!1),Wr(t,r,g);u=r.stateNode,ig.current=r;var A=S&&typeof s.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&S?(r.child=Ti(r,t.child,null,g),r.child=Ti(r,null,A,g)):Kt(t,r,A,g),r.memoizedState=u.state,d&&yi(r,s,!0),r.child}function Oh(t){var r=t.stateNode;r.pendingContext?vi(t,r.pendingContext,r.pendingContext!==r.context):r.context&&vi(t,r.context,!1),iu(t,r.containerInfo)}function Th(t,r,s,u,d){return Pi(),ql(d),r.flags|=256,Kt(t,r,s,u),r.child}var Su={dehydrated:null,treeContext:null,retryLane:0};function xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function kh(t,r,s){var u=r.pendingProps,d=ot.current,g=!1,S=(r.flags&128)!==0,A;if((A=S)||(A=t!==null&&t.memoizedState===null?!1:(d&2)!==0),A?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),He(ot,d&1),t===null)return Kl(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?fi(t)?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(S=u.children,t=u.fallback,g?(u=r.mode,g=r.child,S={mode:"hidden",children:S},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=S):g=Qo(S,u,0,null),t=Wn(t,u,s,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=xu(s),r.memoizedState=Su,t):wu(r,S));if(d=t.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return ag(t,r,S,u,A,d,s);if(g){g=u.fallback,S=r.mode,d=t.child,A=d.sibling;var z={mode:"hidden",children:u.children};return!(S&1)&&r.child!==d?(u=r.child,u.childLanes=0,u.pendingProps=z,r.deletions=null):(u=mn(d,z),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=mn(A,g):(g=Wn(g,S,s,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=t.child.memoizedState,S=S===null?xu(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},g.memoizedState=S,g.childLanes=t.childLanes&~s,r.memoizedState=Su,u}return g=t.child,t=g.sibling,u=mn(g,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=s),u.return=r,u.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=u,r.memoizedState=null,u}function wu(t,r){return r=Qo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Mo(t,r,s,u){return u!==null&&ql(u),Ti(r,t.child,null,s),t=wu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ag(t,r,s,u,d,g,S){if(s)return r.flags&256?(r.flags&=-257,u=vu(Error(c(422))),Mo(t,r,S,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=u.fallback,d=r.mode,u=Qo({mode:"visible",children:u.children},d,0,null),g=Wn(g,d,S,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,r.mode&1&&Ti(r,t.child,null,S),r.child.memoizedState=xu(S),r.memoizedState=Su,g);if(!(r.mode&1))return Mo(t,r,S,null);if(fi(d))return u=kl(d).digest,g=Error(c(419)),u=vu(g,u,void 0),Mo(t,r,S,u);if(s=(S&t.childLanes)!==0,Qt||s){if(u=Ot,u!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|S)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Ar(t,d),vr(u,t,d,-1))}return Bu(),u=vu(Error(c(421))),Mo(t,r,S,u)}return oo(d)?(r.flags|=128,r.child=t.child,r=yg.bind(null,t),Rl(d,r),null):(t=g.treeContext,Ne&&(hr=so(d),ar=r,tt=!0,Er=null,ya=!1,t!==null&&(at[Ge++]=et,at[Ge++]=Cr,at[Ge++]=ct,et=t.id,Cr=t.overflow,ct=r)),r=wu(r,u.children),r.flags|=4096,r)}function Rh(t,r,s){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Zl(t.return,r,s)}function Cu(t,r,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Mh(t,r,s){var u=r.pendingProps,d=u.revealOrder,g=u.tail;if(Kt(t,r,u.children,s),u=ot.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rh(t,s,r);else if(t.tag===19)Rh(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(He(ot,u),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(s=r.child,d=null;s!==null;)t=s.alternate,t!==null&&Po(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=r.child,r.child=null):(d=s.sibling,s.sibling=null),Cu(r,!1,d,s,g);break;case"backwards":for(s=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Po(t)===null){r.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Cu(r,!0,s,null,g);break;case"together":Cu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function No(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Wr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Bn|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(c(153));if(r.child!==null){for(t=r.child,s=mn(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=mn(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function og(t,r,s){switch(r.tag){case 3:Oh(r),Pi();break;case 5:Kd(r);break;case 1:Nt(r.type)&&mi(r);break;case 4:iu(r,r.stateNode.containerInfo);break;case 10:Ld(r,r.type._context,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(He(ot,ot.current&1),r.flags|=128,null):s&r.child.childLanes?kh(t,r,s):(He(ot,ot.current&1),t=Wr(t,r,s),t!==null?t.sibling:null);He(ot,ot.current&1);break;case 19:if(u=(s&r.childLanes)!==0,t.flags&128){if(u)return Mh(t,r,s);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(ot,ot.current),u)break;return null;case 22:case 23:return r.lanes=0,Eh(t,r,s)}return Wr(t,r,s)}function Lr(t){t.flags|=4}function Nh(t,r){if(t!==null&&t.child===r.child)return!0;if(r.flags&16)return!1;for(t=r.child;t!==null;){if(t.flags&12854||t.subtreeFlags&12854)return!1;t=t.sibling}return!0}var ba,Oa,Ao,Fo;if(pe)ba=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)he(t,s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Oa=function(){},Ao=function(t,r,s,u,d){if(t=t.memoizedProps,t!==u){var g=r.stateNode,S=Fr(gr.current);s=we(g,s,t,u,d,S),(r.updateQueue=s)&&Lr(r)}},Fo=function(t,r,s,u){s!==u&&Lr(r)};else if(De){ba=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=io(g,d.type,d.memoizedProps,d)),he(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ao(g,d.memoizedProps,d)),he(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),ba(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var Ah=function(t,r,s,u){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;s&&u&&(g=io(g,d.type,d.memoizedProps,d)),ci(t,g)}else if(d.tag===6)g=d.stateNode,s&&u&&(g=ao(g,d.memoizedProps,d)),ci(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Ah(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Oa=function(t,r){var s=r.stateNode;if(!Nh(t,r)){t=s.containerInfo;var u=ir(t);Ah(u,r,!1,!1),s.pendingChildren=u,Lr(r),Xt(t,u)}},Ao=function(t,r,s,u,d){var g=t.stateNode,S=t.memoizedProps;if((t=Nh(t,r))&&S===u)r.stateNode=g;else{var A=r.stateNode,z=Fr(gr.current),Y=null;S!==u&&(Y=we(A,s,S,u,d,z)),t&&Y===null?r.stateNode=g:(g=Mt(g,Y,s,S,u,r,t,A),Re(g,s,u,d,z)&&Lr(r),r.stateNode=g,t?Lr(r):ba(g,r,!1,!1))}},Fo=function(t,r,s,u){s!==u?(t=Fr(ki.current),s=Fr(gr.current),r.stateNode=Fe(u,t,s,r),Lr(r)):r.stateNode=t.stateNode}}else Oa=function(){},Ao=function(){},Fo=function(){};function Ta(t,r){if(!tt)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function jt(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(r)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,r}function sg(t,r,s){var u=r.pendingProps;switch(Wl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(r),null;case 1:return Nt(r.type)&&pi(),jt(r),null;case 3:return s=r.stateNode,Ri(),Xe(it),Xe(Et),su(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(mo(r)?Lr(r):t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Er!==null&&(ju(Er),Er=null))),Oa(t,r),jt(r),null;case 5:au(r),s=Fr(ki.current);var d=r.type;if(t!==null&&r.stateNode!=null)Ao(t,r,d,u,s),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(c(166));return jt(r),null}if(t=Fr(gr.current),mo(r)){if(!Ne)throw Error(c(175));t=Ml(r.stateNode,r.type,r.memoizedProps,s,t,r,!ya),r.updateQueue=t,t!==null&&Lr(r)}else{var g=J(d,u,s,t,r);ba(g,r,!1,!1),r.stateNode=g,Re(g,d,u,s,t)&&Lr(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return jt(r),null;case 6:if(t&&r.stateNode!=null)Fo(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(c(166));if(t=Fr(ki.current),s=Fr(gr.current),mo(r)){if(!Ne)throw Error(c(176));if(t=r.stateNode,s=r.memoizedProps,(u=gi(t,s,r,!ya))&&(d=ar,d!==null))switch(d.tag){case 3:Gl(d.stateNode.containerInfo,t,s,(d.mode&1)!==0);break;case 5:lo(d.type,d.memoizedProps,d.stateNode,t,s,(d.mode&1)!==0)}u&&Lr(r)}else r.stateNode=Fe(u,t,s,r)}return jt(r),null;case 13:if(Xe(ot),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&hr!==null&&r.mode&1&&!(r.flags&128))Id(),Pi(),r.flags|=98560,d=!1;else if(d=mo(r),u!==null&&u.dehydrated!==null){if(t===null){if(!d)throw Error(c(318));if(!Ne)throw Error(c(344));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));Nl(d,r)}else Pi(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;jt(r),d=!1}else Er!==null&&(ju(Er),Er=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(s=u!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||ot.current&1?St===0&&(St=3):Bu())),r.updateQueue!==null&&(r.flags|=4),jt(r),null);case 4:return Ri(),Oa(t,r),t===null&&Ie(r.stateNode.containerInfo),jt(r),null;case 10:return Jl(r.type._context),jt(r),null;case 17:return Nt(r.type)&&pi(),jt(r),null;case 19:if(Xe(ot),d=r.memoizedState,d===null)return jt(r),null;if(u=(r.flags&128)!==0,g=d.rendering,g===null)if(u)Ta(d,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(g=Po(t),g!==null){for(r.flags|=128,Ta(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=s,s=r.child;s!==null;)u=s,d=t,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,d=g.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),s=s.sibling;return He(ot,ot.current&1|2),r.child}t=t.sibling}d.tail!==null&&ft()>Lu&&(r.flags|=128,u=!0,Ta(d,!1),r.lanes=4194304)}else{if(!u)if(t=Po(g),t!==null){if(r.flags|=128,u=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),Ta(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!tt)return jt(r),null}else 2*ft()-d.renderingStartTime>Lu&&s!==1073741824&&(r.flags|=128,u=!0,Ta(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=ft(),r.sibling=null,t=ot.current,He(ot,u?t&1|2:t&1),r):(jt(r),null);case 22:case 23:return zu(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?or&1073741824&&(jt(r),pe&&r.subtreeFlags&6&&(r.flags|=8192)):jt(r),null;case 24:return null;case 25:return null}throw Error(c(156,r.tag))}function lg(t,r){switch(Wl(r),r.tag){case 1:return Nt(r.type)&&pi(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ri(),Xe(it),Xe(Et),su(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return au(r),null;case 13:if(Xe(ot),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(c(340));Pi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Xe(ot),null;case 4:return Ri(),null;case 10:return Jl(r.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var Io=!1,zt=!1,ug=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ni(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){rt(t,r,u)}else s.current=null}function Eu(t,r,s){try{s()}catch(u){rt(t,r,u)}}var Fh=!1;function cg(t,r){for(ke(t.containerInfo),ie=r;ie!==null;)if(t=ie,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,ie=r;else for(;ie!==null;){t=ie;try{var s=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var u=s.memoizedProps,d=s.memoizedState,g=t.stateNode,S=g.getSnapshotBeforeUpdate(t.elementType===t.type?u:Pr(t.type,u),d);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:pe&&yt(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(A){rt(t,t.return,A)}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}return s=Fh,Fh=!1,s}function ka(t,r,s){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Eu(r,s,g)}d=d.next}while(d!==u)}}function Lo(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==r)}}function Pu(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=le(s);break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Ih(t){var r=t.alternate;r!==null&&(t.alternate=null,Ih(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Qe(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lh(t){return t.tag===5||t.tag===3||t.tag===4}function Dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bu(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?Wt(s,t,r):Nn(s,t);else if(u!==4&&(t=t.child,t!==null))for(bu(t,r,s),t=t.sibling;t!==null;)bu(t,r,s),t=t.sibling}function Ou(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?nr(s,t,r):ra(s,t);else if(u!==4&&(t=t.child,t!==null))for(Ou(t,r,s),t=t.sibling;t!==null;)Ou(t,r,s),t=t.sibling}var At=null,br=!1;function Dr(t,r,s){for(s=s.child;s!==null;)Tu(t,r,s),s=s.sibling}function Tu(t,r,s){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Ci,s)}catch{}switch(s.tag){case 5:zt||Ni(s,r);case 6:if(pe){var u=At,d=br;At=null,Dr(t,r,s),At=u,br=d,At!==null&&(br?aa(At,s.stateNode):on(At,s.stateNode))}else Dr(t,r,s);break;case 18:pe&&At!==null&&(br?Dl(At,s.stateNode):Ll(At,s.stateNode));break;case 4:pe?(u=At,d=br,At=s.stateNode.containerInfo,br=!0,Dr(t,r,s),At=u,br=d):(De&&(u=s.stateNode.containerInfo,d=ir(u),di(u,d)),Dr(t,r,s));break;case 0:case 11:case 14:case 15:if(!zt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,S=g.destroy;g=g.tag,S!==void 0&&(g&2||g&4)&&Eu(s,r,S),d=d.next}while(d!==u)}Dr(t,r,s);break;case 1:if(!zt&&(Ni(s,r),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){rt(s,r,A)}Dr(t,r,s);break;case 21:Dr(t,r,s);break;case 22:s.mode&1?(zt=(u=zt)||s.memoizedState!==null,Dr(t,r,s),zt=u):Dr(t,r,s);break;default:Dr(t,r,s)}}function Gh(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ug),r.forEach(function(u){var d=_g.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function Or(t,r){var s=r.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,S=r;if(pe){var A=S;e:for(;A!==null;){switch(A.tag){case 5:At=A.stateNode,br=!1;break e;case 3:At=A.stateNode.containerInfo,br=!0;break e;case 4:At=A.stateNode.containerInfo,br=!0;break e}A=A.return}if(At===null)throw Error(c(160));Tu(g,S,d),At=null,br=!1}else Tu(g,S,d);var z=d.alternate;z!==null&&(z.return=null),d.return=null}catch(Y){rt(d,r,Y)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)$h(r,t),r=r.sibling}function $h(t,r){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Or(r,t),Gr(t),u&4){try{ka(3,t,t.return),Lo(3,t)}catch(ee){rt(t,t.return,ee)}try{ka(5,t,t.return)}catch(ee){rt(t,t.return,ee)}}break;case 1:Or(r,t),Gr(t),u&512&&s!==null&&Ni(s,s.return);break;case 5:if(Or(r,t),Gr(t),u&512&&s!==null&&Ni(s,s.return),pe){if(t.flags&32){var d=t.stateNode;try{ui(d)}catch(ee){rt(t,t.return,ee)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(s=s!==null?s.memoizedProps:g,u=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{ia(d,r,u,s,g,t)}catch(ee){rt(t,t.return,ee)}}}break;case 6:if(Or(r,t),Gr(t),u&4&&pe){if(t.stateNode===null)throw Error(c(162));d=t.stateNode,g=t.memoizedProps,s=s!==null?s.memoizedProps:g;try{na(d,s,g)}catch(ee){rt(t,t.return,ee)}}break;case 3:if(Or(r,t),Gr(t),u&4){if(pe&&Ne&&s!==null&&s.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(ee){rt(t,t.return,ee)}if(De){d=r.containerInfo,g=r.pendingChildren;try{di(d,g)}catch(ee){rt(t,t.return,ee)}}}break;case 4:if(Or(r,t),Gr(t),u&4&&De){g=t.stateNode,d=g.containerInfo,g=g.pendingChildren;try{di(d,g)}catch(ee){rt(t,t.return,ee)}}break;case 13:Or(r,t),Gr(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Iu=ft())),u&4&&Gh(t);break;case 22:var S=s!==null&&s.memoizedState!==null;if(t.mode&1?(zt=(s=zt)||S,Or(r,t),zt=s):Or(r,t),Gr(t),u&8192){if(s=t.memoizedState!==null,(t.stateNode.isHidden=s)&&!S&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(r=ie=u;ie!==null;){S=ie;var A=S.child;switch(S.tag){case 0:case 11:case 14:case 15:ka(4,S,S.return);break;case 1:Ni(S,S.return);var z=S.stateNode;if(typeof z.componentWillUnmount=="function"){var Y=S,oe=S.return;try{var Se=Y;z.props=Se.memoizedProps,z.state=Se.memoizedState,z.componentWillUnmount()}catch(ee){rt(Y,oe,ee)}}break;case 5:Ni(S,S.return);break;case 22:if(S.memoizedState!==null){Bh(r);continue}}A!==null?(A.return=S,ie=A):Bh(r)}u=u.sibling}if(pe){e:if(u=null,pe)for(r=t;;){if(r.tag===5){if(u===null){u=r;try{d=r.stateNode,s?An(d):ae(r.stateNode,r.memoizedProps)}catch(ee){rt(t,t.return,ee)}}}else if(r.tag===6){if(u===null)try{g=r.stateNode,s?oa(g):_e(g,r.memoizedProps)}catch(ee){rt(t,t.return,ee)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}}}break;case 19:Or(r,t),Gr(t),u&4&&Gh(t);break;case 21:break;default:Or(r,t),Gr(t)}}function Gr(t){var r=t.flags;if(r&2){try{if(pe){e:{for(var s=t.return;s!==null;){if(Lh(s)){var u=s;break e}s=s.return}throw Error(c(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(ui(d),u.flags&=-33);var g=Dh(t);Ou(t,g,d);break;case 3:case 4:var S=u.stateNode.containerInfo,A=Dh(t);bu(t,A,S);break;default:throw Error(c(161))}}}catch(z){rt(t,t.return,z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dg(t,r,s){ie=t,jh(t)}function jh(t,r,s){for(var u=(t.mode&1)!==0;ie!==null;){var d=ie,g=d.child;if(d.tag===22&&u){var S=d.memoizedState!==null||Io;if(!S){var A=d.alternate,z=A!==null&&A.memoizedState!==null||zt;A=Io;var Y=zt;if(Io=S,(zt=z)&&!Y)for(ie=d;ie!==null;)S=ie,z=S.child,S.tag===22&&S.memoizedState!==null?Uh(d):z!==null?(z.return=S,ie=z):Uh(d);for(;g!==null;)ie=g,jh(g),g=g.sibling;ie=d,Io=A,zt=Y}zh(t)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ie=g):zh(t)}}function zh(t){for(;ie!==null;){var r=ie;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:zt||Lo(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!zt)if(s===null)u.componentDidMount();else{var d=r.elementType===r.type?s.memoizedProps:Pr(r.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&jd(r,g,u);break;case 3:var S=r.updateQueue;if(S!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=le(r.child.stateNode);break;case 1:s=r.child.stateNode}jd(r,S,s)}break;case 5:var A=r.stateNode;s===null&&r.flags&4&&li(A,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(Ne&&r.memoizedState===null){var z=r.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var oe=Y.dehydrated;oe!==null&&Il(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}zt||r.flags&512&&Pu(r)}catch(Se){rt(r,r.return,Se)}}if(r===t){ie=null;break}if(s=r.sibling,s!==null){s.return=r.return,ie=s;break}ie=r.return}}function Bh(t){for(;ie!==null;){var r=ie;if(r===t){ie=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ie=s;break}ie=r.return}}function Uh(t){for(;ie!==null;){var r=ie;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Lo(4,r)}catch(z){rt(r,s,z)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var d=r.return;try{u.componentDidMount()}catch(z){rt(r,d,z)}}var g=r.return;try{Pu(r)}catch(z){rt(r,g,z)}break;case 5:var S=r.return;try{Pu(r)}catch(z){rt(r,S,z)}}}catch(z){rt(r,r.return,z)}if(r===t){ie=null;break}var A=r.sibling;if(A!==null){A.return=r.return,ie=A;break}ie=r.return}}var Do=0,Go=1,$o=2,jo=3,zo=4;if(typeof Symbol=="function"&&Symbol.for){var Ra=Symbol.for;Do=Ra("selector.component"),Go=Ra("selector.has_pseudo_class"),$o=Ra("selector.role"),jo=Ra("selector.test_id"),zo=Ra("selector.text")}function ku(t){var r=Lt(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(c(364));return r}if(t=ze(t),t===null)throw Error(c(362));return t.stateNode.current}function Ru(t,r){switch(r.$$typeof){case Do:if(t.type===r.value)return!0;break;case Go:e:{r=r.value,t=[t,0];for(var s=0;s<t.length;){var u=t[s++],d=t[s++],g=r[d];if(u.tag!==5||!Gt(u)){for(;g!=null&&Ru(u,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(u=u.child;u!==null;)t.push(u,d),u=u.sibling}}r=!1}return r;case $o:if(t.tag===5&&nn(t.stateNode,r.value))return!0;break;case zo:if((t.tag===5||t.tag===6)&&(t=vt(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case jo:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Mu(t){switch(t.$$typeof){case Do:return"<"+(U(t.value)||"Unknown")+">";case Go:return":has("+(Mu(t)||"")+")";case $o:return'[role="'+t.value+'"]';case zo:return'"'+t.value+'"';case jo:return'[data-testname="'+t.value+'"]';default:throw Error(c(365))}}function Hh(t,r){var s=[];t=[t,0];for(var u=0;u<t.length;){var d=t[u++],g=t[u++],S=r[g];if(d.tag!==5||!Gt(d)){for(;S!=null&&Ru(d,S);)g++,S=r[g];if(g===r.length)s.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return s}function Nu(t,r){if(!Dt)throw Error(c(363));t=ku(t),t=Hh(t,r),r=[],t=Array.from(t);for(var s=0;s<t.length;){var u=t[s++];if(u.tag===5)Gt(u)||r.push(u.stateNode);else for(u=u.child;u!==null;)t.push(u),u=u.sibling}return r}var hg=Math.ceil,Bo=h.ReactCurrentDispatcher,Au=h.ReactCurrentOwner,gt=h.ReactCurrentBatchConfig,Te=0,Ot=null,mt=null,Ft=0,or=0,Ai=cr(0),St=0,Ma=null,Bn=0,Uo=0,Fu=0,Na=null,Jt=null,Iu=0,Lu=1/0,Xr=null;function Fi(){Lu=ft()+500}var Ho=!1,Du=null,fn=null,Vo=!1,gn=null,Wo=0,Aa=0,Gu=null,Xo=-1,Ko=0;function Bt(){return Te&6?ft():Xo!==-1?Xo:Xo=ft()}function pn(t){return t.mode&1?Te&2&&Ft!==0?Ft&-Ft:K1.transition!==null?(Ko===0&&(Ko=fo()),Ko):(t=Pe,t!==0?t:Rt()):1}function vr(t,r,s,u){if(50<Aa)throw Aa=0,Gu=null,Error(c(185));Gn(t,s,u),(!(Te&2)||t!==Ot)&&(t===Ot&&(!(Te&2)&&(Uo|=s),St===4&&vn(t,Ft)),Zt(t,u),s===1&&Te===0&&!(r.mode&1)&&(Fi(),Ei&&W()))}function Zt(t,r){var s=t.callbackNode;jl(t,r);var u=_i(t,t===Ot?Ft:0);if(u===0)s!==null&&go(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(s!=null&&go(s),r===1)t.tag===0?Q(Wh.bind(null,t)):B(Wh.bind(null,t)),Le?ut(function(){!(Te&6)&&W()}):pa(va,W),s=null;else{switch(wi(u)){case 1:s=va;break;case 4:s=vo;break;case 16:s=ma;break;case 536870912:s=Rd;break;default:s=ma}s=t0(s,Vh.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Vh(t,r){if(Xo=-1,Ko=0,Te&6)throw Error(c(327));var s=t.callbackNode;if(Vn()&&t.callbackNode!==s)return null;var u=_i(t,t===Ot?Ft:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=qo(t,u);else{r=u;var d=Te;Te|=2;var g=qh();(Ot!==t||Ft!==r)&&(Xr=null,Fi(),Un(t,r));do try{pg();break}catch(A){Kh(t,A)}while(!0);Ql(),Bo.current=g,Te=d,mt!==null?r=0:(Ot=null,Ft=0,r=St)}if(r!==0){if(r===2&&(d=Si(t),d!==0&&(u=d,r=$u(t,d))),r===1)throw s=Ma,Un(t,0),vn(t,u),Zt(t,ft()),s;if(r===6)vn(t,u);else{if(d=t.current.alternate,!(u&30)&&!fg(d)&&(r=qo(t,u),r===2&&(g=Si(t),g!==0&&(u=g,r=$u(t,g))),r===1))throw s=Ma,Un(t,0),vn(t,u),Zt(t,ft()),s;switch(t.finishedWork=d,t.finishedLanes=u,r){case 0:case 1:throw Error(c(345));case 2:Hn(t,Jt,Xr);break;case 3:if(vn(t,u),(u&130023424)===u&&(r=Iu+500-ft(),10<r)){if(_i(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){Bt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=F(Hn.bind(null,t,Jt,Xr),r);break}Hn(t,Jt,Xr);break;case 4:if(vn(t,u),(u&4194240)===u)break;for(r=t.eventTimes,d=-1;0<u;){var S=31-qt(u);g=1<<S,S=r[S],S>d&&(d=S),u&=~g}if(u=d,u=ft()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*hg(u/1960))-u,10<u){t.timeoutHandle=F(Hn.bind(null,t,Jt,Xr),u);break}Hn(t,Jt,Xr);break;case 5:Hn(t,Jt,Xr);break;default:throw Error(c(329))}}}return Zt(t,ft()),t.callbackNode===s?Vh.bind(null,t):null}function $u(t,r){var s=Na;return t.current.memoizedState.isDehydrated&&(Un(t,r).flags|=256),t=qo(t,r),t!==2&&(r=Jt,Jt=s,r!==null&&ju(r)),t}function ju(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function fg(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!Yt(g(),d))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function vn(t,r){for(r&=~Fu,r&=~Uo,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-qt(r),u=1<<s;t[s]=-1,r&=~u}}function Wh(t){if(Te&6)throw Error(c(327));Vn();var r=_i(t,0);if(!(r&1))return Zt(t,ft()),null;var s=qo(t,r);if(t.tag!==0&&s===2){var u=Si(t);u!==0&&(r=u,s=$u(t,u))}if(s===1)throw s=Ma,Un(t,0),vn(t,r),Zt(t,ft()),s;if(s===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Hn(t,Jt,Xr),Zt(t,ft()),null}function Xh(t){gn!==null&&gn.tag===0&&!(Te&6)&&Vn();var r=Te;Te|=1;var s=gt.transition,u=Pe;try{if(gt.transition=null,Pe=1,t)return t()}finally{Pe=u,gt.transition=s,Te=r,!(Te&6)&&W()}}function zu(){or=Ai.current,Xe(Ai)}function Un(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==re&&(t.timeoutHandle=re,V(s)),mt!==null)for(s=mt.return;s!==null;){var u=s;switch(Wl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&pi();break;case 3:Ri(),Xe(it),Xe(Et),su();break;case 5:au(u);break;case 4:Ri();break;case 13:Xe(ot);break;case 19:Xe(ot);break;case 10:Jl(u.type._context);break;case 22:case 23:zu()}s=s.return}if(Ot=t,mt=t=mn(t.current,null),Ft=or=r,St=0,Ma=null,Fu=Uo=Bn=0,Jt=Na=null,jn!==null){for(r=0;r<jn.length;r++)if(s=jn[r],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var S=g.next;g.next=d,u.next=S}s.pending=u}jn=null}return t}function Kh(t,r){do{var s=mt;try{if(Ql(),bo.current=Ro,Oo){for(var u=st.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Oo=!1}if(zn=0,bt=_t=st=null,wa=!1,Ca=0,Au.current=null,s===null||s.return===null){St=1,Ma=r,mt=null;break}e:{var g=t,S=s.return,A=s,z=r;if(r=Ft,A.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Y=z,oe=A,Se=oe.tag;if(!(oe.mode&1)&&(Se===0||Se===11||Se===15)){var ee=oe.alternate;ee?(oe.updateQueue=ee.updateQueue,oe.memoizedState=ee.memoizedState,oe.lanes=ee.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Je=_h(S);if(Je!==null){Je.flags&=-257,Sh(Je,S,A,g,r),Je.mode&1&&yh(g,Y,r),r=Je,z=Y;var Ke=r.updateQueue;if(Ke===null){var er=new Set;er.add(z),r.updateQueue=er}else Ke.add(z);break e}else{if(!(r&1)){yh(g,Y,r),Bu();break e}z=Error(c(426))}}else if(tt&&A.mode&1){var Kr=_h(S);if(Kr!==null){!(Kr.flags&65536)&&(Kr.flags|=256),Sh(Kr,S,A,g,r),ql(Mi(z,A));break e}}g=z=Mi(z,A),St!==4&&(St=2),Na===null?Na=[g]:Na.push(g),g=S;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var j=vh(g,z,r);$d(g,j);break e;case 1:A=z;var I=g.type,H=g.stateNode;if(!(g.flags&128)&&(typeof I.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(fn===null||!fn.has(H)))){g.flags|=65536,r&=-r,g.lanes|=r;var te=mh(g,A,r);$d(g,te);break e}}g=g.return}while(g!==null)}Qh(s)}catch(fe){r=fe,mt===s&&s!==null&&(mt=s=s.return);continue}break}while(!0)}function qh(){var t=Bo.current;return Bo.current=Ro,t===null?Ro:t}function Bu(){(St===0||St===3||St===2)&&(St=4),Ot===null||!(Bn&268435455)&&!(Uo&268435455)||vn(Ot,Ft)}function qo(t,r){var s=Te;Te|=2;var u=qh();(Ot!==t||Ft!==r)&&(Xr=null,Un(t,r));do try{gg();break}catch(d){Kh(t,d)}while(!0);if(Ql(),Te=s,Bo.current=u,mt!==null)throw Error(c(261));return Ot=null,Ft=0,St}function gg(){for(;mt!==null;)Yh(mt)}function pg(){for(;mt!==null&&!po();)Yh(mt)}function Yh(t){var r=e0(t.alternate,t,or);t.memoizedProps=t.pendingProps,r===null?Qh(t):mt=r,Au.current=null}function Qh(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=lg(s,r),s!==null){s.flags&=32767,mt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,mt=null;return}}else if(s=sg(s,r,or),s!==null){mt=s;return}if(r=r.sibling,r!==null){mt=r;return}mt=r=t}while(r!==null);St===0&&(St=5)}function Hn(t,r,s){var u=Pe,d=gt.transition;try{gt.transition=null,Pe=1,vg(t,r,s,u)}finally{gt.transition=d,Pe=u}return null}function vg(t,r,s,u){do Vn();while(gn!==null);if(Te&6)throw Error(c(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(zl(t,g),t===Ot&&(mt=Ot=null,Ft=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Vo||(Vo=!0,t0(ma,function(){return Vn(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=gt.transition,gt.transition=null;var S=Pe;Pe=1;var A=Te;Te|=4,Au.current=null,cg(t,s),$h(s,t),ue(t.containerInfo),t.current=s,dg(s),Bl(),Te=A,Pe=S,gt.transition=g}else t.current=s;if(Vo&&(Vo=!1,gn=t,Wo=d),g=t.pendingLanes,g===0&&(fn=null),Ul(s.stateNode),Zt(t,ft()),r!==null)for(u=t.onRecoverableError,s=0;s<r.length;s++)d=r[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Ho)throw Ho=!1,t=Du,Du=null,t;return Wo&1&&t.tag!==0&&Vn(),g=t.pendingLanes,g&1?t===Gu?Aa++:(Aa=0,Gu=t):Aa=0,W(),null}function Vn(){if(gn!==null){var t=wi(Wo),r=gt.transition,s=Pe;try{if(gt.transition=null,Pe=16>t?16:t,gn===null)var u=!1;else{if(t=gn,gn=null,Wo=0,Te&6)throw Error(c(331));var d=Te;for(Te|=4,ie=t.current;ie!==null;){var g=ie,S=g.child;if(ie.flags&16){var A=g.deletions;if(A!==null){for(var z=0;z<A.length;z++){var Y=A[z];for(ie=Y;ie!==null;){var oe=ie;switch(oe.tag){case 0:case 11:case 15:ka(8,oe,g)}var Se=oe.child;if(Se!==null)Se.return=oe,ie=Se;else for(;ie!==null;){oe=ie;var ee=oe.sibling,Je=oe.return;if(Ih(oe),oe===Y){ie=null;break}if(ee!==null){ee.return=Je,ie=ee;break}ie=Je}}}var Ke=g.alternate;if(Ke!==null){var er=Ke.child;if(er!==null){Ke.child=null;do{var Kr=er.sibling;er.sibling=null,er=Kr}while(er!==null)}}ie=g}}if(g.subtreeFlags&2064&&S!==null)S.return=g,ie=S;else e:for(;ie!==null;){if(g=ie,g.flags&2048)switch(g.tag){case 0:case 11:case 15:ka(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,ie=j;break e}ie=g.return}}var I=t.current;for(ie=I;ie!==null;){S=ie;var H=S.child;if(S.subtreeFlags&2064&&H!==null)H.return=S,ie=H;else e:for(S=I;ie!==null;){if(A=ie,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Lo(9,A)}}catch(fe){rt(A,A.return,fe)}if(A===S){ie=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,ie=te;break e}ie=A.return}}if(Te=d,W(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Ci,t)}catch{}u=!0}return u}finally{Pe=s,gt.transition=r}}return!1}function Jh(t,r,s){r=Mi(s,r),r=vh(t,r,1),t=hn(t,r,1),r=Bt(),t!==null&&(Gn(t,1,r),Zt(t,r))}function rt(t,r,s){if(t.tag===3)Jh(t,t,s);else for(;r!==null;){if(r.tag===3){Jh(r,t,s);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(fn===null||!fn.has(u))){t=Mi(s,t),t=mh(r,t,1),r=hn(r,t,1),t=Bt(),r!==null&&(Gn(r,1,t),Zt(r,t));break}}r=r.return}}function mg(t,r,s){var u=t.pingCache;u!==null&&u.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&s,Ot===t&&(Ft&s)===s&&(St===4||St===3&&(Ft&130023424)===Ft&&500>ft()-Iu?Un(t,0):Fu|=s),Zt(t,r)}function Zh(t,r){r===0&&(t.mode&1?(r=un,un<<=1,!(un&130023424)&&(un=4194304)):r=1);var s=Bt();t=Ar(t,r),t!==null&&(Gn(t,r,s),Zt(t,s))}function yg(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Zh(t,s)}function _g(t,r){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(c(314))}u!==null&&u.delete(r),Zh(t,s)}var e0;e0=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||it.current)Qt=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Qt=!1,og(t,r,s);Qt=!!(t.flags&131072)}else Qt=!1,tt&&r.flags&1048576&&Md(r,Pt,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;No(t,r),t=r.pendingProps;var d=ln(r,Et.current);Oi(r,s),d=cu(null,r,u,t,d,s);var g=du();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Nt(u)?(g=!0,mi(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,tu(r),d.updater=Co,r.stateNode=d,d._reactInternals=r,nu(r,u,t,s),r=_u(null,r,u,!0,g,s)):(r.tag=0,tt&&g&&Vl(r),Kt(null,r,d,s),r=r.child),r;case 16:u=r.elementType;e:{switch(No(t,r),t=r.pendingProps,d=u._init,u=d(u._payload),r.type=u,d=r.tag=xg(u),t=Pr(u,t),d){case 0:r=yu(null,r,u,t,s);break e;case 1:r=bh(null,r,u,t,s);break e;case 11:r=xh(null,r,u,t,s);break e;case 14:r=wh(null,r,u,Pr(u.type,t),s);break e}throw Error(c(306,u,""))}return r;case 0:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:Pr(u,d),yu(t,r,u,d,s);case 1:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:Pr(u,d),bh(t,r,u,d,s);case 3:e:{if(Oh(r),t===null)throw Error(c(387));u=r.pendingProps,g=r.memoizedState,d=g.element,Gd(t,r),wo(r,u,null,s);var S=r.memoizedState;if(u=S.element,Ne&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=Mi(Error(c(423)),r),r=Th(t,r,u,s,d);break e}else if(u!==d){d=Mi(Error(c(424)),r),r=Th(t,r,u,s,d);break e}else for(Ne&&(hr=la(r.stateNode.containerInfo),ar=r,tt=!0,Er=null,ya=!1),s=Xd(r,null,u,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Pi(),u===d){r=Wr(t,r,s);break e}Kt(t,r,u,s)}r=r.child}return r;case 5:return Kd(r),t===null&&Kl(r),u=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,S=d.children,Ye(u,d)?S=null:g!==null&&Ye(u,g)&&(r.flags|=32),Ph(t,r),Kt(t,r,S,s),r.child;case 6:return t===null&&Kl(r),null;case 13:return kh(t,r,s);case 4:return iu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Ti(r,null,u,s):Kt(t,r,u,s),r.child;case 11:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:Pr(u,d),xh(t,r,u,d,s);case 7:return Kt(t,r,r.pendingProps,s),r.child;case 8:return Kt(t,r,r.pendingProps.children,s),r.child;case 12:return Kt(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(u=r.type._context,d=r.pendingProps,g=r.memoizedProps,S=d.value,Ld(r,u,S),g!==null)if(Yt(g.value,S)){if(g.children===d.children&&!it.current){r=Wr(t,r,s);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var A=g.dependencies;if(A!==null){S=g.child;for(var z=A.firstContext;z!==null;){if(z.context===u){if(g.tag===1){z=Vr(-1,s&-s),z.tag=2;var Y=g.updateQueue;if(Y!==null){Y=Y.shared;var oe=Y.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),Y.pending=z}}g.lanes|=s,z=g.alternate,z!==null&&(z.lanes|=s),Zl(g.return,s,r),A.lanes|=s;break}z=z.next}}else if(g.tag===10)S=g.type===r.type?null:g.child;else if(g.tag===18){if(S=g.return,S===null)throw Error(c(341));S.lanes|=s,A=S.alternate,A!==null&&(A.lanes|=s),Zl(S,s,r),S=g.sibling}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}Kt(t,r,d.children,s),r=r.child}return r;case 9:return d=r.type,u=r.pendingProps.children,Oi(r,s),d=fr(d),u=u(d),r.flags|=1,Kt(t,r,u,s),r.child;case 14:return u=r.type,d=Pr(u,r.pendingProps),d=Pr(u.type,d),wh(t,r,u,d,s);case 15:return Ch(t,r,r.type,r.pendingProps,s);case 17:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:Pr(u,d),No(t,r),r.tag=1,Nt(u)?(t=!0,mi(r)):t=!1,Oi(r,s),Ud(r,u,d),nu(r,u,d,s),_u(null,r,u,!0,t,s);case 19:return Mh(t,r,s);case 22:return Eh(t,r,s)}throw Error(c(156,r.tag))};function t0(t,r){return pa(t,r)}function Sg(t,r,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,r,s,u){return new Sg(t,r,s,u)}function Uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xg(t){if(typeof t=="function")return Uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C)return 11;if(t===k)return 14}return 2}function mn(t,r){var s=t.alternate;return s===null?(s=mr(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Yo(t,r,s,u,d,g){var S=2;if(u=t,typeof t=="function")Uu(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case m:return Wn(s.children,d,g,r);case E:S=8,d|=8;break;case w:return t=mr(12,s,r,d|2),t.elementType=w,t.lanes=g,t;case P:return t=mr(13,s,r,d),t.elementType=P,t.lanes=g,t;case T:return t=mr(19,s,r,d),t.elementType=T,t.lanes=g,t;case x:return Qo(s,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:S=10;break e;case y:S=9;break e;case C:S=11;break e;case k:S=14;break e;case v:S=16,u=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return r=mr(S,s,r,d),r.elementType=t,r.type=u,r.lanes=g,r}function Wn(t,r,s,u){return t=mr(7,t,u,r),t.lanes=s,t}function Qo(t,r,s,u){return t=mr(22,t,u,r),t.elementType=x,t.lanes=s,t.stateNode={isHidden:!1},t}function Hu(t,r,s){return t=mr(6,t,null,r),t.lanes=s,t}function Vu(t,r,s){return r=mr(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function wg(t,r,s,u,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=re,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cn(0),this.expirationTimes=cn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.identifierPrefix=u,this.onRecoverableError=d,Ne&&(this.mutableSourceEagerHydrationData=null)}function r0(t,r,s,u,d,g,S,A,z){return t=new wg(t,r,s,A,z),r===1?(r=1,g===!0&&(r|=8)):r=0,g=mr(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(g),t}function n0(t){if(!t)return xr;t=t._reactInternals;e:{if($(t)!==t||t.tag!==1)throw Error(c(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Nt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(c(171))}if(t.tag===1){var s=t.type;if(Nt(s))return fa(t,s,r)}return r}function i0(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=K(r),t===null?null:t.stateNode}function a0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Jo(t,r){a0(t,r),(t=t.alternate)&&a0(t,r)}function Cg(t){return t=K(t),t===null?null:t.stateNode}function Eg(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Ar(t,134217728);if(r!==null){var s=Bt();vr(r,t,134217728,s)}Jo(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Ar(t,1);if(r!==null){var s=Bt();vr(r,t,1,s)}Jo(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=pn(t),s=Ar(t,r);if(s!==null){var u=Bt();vr(s,t,r,u)}Jo(t,r)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=Dn(r.pendingLanes);s!==0&&(xi(r,s|1),Zt(r,ft()),!(Te&6)&&(Fi(),W()))}break;case 13:Xh(function(){var u=Ar(t,1);if(u!==null){var d=Bt();vr(u,t,1,d)}}),Jo(t,1)}},n.batchedUpdates=function(t,r){var s=Te;Te|=1;try{return t(r)}finally{Te=s,Te===0&&(Fi(),Ei&&W())}},n.createComponentSelector=function(t){return{$$typeof:Do,value:t}},n.createContainer=function(t,r,s,u,d,g,S){return r0(t,r,!1,null,s,u,d,g,S)},n.createHasPseudoClassSelector=function(t){return{$$typeof:Go,value:t}},n.createHydrationContainer=function(t,r,s,u,d,g,S,A,z){return t=r0(s,u,!0,t,d,g,S,A,z),t.context=n0(null),s=t.current,u=Bt(),d=pn(s),g=Vr(u,d),g.callback=r??null,hn(s,g,d),t.current.lanes=d,Gn(t,d,u),Zt(t,u),t},n.createPortal=function(t,r,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:u==null?null:""+u,children:t,containerInfo:r,implementation:s}},n.createRoleSelector=function(t){return{$$typeof:$o,value:t}},n.createTestNameSelector=function(t){return{$$typeof:jo,value:t}},n.createTextSelector=function(t){return{$$typeof:zo,value:t}},n.deferredUpdates=function(t){var r=Pe,s=gt.transition;try{return gt.transition=null,Pe=16,t()}finally{Pe=r,gt.transition=s}},n.discreteUpdates=function(t,r,s,u,d){var g=Pe,S=gt.transition;try{return gt.transition=null,Pe=1,t(r,s,u,d)}finally{Pe=g,gt.transition=S,Te===0&&Fi()}},n.findAllNodes=Nu,n.findBoundingRects=function(t,r){if(!Dt)throw Error(c(363));r=Nu(t,r),t=[];for(var s=0;s<r.length;s++)t.push(Ue(r[s]));for(r=t.length-1;0<r;r--){s=t[r];for(var u=s.x,d=u+s.width,g=s.y,S=g+s.height,A=r-1;0<=A;A--)if(r!==A){var z=t[A],Y=z.x,oe=Y+z.width,Se=z.y,ee=Se+z.height;if(u>=Y&&g>=Se&&d<=oe&&S<=ee){t.splice(r,1);break}else if(u!==Y||s.width!==z.width||ee<g||Se>S){if(!(g!==Se||s.height!==z.height||oe<u||Y>d)){Y>u&&(z.width+=Y-u,z.x=u),oe<d&&(z.width=d-Y),t.splice(r,1);break}}else{Se>g&&(z.height+=Se-g,z.y=g),ee<S&&(z.height=S-Se),t.splice(r,1);break}}}return t},n.findHostInstance=i0,n.findHostInstanceWithNoPortals=function(t){return t=D(t),t=t!==null?Z(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return i0(t)},n.flushControlled=function(t){var r=Te;Te|=1;var s=gt.transition,u=Pe;try{gt.transition=null,Pe=1,t()}finally{Pe=u,gt.transition=s,Te=r,Te===0&&(Fi(),W())}},n.flushPassiveEffects=Vn,n.flushSync=Xh,n.focusWithin=function(t,r){if(!Dt)throw Error(c(363));for(t=ku(t),r=Hh(t,r),r=Array.from(r),t=0;t<r.length;){var s=r[t++];if(!Gt(s)){if(s.tag===5&&an(s.stateNode))return!0;for(s=s.child;s!==null;)r.push(s),s=s.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Pe},n.getFindAllNodesFailureDescription=function(t,r){if(!Dt)throw Error(c(363));var s=0,u=[];t=[ku(t),0];for(var d=0;d<t.length;){var g=t[d++],S=t[d++],A=r[S];if((g.tag!==5||!Gt(g))&&(Ru(g,A)&&(u.push(Mu(A)),S++,S>s&&(s=S)),S<r.length))for(g=g.child;g!==null;)t.push(g,S),g=g.sibling}if(s<r.length){for(t=[];s<r.length;s++)t.push(Mu(r[s]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return le(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:Cg,findFiberByHostInstance:t.findFiberByHostInstance||Eg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{Ci=r.inject(t),dr=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,s,u){if(!Dt)throw Error(c(363));t=Nu(t,r);var d=Mn(t,s,u).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var s=r._getVersion;s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s)},n.runWithPriority=function(t,r){var s=Pe;try{return Pe=t,r()}finally{Pe=s}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,s,u){var d=r.current,g=Bt(),S=pn(d);return s=n0(s),r.context===null?r.context=s:r.pendingContext=s,r=Vr(g,S),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=hn(d,r,S),t!==null&&(vr(t,d,S,g),xo(t,d,S)),S},n};p1.exports=u4;var c4=p1.exports;const d4=ws(c4);var v1={exports:{}},ii={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ii.ConcurrentRoot=1;ii.ContinuousEventPriority=4;ii.DefaultEventPriority=16;ii.DiscreteEventPriority=1;ii.IdleEventPriority=536870912;ii.LegacyRoot=0;v1.exports=ii;var m1=v1.exports;const J0={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Z0=!1,ef=!1;const Qc=".react-konva-event",h4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,f4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,g4={};function vl(a,e,n=g4){if(!Z0&&"zIndex"in e&&(console.warn(f4),Z0=!0),!ef&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(h4),ef=!0)}for(var l in n)if(!J0[l]){var c=l.slice(0,2)==="on",h=n[l]!==e[l];if(c&&h){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),a.off(f,n[l])}var p=!e.hasOwnProperty(l);p&&a.setAttr(l,void 0)}var m=e._useStrictMode,E={},w=!1;const _={};for(var l in e)if(!J0[l]){var c=l.slice(0,2)==="on",y=n[l]!==e[l];if(c&&y){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e[l]&&(_[f]=e[l])}!c&&(e[l]!==n[l]||m&&e[l]!==a.getAttr(l))&&(w=!0,E[l]=e[l])}w&&(a.setAttrs(E),kn(a));for(var f in _)a.on(f+Qc,_[f])}function kn(a){if(!be.Konva.autoDrawEnabled){var e=a.getLayer()||a.getStage();e&&e.batchDraw()}}const y1={},p4={};Wa.Node.prototype._applyProps=vl;function v4(a,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}a.add(e),kn(a)}function m4(a,e,n){let i=Wa[a];i||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Wa.Group);const o={},l={};for(var c in e){var h=c.slice(0,2)==="on";h?l[c]=e[c]:o[c]=e[c]}const f=new i(o);return vl(f,l),f}function y4(a,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function _4(a,e,n){return!1}function S4(a){return a}function x4(){return null}function w4(){return null}function C4(a,e,n,i){return p4}function E4(){}function P4(a){}function b4(a,e){return!1}function O4(){return y1}function T4(){return y1}const k4=setTimeout,R4=clearTimeout,M4=-1;function N4(a,e){return!1}const A4=!1,F4=!0,I4=!0;function L4(a,e){e.parent===a?e.moveToTop():a.add(e),kn(a)}function D4(a,e){e.parent===a?e.moveToTop():a.add(e),kn(a)}function _1(a,e,n){e._remove(),a.add(e),e.setZIndex(n.getZIndex()),kn(a)}function G4(a,e,n){_1(a,e,n)}function $4(a,e){e.destroy(),e.off(Qc),kn(a)}function j4(a,e){e.destroy(),e.off(Qc),kn(a)}function z4(a,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function B4(a,e,n){}function U4(a,e,n,i,o){vl(a,o,i)}function H4(a){a.hide(),kn(a)}function V4(a){}function W4(a,e){(e.visible==null||e.visible)&&a.show()}function X4(a,e){}function K4(a){}function q4(){}const Y4=()=>m1.DefaultEventPriority,Q4=Object.freeze(Object.defineProperty({__proto__:null,appendChild:L4,appendChildToContainer:D4,appendInitialChild:v4,cancelTimeout:R4,clearContainer:K4,commitMount:B4,commitTextUpdate:z4,commitUpdate:U4,createInstance:m4,createTextInstance:y4,detachDeletedInstance:q4,finalizeInitialChildren:_4,getChildHostContext:T4,getCurrentEventPriority:Y4,getPublicInstance:S4,getRootHostContext:O4,hideInstance:H4,hideTextInstance:V4,idlePriority:fs.unstable_IdlePriority,insertBefore:_1,insertInContainerBefore:G4,isPrimaryRenderer:A4,noTimeout:M4,now:fs.unstable_now,prepareForCommit:x4,preparePortalMount:w4,prepareUpdate:C4,removeChild:$4,removeChildFromContainer:j4,resetAfterCommit:E4,resetTextContent:P4,run:fs.unstable_runWithPriority,scheduleTimeout:k4,shouldDeprioritizeSubtree:b4,shouldSetTextContent:N4,supportsMutation:I4,unhideInstance:W4,unhideTextInstance:X4,warnsIfNotActing:F4},Symbol.toStringTag,{value:"Module"}));var J4=Object.defineProperty,Z4=Object.defineProperties,e5=Object.getOwnPropertyDescriptors,tf=Object.getOwnPropertySymbols,t5=Object.prototype.hasOwnProperty,r5=Object.prototype.propertyIsEnumerable,rf=(a,e,n)=>e in a?J4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,nf=(a,e)=>{for(var n in e||(e={}))t5.call(e,n)&&rf(a,n,e[n]);if(tf)for(var n of tf(e))r5.call(e,n)&&rf(a,n,e[n]);return a},n5=(a,e)=>Z4(a,e5(e));function S1(a,e,n){if(!a)return;if(n(a)===!0)return a;let i=e?a.return:a.child;for(;i;){const o=S1(i,e,n);if(o)return o;i=e?null:i.sibling}}function x1(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const Jc=x1(N.createContext(null));class w1 extends N.Component{render(){return N.createElement(Jc.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:af,ReactCurrentDispatcher:of}=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function i5(){const a=N.useContext(Jc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const i of[af?.current,a,a?.alternate]){if(!i)continue;const o=S1(i,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(o)return o}},[a,e])}function a5(){var a,e;const n=i5(),[i]=N.useState(()=>new Map);i.clear();let o=n;for(;o;){const l=(a=o.type)==null?void 0:a._context;l&&l!==Jc&&!i.has(l)&&i.set(l,(e=of?.current)==null?void 0:e.readContext(x1(l))),o=o.return}return i}function o5(){const a=a5();return N.useMemo(()=>Array.from(a.keys()).reduce((e,n)=>i=>N.createElement(e,null,N.createElement(n.Provider,n5(nf({},i),{value:a.get(n)}))),e=>N.createElement(w1,nf({},e))),[a])}function s5(a){const e=Ve.useRef({});return Ve.useLayoutEffect(()=>{e.current=a}),Ve.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const l5=a=>{const e=Ve.useRef(),n=Ve.useRef(),i=Ve.useRef(),o=s5(a),l=o5(),c=h=>{const{forwardedRef:f}=a;f&&(typeof f=="function"?f(h):f.current=h)};return Ve.useLayoutEffect(()=>(n.current=new Wa.Stage({width:a.width,height:a.height,container:e.current}),c(n.current),i.current=Ba.createContainer(n.current,m1.LegacyRoot,!1,null),Ba.updateContainer(Ve.createElement(l,{},a.children),i.current),()=>{Wa.isBrowser&&(c(null),Ba.updateContainer(null,i.current,null),n.current.destroy())}),[]),Ve.useLayoutEffect(()=>{c(n.current),vl(n.current,a,o),Ba.updateContainer(Ve.createElement(l,{},a.children),i.current,null)}),Ve.createElement("div",{ref:e,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},u5="Layer",c5="Rect",d5="Image",h5="Text",Ba=d4(Q4);Ba.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Ve.version,rendererPackageName:"react-konva"});const f5=Ve.forwardRef((a,e)=>Ve.createElement(w1,{},Ve.createElement(l5,{...a,forwardedRef:e}))),g5=({imageSrc:a,objectBoxes:e,labelColors:n})=>{const[i,o]=N.useState({width:0,height:0}),[l,c]=N.useState({width:450,height:450}),[h,f]=N.useState(new window.Image),[p,m]=N.useState(1),[E,w]=N.useState({x:0,y:0}),_=y=>{y.evt.preventDefault();const P=y.target.getStage().getPointerPosition(),T=y.evt.deltaY>0?p/1.1:p*1.1;m(T);const k={x:P.x-(P.x-E.x)*(T/p),y:P.y-(P.y-E.y)*(T/p)};w(k)};return N.useEffect(()=>{const y=new window.Image;y.src=a,f(y),y.onload=()=>{y.width/y.height,l.width/l.height;let C=y.width,P=y.height;m(1),w({x:0,y:0}),o({width:C,height:P})}},[a]),G.jsx("div",{children:G.jsx(f5,{width:l.width,height:l.height,onWheel:_,draggable:!0,children:G.jsxs(u5,{children:[G.jsx(d5,{image:h,width:i.width,height:i.height,x:E.x,y:E.y,scaleX:p,scaleY:p}),e.map((y,C)=>G.jsxs(Ve.Fragment,{children:[G.jsx(c5,{x:y.x*p+E.x,y:y.y*p+E.y,width:y.width*p,height:y.height*p,fill:"rgba(0,0,0,0)",stroke:n[y.label],strokeWidth:2}),G.jsx(h5,{text:y.label,x:y.x*p+E.x,y:y.y*p+E.y,fontSize:12,fill:n[y.label]})]},C))]})})})},p5=g5;var Zc={},ml={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});function v5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var m5=function a(e,n){v5(this,a),this.data=e,this.text=n.text||e,this.options=n};rr.default=m5;Object.defineProperty(ml,"__esModule",{value:!0});ml.CODE39=void 0;var y5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),_5=rr,S5=x5(_5);function x5(a){return a&&a.__esModule?a:{default:a}}function w5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function C5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function E5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var P5=function(a){E5(e,a);function e(n,i){return w5(this,e),n=n.toUpperCase(),i.mod43&&(n+=T5(k5(n))),C5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return y5(e,[{key:"encode",value:function(){for(var i=uc("*"),o=0;o<this.data.length;o++)i+=uc(this.data[o])+"0";return i+=uc("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(S5.default),C1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],b5=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function uc(a){return O5(E1(a))}function O5(a){return b5[a].toString(2)}function T5(a){return C1[a]}function E1(a){return C1.indexOf(a)}function k5(a){for(var e=0,n=0;n<a.length;n++)e+=E1(a[n]);return e=e%43,e}ml.CODE39=P5;var jr={},ed={},Ji={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var Ga;function cc(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var P1=Ze.SET_A=0,b1=Ze.SET_B=1,O1=Ze.SET_C=2;Ze.SHIFT=98;var R5=Ze.START_A=103,M5=Ze.START_B=104,N5=Ze.START_C=105;Ze.MODULO=103;Ze.STOP=106;Ze.FNC1=207;Ze.SET_BY_CODE=(Ga={},cc(Ga,R5,P1),cc(Ga,M5,b1),cc(Ga,N5,O1),Ga);Ze.SWAP={101:P1,100:b1,99:O1};Ze.A_START_CHAR="Ð";Ze.B_START_CHAR="Ñ";Ze.C_START_CHAR="Ò";Ze.A_CHARS="[\0-_È-Ï]";Ze.B_CHARS="[ -È-Ï]";Ze.C_CHARS="(Ï*[0-9]{2}Ï*)";Ze.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Ji,"__esModule",{value:!0});var A5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),F5=rr,I5=L5(F5),sr=Ze;function L5(a){return a&&a.__esModule?a:{default:a}}function D5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function G5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function $5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var j5=function(a){$5(e,a);function e(n,i){D5(this,e);var o=G5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return A5(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=sr.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(sr.FNC1);var c=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+c.result+e.getBar((c.checksum+o)%sr.MODULO)+e.getBar(sr.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return sr.BARS[i]?sr.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===sr.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===sr.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var c=void 0,h=void 0;if(i[0]>=200){h=i.shift()-105;var f=sr.SWAP[h];f!==void 0?c=e.next(i,o+1,f):((l===sr.SET_A||l===sr.SET_B)&&h===sr.SHIFT&&(i[0]=l===sr.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),c=e.next(i,o+1,l))}else h=e.correctIndex(i,l),c=e.next(i,o+1,l);var p=e.getBar(h),m=h*o;return{result:p+c.result,checksum:m+c.checksum}}}]),e}(I5.default);Ji.default=j5;var td={};Object.defineProperty(td,"__esModule",{value:!0});var xn=Ze,T1=function(e){return e.match(new RegExp("^"+xn.A_CHARS+"*"))[0].length},k1=function(e){return e.match(new RegExp("^"+xn.B_CHARS+"*"))[0].length},R1=function(e){return e.match(new RegExp("^"+xn.C_CHARS+"*"))[0]};function rd(a,e){var n=e?xn.A_CHARS:xn.B_CHARS,i=a.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"Ì"+M1(a.substring(i[1].length));var o=a.match(new RegExp("^"+n+"+"))[0];return o.length===a.length?a:o+String.fromCharCode(e?205:206)+rd(a.substring(o.length),!e)}function M1(a){var e=R1(a),n=e.length;if(n===a.length)return a;a=a.substring(n);var i=T1(a)>=k1(a);return e+String.fromCharCode(i?206:205)+rd(a,i)}td.default=function(a){var e=void 0,n=R1(a).length;if(n>=2)e=xn.C_START_CHAR+M1(a);else{var i=T1(a)>k1(a);e=(i?xn.A_START_CHAR:xn.B_START_CHAR)+rd(a,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return"Ë"+l})};Object.defineProperty(ed,"__esModule",{value:!0});var z5=Ji,B5=N1(z5),U5=td,H5=N1(U5);function N1(a){return a&&a.__esModule?a:{default:a}}function V5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function dc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function W5(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var X5=function(a){W5(e,a);function e(n,i){if(V5(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=dc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,H5.default)(n),i));else var o=dc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return dc(o)}return e}(B5.default);ed.default=X5;var nd={};Object.defineProperty(nd,"__esModule",{value:!0});var K5=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),q5=Ji,Y5=Q5(q5),sf=Ze;function Q5(a){return a&&a.__esModule?a:{default:a}}function J5(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Z5(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function e6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var t6=function(a){e6(e,a);function e(n,i){return J5(this,e),Z5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,sf.A_START_CHAR+n,i))}return K5(e,[{key:"valid",value:function(){return new RegExp("^"+sf.A_CHARS+"+$").test(this.data)}}]),e}(Y5.default);nd.default=t6;var id={};Object.defineProperty(id,"__esModule",{value:!0});var r6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),n6=Ji,i6=a6(n6),lf=Ze;function a6(a){return a&&a.__esModule?a:{default:a}}function o6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function s6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function l6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var u6=function(a){l6(e,a);function e(n,i){return o6(this,e),s6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,lf.B_START_CHAR+n,i))}return r6(e,[{key:"valid",value:function(){return new RegExp("^"+lf.B_CHARS+"+$").test(this.data)}}]),e}(i6.default);id.default=u6;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});var c6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),d6=Ji,h6=f6(d6),uf=Ze;function f6(a){return a&&a.__esModule?a:{default:a}}function g6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function p6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function v6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var m6=function(a){v6(e,a);function e(n,i){return g6(this,e),p6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,uf.C_START_CHAR+n,i))}return c6(e,[{key:"valid",value:function(){return new RegExp("^"+uf.C_CHARS+"+$").test(this.data)}}]),e}(h6.default);ad.default=m6;Object.defineProperty(jr,"__esModule",{value:!0});jr.CODE128C=jr.CODE128B=jr.CODE128A=jr.CODE128=void 0;var y6=ed,_6=yl(y6),S6=nd,x6=yl(S6),w6=id,C6=yl(w6),E6=ad,P6=yl(E6);function yl(a){return a&&a.__esModule?a:{default:a}}jr.CODE128=_6.default;jr.CODE128A=x6.default;jr.CODE128B=C6.default;jr.CODE128C=P6.default;var tr={},od={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.SIDE_BIN="101";Sr.MIDDLE_BIN="01010";Sr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};Sr.EAN2_STRUCTURE=["LL","LG","GL","GG"];Sr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];Sr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var _l={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});var b6=Sr,O6=function(e,n,i){var o=e.split("").map(function(c,h){return b6.BINARIES[n[h]]}).map(function(c,h){return c?c[e[h]]:""});if(i){var l=e.length-1;o=o.map(function(c,h){return h<l?c+i:c})}return o.join("")};ai.default=O6;Object.defineProperty(_l,"__esModule",{value:!0});var T6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),Gi=Sr,k6=ai,cf=A1(k6),R6=rr,M6=A1(R6);function A1(a){return a&&a.__esModule?a:{default:a}}function N6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function A6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function F6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var I6=function(a){F6(e,a);function e(n,i){N6(this,e);var o=A6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return T6(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,cf.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:Gi.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:Gi.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:Gi.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[Gi.SIDE_BIN,this.leftEncode(),Gi.MIDDLE_BIN,this.rightEncode(),Gi.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(M6.default);_l.default=I6;Object.defineProperty(od,"__esModule",{value:!0});var L6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),$a=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},D6=Sr,G6=_l,$6=j6(G6);function j6(a){return a&&a.__esModule?a:{default:a}}function z6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function B6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function U6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var df=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},H6=function(a){U6(e,a);function e(n,i){z6(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=df(n));var o=B6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return L6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===df(this.data)}},{key:"leftText",value:function(){return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=D6.EAN13_STRUCTURE[this.data[0]];return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return $a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=$a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}($6.default);od.default=H6;var sd={};Object.defineProperty(sd,"__esModule",{value:!0});var V6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),ls=function a(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:a(l,n,i)}else{if("value"in o)return o.value;var c=o.get;return c===void 0?void 0:c.call(i)}},W6=_l,X6=K6(W6);function K6(a){return a&&a.__esModule?a:{default:a}}function q6(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Y6(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Q6(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var hf=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},J6=function(a){Q6(e,a);function e(n,i){return q6(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=hf(n)),Y6(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return V6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===hf(this.data)}},{key:"leftText",value:function(){return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return ls(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(X6.default);sd.default=J6;var ld={};Object.defineProperty(ld,"__esModule",{value:!0});var Z6=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),e8=Sr,t8=ai,r8=F1(t8),n8=rr,i8=F1(n8);function F1(a){return a&&a.__esModule?a:{default:a}}function a8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function s8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var l8=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},u8=function(a){s8(e,a);function e(n,i){return a8(this,e),o8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return Z6(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=e8.EAN5_STRUCTURE[l8(this.data)];return{data:"1011"+(0,r8.default)(this.data,i,"01"),text:this.text}}}]),e}(i8.default);ld.default=u8;var ud={};Object.defineProperty(ud,"__esModule",{value:!0});var c8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),d8=Sr,h8=ai,f8=I1(h8),g8=rr,p8=I1(g8);function I1(a){return a&&a.__esModule?a:{default:a}}function v8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function m8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function y8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var _8=function(a){y8(e,a);function e(n,i){return v8(this,e),m8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return c8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=d8.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,f8.default)(this.data,i,"01"),text:this.text}}}]),e}(p8.default);ud.default=_8;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var S8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();eo.checksum=Rc;var x8=ai,$i=L1(x8),w8=rr,C8=L1(w8);function L1(a){return a&&a.__esModule?a:{default:a}}function E8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function P8(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function b8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var O8=function(a){b8(e,a);function e(n,i){E8(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=Rc(n));var o=P8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return S8(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Rc(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,$i.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,$i.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,$i.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,$i.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,$i.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,$i.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(C8.default);function Rc(a){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(a[n]);for(n=0;n<11;n+=2)e+=parseInt(a[n])*3;return(10-e%10)%10}eo.default=O8;var cd={};Object.defineProperty(cd,"__esModule",{value:!0});var T8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),k8=ai,R8=D1(k8),M8=rr,N8=D1(M8),A8=eo;function D1(a){return a&&a.__esModule?a:{default:a}}function F8(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function hc(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function I8(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var L8=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],D8=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],G8=function(a){I8(e,a);function e(n,i){F8(this,e);var o=hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=ff(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=ff(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return hc(o);else return hc(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return T8(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=D8[parseInt(o)][parseInt(i)];return(0,R8.default)(this.middleDigits,l)}}]),e}(N8.default);function ff(a,e){for(var n=parseInt(a[a.length-1]),i=L8[n],o="",l=0,c=0;c<i.length;c++){var h=i[c];h==="X"?o+=a[l++]:o+=h}return o=""+e+o,""+o+(0,A8.checksum)(o)}cd.default=G8;Object.defineProperty(tr,"__esModule",{value:!0});tr.UPCE=tr.UPC=tr.EAN2=tr.EAN5=tr.EAN8=tr.EAN13=void 0;var $8=od,j8=Zi($8),z8=sd,B8=Zi(z8),U8=ld,H8=Zi(U8),V8=ud,W8=Zi(V8),X8=eo,K8=Zi(X8),q8=cd,Y8=Zi(q8);function Zi(a){return a&&a.__esModule?a:{default:a}}tr.EAN13=j8.default;tr.EAN8=B8.default;tr.EAN5=H8.default;tr.EAN2=W8.default;tr.UPC=K8.default;tr.UPCE=Y8.default;var Vi={},Sl={},to={};Object.defineProperty(to,"__esModule",{value:!0});to.START_BIN="1010";to.END_BIN="11101";to.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Sl,"__esModule",{value:!0});var Q8=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),us=to,J8=rr,Z8=ey(J8);function ey(a){return a&&a.__esModule?a:{default:a}}function ty(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function ry(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function ny(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var iy=function(a){ny(e,a);function e(){return ty(this,e),ry(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Q8(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:us.START_BIN+o+us.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=us.BINARIES[i[1]];return us.BINARIES[i[0]].split("").map(function(l,c){return(l==="1"?"111":"1")+(o[c]==="1"?"000":"0")}).join("")}}]),e}(Z8.default);Sl.default=iy;var dd={};Object.defineProperty(dd,"__esModule",{value:!0});var ay=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),oy=Sl,sy=ly(oy);function ly(a){return a&&a.__esModule?a:{default:a}}function uy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function cy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function dy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var gf=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},hy=function(a){dy(e,a);function e(n,i){return uy(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=gf(n)),cy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return ay(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===gf(this.data)}}]),e}(sy.default);dd.default=hy;Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ITF14=Vi.ITF=void 0;var fy=Sl,gy=G1(fy),py=dd,vy=G1(py);function G1(a){return a&&a.__esModule?a:{default:a}}Vi.ITF=gy.default;Vi.ITF14=vy.default;var _r={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});var my=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),yy=rr,_y=Sy(yy);function Sy(a){return a&&a.__esModule?a:{default:a}}function xy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function wy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Cy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Ey=function(a){Cy(e,a);function e(n,i){return xy(this,e),wy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return my(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),c=l.toString(2);c=Py(c,4-c.length);for(var h=0;h<c.length;h++)i+=c[h]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(_y.default);function Py(a,e){for(var n=0;n<e;n++)a="0"+a;return a}oi.default=Ey;var hd={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.mod10=by;si.mod11=Oy;function by(a){for(var e=0,n=0;n<a.length;n++){var i=parseInt(a[n]);(n+a.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function Oy(a){for(var e=0,n=[2,3,4,5,6,7],i=0;i<a.length;i++){var o=parseInt(a[a.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(hd,"__esModule",{value:!0});var Ty=oi,ky=My(Ty),Ry=si;function My(a){return a&&a.__esModule?a:{default:a}}function Ny(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Ay(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Fy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Iy=function(a){Fy(e,a);function e(n,i){return Ny(this,e),Ay(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Ry.mod10)(n),i))}return e}(ky.default);hd.default=Iy;var fd={};Object.defineProperty(fd,"__esModule",{value:!0});var Ly=oi,Dy=$y(Ly),Gy=si;function $y(a){return a&&a.__esModule?a:{default:a}}function jy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function zy(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function By(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Uy=function(a){By(e,a);function e(n,i){return jy(this,e),zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Gy.mod11)(n),i))}return e}(Dy.default);fd.default=Uy;var gd={};Object.defineProperty(gd,"__esModule",{value:!0});var Hy=oi,Vy=Wy(Hy),pf=si;function Wy(a){return a&&a.__esModule?a:{default:a}}function Xy(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Ky(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function qy(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var Yy=function(a){qy(e,a);function e(n,i){return Xy(this,e),n+=(0,pf.mod10)(n),n+=(0,pf.mod10)(n),Ky(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(Vy.default);gd.default=Yy;var pd={};Object.defineProperty(pd,"__esModule",{value:!0});var Qy=oi,Jy=Zy(Qy),vf=si;function Zy(a){return a&&a.__esModule?a:{default:a}}function e_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function t_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function r_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var n_=function(a){r_(e,a);function e(n,i){return e_(this,e),n+=(0,vf.mod11)(n),n+=(0,vf.mod10)(n),t_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(Jy.default);pd.default=n_;Object.defineProperty(_r,"__esModule",{value:!0});_r.MSI1110=_r.MSI1010=_r.MSI11=_r.MSI10=_r.MSI=void 0;var i_=oi,a_=ro(i_),o_=hd,s_=ro(o_),l_=fd,u_=ro(l_),c_=gd,d_=ro(c_),h_=pd,f_=ro(h_);function ro(a){return a&&a.__esModule?a:{default:a}}_r.MSI=a_.default;_r.MSI10=s_.default;_r.MSI11=u_.default;_r.MSI1010=d_.default;_r.MSI1110=f_.default;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.pharmacode=void 0;var g_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),p_=rr,v_=m_(p_);function m_(a){return a&&a.__esModule?a:{default:a}}function y_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function __(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function S_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var x_=function(a){S_(e,a);function e(n,i){y_(this,e);var o=__(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return g_(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(v_.default);xl.pharmacode=x_;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.codabar=void 0;var w_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),C_=rr,E_=P_(C_);function P_(a){return a&&a.__esModule?a:{default:a}}function b_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function O_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function T_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var k_=function(a){T_(e,a);function e(n,i){b_(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=O_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return w_(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(E_.default);wl.codabar=k_;var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.GenericBarcode=void 0;var R_=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),M_=rr,N_=A_(M_);function A_(a){return a&&a.__esModule?a:{default:a}}function F_(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function I_(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function L_(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var D_=function(a){L_(e,a);function e(n,i){return F_(this,e),I_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return R_(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(N_.default);Cl.GenericBarcode=D_;Object.defineProperty(Zc,"__esModule",{value:!0});var G_=ml,cs=jr,ji=tr,mf=Vi,ja=_r,$_=xl,j_=wl,z_=Cl;Zc.default={CODE39:G_.CODE39,CODE128:cs.CODE128,CODE128A:cs.CODE128A,CODE128B:cs.CODE128B,CODE128C:cs.CODE128C,EAN13:ji.EAN13,EAN8:ji.EAN8,EAN5:ji.EAN5,EAN2:ji.EAN2,UPC:ji.UPC,UPCE:ji.UPCE,ITF14:mf.ITF14,ITF:mf.ITF,MSI:ja.MSI,MSI10:ja.MSI10,MSI11:ja.MSI11,MSI1010:ja.MSI1010,MSI1110:ja.MSI1110,pharmacode:$_.pharmacode,codabar:j_.codabar,GenericBarcode:z_.GenericBarcode};var ea={};Object.defineProperty(ea,"__esModule",{value:!0});var B_=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a};ea.default=function(a,e){return B_({},a,e)};var vd={};Object.defineProperty(vd,"__esModule",{value:!0});vd.default=U_;function U_(a){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(a),e}var md={};Object.defineProperty(md,"__esModule",{value:!0});md.default=H_;function H_(a){return a.marginTop=a.marginTop||a.margin,a.marginBottom=a.marginBottom||a.margin,a.marginRight=a.marginRight||a.margin,a.marginLeft=a.marginLeft||a.margin,a}var yd={},_d={},El={};Object.defineProperty(El,"__esModule",{value:!0});El.default=V_;function V_(a){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof a[n]=="string"&&(a[n]=parseInt(a[n],10)));return typeof a.displayValue=="string"&&(a.displayValue=a.displayValue!="false"),a}var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});var W_={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Pl.default=W_;Object.defineProperty(_d,"__esModule",{value:!0});var X_=El,K_=$1(X_),q_=Pl,yf=$1(q_);function $1(a){return a&&a.__esModule?a:{default:a}}function Y_(a){var e={};for(var n in yf.default)yf.default.hasOwnProperty(n)&&(a.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=a.getAttribute("jsbarcode-"+n.toLowerCase())),a.hasAttribute("data-"+n.toLowerCase())&&(e[n]=a.getAttribute("data-"+n.toLowerCase())));return e.value=a.getAttribute("jsbarcode-value")||a.getAttribute("data-value"),e=(0,K_.default)(e),e}_d.default=Y_;var Sd={},xd={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.getTotalWidthOfEncodings=ur.calculateEncodingAttributes=ur.getBarcodePadding=ur.getEncodingHeight=ur.getMaximumHeightOfEncodings=void 0;var Q_=ea,J_=Z_(Q_);function Z_(a){return a&&a.__esModule?a:{default:a}}function j1(a,e){return e.height+(e.displayValue&&a.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function z1(a,e,n){if(n.displayValue&&e<a){if(n.textAlign=="center")return Math.floor((a-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(a-e)}return 0}function e9(a,e,n){for(var i=0;i<a.length;i++){var o=a[i],l=(0,J_.default)(e,o.options),c;l.displayValue?c=n9(o.text,l,n):c=0;var h=o.data.length*l.width;o.width=Math.ceil(Math.max(c,h)),o.height=j1(o,l),o.barcodePadding=z1(c,h,l)}}function t9(a){for(var e=0,n=0;n<a.length;n++)e+=a[n].width;return e}function r9(a){for(var e=0,n=0;n<a.length;n++)a[n].height>e&&(e=a[n].height);return e}function n9(a,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(a);if(!o)return 0;var l=o.width;return l}ur.getMaximumHeightOfEncodings=r9;ur.getEncodingHeight=j1;ur.getBarcodePadding=z1;ur.calculateEncodingAttributes=e9;ur.getTotalWidthOfEncodings=t9;Object.defineProperty(xd,"__esModule",{value:!0});var i9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),a9=ea,o9=s9(a9),fc=ur;function s9(a){return a&&a.__esModule?a:{default:a}}function l9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var u9=function(){function a(e,n,i){l9(this,a),this.canvas=e,this.encodings=n,this.options=i}return i9(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,o9.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,fc.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,fc.getTotalWidthOfEncodings)(this.encodings),o=(0,fc.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,c;n.textPosition=="top"?c=n.marginTop+n.fontSize+n.textMargin:c=n.marginTop,o.fillStyle=n.lineColor;for(var h=0;h<l.length;h++){var f=h*n.width+i.barcodePadding;l[h]==="1"?o.fillRect(f,c,n.width,n.height):l[h]&&o.fillRect(f,c,n.width,n.height*l[h])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var c,h;n.textPosition=="top"?h=n.marginTop+n.fontSize-n.textMargin:h=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(c=0,o.textAlign="left"):n.textAlign=="right"?(c=i.width-1,o.textAlign="right"):(c=i.width/2,o.textAlign="center"),o.fillText(i.text,c,h)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),a}();xd.default=u9;var wd={};Object.defineProperty(wd,"__esModule",{value:!0});var c9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}(),d9=ea,h9=f9(d9),gc=ur;function f9(a){return a&&a.__esModule?a:{default:a}}function g9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var ds="http://www.w3.org/2000/svg",p9=function(){function a(e,n,i){g9(this,a),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return c9(a,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,h9.default)(this.options,o.options),c=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(c,l),this.drawSvgBarcode(c,l,o),this.drawSVGText(c,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,gc.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,gc.getTotalWidthOfEncodings)(this.encodings),i=(0,gc.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,c;i.textPosition=="top"?c=i.fontSize+i.textMargin:c=0;for(var h=0,f=0,p=0;p<l.length;p++)f=p*i.width+o.barcodePadding,l[p]==="1"?h++:h>0&&(this.drawRect(f-i.width*h,c,i.width*h,i.height,n),h=0);h>0&&this.drawRect(f-i.width*(h-1),c,i.width*h,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(ds,"text");if(i.displayValue){var c,h;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?h=i.fontSize-i.textMargin:h=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(c=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(c=o.width-1,l.setAttribute("text-anchor","end")):(c=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",c),l.setAttribute("y",h),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",ds),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(ds,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,c){var h=this.document.createElementNS(ds,"rect");return h.setAttribute("x",n),h.setAttribute("y",i),h.setAttribute("width",o),h.setAttribute("height",l),c.appendChild(h),h}}]),a}();wd.default=p9;var Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});var v9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function m9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var y9=function(){function a(e,n,i){m9(this,a),this.object=e,this.encodings=n,this.options=i}return v9(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a}();Cd.default=y9;Object.defineProperty(Sd,"__esModule",{value:!0});var _9=xd,S9=Ed(_9),x9=wd,w9=Ed(x9),C9=Cd,E9=Ed(C9);function Ed(a){return a&&a.__esModule?a:{default:a}}Sd.default={CanvasRenderer:S9.default,SVGRenderer:w9.default,ObjectRenderer:E9.default};var ta={};Object.defineProperty(ta,"__esModule",{value:!0});function Pd(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function bd(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:a}function Od(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var P9=function(a){Od(e,a);function e(n,i){Pd(this,e);var o=bd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),b9=function(a){Od(e,a);function e(){Pd(this,e);var n=bd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),O9=function(a){Od(e,a);function e(){Pd(this,e);var n=bd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);ta.InvalidInputException=P9;ta.InvalidElementException=b9;ta.NoElementException=O9;Object.defineProperty(yd,"__esModule",{value:!0});var T9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},k9=_d,Mc=B1(k9),R9=Sd,Ua=B1(R9),M9=ta;function B1(a){return a&&a.__esModule?a:{default:a}}function Td(a){if(typeof a=="string")return N9(a);if(Array.isArray(a)){for(var e=[],n=0;n<a.length;n++)e.push(Td(a[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return A9(a);if(a&&a.nodeName&&a.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,Mc.default)(a),renderer:Ua.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,Mc.default)(a),renderer:Ua.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:Ua.default.CanvasRenderer};if(a&&(typeof a>"u"?"undefined":T9(a))==="object"&&!a.nodeName)return{element:a,renderer:Ua.default.ObjectRenderer};throw new M9.InvalidElementException}}function N9(a){var e=document.querySelectorAll(a);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(Td(e[i]));return n}}function A9(a){var e=document.createElement("canvas");return{element:e,options:(0,Mc.default)(a),renderer:Ua.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",e.toDataURL())}}}yd.default=Td;var kd={};Object.defineProperty(kd,"__esModule",{value:!0});var F9=function(){function a(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}}();function I9(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var L9=function(){function a(e){I9(this,a),this.api=e}return F9(a,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),a}();kd.default=L9;var D9=Zc,Kn=Rn(D9),G9=ea,no=Rn(G9),$9=vd,U1=Rn($9),j9=md,_f=Rn(j9),z9=yd,B9=Rn(z9),U9=El,H9=Rn(U9),V9=kd,W9=Rn(V9),H1=ta,X9=Pl,V1=Rn(X9);function Rn(a){return a&&a.__esModule?a:{default:a}}var Jr=function(){},bl=function(e,n,i){var o=new Jr;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,B9.default)(e),o._encodings=[],o._options=V1.default,o._errorHandler=new W9.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=X1()),o.options(i)[i.format](n,i).render()),o};bl.getModule=function(a){return Kn.default[a]};for(var Sf in Kn.default)Kn.default.hasOwnProperty(Sf)&&K9(Kn.default,Sf);function K9(a,e){Jr.prototype[e]=Jr.prototype[e.toUpperCase()]=Jr.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,no.default)(o._options,i);l=(0,H9.default)(l);var c=a[e],h=W1(n,c,l);return o._encodings.push(h),o})}}function W1(a,e,n){a=""+a;var i=new e(a,n);if(!i.valid())throw new H1.InvalidInputException(i.constructor.name,a);var o=i.encode();o=(0,U1.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,no.default)(n,o[l].options);return o}function X1(){return Kn.default.CODE128?"CODE128":Object.keys(Kn.default)[0]}Jr.prototype.options=function(a){return this._options=(0,no.default)(this._options,a),this};Jr.prototype.blank=function(a){var e=new Array(a+1).join("0");return this._encodings.push({data:e}),this};Jr.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var a;for(var e in this._renderProperties){a=this._renderProperties[e];var n=(0,no.default)(this._options,a.options);n.format=="auto"&&(n.format=X1()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Kn.default[n.format.toUpperCase()],l=W1(i,o,n);Nc(a,l,n)})}}};Jr.prototype.render=function(){if(!this._renderProperties)throw new H1.NoElementException;if(Array.isArray(this._renderProperties))for(var a=0;a<this._renderProperties.length;a++)Nc(this._renderProperties[a],this._encodings,this._options);else Nc(this._renderProperties,this._encodings,this._options);return this};Jr.prototype._defaults=V1.default;function Nc(a,e,n){e=(0,U1.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,no.default)(n,e[i].options),(0,_f.default)(e[i].options);(0,_f.default)(n);var o=a.renderer,l=new o(a.element,e,n);l.render(),a.afterRender&&a.afterRender()}typeof window<"u"&&(window.JsBarcode=bl);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(a,e){var n=[];return jQuery(this).each(function(){n.push(this)}),bl(n,a,e)});var q9=bl;const Y9=ws(q9),zi=Xg.apiUrl;function Q9(){const[a,e]=N.useState("checkbox"),[n,i]=N.useState([]),[o,l]=N.useState(""),[c]=Zo(),[h]=Zo(),[f]=Zo(),[p]=Zo(),[m,E]=N.useState(!1),[w,_]=N.useState(!1),[y,C]=N.useState({}),[P,T]=N.useState(!1),[k,v]=N.useState({}),[x,b]=N.useState(!1),[R,U]=N.useState(!1),[O,$]=N.useState(!1),[M,D]=N.useState(!1),[K,X]=N.useState(!1),[Z,q]=N.useState(!1),[le,de]=N.useState(!1),[me,ke]=N.useState(!1),[ue,J]=N.useState(!1),[he,Re]=N.useState({}),[we,Ye]=N.useState([]),[Fe,F]=N.useState(""),[V,re]=N.useState([]),[ge,pe]=N.useState({}),[De,Ne]=N.useState(!1),[Lt,Ie]=N.useState({}),[Rt,Qe]=N.useState(!1),[Le,ut]=N.useState([]),[Dt,ze]=N.useState([]),[Ue,vt]=N.useState([]),[Gt,nn]=N.useState(null),[an,Mn]=N.useState([]),[ra,Nn]=N.useState(!1),[na,li]=N.useState(!1),[ia,nr]=N.useState(!1),[Wt,on]=N.useState([]),[aa,ui]=N.useState(""),[An,oa]=N.useState([]),[ae,_e]=N.useState(!1),[yt,Mt]=N.useState(!1),[ir,ci]=N.useState(""),[Xt,di]=N.useState([]),[io,ao]=N.useState([]),[Ol,hi]=N.useState([]),[Tl,oo]=N.useState(""),[fi,kl]=N.useState([]),[Rl,sn]=N.useState(!1);let sa={};const[la,so]=N.useState([]),[Ml,gi]=N.useState([]),Nl={action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",multiple:!1,onRemove:()=>{gi([]),so([])},beforeUpload:async L=>{try{const B=L.name.toLowerCase();if(B.endsWith(".xls")||B.endsWith(".xlsx")||B.endsWith(".xlsm")||B.endsWith(".xlsb")||B.endsWith(".csv")||B.endsWith(".ods")){let Q=[{uid:"-1",name:L.name,status:"done",url:""}];gi(Q);const W=new FileReader;return W.onload=ne=>{const se=ne.target.result,Ce=Vg(se,{type:"buffer"}),Pt=Ce.SheetNames[0],at=Ce.Sheets[Pt],Ge=Wg.sheet_to_json(at,{header:1});let ct=[];if(Ge.length>=2)for(let et=1;et<Ge.length;et++){if(!Ge[et][2])continue;let Cr={product_code:Ge[et][0]?Ge[et][0]:"",barcode:Ge[et][1]?Ge[et][1]:"",product_name:Ge[et][2],product_description:Ge[et][3],url_images:Ge[et][4]?JSON.parse(Ge[et][4].replace("“",'"').replace("”",'"')):[]};ct.push(Cr)}console.log(ct),so(ct)},W.readAsArrayBuffer(L),!1}else return ve.error("Đã xảy ra lỗi, không đúng định dạng file: xls, xlsx, xlsm, xlsb, csv, ods"),!1}catch{return ve.error("Chưa nhập File hoặc File không chính xác tải dữ liệu mẫu để tiếp tục"),!1}}},Al={onRemove:L=>{if(L.name){const Q=Ue.indexOf(L.uid);re(W=>W.filter((ne,se)=>se!==Q)),vt(W=>W.filter((ne,se)=>se!==Q))}},beforeUpload:async L=>{const B=L.name.toLowerCase();if(B.endsWith(".jpeg")||B.endsWith(".jpg")||B.endsWith(".png")||B.endsWith(".gif")||B.endsWith(".bmp")||B.endsWith(".tiff")||B.endsWith(".tif")){if(!(L.size/1024/1024<2)){ve.error("Dung lượng tệp tải lên phải bé hơn 2MB!");return}const W=new FormData,ne={file:L,category_name:he.name};for(const[Ce,Pt]of Object.entries(ne))W.append(Ce,Pt);const se=await Ut.post("/api/method/mbw_audit.api.api.upload_file_for_product",W);se.message==="ok"?(re(Ce=>[...Ce,se.result.file_url]),vt(Ce=>[...Ce,L.uid]),ve.success("Tải ảnh thành công")):ve.error("Tải ảnh thất bại")}else ve.error("Đã xảy ra lỗi, chỉ chấp nhận các định dạng file ảnh: JPEG, JPG, PNG, GIF, BMP, TIFF, TIF");return!1}},Fl={onRemove:L=>{if(L.name){const Q=Dt.indexOf(L.uid);ut(W=>W.filter((ne,se)=>se!==Q)),ze(W=>W.filter((ne,se)=>se!==Q))}else wi(Q=>Q.filter(W=>!W.uid))},beforeUpload:async L=>{const B=L.name.toLowerCase();if(B.endsWith(".jpeg")||B.endsWith(".jpg")||B.endsWith(".png")||B.endsWith(".gif")||B.endsWith(".bmp")||B.endsWith(".tiff")||B.endsWith(".tif")){if(!(L.size/1024/1024<2)){ve.error("Dung lượng tệp tải lên phải bé hơn 2MB!");return}const W=new FormData,ne={file:L,category_name:he.name};for(const[Ce,Pt]of Object.entries(ne))W.append(Ce,Pt);const se=await Ut.post("/api/method/mbw_audit.api.api.upload_file_for_product",W);return se.message=="ok"?(ut(Ce=>[...Ce,se.result.file_url]),ze(Ce=>[...Ce,L.uid]),ve.success("Tải ảnh thành công")):ve.error("Tải ảnh thất bại"),!1}else ve.error("Đã xảy ra lỗi, chỉ chấp nhận các định dạng file ảnh: JPEG, JPG, PNG, GIF, BMP, TIFF, TIF")}},Il={onRemove:()=>{hi([]),on([])},action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",accept:"image/png, image/jpeg",beforeUpload:async L=>{const B=L.type==="image/jpeg"||L.type==="image/png";if(!B)return ve.error("Bạn chỉ có thể tải lên file định dạng JPG/PNG!"),B;const Q=L.size/1024/1024<2;if(!Q)return ve.error("Dung lượng tệp tải lên phải bé hơn 2MB!"),Q;const W=new FormData,ne={file:L};for(const[Ce,Pt]of Object.entries(ne))W.append(Ce,Pt);const se=await Ut.post("/api/method/mbw_audit.api.api.upload_file_for_checking",W);if(se.message=="ok"){let Ce=[],Pt={uid:"-1",name:se.result.date_time,status:"done",url:se.result.file_url};Ce.push(Pt),hi(Ce),on(at=>[...at,se.result.file_url]),ve.success("Tải ảnh thành công")}else ve.error("Tải ảnh thất bại");return!1}},Ll=[{title:"Mã Sản phẩm",dataIndex:"product_code",render:(L,B)=>G.jsx("a",{href:"javascript:;",onClick:()=>fa(B),children:L})},{title:"Tên sản phẩm",dataIndex:"product_name"},{title:"Hành động",key:"action",render:(L,B)=>G.jsxs(G.Fragment,{children:[G.jsx(mc,{className:"mr-4",onClick:()=>fa(B)}),G.jsx(Wu,{onClick:()=>$l(B)})]})}],Dl={onChange:(L,B)=>{Mn(B),B.length>0?Nn(!0):Nn(!1)}},Fn=async()=>{try{let L='/api/resource/VGM_Category?fields=["*"]';if(o!=null&&o!=""){let Q=`[["category_name", "like", "%${o}%"]]`;L+=`&filters=${Q}`}const B=await Ut.get(L);if(B&&B.data){let Q=B.data.map((W,ne)=>({...W,key:W.name,hidden:!0,selected:!1}));Q=lo(Q,"category_name"),Q.length>0&&(Q[0].selected=!0),i(Q),Q.length>0&&Re(Q[0])}}catch{}finally{}};N.useEffect(()=>{Fn()},[]),N.useEffect(()=>{Fn()},[o]);const Gl=L=>{l(L.target.value)},lo=(L,B)=>L.sort((Q,W)=>Q[B]&&W[B]?Q[B].localeCompare(W[B]):0),ua=(L,B)=>{i(Q=>Q.map(W=>W.key===B.key?{...W,hidden:!1}:W))},In=(L,B)=>{i(Q=>Q.map(W=>W.key===B.key?{...W,hidden:!0}:W))},ca=L=>{let B={item:L,title:"Xóa "+L.category_name,contentConfirm:"Bạn có chắc muốn xóa "+L.category_name+" ra khỏi hệ thống không?",contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};C(B),T(!0)},da=async()=>{if(y!=null&&y.item!=null){let L=[];L=[y.item.name];let B=zi+".api.deleteListByDoctype",Q={doctype:"VGM_Category",items:JSON.stringify(L)},W=await Ut.post(B,Q);W!=null&&W.message!=null&&W.message.status=="success"?(ve.success("Xóa thành công"),Fn(),uo()):ve.error("Xóa thất bại, Danh mục này đang được sử dụng")}},uo=()=>{T(!1),C({})},ha=L=>{h.setFieldsValue({name_item:L.category_name,des:L.category_description}),v(L),b(!0)},Ur=async()=>{D(!0);let L=h.getFieldsValue();if(!L.hasOwnProperty("name_item")||!L.name_item){ve.warning("Vui lòng nhập tên danh mục."),D(!1);return}const B=L.name_item.trim();if(!B){ve.warning("Vui lòng nhập tên danh mục.");return}if(n.some(W=>W.category_name.toLowerCase()===B.toLowerCase()&&W.category_name!==k.category_name)){ve.error("Danh mục đã tồn tại."),D(!1);return}if(k!=null&&k.name!=null){let W=`/api/resource/VGM_Category/${k.name}`,ne={category_name:L.name_item,category_description:L.des},se=await Ut.put(W,ne);se!=null&&se.data!=null?(ve.success("Sửa thành công"),D(!1),Fn(),cr()):(ve.error("Sửa thất bại"),D(!1))}},cr=()=>{v({}),b(!1)},Xe=()=>{_(!0)},He=async()=>{U(!0);const L=c.getFieldsValue();if(!L.hasOwnProperty("name_item")||!L.name_item){ve.warning("Vui lòng nhập tên danh mục."),U(!1);return}const B=L.name_item.trim();if(!B){ve.warning("Vui lòng nhập tên danh mục.");return}if(n.some(W=>W.category_name.toLowerCase()===B.toLowerCase())){ve.error("Danh mục đã tồn tại."),U(!1);return}if(B.length>25){ve.error("Tên danh mục không được vượt quá 25 ký tự."),U(!1);return}try{const W={doc:JSON.stringify({doctype:"VGM_Category",category_name:B,category_description:L.des}),action:"Save"},ne=await Ut.post("/api/method/frappe.desk.form.save.savedocs",W);ne&&ne.docs&&ne.docs.length>0?(c.resetFields(),ve.success("Thêm mới thành công"),U(!1),Fn(),_(!1)):(ve.error("Thêm mới thất bại"),U(!1))}catch{ve.error("Đã xảy ra lỗi khi thêm mới danh mục.")}},xr=()=>{_(!1),U(!1)},Et=L=>{Re(L),i(B=>B.map(Q=>Q.key===L.key?{...Q,selected:!0}:{...Q,selected:!1}))};N.useEffect(()=>{it()},[he]),N.useEffect(()=>{Gt!=null&&Gt!=""&&yi(Gt)},[Gt]),N.useEffect(()=>{it()},[Fe]);const it=async()=>{let L="";Fe!=null&&Fe!=""?L=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${he.name}"],["product_name","like","%${Fe}%"]]`:L=`/api/resource/VGM_Product?fields=["*"]&filters=[["category","=","${he.name}"]]`;let B=await Ut.get(L);if(B&&B.data){let Q=B.data.map(W=>({...W,key:W.name,category_name:he.category_name}));Q=lo(Q,"product_name"),Ye(Q)}},Hr=L=>{F(L.target.value)},ln=()=>{f.resetFields(),xi([]),X(!1);let L=document.getElementById("barcode");L&&(L.innerHTML=""),he!=null&&he.name!=null&&E(!0)},Nt=L=>!/[\u00C0-\u1EF9\u1EFB-\u1F01\u1F03-\u1F57\u1F59-\u1F5B\u1F5D-\u1F5F\u1F60-\u1FC1\u1FC3-\u1FF9\u1FFB-\u1FFF]/.test(L),pi=L=>{yi(L.target.value)},vi=()=>{E(!1)},fa=L=>{Ie(L),Qe(!0),p.setFieldsValue({product_code:L.product_code,barcode_product:L.barcode,product_name:L.product_name,product_description:L.product_description}),nn(L.barcode);let B=JSON.parse(L.images),Q=[];for(let W=0;W<B.length;W++){let ne={uid:W,url:B[W],url_base:B[W]};Q.push(ne)}wi(Q)},mi=L=>{yi(L.target.value)},yi=L=>{Y9("#barcode",L,{width:4,height:40,displayValue:!0,font:"Arial",text:L,textMargin:10,fontSize:13,background:"#F5F7FA"})},qt=async()=>{X(!0);let L=f.getFieldsValue();if(L.product_code&&we.filter(Ce=>Ce.product_code.toLowerCase()===L.product_code.toLowerCase()).length>0){ve.error("Mã sản phẩm đã tồn tại"),X(!1);return}let B=[];for(let se=0;se<V.length;se++)B.push(V[se]);if(!Nt(L.barcode_product)){ve.error("Barcode không được chứa ký tự tiếng Việt"),X(!1);return}if(!L.product_name||B.length===0){ve.error("Vui lòng nhập tên sản phẩm và tải lên ít nhất một hình ảnh"),X(!1);return}let Q="/api/resource/VGM_Product",W={barcode:L.barcode_product,product_code:L.product_code!=null?L.product_code.trim():null,product_name:L.product_name!=null?L.product_name.trim():null,product_description:L.product_description!=null?L.product_description.trim():null,category:he.name,images:JSON.stringify(B)},ne=await Ut.post(Q,W);if(ne!=null&&ne.data!=null){ve.success("Thêm mới thành công"),X(!1),f.resetFields();let se=document.getElementById("barcode");se.innerHTML="",re([]),vt([]),it(),vi()}else ve.error("Thêm mới thất bại"),X(!1)},co=async()=>{q(!0);let L=[],B=p.getFieldsValue();if(!Nt(B.barcode_product)){ve.error("Barcode không được chứa ký tự tiếng Việt"),q(!1);return}for(let se=0;se<Pe.length;se++)Pe[se].url_base&&Pe[se].url_base!==null&&Pe[se].url_base!==""&&L.push(Pe[se].url_base);if(Le!==null)for(let se=0;se<Le.length;se++)L.push(Le[se]);let Q=`/api/resource/VGM_Product/${Lt.name}`,W={barcode:B.barcode_product,product_code:B.product_code!=null?B.product_code.trim():null,product_name:B.product_name!=null?B.product_name.trim():null,product_description:B.product_description!=null?B.product_description.trim():null,category:he.name,images:JSON.stringify(L)},ne=await Ut.put(Q,W);if(ne!=null&&ne.data!=null){ve.success("Sửa thành công"),q(!1),p.resetFields();let se=document.getElementById("barcode");se.innerHTML="",ut([]),ze([]),it(),ga()}else ve.error("Sửa thất bại"),q(!1)},ga=()=>{Qe(!1),q(!1)},$l=L=>{let B={item:L,title:`Xóa ${L.product_name}`,contentConfirm:`Bạn có chắc muốn xóa ${L.product_name} ra khỏi hệ thống không?`,contentRemind:"Khi thực hiện hành động này, sẽ không thể hoàn tác."};pe(B),Ne(!0)},Ln=async()=>{let L=[];try{$(!0),L=[ge.item.name];let B=zi+".api.deleteListByDoctype",Q={doctype:"VGM_Product",items:JSON.stringify(L)},W=await Ut.post(B,Q);W!=null&&W.message!=null&&W.message.status=="success"?(ve.success("Xóa thành công"),pe({}),it(),$(!1),un()):(ve.error("Xóa thất bại , Sản phẩm đang được sử dụng"),$(!1))}catch{ve.error("Xóa thất bại,Có lỗi xảy ra khi xóa sản phẩm"),$(!1)}},un=()=>{Ne(!1)},Dn=()=>{li(!0)},_i=async()=>{try{let L=zi+".api.deleteListByDoctype",B=[];for(let ne=0;ne<an.length;ne++)B.push(an[ne].name);let Q={doctype:"VGM_Product",items:JSON.stringify(B)},W=await Ut.post(L,Q);W!=null&&W.message!=null&&W.message.status=="success"?(ve.success("Xóa thành công"),Mn([]),Nn(!1),it(),ho()):ve.error("Xóa thất bại, có sản phẩm đã tồn tại trong báo cáo")}catch{ve.error("Có lỗi xảy ra khi xóa sản phẩm")}},ho=()=>{li(!1)},jl=()=>{nr(!0)},Si=async()=>{if(we.length==0){ve.error("Chưa thêm thêm sản phẩm cho danh mục này"),de(!1);return}if(Wt.length==0){ve.error("Chưa thêm hình ảnh nhận diện"),de(!1);return}else{de(!0);let L=zi+".api.checkImageProductExist";console.log(Wt);let B={collection_name:he.name,linkimages:Wt.length>0?Wt[Wt.length-1]:""},Q=await Ut.post(L,B),W=[];for(let ne=0;ne<we.length;ne++)W.push({key:we[ne].name,product_code:we[ne].product_code,product_name:we[ne].product_name,product_count:0});if(Q!=null&&Q.message!=null)if(Q.message.status=="failed")de(!1),ve.error("Không thể kiểm tra ảnh sản phẩm");else{oo("data:image/png;base64,"+Q.message.results.verbose[0].base64_image);let ne=[];W.forEach(se=>{Q.message.results.count[se.product_name]!=null&&(se.product_count=Q.message.results.count[se.product_name]);let at=Q.message.results.verbose[0].locates.filter(function(Ge){return Ge.label===se.product_name}).map(function(Ge){let ct=Ge.bbox;return{x:ct[0],y:ct[1],width:ct[2]-ct[0],height:ct[3]-ct[1],label:Ge.label}});ne=ne.concat(at)}),kl(ne)}ui(Wt.length>0?Wt[Wt.length-1]:""),de(!1),oa(W),_e(!0),cn()}},fo=()=>{const L="0123456789ABCDEF";let B="#";for(let Q=0;Q<6;Q++)B+=L[Math.floor(Math.random()*16)];return B};fi.forEach(L=>{sa[L.label]||(sa[L.label]=fo())});const cn=()=>{on([]),hi([]),de(!1),nr(!1)},Gn=()=>{_e(!1),hi([]),on([])},[zl,xi]=N.useState([]),[Pe,wi]=N.useState([]),pa=({fileList:L})=>{xi(L)},go=({fileList:L})=>{wi(L)},po=async L=>{let B=L.url;B||(B=await new Promise(ne=>{const se=new FileReader;se.readAsDataURL(L.originFileObj),se.onload=()=>ne(se.result)}));const Q=new Image;Q.src=B,window.open(B)?.document.write(Q.outerHTML)},Bl=()=>{Mt(!0)},ft=()=>{Mt(!1)},va=L=>{ci(L.target.value)},vo=()=>{sn(!1),gi([])};N.useEffect(()=>{dr()},[ir]);const ma=Xt.length>0,Ci={productFromERPSelected:Xt,onChange:(L,B)=>{console.log(B),di(B)}},dr=async()=>{let B=await Ut.get("/api/method/mbw_dms.api.selling.product.list_product"),Q=[];B!=null&&B.result!=null&&B.result.data!=null&&(Q=B.result.data.map(W=>({...W,key:W.name}))),ir!=null&&ir.trim()!==""&&(Q=Q.filter(W=>W.item_name.toLowerCase().includes(ir.toLowerCase()))),ao(Q)},Ul=async()=>{ke(!0);let L=[];for(let ne=0;ne<Xt.length;ne++){let se={product_code:Xt[ne].item_code,barcode:Xt[ne].item_code,product_name:Xt[ne].item_name,product_description:Xt[ne].description,url_images:Xt[ne].image!=null&&Xt[ne].image!=""?[Xt[ne].image]:[]};L.push(se)}let B={listproduct:JSON.stringify(L),category:he.name},Q=zi+".api.import_product",W=await Ut.post(Q,B);W!=null&&W.message!=null&&W.message.status=="success"?(ve.success("Thêm mới thành công"),ke(!1),di([]),it(),ft()):(ve.error("Thêm mới thất bại"),ke(!1))},Hl=()=>{sn(!0),gi([])},Yt=async()=>{if(la&&la.length>0){J(!0);let L={listproduct:JSON.stringify(la),category:he.name},B=zi+".api.import_product",Q=await Ut.post(B,L);Q!=null&&Q.message!=null&&Q.message.status=="success"?(ve.success("Thêm mới thành công"),J(!1),it(),sn(!1)):(ve.error("Thêm mới thất bại"),J(!1))}else ve.error("File không chính xác, tải dữ liệu mẫu để tiếp tục")},wr=async()=>{const L=new qg.Workbook,B=L.addWorksheet("Sheet1");B.properties.defaultColWidth=20,B.getColumn("A").width=30,B.mergeCells("A2:J2"),B.getCell("A2").value="Kiểm tra ảnh sản phẩm",B.getCell("A2").style={font:{bold:!0,name:"Times New Roman",size:12}},B.getCell("A2").alignment={vertical:"middle",horizontal:"left"};let Q=B.getRow(4),W=B.getRow(5),ne=[{title:"Mã sản phẩm",field:"product_code"},{title:"Tên sản phẩm",field:"product_name"},{title:"Số lượng",field:"product_count"}];for(let Ce=0;Ce<ne.length;Ce++){let Pt=Q.getCell(Ce+1),at=W.getCell(Ce+1);B.mergeCells(`${Pt._address}:${at._address}`),Q.getCell(Ce+1).style={font:{bold:!0,name:"Times New Roman",size:12,italic:!0}},Q.getCell(Ce+1).alignment={vertical:"middle",horizontal:"center"},Q.getCell(Ce+1).value=ne[Ce].title}for(let Ce=0;Ce<An.length;Ce++){let at=B.getRow(Ce+6),Ge=1;for(let ct=0;ct<ne.length;ct++){at.getCell(Ge).style={font:{name:"Times New Roman",size:12,italic:!0}};let et="";et=An[Ce][ne[ct].field],at.getCell(Ge).value=et,Ge+=1}}const se=await L.xlsx.writeBuffer();Ei(se,"report_check_image")},Ei=(L,B)=>{let Q="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",W=".xlsx";const ne=new Blob([L],{type:Q});Yg.saveAs(ne,B+"_export_"+new Date().getTime()+W)};return G.jsxs(G.Fragment,{children:[G.jsx($g,{title:"Sản phẩm",buttons:[ra&&{label:"Xóa",type:"primary",icon:G.jsx(Wu,{}),size:"20px",className:"flex items-center mr-2",danger:!0,action:Dn},{label:"Nhập file",icon:G.jsx(Hg,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:Hl},{label:"Thêm sản phẩm từ ERP",icon:G.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2 text-[#1877F2] border-solid border-[#1877F2]",action:Bl},{label:"Kiểm tra sản phẩm",type:"primary",icon:G.jsx(cp,{className:"text-xl"}),size:"20px",className:"flex items-center mr-2",action:jl},{label:"Thêm mới",type:"primary",icon:G.jsx(d0,{className:"text-xl"}),size:"20px",className:"flex items-center",action:ln}]}),G.jsxs(Cf,{gutter:16,children:[G.jsx(pc,{span:18,push:6,children:G.jsxs("div",{className:"bg-white rounded-xl border-[#DFE3E8] border-[0.2px] border-solid",children:[G.jsx(It,{className:"w-[320px] border-none p-4",children:G.jsx(Tr,{value:Fe,onChange:Hr,placeholder:"Tìm kiếm sản phẩm",prefix:G.jsx(Xu,{})})}),G.jsx("div",{className:"pt-3",children:G.jsx(c0,{rowSelection:{type:a,...Dl},columns:Ll,dataSource:we})})]})}),G.jsx(pc,{span:6,pull:18,children:G.jsxs("div",{className:"bg-white rounded-xl p-4 border-[#DFE3E8] border-[0.2px] border-solid",children:[G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("div",{children:G.jsx("p",{className:"text-base leading-5 font-medium text-[#212B36]",children:"Danh mục"})}),G.jsx("div",{className:"cursor-pointer",onClick:Xe,children:G.jsx(Ku,{})})]}),G.jsx("div",{className:"py-3",children:G.jsx(It,{className:"w-full border-none",name:"filter_category",children:G.jsx(Tr,{onChange:Gl,value:o,placeholder:"Tìm kiếm danh mục",prefix:G.jsx(Xu,{})})})}),G.jsx(_c,{style:{maxHeight:"calc(100vh - 500px)",overflow:"auto",paddingRight:"10px"},header:!1,footer:!1,bordered:!1,dataSource:n,renderItem:L=>G.jsx(_c.Item,{onMouseEnter:B=>ua(B,L),onMouseLeave:B=>In(B,L),onClick:()=>Et(L),children:G.jsxs("div",{className:"item_category",children:[G.jsxs("span",{className:`${L.selected?"selected":""}`,children:[G.jsx(op.Text,{})," ",L.category_name]}),G.jsxs("span",{style:{display:L.hidden?"none":"block"},children:[G.jsx("span",{style:{marginRight:"10px"},children:G.jsx(mc,{onClick:()=>ha(L)},"edit")}),G.jsx("span",{onClick:()=>ca(L),children:G.jsx(Wu,{},"delete")})]})]})})})]})})]}),G.jsxs(kr,{title:"Kiểm tra ảnh sản phẩm",open:ia,width:777,afterClose:cn,onOk:Si,onCancel:cn,footer:[G.jsx(Ht,{onClick:cn,children:"Hủy"},"back"),G.jsx(Ht,{type:"primary",onClick:Si,loading:le,children:"Kiểm tra"},"submit")],children:[G.jsx("p",{className:"text-[#637381] font-normal text-sm",children:"Chọn ảnh sản phẩm bất kì để kiểm tra nhận diện sản phẩm"}),G.jsxs(yc,{...Il,fileList:Ol,children:[G.jsx("p",{className:"ant-upload-drag-icon",children:G.jsx(Ku,{})}),G.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn ảnh để tải lên"})]})]}),G.jsxs(kr,{title:"Kiểm tra ảnh sản phẩm",open:ae,width:920,onCancel:Gn,footer:null,children:[G.jsxs("div",{style:{marginBottom:"20px",display:"flex"},children:[G.jsx("img",{src:aa,style:{width:"450px",height:"450px",marginRight:"20px"}}),G.jsx(p5,{imageSrc:Tl,objectBoxes:fi,labelColors:sa})]}),G.jsxs("div",{children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[G.jsx("span",{children:"Kết quả kiểm tra hình ảnh:"}),G.jsx(Ht,{type:"primary",onClick:wr,icon:G.jsx(Kg,{}),children:"Xuất dữ liệu"})]}),G.jsx(jg,{dataSource:An,columns:[{title:"Mã sản phẩm",dataIndex:"product_code",key:"product_code"},{title:"Tên sản phẩm",dataIndex:"product_name",key:"product_name"},{title:"Số lượng",dataIndex:"product_count",key:"product_count"}],pagination:!1})]})]}),G.jsxs(kr,{width:990,title:"Thêm sản phẩm từ ERP",open:yt,onCancel:ft,footer:!1,children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx(It,{className:"w-[320px] border-none pt-4",children:G.jsx(Tr,{value:ir,onChange:va,placeholder:"Tìm kiếm sản phẩm",prefix:G.jsx(Xu,{})})}),G.jsxs("div",{children:[G.jsx("span",{style:{marginRight:8},children:ma?`Đã chọn ${Xt.length} sản phẩm`:""}),G.jsx(Ht,{type:"primary",onClick:Ul,loading:me,children:"Thêm"})]})]}),G.jsx("div",{className:"pt-4",children:G.jsx(c0,{rowSelection:Ci,columns:[{title:"Mã sản phẩm",dataIndex:"item_code",key:"item_code"},{title:"Tên sản phẩm",dataIndex:"item_name",key:"item_name"},{title:"Danh mục",dataIndex:"item_group",key:"item_group"}],dataSource:io})})]}),G.jsx(kr,{title:"Thêm mới sản phẩm",open:m,onOk:qt,onCancel:vi,width:1e3,footer:[G.jsx(Ht,{onClick:vi,children:"Hủy"},"back"),G.jsx(Ht,{type:"primary",onClick:qt,loading:K,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:f,children:[G.jsx(It,{label:"Mã sản phẩm",name:"product_code",required:!0,children:G.jsx(Tr,{})}),G.jsx(It,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:G.jsx(Tr,{onChange:L=>pi(L)})}),G.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:G.jsx("svg",{id:"barcode"})}),G.jsx(It,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:G.jsx(Tr,{})}),G.jsx(It,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),G.jsx(It,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:G.jsx(v0,{...Al,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:zl,onChange:pa,onPreview:po,children:"+ Upload"})})]})})}),G.jsx(kr,{title:"Sửa sản phẩm",open:Rt,onOk:co,onCancel:ga,width:1e3,footer:[G.jsx(Ht,{onClick:ga,children:"Hủy"},"back"),G.jsx(Ht,{type:"primary",onClick:co,loading:Z,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:p,children:[G.jsx(It,{label:"Mã sản phẩm",name:"product_code",required:!0,children:G.jsx(Tr,{})}),G.jsx(It,{className:"pt-3",label:"Barcode",name:"barcode_product",required:!0,children:G.jsx(Tr,{onChange:L=>mi(L)})}),G.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px",marginTop:"10px",backgroundColor:"#F5F7FA",borderWidth:"1px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"6px",height:"85px"},children:G.jsx("svg",{id:"barcode"})}),G.jsx(It,{className:"pt-3",label:"Tên sản phẩm",name:"product_name",required:!0,children:G.jsx(Tr,{})}),G.jsx(It,{className:"pt-3",label:"Mô tả",name:"product_description",required:!0,children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})}),G.jsx(It,{className:"pt-3",label:"Hình ảnh",name:"img",required:!0,children:G.jsx(v0,{...Fl,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",listType:"picture-card",accept:"image/png, image/jpeg",fileList:Pe,onChange:go,onPreview:po,children:"+ Upload"})})]})})}),G.jsxs(kr,{title:ge.title,open:De,onOk:Ln,onCancel:un,footer:[G.jsx(Ht,{onClick:un,children:"Hủy"},"submit"),G.jsx(Ht,{type:"primary",loading:O,onClick:Ln,children:"Xác nhận"},"submit")],cancelText:"Hủy",children:[G.jsx("div",{children:ge.contentConfirm}),G.jsx("div",{children:ge.contentRemind})]}),G.jsxs(kr,{title:`Xóa ${an.length} sản phẩm?`,open:na,onOk:_i,onCancel:ho,okText:"Xác nhận",cancelText:"Hủy",children:[G.jsxs("div",{children:["Bạn có chắc muốn xóa ",an.length," sản phẩm ra khỏi hệ thống không?"]}),G.jsx("div",{children:"Khi thực hiện hành động này, sẽ không thể hoàn tác."})]}),G.jsx(kr,{title:"Thêm mới danh mục",open:w,onOk:He,onCancel:xr,width:600,footer:[G.jsx(Ht,{onClick:xr,children:"Hủy"},"back"),G.jsx(Ht,{type:"primary",onClick:He,loading:R,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:c,children:[G.jsx(It,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,rules:[{required:!0,message:"Vui lòng nhập tên danh mục!"},{max:25,message:"Tên danh mục không được vượt quá 25 ký tự!"}],children:G.jsx(Tr,{})}),G.jsx(It,{className:"pt-3",label:"Mô tả",name:"des",children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5}})})]})})}),G.jsx(kr,{title:"Sửa danh mục",open:x,onOk:Ur,onCancel:cr,width:600,footer:[G.jsx(Ht,{onClick:cr,children:"Hủy"},"back"),G.jsx(Ht,{type:"primary",onClick:Ur,loading:M,children:"Lưu"},"submit")],children:G.jsx("div",{className:"pt-4",children:G.jsxs(es,{layout:"vertical",form:h,children:[G.jsx(It,{className:"pt-3",label:"Tên danh mục",name:"name_item",required:!0,children:G.jsx(Tr,{value:k.category_name})}),G.jsx(It,{className:"pt-3",label:"Mô tả",name:"des",children:G.jsx(za,{className:"bg-[#F5F7FA]",autoSize:{minRows:3,maxRows:5},value:k.category_description})})]})})}),G.jsxs(kr,{title:y.title,open:P,onOk:da,onCancel:uo,okText:"Xác nhận",cancelText:"Hủy",children:[G.jsx("div",{children:y.contentConfirm}),G.jsx("div",{children:y.contentRemind})]}),G.jsxs(kr,{title:"Nhập dữ liệu từ tệp excel",open:Rl,width:777,onOk:Yt,onCancel:vo,footer:[G.jsx(Ht,{onClick:vo,children:"Hủy"},"back"),G.jsx(Ht,{type:"primary",onClick:Yt,loading:ue,children:"Lưu lại"},"submit")],children:[G.jsxs("p",{className:"text-[#637381] font-normal text-sm",children:["Chọn file excel có định dạng .xlsx để thực hiện nhập dữ liệu. Tải dữ liệu mẫu"," ",G.jsx("a",{target:"_blank",href:"/mbw_audit/data_sample/product_sample.xlsx",children:"tại đây"})]}),G.jsxs(yc,{...Nl,fileList:Ml,children:[G.jsx("p",{className:"ant-upload-drag-icon",children:G.jsx(Ku,{})}),G.jsx("p",{className:"ant-upload-text",children:"Kéo, thả hoặc chọn tệp để tải lên"})]})]})]})}function a7(){return G.jsxs(G.Fragment,{children:[G.jsx(zg,{children:G.jsx("title",{children:"Sản phẩm"})}),G.jsx(Q9,{})]})}export{a7 as default};
